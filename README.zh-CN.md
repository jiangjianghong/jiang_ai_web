<div align="center">

# æ±Ÿçš„æ ‡ç­¾é¡µ

```
 /\_/\
( o.o )
 > ^ <
```

**ä¸€ä¸ªç°ä»£åŒ–çš„ä¸ªäººç½‘ç«™å¯¼èˆªåº”ç”¨ï¼Œè¶…é«˜è‡ªå®šä¹‰**

[![License](https://img.shields.io/badge/License-Apache_2.0-blue.svg?style=for-the-badge)](https://opensource.org/licenses/Apache-2.0)
[![React](https://img.shields.io/badge/React-18.3.1-61DAFB?style=for-the-badge&logo=react&logoColor=white)](https://reactjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.7.2-3178C6?style=for-the-badge&logo=typescript&logoColor=white)](https://www.typescriptlang.org/)
[![Vite](https://img.shields.io/badge/Vite-6.2.0-646CFF?style=for-the-badge&logo=vite&logoColor=white)](https://vitejs.dev/)
[![Supabase](https://img.shields.io/badge/Supabase-Enabled-3ECF8E?style=for-the-badge&logo=supabase&logoColor=white)](https://supabase.com/)

[ğŸŒ åœ¨çº¿æ¼”ç¤º](https://jiangjiang.cc) | [ğŸ› é—®é¢˜åé¦ˆ](https://github.com/jiangjianghong/jiang_ai_web/issues) | [âœ¨ åŠŸèƒ½å»ºè®®](https://github.com/jiangjianghong/jiang_ai_web/issues)

**[ [English](README.md) | ç®€ä½“ä¸­æ–‡ ]**

![Screenshot](image.png)

</div>

---

## ğŸ“š ç›®å½•

- [æ ¸å¿ƒç‰¹æ€§](#-æ ¸å¿ƒç‰¹æ€§)
- [æŠ€æœ¯æ ˆ](#-æŠ€æœ¯æ ˆ)
- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [é¡¹ç›®æ¶æ„](#-é¡¹ç›®æ¶æ„)
- [éƒ¨ç½²](#-éƒ¨ç½²)
- [æ•°æ®åº“é…ç½®](#-æ•°æ®åº“é…ç½®)
- [å®‰å…¨ç‰¹æ€§](#-å®‰å…¨ç‰¹æ€§)
- [è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)
- [æ›´æ–°æ—¥å¿—](#-æ›´æ–°æ—¥å¿—)
- [æ•…éšœæ’é™¤](#-æ•…éšœæ’é™¤)
- [è®¸å¯è¯](#-è®¸å¯è¯)
- [è‡´è°¢](#-è‡´è°¢)
- [è”ç³»æ–¹å¼](#-è”ç³»æ–¹å¼)

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

<table>
<tr>
<td width="50%">

### ğŸ¨ ç”¨æˆ·ç•Œé¢
- âœ… **å“åº”å¼è®¾è®¡** - å®Œç¾é€‚é…æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯
- ğŸŒ„ **åŠ¨æ€å£çº¸** - æ¯æ—¥è‡ªåŠ¨æ›´æ¢é«˜è´¨é‡å£çº¸ï¼Œæ”¯æŒå¤šåˆ†è¾¨ç‡
- ğŸ­ **è§†å·®æ•ˆæœ** - é¼ æ ‡è·Ÿéšçš„è§†å·®åŠ¨ç”»æ•ˆæœ
- ğŸšï¸ **é€æ˜åº¦è°ƒèŠ‚** - å¯è‡ªå®šä¹‰å¡ç‰‡å’Œæœç´¢æ é€æ˜åº¦
- ğŸŒ— **ä¸»é¢˜åˆ‡æ¢** - æ”¯æŒæ˜æš—ä¸»é¢˜æ— ç¼åˆ‡æ¢
- â° **æ—¶é—´æ˜¾ç¤º** - å®æ—¶æ—¶é’Ÿå’Œæ—¥æœŸæ˜¾ç¤º
- ğŸ¨ **é¢œè‰²è‡ªå®šä¹‰** - è‡ªå®šä¹‰å¡ç‰‡å’Œæœç´¢æ é¢œè‰²

### ğŸ”§ åŠŸèƒ½ç‰¹æ€§
- ğŸ“ **ç½‘ç«™å¡ç‰‡ç®¡ç†** - æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ç½‘ç«™å¡ç‰‡
- ğŸ” **æ™ºèƒ½æœç´¢** - å®æ—¶æœç´¢ç½‘ç«™åç§°ã€URLå’Œæ ‡ç­¾
- ğŸ¯ **æ‹–æ‹½æ’åº** - æ”¯æŒæ‹–æ‹½é‡æ–°æ’åˆ—å¡ç‰‡é¡ºåº
- ğŸ“Š **è®¿é—®ç»Ÿè®¡** - è‡ªåŠ¨è®°å½•è®¿é—®æ¬¡æ•°å’Œæœ€åè®¿é—®æ—¶é—´
- ğŸ·ï¸ **æ ‡ç­¾ç³»ç»Ÿ** - ä¸ºç½‘ç«™æ·»åŠ æ ‡ç­¾ä¾¿äºåˆ†ç±»ç®¡ç†
- ğŸ“ **å¤‡æ³¨åŠŸèƒ½** - ä¸ºæ¯ä¸ªç½‘ç«™æ·»åŠ ä¸ªäººå¤‡æ³¨
- âœ… **TODOç®¡ç†** - å†…ç½®å¾…åŠäº‹é¡¹ç®¡ç†åŠŸèƒ½
- ğŸ“– **è¯—è¯å±•ç¤º** - éšæœºå±•ç¤ºä¸­å›½å¤è¯—è¯

</td>
<td width="50%">

### â˜ï¸ äº‘ç«¯æœåŠ¡
- ğŸ” **ç”¨æˆ·è®¤è¯** - åŸºäº Supabase çš„å®‰å…¨è®¤è¯ç³»ç»Ÿ
- ğŸ”„ **æ™ºèƒ½æ•°æ®åŒæ­¥** - è‡ªåŠ¨åŒæ­¥ç½‘ç«™æ•°æ®å’Œè®¾ç½®åˆ°äº‘ç«¯
- ğŸ›¡ï¸ **æ•°æ®éªŒè¯** - åŒæ­¥å‰éªŒè¯æ•°æ®æœ‰æ•ˆæ€§ï¼Œé˜²æ­¢ç©ºæ•°æ®è¦†ç›–
- ğŸ“± **å¤šè®¾å¤‡åŒæ­¥** - åœ¨ä¸åŒè®¾å¤‡é—´æ— ç¼åŒæ­¥æ•°æ®
- ğŸ”Œ **ç¦»çº¿æ”¯æŒ** - ç¦»çº¿çŠ¶æ€ä¸‹ä»å¯æ­£å¸¸ä½¿ç”¨
- ğŸ“§ **é‚®ç®±éªŒè¯** - æ”¯æŒé‚®ç®±éªŒè¯å’Œå¯†ç é‡ç½®
- ğŸ‘¤ **ç”¨æˆ·èµ„æ–™** - è‡ªå®šä¹‰ç”¨æˆ·æ˜¾ç¤ºåç§°å’Œå¤´åƒ

### ğŸš€ æ€§èƒ½ä¼˜åŒ–
- ğŸ’¾ **æ™ºèƒ½ç¼“å­˜** - å¤šå±‚ç¼“å­˜ç­–ç•¥ (å†…å­˜ + IndexedDB)
- ğŸ–¼ï¸ **å›¾æ ‡ç¼“å­˜** - è‡ªåŠ¨ç¼“å­˜ç½‘ç«™å›¾æ ‡ï¼Œæå‡åŠ è½½é€Ÿåº¦
- âš¡ **ä»£ç åˆ†å‰²** - æŒ‰éœ€åŠ è½½ï¼Œå‡å°‘åˆå§‹åŒ…å¤§å°
- ğŸ¯ **èµ„æºé¢„åŠ è½½** - æ™ºèƒ½é¢„åŠ è½½å¸¸ç”¨èµ„æº
- ğŸ“± **PWA æ”¯æŒ** - æ”¯æŒç¦»çº¿è®¿é—®å’Œå®‰è£…åˆ°æ¡Œé¢
- ğŸ§¹ **å†…å­˜ç®¡ç†** - è‡ªåŠ¨æ¸…ç†å’Œå†…å­˜ä¼˜åŒ–

</td>
</tr>
</table>

### ğŸ”Œ Notion é›†æˆ

- ğŸ“Š **å·¥ä½œç©ºé—´** - é›†æˆ Notion æ•°æ®åº“
- ğŸ“‘ **å¤šè§†å›¾æ”¯æŒ** - å¡ç‰‡è§†å›¾å’Œåˆ—è¡¨è§†å›¾
- ğŸ” **æœç´¢è¿‡æ»¤** - æŒ‰åˆ†ç±»ã€æ ‡ç­¾æœç´¢
- âŒ¨ï¸ **é”®ç›˜å¯¼èˆª** - å®Œæ•´çš„é”®ç›˜å¿«æ·é”®æ”¯æŒ
- ğŸ¨ **å¯Œæ–‡æœ¬æ¸²æŸ“** - æ”¯æŒ Notion å¯Œæ–‡æœ¬æ ¼å¼

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

<table>
<tr>
<td width="33%">

### å‰ç«¯æ¡†æ¶
![React](https://img.shields.io/badge/React-18.3.1-61DAFB?style=flat-square&logo=react&logoColor=white)
![TypeScript](https://img.shields.io/badge/TypeScript-5.7.2-3178C6?style=flat-square&logo=typescript&logoColor=white)
![Vite](https://img.shields.io/badge/Vite-6.2.0-646CFF?style=flat-square&logo=vite&logoColor=white)
![TailwindCSS](https://img.shields.io/badge/Tailwind-3.4.17-38B2AC?style=flat-square&logo=tailwind-css&logoColor=white)

</td>
<td width="33%">

### çŠ¶æ€ä¸æ•°æ®
![React Context](https://img.shields.io/badge/React_Context-API-61DAFB?style=flat-square&logo=react)
![IndexedDB](https://img.shields.io/badge/IndexedDB-Storage-orange?style=flat-square)
![LocalStorage](https://img.shields.io/badge/LocalStorage-API-yellow?style=flat-square)
![Zod](https://img.shields.io/badge/Zod-Validation-3E67B1?style=flat-square)

</td>
<td width="33%">

### åç«¯æœåŠ¡
![Supabase](https://img.shields.io/badge/Supabase-Auth_&_DB-3ECF8E?style=flat-square&logo=supabase&logoColor=white)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-Database-336791?style=flat-square&logo=postgresql&logoColor=white)
![Edge Functions](https://img.shields.io/badge/Edge_Functions-Serverless-black?style=flat-square)

</td>
</tr>
<tr>
<td width="33%">

### åŠ¨ç”»ä¸äº¤äº’
![Framer Motion](https://img.shields.io/badge/Framer_Motion-12.9.2-BB4E9D?style=flat-square&logo=framer)
![React DnD](https://img.shields.io/badge/React_DnD-16.0.1-orange?style=flat-square)
![Particles](https://img.shields.io/badge/TSParticles-3.0.0-blueviolet?style=flat-square)

</td>
<td width="33%">

### æ•°æ®å¯è§†åŒ–
![Recharts](https://img.shields.io/badge/Recharts-2.15.1-8884d8?style=flat-square)
![HTML2Canvas](https://img.shields.io/badge/HTML2Canvas-1.4.1-green?style=flat-square)

</td>
<td width="33%">

### éƒ¨ç½²ä¸å·¥å…·
![GitHub Pages](https://img.shields.io/badge/GitHub_Pages-Hosting-222?style=flat-square&logo=github)
![GitHub Actions](https://img.shields.io/badge/GitHub_Actions-CI/CD-2088FF?style=flat-square&logo=github-actions&logoColor=white)
![Prettier](https://img.shields.io/badge/Prettier-Code_Style-F7B93E?style=flat-square&logo=prettier&logoColor=white)

</td>
</tr>
</table>

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

```bash
Node.js >= 18.0.0
pnpm >= 8.0.0 (æ¨è) æˆ– npm >= 9.0.0
```

### å®‰è£…æ­¥éª¤

1. **å…‹éš†ä»“åº“**

```bash
git clone https://github.com/jiangjianghong/jiang_ai_web.git
cd jiang_ai_web
```

2. **å®‰è£…ä¾èµ–**

```bash
# ä½¿ç”¨ pnpm (æ¨è)
pnpm install

# æˆ–ä½¿ç”¨ npm
npm install
```

3. **é…ç½®ç¯å¢ƒå˜é‡**

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```env
# Supabase é…ç½®
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key

# åº”ç”¨é…ç½®
VITE_APP_NAME=æ±Ÿçš„æ ‡ç­¾é¡µ
VITE_APP_VERSION=1.0.0
```

4. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**

```bash
pnpm run dev
```

è®¿é—® http://localhost:3000 æŸ¥çœ‹åº”ç”¨ ğŸ‰

5. **æ„å»ºç”Ÿäº§ç‰ˆæœ¬**

```bash
pnpm run build
pnpm run preview
```

---

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

```
jiang_ai_web/
â”œâ”€â”€ ğŸ“ public/                    # é™æ€èµ„æº
â”‚   â”œâ”€â”€ icon/                     # åº”ç”¨å›¾æ ‡
â”‚   â”œâ”€â”€ manifest.json             # PWA é…ç½®
â”‚   â””â”€â”€ sw.js                     # Service Worker
â”‚
â”œâ”€â”€ ğŸ“ src/
â”‚   â”œâ”€â”€ ğŸ“ components/            # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ AnimatedCat.tsx       # åŠ¨ç”»çŒ«å’ªç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ AuthForm.tsx          # è®¤è¯è¡¨å•
â”‚   â”‚   â”œâ”€â”€ CardEditModal.tsx     # å¡ç‰‡ç¼–è¾‘æ¨¡æ€æ¡†
â”‚   â”‚   â”œâ”€â”€ SearchBar.tsx         # æœç´¢æ ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ TodoModal.tsx         # TODOç®¡ç†æ¨¡æ€æ¡†
â”‚   â”‚   â”œâ”€â”€ TimeDisplay.tsx       # æ—¶é—´æ˜¾ç¤ºç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ PoemDisplay.tsx       # è¯—è¯æ˜¾ç¤ºç»„ä»¶
â”‚   â”‚   â””â”€â”€ Workspace/            # å·¥ä½œç©ºé—´ç›¸å…³ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ WorkspaceModal.tsx
â”‚   â”‚       â”œâ”€â”€ WorkspaceCard.tsx
â”‚   â”‚       â””â”€â”€ NotionGuide.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ contexts/              # React ä¸Šä¸‹æ–‡
â”‚   â”‚   â”œâ”€â”€ SupabaseAuthContext.tsx     # è®¤è¯ä¸Šä¸‹æ–‡
â”‚   â”‚   â”œâ”€â”€ SyncContext.tsx             # åŒæ­¥çŠ¶æ€ä¸Šä¸‹æ–‡
â”‚   â”‚   â”œâ”€â”€ TransparencyContext.tsx     # é€æ˜åº¦è®¾ç½®ä¸Šä¸‹æ–‡
â”‚   â”‚   â”œâ”€â”€ UserProfileContext.tsx      # ç”¨æˆ·èµ„æ–™ä¸Šä¸‹æ–‡
â”‚   â”‚   â””â”€â”€ WorkspaceContext.tsx        # å·¥ä½œç©ºé—´ä¸Šä¸‹æ–‡
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ hooks/                 # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ useAutoSync.ts        # è‡ªåŠ¨åŒæ­¥
â”‚   â”‚   â”œâ”€â”€ useCloudData.ts       # äº‘ç«¯æ•°æ®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ useDataManager.ts     # æ•°æ®å¯¼å…¥å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ useDragAndDrop.ts     # æ‹–æ‹½åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ useFavicon.ts         # å›¾æ ‡å¤„ç†
â”‚   â”‚   â”œâ”€â”€ useTheme.ts           # ä¸»é¢˜ç®¡ç†
â”‚   â”‚   â””â”€â”€ useWebsiteData.ts     # ç½‘ç«™æ•°æ®ç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ lib/                   # å·¥å…·åº“å’ŒæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ api/                  # API å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ ApiClient.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ NotionApiClient.ts
â”‚   â”‚   â”‚   â””â”€â”€ WorkspaceManager.ts
â”‚   â”‚   â”œâ”€â”€ proxy/                # ä»£ç†æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ CorsProxyService.ts
â”‚   â”‚   â”‚   â””â”€â”€ smartProxy.ts
â”‚   â”‚   â”œâ”€â”€ faviconCache.ts       # å›¾æ ‡ç¼“å­˜
â”‚   â”‚   â”œâ”€â”€ indexedDBCache.ts     # IndexedDB ç¼“å­˜
â”‚   â”‚   â”œâ”€â”€ storageManager.ts     # å­˜å‚¨ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ supabase.ts           # Supabase é…ç½®
â”‚   â”‚   â””â”€â”€ supabaseSync.ts       # Supabase åŒæ­¥æœåŠ¡
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ pages/                 # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Home.tsx              # ä¸»é¡µ
â”‚   â”‚   â”œâ”€â”€ Settings.tsx          # è®¾ç½®é¡µé¢
â”‚   â”‚   â””â”€â”€ ResetPassword.tsx     # å¯†ç é‡ç½®é¡µé¢
â”‚   â”‚
â”‚   â”œâ”€â”€ MainApp.tsx               # åº”ç”¨ä¸»ç»„ä»¶
â”‚   â”œâ”€â”€ main.tsx                  # åº”ç”¨å…¥å£
â”‚   â””â”€â”€ index.css                 # å…¨å±€æ ·å¼
â”‚
â”œâ”€â”€ ğŸ“ supabase/                  # Supabase é…ç½®
â”‚   â”œâ”€â”€ functions/                # Edge Functions
â”‚   â”‚   â”œâ”€â”€ cors-proxy/           # CORS ä»£ç†æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ favicon-service/      # å›¾æ ‡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ notion-proxy/         # Notion ä»£ç†
â”‚   â”‚   â””â”€â”€ wallpaper-service/    # å£çº¸æœåŠ¡
â”‚   â””â”€â”€ config.toml               # Supabase é…ç½®
â”‚
â”œâ”€â”€ package.json                  # é¡¹ç›®ä¾èµ–
â”œâ”€â”€ vite.config.ts                # Vite é…ç½®
â”œâ”€â”€ tailwind.config.js            # Tailwind é…ç½®
â””â”€â”€ tsconfig.json                 # TypeScript é…ç½®
```

---

## ğŸ“¦ éƒ¨ç½²

### GitHub Pages è‡ªåŠ¨éƒ¨ç½²

```bash
pnpm run deploy
```

é¡¹ç›®å·²é…ç½® GitHub Actionsï¼Œæ¨é€åˆ° main åˆ†æ”¯å³å¯è‡ªåŠ¨éƒ¨ç½²ã€‚

### Vercel éƒ¨ç½²

1. è¿æ¥ GitHub ä»“åº“åˆ° Vercel
2. é…ç½®ç¯å¢ƒå˜é‡
3. è‡ªåŠ¨éƒ¨ç½² âœ¨

---

## ğŸ—„ï¸ Supabase é…ç½®

### æ•°æ®åº“è®¾ç½®

å¦‚æœä½ éœ€è¦è®¾ç½®è‡ªå·±çš„ Supabase å®ä¾‹ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

<details>
<summary>1ï¸âƒ£ å®Œæ•´æ•°æ®åº“æ¶æ„ï¼ˆé¦–æ¬¡éƒ¨ç½²ï¼‰</summary>

åœ¨ Supabase SQL Editor ä¸­æ‰§è¡Œä»¥ä¸‹è„šæœ¬ï¼š

```sql
-- ====================================
-- 1. åˆ›å»ºæ•°æ®è¡¨
-- ====================================

-- ç”¨æˆ·èµ„æ–™è¡¨
CREATE TABLE IF NOT EXISTS user_profiles (
  id UUID REFERENCES auth.users(id) PRIMARY KEY,
  email TEXT,
  display_name TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ç”¨æˆ·è®¾ç½®è¡¨
CREATE TABLE IF NOT EXISTS user_settings (
  id UUID REFERENCES auth.users(id) PRIMARY KEY,
  -- åŸºç¡€è®¾ç½®
  card_opacity NUMERIC DEFAULT 0.8,
  search_bar_opacity NUMERIC DEFAULT 0.9,
  parallax_enabled BOOLEAN DEFAULT true,
  wallpaper_resolution TEXT DEFAULT 'high',
  theme TEXT DEFAULT 'dark',
  -- é¢œè‰²è®¾ç½®
  card_color TEXT DEFAULT '255, 255, 255',
  search_bar_color TEXT DEFAULT '255, 255, 255',
  -- åŒæ­¥è®¾ç½®
  auto_sync_enabled BOOLEAN DEFAULT true,
  auto_sync_interval INTEGER DEFAULT 30,
  -- æœç´¢å’Œæ’åº
  search_in_new_tab BOOLEAN DEFAULT true,
  auto_sort_enabled BOOLEAN DEFAULT false,
  -- æ—¶é—´ç»„ä»¶è®¾ç½®
  time_component_enabled BOOLEAN DEFAULT true,
  show_full_date BOOLEAN DEFAULT true,
  show_seconds BOOLEAN DEFAULT true,
  show_weekday BOOLEAN DEFAULT true,
  show_year BOOLEAN DEFAULT true,
  show_month BOOLEAN DEFAULT true,
  show_day BOOLEAN DEFAULT true,
  -- æ ·å¼è®¾ç½®
  search_bar_border_radius INTEGER DEFAULT 12,
  -- æ—¶é—´æˆ³
  last_sync TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ç”¨æˆ·ç½‘ç«™æ•°æ®è¡¨
CREATE TABLE IF NOT EXISTS user_websites (
  id UUID REFERENCES auth.users(id) PRIMARY KEY,
  websites JSONB DEFAULT '[]'::jsonb,
  last_sync TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ====================================
-- 2. å¯ç”¨è¡Œçº§å®‰å…¨ç­–ç•¥ï¼ˆRLSï¼‰
-- ====================================

ALTER TABLE user_profiles ENABLE ROW LEVEL SECURITY;
ALTER TABLE user_settings ENABLE ROW LEVEL SECURITY;
ALTER TABLE user_websites ENABLE ROW LEVEL SECURITY;

-- ====================================
-- 3. åˆ›å»ºå®‰å…¨ç­–ç•¥
-- ====================================

-- user_profiles ç­–ç•¥
CREATE POLICY "Users can read own profile" ON user_profiles
  FOR SELECT USING (auth.uid() = id);
CREATE POLICY "Users can update own profile" ON user_profiles
  FOR UPDATE USING (auth.uid() = id);
CREATE POLICY "Users can insert own profile" ON user_profiles
  FOR INSERT WITH CHECK (auth.uid() = id);

-- user_settings ç­–ç•¥
CREATE POLICY "Users can read own settings" ON user_settings
  FOR SELECT USING (auth.uid() = id);
CREATE POLICY "Users can update own settings" ON user_settings
  FOR UPDATE USING (auth.uid() = id);
CREATE POLICY "Users can insert own settings" ON user_settings
  FOR INSERT WITH CHECK (auth.uid() = id);

-- user_websites ç­–ç•¥
CREATE POLICY "Users can read own websites" ON user_websites
  FOR SELECT USING (auth.uid() = id);
CREATE POLICY "Users can update own websites" ON user_websites
  FOR UPDATE USING (auth.uid() = id);
CREATE POLICY "Users can insert own websites" ON user_websites
  FOR INSERT WITH CHECK (auth.uid() = id);

-- ====================================
-- 4. åˆ›å»ºè‡ªåŠ¨æ›´æ–°æ—¶é—´æˆ³çš„å‡½æ•°å’Œè§¦å‘å™¨
-- ====================================

CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$ language 'plpgsql';

CREATE TRIGGER update_user_profiles_updated_at
  BEFORE UPDATE ON user_profiles
  FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();

CREATE TRIGGER update_user_settings_updated_at
  BEFORE UPDATE ON user_settings
  FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();

CREATE TRIGGER update_user_websites_updated_at
  BEFORE UPDATE ON user_websites
  FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();

-- ====================================
-- 5. åˆ›å»ºç´¢å¼•ä»¥æé«˜æ€§èƒ½
-- ====================================

CREATE INDEX IF NOT EXISTS idx_user_settings_id ON user_settings(id);
CREATE INDEX IF NOT EXISTS idx_user_websites_id ON user_websites(id);
CREATE INDEX IF NOT EXISTS idx_user_profiles_id ON user_profiles(id);
```

</details>

<details>
<summary>2ï¸âƒ£ å¢é‡è¿ç§»ï¼ˆå·²æœ‰æ•°æ®åº“ï¼‰</summary>

å¦‚æœä½ å·²ç»æœ‰æ•°æ®åº“ï¼Œåªéœ€è¦æ·»åŠ æ–°å­—æ®µï¼š

```sql
-- æ·»åŠ é¢œè‰²è®¾ç½®å­—æ®µ
ALTER TABLE user_settings
ADD COLUMN IF NOT EXISTS card_color TEXT DEFAULT '255, 255, 255',
ADD COLUMN IF NOT EXISTS search_bar_color TEXT DEFAULT '255, 255, 255';

-- æ·»åŠ åŒæ­¥è®¾ç½®å­—æ®µ
ALTER TABLE user_settings
ADD COLUMN IF NOT EXISTS auto_sync_enabled BOOLEAN DEFAULT true,
ADD COLUMN IF NOT EXISTS auto_sync_interval INTEGER DEFAULT 30;

-- æ·»åŠ æœç´¢å’Œæ’åºè®¾ç½®å­—æ®µ
ALTER TABLE user_settings
ADD COLUMN IF NOT EXISTS search_in_new_tab BOOLEAN DEFAULT true,
ADD COLUMN IF NOT EXISTS auto_sort_enabled BOOLEAN DEFAULT false;

-- æ·»åŠ æ—¶é—´ç»„ä»¶è®¾ç½®å­—æ®µ
ALTER TABLE user_settings
ADD COLUMN IF NOT EXISTS time_component_enabled BOOLEAN DEFAULT true,
ADD COLUMN IF NOT EXISTS show_full_date BOOLEAN DEFAULT true,
ADD COLUMN IF NOT EXISTS show_seconds BOOLEAN DEFAULT true,
ADD COLUMN IF NOT EXISTS show_weekday BOOLEAN DEFAULT true,
ADD COLUMN IF NOT EXISTS show_year BOOLEAN DEFAULT true,
ADD COLUMN IF NOT EXISTS show_month BOOLEAN DEFAULT true,
ADD COLUMN IF NOT EXISTS show_day BOOLEAN DEFAULT true;

-- æ·»åŠ æœç´¢æ¡†æ ·å¼è®¾ç½®å­—æ®µ
ALTER TABLE user_settings
ADD COLUMN IF NOT EXISTS search_bar_border_radius INTEGER DEFAULT 12;
```

</details>

<details>
<summary>3ï¸âƒ£ Storage Buckets é…ç½®</summary>

ä¸º Favicon å’Œ Wallpaper æœåŠ¡åˆ›å»º Storage bucketsï¼š

```sql
-- åˆ›å»º favicons bucket
INSERT INTO storage.buckets (id, name, public)
VALUES ('favicons', 'favicons', true)
ON CONFLICT (id) DO NOTHING;

-- åˆ›å»º wallpapers bucket
INSERT INTO storage.buckets (id, name, public)
VALUES ('wallpapers', 'wallpapers', true)
ON CONFLICT (id) DO NOTHING;

-- favicons bucket ç­–ç•¥
CREATE POLICY "Public favicon access" ON storage.objects
FOR SELECT USING (bucket_id = 'favicons');

CREATE POLICY "Service role favicon upload" ON storage.objects
FOR INSERT WITH CHECK (bucket_id = 'favicons');

CREATE POLICY "Service role favicon update" ON storage.objects
FOR UPDATE USING (bucket_id = 'favicons');

-- wallpapers bucket ç­–ç•¥
CREATE POLICY "Public wallpaper access" ON storage.objects
FOR SELECT USING (bucket_id = 'wallpapers');

CREATE POLICY "Service role wallpaper upload" ON storage.objects
FOR INSERT WITH CHECK (bucket_id = 'wallpapers');

CREATE POLICY "Service role wallpaper update" ON storage.objects
FOR UPDATE USING (bucket_id = 'wallpapers');
```

</details>

### Edge Functions éƒ¨ç½²

<details>
<summary>ğŸ“¦ Favicon Service</summary>

ç»Ÿä¸€çš„ favicon è·å–å’Œç¼“å­˜æœåŠ¡ã€‚

**éƒ¨ç½²å‘½ä»¤ï¼š**
```bash
supabase functions deploy favicon-service
```

**API ä½¿ç”¨ï¼š**
```bash
GET https://your-project.supabase.co/functions/v1/favicon-service?domain=github.com&size=64
```

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- ğŸš€ ç»Ÿä¸€ API è·å–ç½‘ç«™ favicon
- ğŸ’¾ è‡ªåŠ¨ç¼“å­˜åˆ° Supabase Storage
- ğŸ”„ å¤šæºæ”¯æŒï¼Œè‡ªåŠ¨æ•…éšœè½¬ç§»
- âš¡ è¾¹ç¼˜è®¡ç®—ï¼Œå…¨çƒä½å»¶è¿Ÿ

è¯¦è§ï¼š`supabase/functions/favicon-service/README.md`

</details>

<details>
<summary>ğŸ–¼ï¸ Wallpaper Service</summary>

æ¯æ—¥å£çº¸è·å–å’Œç¼“å­˜æœåŠ¡ï¼ˆBing æ¯æ—¥å£çº¸ï¼‰ã€‚

**éƒ¨ç½²å‘½ä»¤ï¼š**
```bash
supabase functions deploy wallpaper-service
```

**API ä½¿ç”¨ï¼š**
```bash
GET https://your-project.supabase.co/functions/v1/wallpaper-service?resolution=uhd
```

**æ”¯æŒçš„åˆ†è¾¨ç‡ï¼š**
- `uhd` - 3840x2160 (4K)
- `1920x1080` - å…¨é«˜æ¸…
- `1366x768` - é«˜æ¸…
- `mobile` - 1080x1920 (æ‰‹æœº)

è¯¦è§ï¼š`supabase/functions/wallpaper-service/README.md`

</details>

<details>
<summary>ğŸ”— Notion Proxy</summary>

Notion API ä»£ç†æœåŠ¡ï¼Œç”¨äºå·¥ä½œç©ºé—´é›†æˆã€‚

**éƒ¨ç½²å‘½ä»¤ï¼š**
```bash
supabase functions deploy notion-proxy
```

**é…ç½®è¦æ±‚ï¼š**
éœ€è¦åœ¨ Supabase Dashboard ä¸­è®¾ç½®ç¯å¢ƒå˜é‡ï¼š
- `NOTION_API_KEY` - Notion Integration Token

</details>

---

## ğŸ” å®‰å…¨ç‰¹æ€§

- ğŸ›¡ï¸ **è¡Œçº§å®‰å…¨** - Supabase RLS ç­–ç•¥
- ğŸ”’ **æ•°æ®åŠ å¯†** - æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
- âœ… **è¾“å…¥éªŒè¯** - ä¸¥æ ¼çš„æ•°æ®éªŒè¯ (Zod)
- ğŸš« **XSS é˜²æŠ¤** - å†…å®¹å®‰å…¨ç­–ç•¥
- ğŸª **Cookie ç®¡ç†** - GDPR åˆè§„

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'feat: Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

### ä»£ç è§„èŒƒ

- âœ… TypeScript ä¸¥æ ¼æ¨¡å¼
- âœ… ESLint ä»£ç æ£€æŸ¥
- âœ… Prettier ä»£ç æ ¼å¼åŒ–
- âœ… Conventional Commits æäº¤è§„èŒƒ

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.2.0 (2024-12-19)

**ğŸ”§ ä¿®å¤**
- ä¿®å¤æ•°æ®åŒæ­¥å¯èƒ½å¯¼è‡´ç©ºæ•°æ®è¦†ç›–äº‘ç«¯çœŸå®æ•°æ®çš„é—®é¢˜
- å¢åŠ æ•°æ®æœ‰æ•ˆæ€§éªŒè¯ï¼Œç¡®ä¿åªåŒæ­¥æœ‰æ•ˆçš„ç½‘ç«™æ•°æ®

**âœ¨ æ”¹è¿›**
- ä¼˜åŒ–åŒæ­¥çŠ¶æ€æ˜¾ç¤ºï¼Œæä¾›æ›´æ¸…æ™°çš„åé¦ˆä¿¡æ¯
- å¢å¼ºé”™è¯¯å¤„ç†æœºåˆ¶ï¼Œæé«˜ç³»ç»Ÿç¨³å®šæ€§
- é‡æ„éƒ¨åˆ†æ ¸å¿ƒä»£ç ï¼Œæå‡æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§

**ğŸ›¡ï¸ å®‰å…¨æ€§**
- å®æ–½å¤šå±‚æ•°æ®ä¿æŠ¤æœºåˆ¶ï¼Œé˜²æ­¢æ„å¤–æ•°æ®ä¸¢å¤±
- åŠ å¼ºæ•°æ®éªŒè¯è§„åˆ™ï¼Œç¡®ä¿æ•°æ®å®Œæ•´æ€§

---

## ğŸ› ï¸ æ•…éšœæ’é™¤

<details>
<summary>å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</summary>

### åŸŸåæ— æ³•è®¿é—®
- æ£€æŸ¥ DNS é…ç½®æ˜¯å¦æ­£ç¡®
- ç­‰å¾… DNS ä¼ æ’­ï¼ˆæœ€å¤š 24 å°æ—¶ï¼‰
- æ¸…é™¤æµè§ˆå™¨ç¼“å­˜

### åŠŸèƒ½å¼‚å¸¸
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
- ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸
- éªŒè¯ Supabase é…ç½®

### åŒæ­¥é—®é¢˜
- æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç™»å½•
- ç¡®è®¤ç½‘ç»œè¿æ¥ç¨³å®š
- æŸ¥çœ‹åŒæ­¥çŠ¶æ€æŒ‡ç¤ºå™¨

### å›¾æ ‡åŠ è½½å¤±è´¥
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- å°è¯•åˆ·æ–°é¡µé¢
- æ¸…é™¤æµè§ˆå™¨ç¼“å­˜

</details>

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ Apache License 2.0 è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®å’ŒæœåŠ¡ï¼š

- [React](https://reactjs.org/) - ç”¨æˆ·ç•Œé¢åº“
- [Vite](https://vitejs.dev/) - æ„å»ºå·¥å…·
- [Tailwind CSS](https://tailwindcss.com/) - CSS æ¡†æ¶
- [Supabase](https://supabase.com/) - åç«¯æœåŠ¡
- [Framer Motion](https://www.framer.com/motion/) - åŠ¨ç”»åº“

---

## ğŸ“ è”ç³»æ–¹å¼

- **é¡¹ç›®åœ°å€**: [GitHub](https://github.com/jiangjianghong/jiang_ai_web)
- **é—®é¢˜åé¦ˆ**: [Issues](https://github.com/jiangjianghong/jiang_ai_web/issues)
- **åœ¨çº¿è®¿é—®**: [jiangjiang.cc](https://jiangjiang.cc)

---

<div align="center">

**æ±Ÿçš„æ ‡ç­¾é¡µ** - è®©ç½‘ç«™ç®¡ç†æ›´ç®€å•ã€æ›´æ™ºèƒ½ ğŸš€

Made with â¤ï¸ by [Jiang](https://github.com/jiangjianghong)

â­ å¦‚æœå–œæ¬¢è¯·ç»™ä¸ªæ˜Ÿæ ‡ï¼

</div>
