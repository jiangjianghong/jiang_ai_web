(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function Hg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Qp={exports:{}},au={},Yp={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W_;function tR(){if(W_)return He;W_=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function w(F){return F===null||typeof F!="object"?null:(F=y&&F[y]||F["@@iterator"],typeof F=="function"?F:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,R={};function A(F,$,Z){this.props=F,this.context=$,this.refs=R,this.updater=Z||T}A.prototype.isReactComponent={},A.prototype.setState=function(F,$){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,$,"setState")},A.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function O(){}O.prototype=A.prototype;function B(F,$,Z){this.props=F,this.context=$,this.refs=R,this.updater=Z||T}var z=B.prototype=new O;z.constructor=B,C(z,A.prototype),z.isPureReactComponent=!0;var Q=Array.isArray,K=Object.prototype.hasOwnProperty,J={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function I(F,$,Z){var le,we={},fe=null,Ae=null;if($!=null)for(le in $.ref!==void 0&&(Ae=$.ref),$.key!==void 0&&(fe=""+$.key),$)K.call($,le)&&!D.hasOwnProperty(le)&&(we[le]=$[le]);var ve=arguments.length-2;if(ve===1)we.children=Z;else if(1<ve){for(var Le=Array(ve),et=0;et<ve;et++)Le[et]=arguments[et+2];we.children=Le}if(F&&F.defaultProps)for(le in ve=F.defaultProps,ve)we[le]===void 0&&(we[le]=ve[le]);return{$$typeof:n,type:F,key:fe,ref:Ae,props:we,_owner:J.current}}function k(F,$){return{$$typeof:n,type:F.type,key:$,ref:F.ref,props:F.props,_owner:F._owner}}function M(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function L(F){var $={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(Z){return $[Z]})}var H=/\/+/g;function V(F,$){return typeof F=="object"&&F!==null&&F.key!=null?L(""+F.key):$.toString(36)}function rt(F,$,Z,le,we){var fe=typeof F;(fe==="undefined"||fe==="boolean")&&(F=null);var Ae=!1;if(F===null)Ae=!0;else switch(fe){case"string":case"number":Ae=!0;break;case"object":switch(F.$$typeof){case n:case e:Ae=!0}}if(Ae)return Ae=F,we=we(Ae),F=le===""?"."+V(Ae,0):le,Q(we)?(Z="",F!=null&&(Z=F.replace(H,"$&/")+"/"),rt(we,$,Z,"",function(et){return et})):we!=null&&(M(we)&&(we=k(we,Z+(!we.key||Ae&&Ae.key===we.key?"":(""+we.key).replace(H,"$&/")+"/")+F)),$.push(we)),1;if(Ae=0,le=le===""?".":le+":",Q(F))for(var ve=0;ve<F.length;ve++){fe=F[ve];var Le=le+V(fe,ve);Ae+=rt(fe,$,Z,Le,we)}else if(Le=w(F),typeof Le=="function")for(F=Le.call(F),ve=0;!(fe=F.next()).done;)fe=fe.value,Le=le+V(fe,ve++),Ae+=rt(fe,$,Z,Le,we);else if(fe==="object")throw $=String(F),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return Ae}function st(F,$,Z){if(F==null)return F;var le=[],we=0;return rt(F,le,"","",function(fe){return $.call(Z,fe,we++)}),le}function be(F){if(F._status===-1){var $=F._result;$=$(),$.then(function(Z){(F._status===0||F._status===-1)&&(F._status=1,F._result=Z)},function(Z){(F._status===0||F._status===-1)&&(F._status=2,F._result=Z)}),F._status===-1&&(F._status=0,F._result=$)}if(F._status===1)return F._result.default;throw F._result}var Ie={current:null},se={transition:null},he={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:se,ReactCurrentOwner:J};function ce(){throw Error("act(...) is not supported in production builds of React.")}return He.Children={map:st,forEach:function(F,$,Z){st(F,function(){$.apply(this,arguments)},Z)},count:function(F){var $=0;return st(F,function(){$++}),$},toArray:function(F){return st(F,function($){return $})||[]},only:function(F){if(!M(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},He.Component=A,He.Fragment=t,He.Profiler=s,He.PureComponent=B,He.StrictMode=r,He.Suspense=h,He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=he,He.act=ce,He.cloneElement=function(F,$,Z){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var le=C({},F.props),we=F.key,fe=F.ref,Ae=F._owner;if($!=null){if($.ref!==void 0&&(fe=$.ref,Ae=J.current),$.key!==void 0&&(we=""+$.key),F.type&&F.type.defaultProps)var ve=F.type.defaultProps;for(Le in $)K.call($,Le)&&!D.hasOwnProperty(Le)&&(le[Le]=$[Le]===void 0&&ve!==void 0?ve[Le]:$[Le])}var Le=arguments.length-2;if(Le===1)le.children=Z;else if(1<Le){ve=Array(Le);for(var et=0;et<Le;et++)ve[et]=arguments[et+2];le.children=ve}return{$$typeof:n,type:F.type,key:we,ref:fe,props:le,_owner:Ae}},He.createContext=function(F){return F={$$typeof:l,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:o,_context:F},F.Consumer=F},He.createElement=I,He.createFactory=function(F){var $=I.bind(null,F);return $.type=F,$},He.createRef=function(){return{current:null}},He.forwardRef=function(F){return{$$typeof:c,render:F}},He.isValidElement=M,He.lazy=function(F){return{$$typeof:g,_payload:{_status:-1,_result:F},_init:be}},He.memo=function(F,$){return{$$typeof:p,type:F,compare:$===void 0?null:$}},He.startTransition=function(F){var $=se.transition;se.transition={};try{F()}finally{se.transition=$}},He.unstable_act=ce,He.useCallback=function(F,$){return Ie.current.useCallback(F,$)},He.useContext=function(F){return Ie.current.useContext(F)},He.useDebugValue=function(){},He.useDeferredValue=function(F){return Ie.current.useDeferredValue(F)},He.useEffect=function(F,$){return Ie.current.useEffect(F,$)},He.useId=function(){return Ie.current.useId()},He.useImperativeHandle=function(F,$,Z){return Ie.current.useImperativeHandle(F,$,Z)},He.useInsertionEffect=function(F,$){return Ie.current.useInsertionEffect(F,$)},He.useLayoutEffect=function(F,$){return Ie.current.useLayoutEffect(F,$)},He.useMemo=function(F,$){return Ie.current.useMemo(F,$)},He.useReducer=function(F,$,Z){return Ie.current.useReducer(F,$,Z)},He.useRef=function(F){return Ie.current.useRef(F)},He.useState=function(F){return Ie.current.useState(F)},He.useSyncExternalStore=function(F,$,Z){return Ie.current.useSyncExternalStore(F,$,Z)},He.useTransition=function(){return Ie.current.useTransition()},He.version="18.3.1",He}var q_;function Wg(){return q_||(q_=1,Yp.exports=tR()),Yp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_;function nR(){if(G_)return au;G_=1;var n=Wg(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,p){var g,y={},w=null,T=null;p!==void 0&&(w=""+p),h.key!==void 0&&(w=""+h.key),h.ref!==void 0&&(T=h.ref);for(g in h)r.call(h,g)&&!o.hasOwnProperty(g)&&(y[g]=h[g]);if(c&&c.defaultProps)for(g in h=c.defaultProps,h)y[g]===void 0&&(y[g]=h[g]);return{$$typeof:e,type:c,key:w,ref:T,props:y,_owner:s.current}}return au.Fragment=t,au.jsx=l,au.jsxs=l,au}var K_;function rR(){return K_||(K_=1,Qp.exports=nR()),Qp.exports}var S=rR(),P=Wg();const de=Hg(P);var Vd={},Xp={exports:{}},Kn={},Zp={exports:{}},Jp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q_;function sR(){return Q_||(Q_=1,function(n){function e(se,he){var ce=se.length;se.push(he);e:for(;0<ce;){var F=ce-1>>>1,$=se[F];if(0<s($,he))se[F]=he,se[ce]=$,ce=F;else break e}}function t(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var he=se[0],ce=se.pop();if(ce!==he){se[0]=ce;e:for(var F=0,$=se.length,Z=$>>>1;F<Z;){var le=2*(F+1)-1,we=se[le],fe=le+1,Ae=se[fe];if(0>s(we,ce))fe<$&&0>s(Ae,we)?(se[F]=Ae,se[fe]=ce,F=fe):(se[F]=we,se[le]=ce,F=le);else if(fe<$&&0>s(Ae,ce))se[F]=Ae,se[fe]=ce,F=fe;else break e}}return he}function s(se,he){var ce=se.sortIndex-he.sortIndex;return ce!==0?ce:se.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var h=[],p=[],g=1,y=null,w=3,T=!1,C=!1,R=!1,A=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(se){for(var he=t(p);he!==null;){if(he.callback===null)r(p);else if(he.startTime<=se)r(p),he.sortIndex=he.expirationTime,e(h,he);else break;he=t(p)}}function Q(se){if(R=!1,z(se),!C)if(t(h)!==null)C=!0,be(K);else{var he=t(p);he!==null&&Ie(Q,he.startTime-se)}}function K(se,he){C=!1,R&&(R=!1,O(I),I=-1),T=!0;var ce=w;try{for(z(he),y=t(h);y!==null&&(!(y.expirationTime>he)||se&&!L());){var F=y.callback;if(typeof F=="function"){y.callback=null,w=y.priorityLevel;var $=F(y.expirationTime<=he);he=n.unstable_now(),typeof $=="function"?y.callback=$:y===t(h)&&r(h),z(he)}else r(h);y=t(h)}if(y!==null)var Z=!0;else{var le=t(p);le!==null&&Ie(Q,le.startTime-he),Z=!1}return Z}finally{y=null,w=ce,T=!1}}var J=!1,D=null,I=-1,k=5,M=-1;function L(){return!(n.unstable_now()-M<k)}function H(){if(D!==null){var se=n.unstable_now();M=se;var he=!0;try{he=D(!0,se)}finally{he?V():(J=!1,D=null)}}else J=!1}var V;if(typeof B=="function")V=function(){B(H)};else if(typeof MessageChannel<"u"){var rt=new MessageChannel,st=rt.port2;rt.port1.onmessage=H,V=function(){st.postMessage(null)}}else V=function(){A(H,0)};function be(se){D=se,J||(J=!0,V())}function Ie(se,he){I=A(function(){se(n.unstable_now())},he)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_continueExecution=function(){C||T||(C=!0,be(K))},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(se){switch(w){case 1:case 2:case 3:var he=3;break;default:he=w}var ce=w;w=he;try{return se()}finally{w=ce}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(se,he){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var ce=w;w=se;try{return he()}finally{w=ce}},n.unstable_scheduleCallback=function(se,he,ce){var F=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?F+ce:F):ce=F,se){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=ce+$,se={id:g++,callback:he,priorityLevel:se,startTime:ce,expirationTime:$,sortIndex:-1},ce>F?(se.sortIndex=ce,e(p,se),t(h)===null&&se===t(p)&&(R?(O(I),I=-1):R=!0,Ie(Q,ce-F))):(se.sortIndex=$,e(h,se),C||T||(C=!0,be(K))),se},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(se){var he=w;return function(){var ce=w;w=he;try{return se.apply(this,arguments)}finally{w=ce}}}}(Jp)),Jp}var Y_;function iR(){return Y_||(Y_=1,Zp.exports=sR()),Zp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_;function oR(){if(X_)return Kn;X_=1;var n=Wg(),e=iR();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function w(i){return h.call(y,i)?!0:h.call(g,i)?!1:p.test(i)?y[i]=!0:(g[i]=!0,!1)}function T(i,a,u,f){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function C(i,a,u,f){if(a===null||typeof a>"u"||T(i,a,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function R(i,a,u,f,m,_,x){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=u,this.propertyName=i,this.type=a,this.sanitizeURL=_,this.removeEmptyString=x}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){A[i]=new R(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];A[a]=new R(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){A[i]=new R(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){A[i]=new R(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){A[i]=new R(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){A[i]=new R(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){A[i]=new R(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){A[i]=new R(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){A[i]=new R(i,5,!1,i.toLowerCase(),null,!1,!1)});var O=/[\-:]([a-z])/g;function B(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(O,B);A[a]=new R(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(O,B);A[a]=new R(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(O,B);A[a]=new R(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){A[i]=new R(i,1,!1,i.toLowerCase(),null,!1,!1)}),A.xlinkHref=new R("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){A[i]=new R(i,1,!1,i.toLowerCase(),null,!0,!0)});function z(i,a,u,f){var m=A.hasOwnProperty(a)?A[a]:null;(m!==null?m.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(C(a,u,m,f)&&(u=null),f||m===null?w(a)&&(u===null?i.removeAttribute(a):i.setAttribute(a,""+u)):m.mustUseProperty?i[m.propertyName]=u===null?m.type===3?!1:"":u:(a=m.attributeName,f=m.attributeNamespace,u===null?i.removeAttribute(a):(m=m.type,u=m===3||m===4&&u===!0?"":""+u,f?i.setAttributeNS(f,a,u):i.setAttribute(a,u))))}var Q=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=Symbol.for("react.element"),J=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),L=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),rt=Symbol.for("react.suspense_list"),st=Symbol.for("react.memo"),be=Symbol.for("react.lazy"),Ie=Symbol.for("react.offscreen"),se=Symbol.iterator;function he(i){return i===null||typeof i!="object"?null:(i=se&&i[se]||i["@@iterator"],typeof i=="function"?i:null)}var ce=Object.assign,F;function $(i){if(F===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);F=a&&a[1]||""}return`
`+F+i}var Z=!1;function le(i,a){if(!i||Z)return"";Z=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Y){var f=Y}Reflect.construct(i,[],a)}else{try{a.call()}catch(Y){f=Y}i.call(a.prototype)}else{try{throw Error()}catch(Y){f=Y}i()}}catch(Y){if(Y&&f&&typeof Y.stack=="string"){for(var m=Y.stack.split(`
`),_=f.stack.split(`
`),x=m.length-1,N=_.length-1;1<=x&&0<=N&&m[x]!==_[N];)N--;for(;1<=x&&0<=N;x--,N--)if(m[x]!==_[N]){if(x!==1||N!==1)do if(x--,N--,0>N||m[x]!==_[N]){var j=`
`+m[x].replace(" at new "," at ");return i.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",i.displayName)),j}while(1<=x&&0<=N);break}}}finally{Z=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?$(i):""}function we(i){switch(i.tag){case 5:return $(i.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return i=le(i.type,!1),i;case 11:return i=le(i.type.render,!1),i;case 1:return i=le(i.type,!0),i;default:return""}}function fe(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case D:return"Fragment";case J:return"Portal";case k:return"Profiler";case I:return"StrictMode";case V:return"Suspense";case rt:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case L:return(i.displayName||"Context")+".Consumer";case M:return(i._context.displayName||"Context")+".Provider";case H:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case st:return a=i.displayName||null,a!==null?a:fe(i.type)||"Memo";case be:a=i._payload,i=i._init;try{return fe(i(a))}catch{}}return null}function Ae(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(a);case 8:return a===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function ve(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Le(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function et(i){var a=Le(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),f=""+i[a];if(!i.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,_=u.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return m.call(this)},set:function(x){f=""+x,_.call(this,x)}}),Object.defineProperty(i,a,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(x){f=""+x},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Sn(i){i._valueTracker||(i._valueTracker=et(i))}function cr(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var u=a.getValue(),f="";return i&&(f=Le(i)?i.checked?"true":"false":i.value),i=f,i!==u?(a.setValue(i),!0):!1}function Dn(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function xn(i,a){var u=a.checked;return ce({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function kr(i,a){var u=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;u=ve(a.value!=null?a.value:u),i._wrapperState={initialChecked:f,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Dr(i,a){a=a.checked,a!=null&&z(i,"checked",a,!1)}function Nn(i,a){Dr(i,a);var u=ve(a.value),f=a.type;if(u!=null)f==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?Kt(i,a.type,u):a.hasOwnProperty("defaultValue")&&Kt(i,a.type,ve(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function Nr(i,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,u||a===i.value||(i.value=a),i.defaultValue=a}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function Kt(i,a,u){(a!=="number"||Dn(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var On=Array.isArray;function Vn(i,a,u,f){if(i=i.options,a){a={};for(var m=0;m<u.length;m++)a["$"+u[m]]=!0;for(u=0;u<i.length;u++)m=a.hasOwnProperty("$"+i[u].value),i[u].selected!==m&&(i[u].selected=m),m&&f&&(i[u].defaultSelected=!0)}else{for(u=""+ve(u),a=null,m=0;m<i.length;m++){if(i[m].value===u){i[m].selected=!0,f&&(i[m].defaultSelected=!0);return}a!==null||i[m].disabled||(a=i[m])}a!==null&&(a.selected=!0)}}function _t(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return ce({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function In(i,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(On(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}i._wrapperState={initialValue:ve(u)}}function Or(i,a){var u=ve(a.value),f=ve(a.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),a.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),f!=null&&(i.defaultValue=""+f)}function Rs(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function at(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ut(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?at(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Qt,Yt=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,f,m){MSApp.execUnsafeLocalFunction(function(){return i(a,u,f,m)})}:i}(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(Qt=Qt||document.createElement("div"),Qt.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Qt.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function Ut(i,a){if(a){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=a;return}}i.textContent=a}var Mn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ln=["Webkit","ms","Moz","O"];Object.keys(Mn).forEach(function(i){Ln.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),Mn[a]=Mn[i]})});function oo(i,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||Mn.hasOwnProperty(i)&&Mn[i]?(""+a).trim():a+"px"}function ao(i,a){i=i.style;for(var u in a)if(a.hasOwnProperty(u)){var f=u.indexOf("--")===0,m=oo(u,a[u],f);u==="float"&&(u="cssFloat"),f?i.setProperty(u,m):i[u]=m}}var ai=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function li(i,a){if(a){if(ai[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function lo(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vr=null;function Cn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ui=null,jn=null,Jn=null;function Ps(i){if(i=ql(i)){if(typeof ui!="function")throw Error(t(280));var a=i.stateNode;a&&(a=Yc(a),ui(i.stateNode,i.type,a))}}function De(i){jn?Jn?Jn.push(i):Jn=[i]:jn=i}function mt(){if(jn){var i=jn,a=Jn;if(Jn=jn=null,Ps(i),a)for(i=0;i<a.length;i++)Ps(a[i])}}function gt(i,a){return i(a)}function Bt(){}var Fn=!1;function wt(i,a,u){if(Fn)return i(a,u);Fn=!0;try{return gt(i,a,u)}finally{Fn=!1,(jn!==null||Jn!==null)&&(Bt(),mt())}}function Qe(i,a){var u=i.stateNode;if(u===null)return null;var f=Yc(u);if(f===null)return null;u=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var Mr=!1;if(c)try{var Et={};Object.defineProperty(Et,"passive",{get:function(){Mr=!0}}),window.addEventListener("test",Et,Et),window.removeEventListener("test",Et,Et)}catch{Mr=!1}function $t(i,a,u,f,m,_,x,N,j){var Y=Array.prototype.slice.call(arguments,3);try{a.apply(u,Y)}catch(ne){this.onError(ne)}}var ns=!1,Un=null,dr=!1,Cl=null,Sf={onError:function(i){ns=!0,Un=i}};function ra(i,a,u,f,m,_,x,N,j){ns=!1,Un=null,$t.apply(Sf,arguments)}function Ec(i,a,u,f,m,_,x,N,j){if(ra.apply(this,arguments),ns){if(ns){var Y=Un;ns=!1,Un=null}else throw Error(t(198));dr||(dr=!0,Cl=Y)}}function Lr(i){var a=i,u=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(u=a.return),i=a.return;while(i)}return a.tag===3?u:null}function uo(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function jr(i){if(Lr(i)!==i)throw Error(t(188))}function Tc(i){var a=i.alternate;if(!a){if(a=Lr(i),a===null)throw Error(t(188));return a!==i?null:i}for(var u=i,f=a;;){var m=u.return;if(m===null)break;var _=m.alternate;if(_===null){if(f=m.return,f!==null){u=f;continue}break}if(m.child===_.child){for(_=m.child;_;){if(_===u)return jr(m),i;if(_===f)return jr(m),a;_=_.sibling}throw Error(t(188))}if(u.return!==f.return)u=m,f=_;else{for(var x=!1,N=m.child;N;){if(N===u){x=!0,u=m,f=_;break}if(N===f){x=!0,f=m,u=_;break}N=N.sibling}if(!x){for(N=_.child;N;){if(N===u){x=!0,u=_,f=m;break}if(N===f){x=!0,f=_,u=m;break}N=N.sibling}if(!x)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:a}function bl(i){return i=Tc(i),i!==null?sa(i):null}function sa(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=sa(i);if(a!==null)return a;i=i.sibling}return null}var ia=e.unstable_scheduleCallback,Al=e.unstable_cancelCallback,Sc=e.unstable_shouldYield,xf=e.unstable_requestPaint,ct=e.unstable_now,xc=e.unstable_getCurrentPriorityLevel,co=e.unstable_ImmediatePriority,ci=e.unstable_UserBlockingPriority,hr=e.unstable_NormalPriority,Rl=e.unstable_LowPriority,Ic=e.unstable_IdlePriority,ho=null,er=null;function Cc(i){if(er&&typeof er.onCommitFiberRoot=="function")try{er.onCommitFiberRoot(ho,i,void 0,(i.current.flags&128)===128)}catch{}}var bn=Math.clz32?Math.clz32:Ac,Pl=Math.log,bc=Math.LN2;function Ac(i){return i>>>=0,i===0?32:31-(Pl(i)/bc|0)|0}var oa=64,aa=4194304;function di(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function fo(i,a){var u=i.pendingLanes;if(u===0)return 0;var f=0,m=i.suspendedLanes,_=i.pingedLanes,x=u&268435455;if(x!==0){var N=x&~m;N!==0?f=di(N):(_&=x,_!==0&&(f=di(_)))}else x=u&~m,x!==0?f=di(x):_!==0&&(f=di(_));if(f===0)return 0;if(a!==0&&a!==f&&(a&m)===0&&(m=f&-f,_=a&-a,m>=_||m===16&&(_&4194240)!==0))return a;if((f&4)!==0&&(f|=u&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=f;0<a;)u=31-bn(a),m=1<<u,f|=i[u],a&=~m;return f}function If(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ks(i,a){for(var u=i.suspendedLanes,f=i.pingedLanes,m=i.expirationTimes,_=i.pendingLanes;0<_;){var x=31-bn(_),N=1<<x,j=m[x];j===-1?((N&u)===0||(N&f)!==0)&&(m[x]=If(N,a)):j<=a&&(i.expiredLanes|=N),_&=~N}}function tr(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function po(){var i=oa;return oa<<=1,(oa&4194240)===0&&(oa=64),i}function hi(i){for(var a=[],u=0;31>u;u++)a.push(i);return a}function fi(i,a,u){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-bn(a),i[a]=u}function lt(i,a){var u=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<u;){var m=31-bn(u),_=1<<m;a[m]=0,f[m]=-1,i[m]=-1,u&=~_}}function pi(i,a){var u=i.entangledLanes|=a;for(i=i.entanglements;u;){var f=31-bn(u),m=1<<f;m&a|i[f]&a&&(i[f]|=a),u&=~m}}var Ke=0;function mi(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Rc,la,Pc,kc,Dc,kl=!1,rs=[],rn=null,Fr=null,Ur=null,gi=new Map,fr=new Map,ss=[],Cf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nc(i,a){switch(i){case"focusin":case"focusout":rn=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":Ur=null;break;case"pointerover":case"pointerout":gi.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":fr.delete(a.pointerId)}}function Bn(i,a,u,f,m,_){return i===null||i.nativeEvent!==_?(i={blockedOn:a,domEventName:u,eventSystemFlags:f,nativeEvent:_,targetContainers:[m]},a!==null&&(a=ql(a),a!==null&&la(a)),i):(i.eventSystemFlags|=f,a=i.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),i)}function bf(i,a,u,f,m){switch(a){case"focusin":return rn=Bn(rn,i,a,u,f,m),!0;case"dragenter":return Fr=Bn(Fr,i,a,u,f,m),!0;case"mouseover":return Ur=Bn(Ur,i,a,u,f,m),!0;case"pointerover":var _=m.pointerId;return gi.set(_,Bn(gi.get(_)||null,i,a,u,f,m)),!0;case"gotpointercapture":return _=m.pointerId,fr.set(_,Bn(fr.get(_)||null,i,a,u,f,m)),!0}return!1}function Oc(i){var a=_o(i.target);if(a!==null){var u=Lr(a);if(u!==null){if(a=u.tag,a===13){if(a=uo(u),a!==null){i.blockedOn=a,Dc(i.priority,function(){Pc(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ds(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var u=ua(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var f=new u.constructor(u.type,u);Vr=f,u.target.dispatchEvent(f),Vr=null}else return a=ql(u),a!==null&&la(a),i.blockedOn=u,!1;a.shift()}return!0}function mo(i,a,u){Ds(i)&&u.delete(a)}function Vc(){kl=!1,rn!==null&&Ds(rn)&&(rn=null),Fr!==null&&Ds(Fr)&&(Fr=null),Ur!==null&&Ds(Ur)&&(Ur=null),gi.forEach(mo),fr.forEach(mo)}function Br(i,a){i.blockedOn===a&&(i.blockedOn=null,kl||(kl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Vc)))}function $r(i){function a(m){return Br(m,i)}if(0<rs.length){Br(rs[0],i);for(var u=1;u<rs.length;u++){var f=rs[u];f.blockedOn===i&&(f.blockedOn=null)}}for(rn!==null&&Br(rn,i),Fr!==null&&Br(Fr,i),Ur!==null&&Br(Ur,i),gi.forEach(a),fr.forEach(a),u=0;u<ss.length;u++)f=ss[u],f.blockedOn===i&&(f.blockedOn=null);for(;0<ss.length&&(u=ss[0],u.blockedOn===null);)Oc(u),u.blockedOn===null&&ss.shift()}var Ns=Q.ReactCurrentBatchConfig,yi=!0;function yt(i,a,u,f){var m=Ke,_=Ns.transition;Ns.transition=null;try{Ke=1,Dl(i,a,u,f)}finally{Ke=m,Ns.transition=_}}function Af(i,a,u,f){var m=Ke,_=Ns.transition;Ns.transition=null;try{Ke=4,Dl(i,a,u,f)}finally{Ke=m,Ns.transition=_}}function Dl(i,a,u,f){if(yi){var m=ua(i,a,u,f);if(m===null)Ff(i,a,f,go,u),Nc(i,f);else if(bf(m,i,a,u,f))f.stopPropagation();else if(Nc(i,f),a&4&&-1<Cf.indexOf(i)){for(;m!==null;){var _=ql(m);if(_!==null&&Rc(_),_=ua(i,a,u,f),_===null&&Ff(i,a,f,go,u),_===m)break;m=_}m!==null&&f.stopPropagation()}else Ff(i,a,f,null,u)}}var go=null;function ua(i,a,u,f){if(go=null,i=Cn(f),i=_o(i),i!==null)if(a=Lr(i),a===null)i=null;else if(u=a.tag,u===13){if(i=uo(a),i!==null)return i;i=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return go=i,null}function Nl(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xc()){case co:return 1;case ci:return 4;case hr:case Rl:return 16;case Ic:return 536870912;default:return 16}default:return 16}}var nr=null,ca=null,$n=null;function Ol(){if($n)return $n;var i,a=ca,u=a.length,f,m="value"in nr?nr.value:nr.textContent,_=m.length;for(i=0;i<u&&a[i]===m[i];i++);var x=u-i;for(f=1;f<=x&&a[u-f]===m[_-f];f++);return $n=m.slice(i,1<f?1-f:void 0)}function da(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function is(){return!0}function Vl(){return!1}function sn(i){function a(u,f,m,_,x){this._reactName=u,this._targetInst=m,this.type=f,this.nativeEvent=_,this.target=x,this.currentTarget=null;for(var N in i)i.hasOwnProperty(N)&&(u=i[N],this[N]=u?u(_):_[N]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?is:Vl,this.isPropagationStopped=Vl,this}return ce(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=is)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=is)},persist:function(){},isPersistent:is}),a}var zr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ha=sn(zr),os=ce({},zr,{view:0,detail:0}),Rf=sn(os),fa,Os,vi,yo=ce({},os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:as,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==vi&&(vi&&i.type==="mousemove"?(fa=i.screenX-vi.screenX,Os=i.screenY-vi.screenY):Os=fa=0,vi=i),fa)},movementY:function(i){return"movementY"in i?i.movementY:Os}}),pa=sn(yo),Ml=ce({},yo,{dataTransfer:0}),Mc=sn(Ml),ma=ce({},os,{relatedTarget:0}),ga=sn(ma),Lc=ce({},zr,{animationName:0,elapsedTime:0,pseudoElement:0}),Vs=sn(Lc),jc=ce({},zr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Fc=sn(jc),Uc=ce({},zr,{data:0}),Ll=sn(Uc),ya={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},An={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $c(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Bc[i])?!!a[i]:!1}function as(){return $c}var d=ce({},os,{key:function(i){if(i.key){var a=ya[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=da(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?An[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:as,charCode:function(i){return i.type==="keypress"?da(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?da(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),v=sn(d),E=ce({},yo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),b=sn(E),W=ce({},os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:as}),X=sn(W),ue=ce({},zr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ot=sn(ue),zt=ce({},yo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ye=sn(zt),Xt=[9,13,27,32],Ot=c&&"CompositionEvent"in window,pr=null;c&&"documentMode"in document&&(pr=document.documentMode);var rr=c&&"TextEvent"in window&&!pr,vo=c&&(!Ot||pr&&8<pr&&11>=pr),va=" ",Fv=!1;function Uv(i,a){switch(i){case"keyup":return Xt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bv(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var _a=!1;function Zb(i,a){switch(i){case"compositionend":return Bv(a);case"keypress":return a.which!==32?null:(Fv=!0,va);case"textInput":return i=a.data,i===va&&Fv?null:i;default:return null}}function Jb(i,a){if(_a)return i==="compositionend"||!Ot&&Uv(i,a)?(i=Ol(),$n=ca=nr=null,_a=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return vo&&a.locale!=="ko"?null:a.data;default:return null}}var eA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $v(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!eA[i.type]:a==="textarea"}function zv(i,a,u,f){De(f),a=Gc(a,"onChange"),0<a.length&&(u=new ha("onChange","change",null,u,f),i.push({event:u,listeners:a}))}var jl=null,Fl=null;function tA(i){a0(i,0)}function zc(i){var a=xa(i);if(cr(a))return i}function nA(i,a){if(i==="change")return a}var Hv=!1;if(c){var Pf;if(c){var kf="oninput"in document;if(!kf){var Wv=document.createElement("div");Wv.setAttribute("oninput","return;"),kf=typeof Wv.oninput=="function"}Pf=kf}else Pf=!1;Hv=Pf&&(!document.documentMode||9<document.documentMode)}function qv(){jl&&(jl.detachEvent("onpropertychange",Gv),Fl=jl=null)}function Gv(i){if(i.propertyName==="value"&&zc(Fl)){var a=[];zv(a,Fl,i,Cn(i)),wt(tA,a)}}function rA(i,a,u){i==="focusin"?(qv(),jl=a,Fl=u,jl.attachEvent("onpropertychange",Gv)):i==="focusout"&&qv()}function sA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return zc(Fl)}function iA(i,a){if(i==="click")return zc(a)}function oA(i,a){if(i==="input"||i==="change")return zc(a)}function aA(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Hr=typeof Object.is=="function"?Object.is:aA;function Ul(i,a){if(Hr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var u=Object.keys(i),f=Object.keys(a);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var m=u[f];if(!h.call(a,m)||!Hr(i[m],a[m]))return!1}return!0}function Kv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Qv(i,a){var u=Kv(i);i=0;for(var f;u;){if(u.nodeType===3){if(f=i+u.textContent.length,i<=a&&f>=a)return{node:u,offset:a-i};i=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Kv(u)}}function Yv(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?Yv(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Xv(){for(var i=window,a=Dn();a instanceof i.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)i=a.contentWindow;else break;a=Dn(i.document)}return a}function Df(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function lA(i){var a=Xv(),u=i.focusedElem,f=i.selectionRange;if(a!==u&&u&&u.ownerDocument&&Yv(u.ownerDocument.documentElement,u)){if(f!==null&&Df(u)){if(a=f.start,i=f.end,i===void 0&&(i=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(i,u.value.length);else if(i=(a=u.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var m=u.textContent.length,_=Math.min(f.start,m);f=f.end===void 0?_:Math.min(f.end,m),!i.extend&&_>f&&(m=f,f=_,_=m),m=Qv(u,_);var x=Qv(u,f);m&&x&&(i.rangeCount!==1||i.anchorNode!==m.node||i.anchorOffset!==m.offset||i.focusNode!==x.node||i.focusOffset!==x.offset)&&(a=a.createRange(),a.setStart(m.node,m.offset),i.removeAllRanges(),_>f?(i.addRange(a),i.extend(x.node,x.offset)):(a.setEnd(x.node,x.offset),i.addRange(a)))}}for(a=[],i=u;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)i=a[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var uA=c&&"documentMode"in document&&11>=document.documentMode,wa=null,Nf=null,Bl=null,Of=!1;function Zv(i,a,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Of||wa==null||wa!==Dn(f)||(f=wa,"selectionStart"in f&&Df(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Bl&&Ul(Bl,f)||(Bl=f,f=Gc(Nf,"onSelect"),0<f.length&&(a=new ha("onSelect","select",null,a,u),i.push({event:a,listeners:f}),a.target=wa)))}function Hc(i,a){var u={};return u[i.toLowerCase()]=a.toLowerCase(),u["Webkit"+i]="webkit"+a,u["Moz"+i]="moz"+a,u}var Ea={animationend:Hc("Animation","AnimationEnd"),animationiteration:Hc("Animation","AnimationIteration"),animationstart:Hc("Animation","AnimationStart"),transitionend:Hc("Transition","TransitionEnd")},Vf={},Jv={};c&&(Jv=document.createElement("div").style,"AnimationEvent"in window||(delete Ea.animationend.animation,delete Ea.animationiteration.animation,delete Ea.animationstart.animation),"TransitionEvent"in window||delete Ea.transitionend.transition);function Wc(i){if(Vf[i])return Vf[i];if(!Ea[i])return i;var a=Ea[i],u;for(u in a)if(a.hasOwnProperty(u)&&u in Jv)return Vf[i]=a[u];return i}var e0=Wc("animationend"),t0=Wc("animationiteration"),n0=Wc("animationstart"),r0=Wc("transitionend"),s0=new Map,i0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _i(i,a){s0.set(i,a),o(a,[i])}for(var Mf=0;Mf<i0.length;Mf++){var Lf=i0[Mf],cA=Lf.toLowerCase(),dA=Lf[0].toUpperCase()+Lf.slice(1);_i(cA,"on"+dA)}_i(e0,"onAnimationEnd"),_i(t0,"onAnimationIteration"),_i(n0,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(r0,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hA=new Set("cancel close invalid load scroll toggle".split(" ").concat($l));function o0(i,a,u){var f=i.type||"unknown-event";i.currentTarget=u,Ec(f,a,void 0,i),i.currentTarget=null}function a0(i,a){a=(a&4)!==0;for(var u=0;u<i.length;u++){var f=i[u],m=f.event;f=f.listeners;e:{var _=void 0;if(a)for(var x=f.length-1;0<=x;x--){var N=f[x],j=N.instance,Y=N.currentTarget;if(N=N.listener,j!==_&&m.isPropagationStopped())break e;o0(m,N,Y),_=j}else for(x=0;x<f.length;x++){if(N=f[x],j=N.instance,Y=N.currentTarget,N=N.listener,j!==_&&m.isPropagationStopped())break e;o0(m,N,Y),_=j}}}if(dr)throw i=Cl,dr=!1,Cl=null,i}function ht(i,a){var u=a[Wf];u===void 0&&(u=a[Wf]=new Set);var f=i+"__bubble";u.has(f)||(l0(a,i,2,!1),u.add(f))}function jf(i,a,u){var f=0;a&&(f|=4),l0(u,i,f,a)}var qc="_reactListening"+Math.random().toString(36).slice(2);function zl(i){if(!i[qc]){i[qc]=!0,r.forEach(function(u){u!=="selectionchange"&&(hA.has(u)||jf(u,!1,i),jf(u,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[qc]||(a[qc]=!0,jf("selectionchange",!1,a))}}function l0(i,a,u,f){switch(Nl(a)){case 1:var m=yt;break;case 4:m=Af;break;default:m=Dl}u=m.bind(null,a,u,i),m=void 0,!Mr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),f?m!==void 0?i.addEventListener(a,u,{capture:!0,passive:m}):i.addEventListener(a,u,!0):m!==void 0?i.addEventListener(a,u,{passive:m}):i.addEventListener(a,u,!1)}function Ff(i,a,u,f,m){var _=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var x=f.tag;if(x===3||x===4){var N=f.stateNode.containerInfo;if(N===m||N.nodeType===8&&N.parentNode===m)break;if(x===4)for(x=f.return;x!==null;){var j=x.tag;if((j===3||j===4)&&(j=x.stateNode.containerInfo,j===m||j.nodeType===8&&j.parentNode===m))return;x=x.return}for(;N!==null;){if(x=_o(N),x===null)return;if(j=x.tag,j===5||j===6){f=_=x;continue e}N=N.parentNode}}f=f.return}wt(function(){var Y=_,ne=Cn(u),ie=[];e:{var te=s0.get(i);if(te!==void 0){var pe=ha,_e=i;switch(i){case"keypress":if(da(u)===0)break e;case"keydown":case"keyup":pe=v;break;case"focusin":_e="focus",pe=ga;break;case"focusout":_e="blur",pe=ga;break;case"beforeblur":case"afterblur":pe=ga;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=pa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=Mc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=X;break;case e0:case t0:case n0:pe=Vs;break;case r0:pe=ot;break;case"scroll":pe=Rf;break;case"wheel":pe=Ye;break;case"copy":case"cut":case"paste":pe=Fc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=b}var Ee=(a&4)!==0,kt=!Ee&&i==="scroll",q=Ee?te!==null?te+"Capture":null:te;Ee=[];for(var U=Y,G;U!==null;){G=U;var oe=G.stateNode;if(G.tag===5&&oe!==null&&(G=oe,q!==null&&(oe=Qe(U,q),oe!=null&&Ee.push(Hl(U,oe,G)))),kt)break;U=U.return}0<Ee.length&&(te=new pe(te,_e,null,u,ne),ie.push({event:te,listeners:Ee}))}}if((a&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",pe=i==="mouseout"||i==="pointerout",te&&u!==Vr&&(_e=u.relatedTarget||u.fromElement)&&(_o(_e)||_e[Ms]))break e;if((pe||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,pe?(_e=u.relatedTarget||u.toElement,pe=Y,_e=_e?_o(_e):null,_e!==null&&(kt=Lr(_e),_e!==kt||_e.tag!==5&&_e.tag!==6)&&(_e=null)):(pe=null,_e=Y),pe!==_e)){if(Ee=pa,oe="onMouseLeave",q="onMouseEnter",U="mouse",(i==="pointerout"||i==="pointerover")&&(Ee=b,oe="onPointerLeave",q="onPointerEnter",U="pointer"),kt=pe==null?te:xa(pe),G=_e==null?te:xa(_e),te=new Ee(oe,U+"leave",pe,u,ne),te.target=kt,te.relatedTarget=G,oe=null,_o(ne)===Y&&(Ee=new Ee(q,U+"enter",_e,u,ne),Ee.target=G,Ee.relatedTarget=kt,oe=Ee),kt=oe,pe&&_e)t:{for(Ee=pe,q=_e,U=0,G=Ee;G;G=Ta(G))U++;for(G=0,oe=q;oe;oe=Ta(oe))G++;for(;0<U-G;)Ee=Ta(Ee),U--;for(;0<G-U;)q=Ta(q),G--;for(;U--;){if(Ee===q||q!==null&&Ee===q.alternate)break t;Ee=Ta(Ee),q=Ta(q)}Ee=null}else Ee=null;pe!==null&&u0(ie,te,pe,Ee,!1),_e!==null&&kt!==null&&u0(ie,kt,_e,Ee,!0)}}e:{if(te=Y?xa(Y):window,pe=te.nodeName&&te.nodeName.toLowerCase(),pe==="select"||pe==="input"&&te.type==="file")var Se=nA;else if($v(te))if(Hv)Se=oA;else{Se=sA;var Re=rA}else(pe=te.nodeName)&&pe.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(Se=iA);if(Se&&(Se=Se(i,Y))){zv(ie,Se,u,ne);break e}Re&&Re(i,te,Y),i==="focusout"&&(Re=te._wrapperState)&&Re.controlled&&te.type==="number"&&Kt(te,"number",te.value)}switch(Re=Y?xa(Y):window,i){case"focusin":($v(Re)||Re.contentEditable==="true")&&(wa=Re,Nf=Y,Bl=null);break;case"focusout":Bl=Nf=wa=null;break;case"mousedown":Of=!0;break;case"contextmenu":case"mouseup":case"dragend":Of=!1,Zv(ie,u,ne);break;case"selectionchange":if(uA)break;case"keydown":case"keyup":Zv(ie,u,ne)}var Pe;if(Ot)e:{switch(i){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else _a?Uv(i,u)&&(Me="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Me="onCompositionStart");Me&&(vo&&u.locale!=="ko"&&(_a||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&_a&&(Pe=Ol()):(nr=ne,ca="value"in nr?nr.value:nr.textContent,_a=!0)),Re=Gc(Y,Me),0<Re.length&&(Me=new Ll(Me,i,null,u,ne),ie.push({event:Me,listeners:Re}),Pe?Me.data=Pe:(Pe=Bv(u),Pe!==null&&(Me.data=Pe)))),(Pe=rr?Zb(i,u):Jb(i,u))&&(Y=Gc(Y,"onBeforeInput"),0<Y.length&&(ne=new Ll("onBeforeInput","beforeinput",null,u,ne),ie.push({event:ne,listeners:Y}),ne.data=Pe))}a0(ie,a)})}function Hl(i,a,u){return{instance:i,listener:a,currentTarget:u}}function Gc(i,a){for(var u=a+"Capture",f=[];i!==null;){var m=i,_=m.stateNode;m.tag===5&&_!==null&&(m=_,_=Qe(i,u),_!=null&&f.unshift(Hl(i,_,m)),_=Qe(i,a),_!=null&&f.push(Hl(i,_,m))),i=i.return}return f}function Ta(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function u0(i,a,u,f,m){for(var _=a._reactName,x=[];u!==null&&u!==f;){var N=u,j=N.alternate,Y=N.stateNode;if(j!==null&&j===f)break;N.tag===5&&Y!==null&&(N=Y,m?(j=Qe(u,_),j!=null&&x.unshift(Hl(u,j,N))):m||(j=Qe(u,_),j!=null&&x.push(Hl(u,j,N)))),u=u.return}x.length!==0&&i.push({event:a,listeners:x})}var fA=/\r\n?/g,pA=/\u0000|\uFFFD/g;function c0(i){return(typeof i=="string"?i:""+i).replace(fA,`
`).replace(pA,"")}function Kc(i,a,u){if(a=c0(a),c0(i)!==a&&u)throw Error(t(425))}function Qc(){}var Uf=null,Bf=null;function $f(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var zf=typeof setTimeout=="function"?setTimeout:void 0,mA=typeof clearTimeout=="function"?clearTimeout:void 0,d0=typeof Promise=="function"?Promise:void 0,gA=typeof queueMicrotask=="function"?queueMicrotask:typeof d0<"u"?function(i){return d0.resolve(null).then(i).catch(yA)}:zf;function yA(i){setTimeout(function(){throw i})}function Hf(i,a){var u=a,f=0;do{var m=u.nextSibling;if(i.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(f===0){i.removeChild(m),$r(a);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=m}while(u);$r(a)}function wi(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function h0(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return i;a--}else u==="/$"&&a++}i=i.previousSibling}return null}var Sa=Math.random().toString(36).slice(2),ls="__reactFiber$"+Sa,Wl="__reactProps$"+Sa,Ms="__reactContainer$"+Sa,Wf="__reactEvents$"+Sa,vA="__reactListeners$"+Sa,_A="__reactHandles$"+Sa;function _o(i){var a=i[ls];if(a)return a;for(var u=i.parentNode;u;){if(a=u[Ms]||u[ls]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(i=h0(i);i!==null;){if(u=i[ls])return u;i=h0(i)}return a}i=u,u=i.parentNode}return null}function ql(i){return i=i[ls]||i[Ms],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function xa(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Yc(i){return i[Wl]||null}var qf=[],Ia=-1;function Ei(i){return{current:i}}function ft(i){0>Ia||(i.current=qf[Ia],qf[Ia]=null,Ia--)}function dt(i,a){Ia++,qf[Ia]=i.current,i.current=a}var Ti={},hn=Ei(Ti),zn=Ei(!1),wo=Ti;function Ca(i,a){var u=i.type.contextTypes;if(!u)return Ti;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var m={},_;for(_ in u)m[_]=a[_];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=m),m}function Hn(i){return i=i.childContextTypes,i!=null}function Xc(){ft(zn),ft(hn)}function f0(i,a,u){if(hn.current!==Ti)throw Error(t(168));dt(hn,a),dt(zn,u)}function p0(i,a,u){var f=i.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var m in f)if(!(m in a))throw Error(t(108,Ae(i)||"Unknown",m));return ce({},u,f)}function Zc(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Ti,wo=hn.current,dt(hn,i),dt(zn,zn.current),!0}function m0(i,a,u){var f=i.stateNode;if(!f)throw Error(t(169));u?(i=p0(i,a,wo),f.__reactInternalMemoizedMergedChildContext=i,ft(zn),ft(hn),dt(hn,i)):ft(zn),dt(zn,u)}var Ls=null,Jc=!1,Gf=!1;function g0(i){Ls===null?Ls=[i]:Ls.push(i)}function wA(i){Jc=!0,g0(i)}function Si(){if(!Gf&&Ls!==null){Gf=!0;var i=0,a=Ke;try{var u=Ls;for(Ke=1;i<u.length;i++){var f=u[i];do f=f(!0);while(f!==null)}Ls=null,Jc=!1}catch(m){throw Ls!==null&&(Ls=Ls.slice(i+1)),ia(co,Si),m}finally{Ke=a,Gf=!1}}return null}var ba=[],Aa=0,ed=null,td=0,mr=[],gr=0,Eo=null,js=1,Fs="";function To(i,a){ba[Aa++]=td,ba[Aa++]=ed,ed=i,td=a}function y0(i,a,u){mr[gr++]=js,mr[gr++]=Fs,mr[gr++]=Eo,Eo=i;var f=js;i=Fs;var m=32-bn(f)-1;f&=~(1<<m),u+=1;var _=32-bn(a)+m;if(30<_){var x=m-m%5;_=(f&(1<<x)-1).toString(32),f>>=x,m-=x,js=1<<32-bn(a)+m|u<<m|f,Fs=_+i}else js=1<<_|u<<m|f,Fs=i}function Kf(i){i.return!==null&&(To(i,1),y0(i,1,0))}function Qf(i){for(;i===ed;)ed=ba[--Aa],ba[Aa]=null,td=ba[--Aa],ba[Aa]=null;for(;i===Eo;)Eo=mr[--gr],mr[gr]=null,Fs=mr[--gr],mr[gr]=null,js=mr[--gr],mr[gr]=null}var sr=null,ir=null,vt=!1,Wr=null;function v0(i,a){var u=wr(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=i,a=i.deletions,a===null?(i.deletions=[u],i.flags|=16):a.push(u)}function _0(i,a){switch(i.tag){case 5:var u=i.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,sr=i,ir=wi(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,sr=i,ir=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=Eo!==null?{id:js,overflow:Fs}:null,i.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=wr(18,null,null,0),u.stateNode=a,u.return=i,i.child=u,sr=i,ir=null,!0):!1;default:return!1}}function Yf(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Xf(i){if(vt){var a=ir;if(a){var u=a;if(!_0(i,a)){if(Yf(i))throw Error(t(418));a=wi(u.nextSibling);var f=sr;a&&_0(i,a)?v0(f,u):(i.flags=i.flags&-4097|2,vt=!1,sr=i)}}else{if(Yf(i))throw Error(t(418));i.flags=i.flags&-4097|2,vt=!1,sr=i}}}function w0(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;sr=i}function nd(i){if(i!==sr)return!1;if(!vt)return w0(i),vt=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!$f(i.type,i.memoizedProps)),a&&(a=ir)){if(Yf(i))throw E0(),Error(t(418));for(;a;)v0(i,a),a=wi(a.nextSibling)}if(w0(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(a===0){ir=wi(i.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}i=i.nextSibling}ir=null}}else ir=sr?wi(i.stateNode.nextSibling):null;return!0}function E0(){for(var i=ir;i;)i=wi(i.nextSibling)}function Ra(){ir=sr=null,vt=!1}function Zf(i){Wr===null?Wr=[i]:Wr.push(i)}var EA=Q.ReactCurrentBatchConfig;function Gl(i,a,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,i));var m=f,_=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===_?a.ref:(a=function(x){var N=m.refs;x===null?delete N[_]:N[_]=x},a._stringRef=_,a)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function rd(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function T0(i){var a=i._init;return a(i._payload)}function S0(i){function a(q,U){if(i){var G=q.deletions;G===null?(q.deletions=[U],q.flags|=16):G.push(U)}}function u(q,U){if(!i)return null;for(;U!==null;)a(q,U),U=U.sibling;return null}function f(q,U){for(q=new Map;U!==null;)U.key!==null?q.set(U.key,U):q.set(U.index,U),U=U.sibling;return q}function m(q,U){return q=ki(q,U),q.index=0,q.sibling=null,q}function _(q,U,G){return q.index=G,i?(G=q.alternate,G!==null?(G=G.index,G<U?(q.flags|=2,U):G):(q.flags|=2,U)):(q.flags|=1048576,U)}function x(q){return i&&q.alternate===null&&(q.flags|=2),q}function N(q,U,G,oe){return U===null||U.tag!==6?(U=zp(G,q.mode,oe),U.return=q,U):(U=m(U,G),U.return=q,U)}function j(q,U,G,oe){var Se=G.type;return Se===D?ne(q,U,G.props.children,oe,G.key):U!==null&&(U.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===be&&T0(Se)===U.type)?(oe=m(U,G.props),oe.ref=Gl(q,U,G),oe.return=q,oe):(oe=bd(G.type,G.key,G.props,null,q.mode,oe),oe.ref=Gl(q,U,G),oe.return=q,oe)}function Y(q,U,G,oe){return U===null||U.tag!==4||U.stateNode.containerInfo!==G.containerInfo||U.stateNode.implementation!==G.implementation?(U=Hp(G,q.mode,oe),U.return=q,U):(U=m(U,G.children||[]),U.return=q,U)}function ne(q,U,G,oe,Se){return U===null||U.tag!==7?(U=Po(G,q.mode,oe,Se),U.return=q,U):(U=m(U,G),U.return=q,U)}function ie(q,U,G){if(typeof U=="string"&&U!==""||typeof U=="number")return U=zp(""+U,q.mode,G),U.return=q,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case K:return G=bd(U.type,U.key,U.props,null,q.mode,G),G.ref=Gl(q,null,U),G.return=q,G;case J:return U=Hp(U,q.mode,G),U.return=q,U;case be:var oe=U._init;return ie(q,oe(U._payload),G)}if(On(U)||he(U))return U=Po(U,q.mode,G,null),U.return=q,U;rd(q,U)}return null}function te(q,U,G,oe){var Se=U!==null?U.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return Se!==null?null:N(q,U,""+G,oe);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case K:return G.key===Se?j(q,U,G,oe):null;case J:return G.key===Se?Y(q,U,G,oe):null;case be:return Se=G._init,te(q,U,Se(G._payload),oe)}if(On(G)||he(G))return Se!==null?null:ne(q,U,G,oe,null);rd(q,G)}return null}function pe(q,U,G,oe,Se){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return q=q.get(G)||null,N(U,q,""+oe,Se);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case K:return q=q.get(oe.key===null?G:oe.key)||null,j(U,q,oe,Se);case J:return q=q.get(oe.key===null?G:oe.key)||null,Y(U,q,oe,Se);case be:var Re=oe._init;return pe(q,U,G,Re(oe._payload),Se)}if(On(oe)||he(oe))return q=q.get(G)||null,ne(U,q,oe,Se,null);rd(U,oe)}return null}function _e(q,U,G,oe){for(var Se=null,Re=null,Pe=U,Me=U=0,en=null;Pe!==null&&Me<G.length;Me++){Pe.index>Me?(en=Pe,Pe=null):en=Pe.sibling;var tt=te(q,Pe,G[Me],oe);if(tt===null){Pe===null&&(Pe=en);break}i&&Pe&&tt.alternate===null&&a(q,Pe),U=_(tt,U,Me),Re===null?Se=tt:Re.sibling=tt,Re=tt,Pe=en}if(Me===G.length)return u(q,Pe),vt&&To(q,Me),Se;if(Pe===null){for(;Me<G.length;Me++)Pe=ie(q,G[Me],oe),Pe!==null&&(U=_(Pe,U,Me),Re===null?Se=Pe:Re.sibling=Pe,Re=Pe);return vt&&To(q,Me),Se}for(Pe=f(q,Pe);Me<G.length;Me++)en=pe(Pe,q,Me,G[Me],oe),en!==null&&(i&&en.alternate!==null&&Pe.delete(en.key===null?Me:en.key),U=_(en,U,Me),Re===null?Se=en:Re.sibling=en,Re=en);return i&&Pe.forEach(function(Di){return a(q,Di)}),vt&&To(q,Me),Se}function Ee(q,U,G,oe){var Se=he(G);if(typeof Se!="function")throw Error(t(150));if(G=Se.call(G),G==null)throw Error(t(151));for(var Re=Se=null,Pe=U,Me=U=0,en=null,tt=G.next();Pe!==null&&!tt.done;Me++,tt=G.next()){Pe.index>Me?(en=Pe,Pe=null):en=Pe.sibling;var Di=te(q,Pe,tt.value,oe);if(Di===null){Pe===null&&(Pe=en);break}i&&Pe&&Di.alternate===null&&a(q,Pe),U=_(Di,U,Me),Re===null?Se=Di:Re.sibling=Di,Re=Di,Pe=en}if(tt.done)return u(q,Pe),vt&&To(q,Me),Se;if(Pe===null){for(;!tt.done;Me++,tt=G.next())tt=ie(q,tt.value,oe),tt!==null&&(U=_(tt,U,Me),Re===null?Se=tt:Re.sibling=tt,Re=tt);return vt&&To(q,Me),Se}for(Pe=f(q,Pe);!tt.done;Me++,tt=G.next())tt=pe(Pe,q,Me,tt.value,oe),tt!==null&&(i&&tt.alternate!==null&&Pe.delete(tt.key===null?Me:tt.key),U=_(tt,U,Me),Re===null?Se=tt:Re.sibling=tt,Re=tt);return i&&Pe.forEach(function(eR){return a(q,eR)}),vt&&To(q,Me),Se}function kt(q,U,G,oe){if(typeof G=="object"&&G!==null&&G.type===D&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case K:e:{for(var Se=G.key,Re=U;Re!==null;){if(Re.key===Se){if(Se=G.type,Se===D){if(Re.tag===7){u(q,Re.sibling),U=m(Re,G.props.children),U.return=q,q=U;break e}}else if(Re.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===be&&T0(Se)===Re.type){u(q,Re.sibling),U=m(Re,G.props),U.ref=Gl(q,Re,G),U.return=q,q=U;break e}u(q,Re);break}else a(q,Re);Re=Re.sibling}G.type===D?(U=Po(G.props.children,q.mode,oe,G.key),U.return=q,q=U):(oe=bd(G.type,G.key,G.props,null,q.mode,oe),oe.ref=Gl(q,U,G),oe.return=q,q=oe)}return x(q);case J:e:{for(Re=G.key;U!==null;){if(U.key===Re)if(U.tag===4&&U.stateNode.containerInfo===G.containerInfo&&U.stateNode.implementation===G.implementation){u(q,U.sibling),U=m(U,G.children||[]),U.return=q,q=U;break e}else{u(q,U);break}else a(q,U);U=U.sibling}U=Hp(G,q.mode,oe),U.return=q,q=U}return x(q);case be:return Re=G._init,kt(q,U,Re(G._payload),oe)}if(On(G))return _e(q,U,G,oe);if(he(G))return Ee(q,U,G,oe);rd(q,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,U!==null&&U.tag===6?(u(q,U.sibling),U=m(U,G),U.return=q,q=U):(u(q,U),U=zp(G,q.mode,oe),U.return=q,q=U),x(q)):u(q,U)}return kt}var Pa=S0(!0),x0=S0(!1),sd=Ei(null),id=null,ka=null,Jf=null;function ep(){Jf=ka=id=null}function tp(i){var a=sd.current;ft(sd),i._currentValue=a}function np(i,a,u){for(;i!==null;){var f=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),i===u)break;i=i.return}}function Da(i,a){id=i,Jf=ka=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(Wn=!0),i.firstContext=null)}function yr(i){var a=i._currentValue;if(Jf!==i)if(i={context:i,memoizedValue:a,next:null},ka===null){if(id===null)throw Error(t(308));ka=i,id.dependencies={lanes:0,firstContext:i}}else ka=ka.next=i;return a}var So=null;function rp(i){So===null?So=[i]:So.push(i)}function I0(i,a,u,f){var m=a.interleaved;return m===null?(u.next=u,rp(a)):(u.next=m.next,m.next=u),a.interleaved=u,Us(i,f)}function Us(i,a){i.lanes|=a;var u=i.alternate;for(u!==null&&(u.lanes|=a),u=i,i=i.return;i!==null;)i.childLanes|=a,u=i.alternate,u!==null&&(u.childLanes|=a),u=i,i=i.return;return u.tag===3?u.stateNode:null}var xi=!1;function sp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function C0(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Bs(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function Ii(i,a,u){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(Ze&2)!==0){var m=f.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),f.pending=a,Us(i,u)}return m=f.interleaved,m===null?(a.next=a,rp(f)):(a.next=m.next,m.next=a),f.interleaved=a,Us(i,u)}function od(i,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var f=a.lanes;f&=i.pendingLanes,u|=f,a.lanes=u,pi(i,u)}}function b0(i,a){var u=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var m=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var x={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};_===null?m=_=x:_=_.next=x,u=u.next}while(u!==null);_===null?m=_=a:_=_.next=a}else m=_=a;u={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:_,shared:f.shared,effects:f.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=a:i.next=a,u.lastBaseUpdate=a}function ad(i,a,u,f){var m=i.updateQueue;xi=!1;var _=m.firstBaseUpdate,x=m.lastBaseUpdate,N=m.shared.pending;if(N!==null){m.shared.pending=null;var j=N,Y=j.next;j.next=null,x===null?_=Y:x.next=Y,x=j;var ne=i.alternate;ne!==null&&(ne=ne.updateQueue,N=ne.lastBaseUpdate,N!==x&&(N===null?ne.firstBaseUpdate=Y:N.next=Y,ne.lastBaseUpdate=j))}if(_!==null){var ie=m.baseState;x=0,ne=Y=j=null,N=_;do{var te=N.lane,pe=N.eventTime;if((f&te)===te){ne!==null&&(ne=ne.next={eventTime:pe,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var _e=i,Ee=N;switch(te=a,pe=u,Ee.tag){case 1:if(_e=Ee.payload,typeof _e=="function"){ie=_e.call(pe,ie,te);break e}ie=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Ee.payload,te=typeof _e=="function"?_e.call(pe,ie,te):_e,te==null)break e;ie=ce({},ie,te);break e;case 2:xi=!0}}N.callback!==null&&N.lane!==0&&(i.flags|=64,te=m.effects,te===null?m.effects=[N]:te.push(N))}else pe={eventTime:pe,lane:te,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ne===null?(Y=ne=pe,j=ie):ne=ne.next=pe,x|=te;if(N=N.next,N===null){if(N=m.shared.pending,N===null)break;te=N,N=te.next,te.next=null,m.lastBaseUpdate=te,m.shared.pending=null}}while(!0);if(ne===null&&(j=ie),m.baseState=j,m.firstBaseUpdate=Y,m.lastBaseUpdate=ne,a=m.shared.interleaved,a!==null){m=a;do x|=m.lane,m=m.next;while(m!==a)}else _===null&&(m.shared.lanes=0);Co|=x,i.lanes=x,i.memoizedState=ie}}function A0(i,a,u){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var f=i[a],m=f.callback;if(m!==null){if(f.callback=null,f=u,typeof m!="function")throw Error(t(191,m));m.call(f)}}}var Kl={},us=Ei(Kl),Ql=Ei(Kl),Yl=Ei(Kl);function xo(i){if(i===Kl)throw Error(t(174));return i}function ip(i,a){switch(dt(Yl,a),dt(Ql,i),dt(us,Kl),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:ut(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=ut(a,i)}ft(us),dt(us,a)}function Na(){ft(us),ft(Ql),ft(Yl)}function R0(i){xo(Yl.current);var a=xo(us.current),u=ut(a,i.type);a!==u&&(dt(Ql,i),dt(us,u))}function op(i){Ql.current===i&&(ft(us),ft(Ql))}var Tt=Ei(0);function ld(i){for(var a=i;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ap=[];function lp(){for(var i=0;i<ap.length;i++)ap[i]._workInProgressVersionPrimary=null;ap.length=0}var ud=Q.ReactCurrentDispatcher,up=Q.ReactCurrentBatchConfig,Io=0,St=null,Ht=null,Zt=null,cd=!1,Xl=!1,Zl=0,TA=0;function fn(){throw Error(t(321))}function cp(i,a){if(a===null)return!1;for(var u=0;u<a.length&&u<i.length;u++)if(!Hr(i[u],a[u]))return!1;return!0}function dp(i,a,u,f,m,_){if(Io=_,St=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,ud.current=i===null||i.memoizedState===null?CA:bA,i=u(f,m),Xl){_=0;do{if(Xl=!1,Zl=0,25<=_)throw Error(t(301));_+=1,Zt=Ht=null,a.updateQueue=null,ud.current=AA,i=u(f,m)}while(Xl)}if(ud.current=fd,a=Ht!==null&&Ht.next!==null,Io=0,Zt=Ht=St=null,cd=!1,a)throw Error(t(300));return i}function hp(){var i=Zl!==0;return Zl=0,i}function cs(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?St.memoizedState=Zt=i:Zt=Zt.next=i,Zt}function vr(){if(Ht===null){var i=St.alternate;i=i!==null?i.memoizedState:null}else i=Ht.next;var a=Zt===null?St.memoizedState:Zt.next;if(a!==null)Zt=a,Ht=i;else{if(i===null)throw Error(t(310));Ht=i,i={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},Zt===null?St.memoizedState=Zt=i:Zt=Zt.next=i}return Zt}function Jl(i,a){return typeof a=="function"?a(i):a}function fp(i){var a=vr(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var f=Ht,m=f.baseQueue,_=u.pending;if(_!==null){if(m!==null){var x=m.next;m.next=_.next,_.next=x}f.baseQueue=m=_,u.pending=null}if(m!==null){_=m.next,f=f.baseState;var N=x=null,j=null,Y=_;do{var ne=Y.lane;if((Io&ne)===ne)j!==null&&(j=j.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),f=Y.hasEagerState?Y.eagerState:i(f,Y.action);else{var ie={lane:ne,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};j===null?(N=j=ie,x=f):j=j.next=ie,St.lanes|=ne,Co|=ne}Y=Y.next}while(Y!==null&&Y!==_);j===null?x=f:j.next=N,Hr(f,a.memoizedState)||(Wn=!0),a.memoizedState=f,a.baseState=x,a.baseQueue=j,u.lastRenderedState=f}if(i=u.interleaved,i!==null){m=i;do _=m.lane,St.lanes|=_,Co|=_,m=m.next;while(m!==i)}else m===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function pp(i){var a=vr(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var f=u.dispatch,m=u.pending,_=a.memoizedState;if(m!==null){u.pending=null;var x=m=m.next;do _=i(_,x.action),x=x.next;while(x!==m);Hr(_,a.memoizedState)||(Wn=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),u.lastRenderedState=_}return[_,f]}function P0(){}function k0(i,a){var u=St,f=vr(),m=a(),_=!Hr(f.memoizedState,m);if(_&&(f.memoizedState=m,Wn=!0),f=f.queue,mp(O0.bind(null,u,f,i),[i]),f.getSnapshot!==a||_||Zt!==null&&Zt.memoizedState.tag&1){if(u.flags|=2048,eu(9,N0.bind(null,u,f,m,a),void 0,null),Jt===null)throw Error(t(349));(Io&30)!==0||D0(u,a,m)}return m}function D0(i,a,u){i.flags|=16384,i={getSnapshot:a,value:u},a=St.updateQueue,a===null?(a={lastEffect:null,stores:null},St.updateQueue=a,a.stores=[i]):(u=a.stores,u===null?a.stores=[i]:u.push(i))}function N0(i,a,u,f){a.value=u,a.getSnapshot=f,V0(a)&&M0(i)}function O0(i,a,u){return u(function(){V0(a)&&M0(i)})}function V0(i){var a=i.getSnapshot;i=i.value;try{var u=a();return!Hr(i,u)}catch{return!0}}function M0(i){var a=Us(i,1);a!==null&&Qr(a,i,1,-1)}function L0(i){var a=cs();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jl,lastRenderedState:i},a.queue=i,i=i.dispatch=IA.bind(null,St,i),[a.memoizedState,i]}function eu(i,a,u,f){return i={tag:i,create:a,destroy:u,deps:f,next:null},a=St.updateQueue,a===null?(a={lastEffect:null,stores:null},St.updateQueue=a,a.lastEffect=i.next=i):(u=a.lastEffect,u===null?a.lastEffect=i.next=i:(f=u.next,u.next=i,i.next=f,a.lastEffect=i)),i}function j0(){return vr().memoizedState}function dd(i,a,u,f){var m=cs();St.flags|=i,m.memoizedState=eu(1|a,u,void 0,f===void 0?null:f)}function hd(i,a,u,f){var m=vr();f=f===void 0?null:f;var _=void 0;if(Ht!==null){var x=Ht.memoizedState;if(_=x.destroy,f!==null&&cp(f,x.deps)){m.memoizedState=eu(a,u,_,f);return}}St.flags|=i,m.memoizedState=eu(1|a,u,_,f)}function F0(i,a){return dd(8390656,8,i,a)}function mp(i,a){return hd(2048,8,i,a)}function U0(i,a){return hd(4,2,i,a)}function B0(i,a){return hd(4,4,i,a)}function $0(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function z0(i,a,u){return u=u!=null?u.concat([i]):null,hd(4,4,$0.bind(null,a,i),u)}function gp(){}function H0(i,a){var u=vr();a=a===void 0?null:a;var f=u.memoizedState;return f!==null&&a!==null&&cp(a,f[1])?f[0]:(u.memoizedState=[i,a],i)}function W0(i,a){var u=vr();a=a===void 0?null:a;var f=u.memoizedState;return f!==null&&a!==null&&cp(a,f[1])?f[0]:(i=i(),u.memoizedState=[i,a],i)}function q0(i,a,u){return(Io&21)===0?(i.baseState&&(i.baseState=!1,Wn=!0),i.memoizedState=u):(Hr(u,a)||(u=po(),St.lanes|=u,Co|=u,i.baseState=!0),a)}function SA(i,a){var u=Ke;Ke=u!==0&&4>u?u:4,i(!0);var f=up.transition;up.transition={};try{i(!1),a()}finally{Ke=u,up.transition=f}}function G0(){return vr().memoizedState}function xA(i,a,u){var f=Ri(i);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},K0(i))Q0(a,u);else if(u=I0(i,a,u,f),u!==null){var m=Pn();Qr(u,i,f,m),Y0(u,a,f)}}function IA(i,a,u){var f=Ri(i),m={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(K0(i))Q0(a,m);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var x=a.lastRenderedState,N=_(x,u);if(m.hasEagerState=!0,m.eagerState=N,Hr(N,x)){var j=a.interleaved;j===null?(m.next=m,rp(a)):(m.next=j.next,j.next=m),a.interleaved=m;return}}catch{}finally{}u=I0(i,a,m,f),u!==null&&(m=Pn(),Qr(u,i,f,m),Y0(u,a,f))}}function K0(i){var a=i.alternate;return i===St||a!==null&&a===St}function Q0(i,a){Xl=cd=!0;var u=i.pending;u===null?a.next=a:(a.next=u.next,u.next=a),i.pending=a}function Y0(i,a,u){if((u&4194240)!==0){var f=a.lanes;f&=i.pendingLanes,u|=f,a.lanes=u,pi(i,u)}}var fd={readContext:yr,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useInsertionEffect:fn,useLayoutEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useMutableSource:fn,useSyncExternalStore:fn,useId:fn,unstable_isNewReconciler:!1},CA={readContext:yr,useCallback:function(i,a){return cs().memoizedState=[i,a===void 0?null:a],i},useContext:yr,useEffect:F0,useImperativeHandle:function(i,a,u){return u=u!=null?u.concat([i]):null,dd(4194308,4,$0.bind(null,a,i),u)},useLayoutEffect:function(i,a){return dd(4194308,4,i,a)},useInsertionEffect:function(i,a){return dd(4,2,i,a)},useMemo:function(i,a){var u=cs();return a=a===void 0?null:a,i=i(),u.memoizedState=[i,a],i},useReducer:function(i,a,u){var f=cs();return a=u!==void 0?u(a):a,f.memoizedState=f.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},f.queue=i,i=i.dispatch=xA.bind(null,St,i),[f.memoizedState,i]},useRef:function(i){var a=cs();return i={current:i},a.memoizedState=i},useState:L0,useDebugValue:gp,useDeferredValue:function(i){return cs().memoizedState=i},useTransition:function(){var i=L0(!1),a=i[0];return i=SA.bind(null,i[1]),cs().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,u){var f=St,m=cs();if(vt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),Jt===null)throw Error(t(349));(Io&30)!==0||D0(f,a,u)}m.memoizedState=u;var _={value:u,getSnapshot:a};return m.queue=_,F0(O0.bind(null,f,_,i),[i]),f.flags|=2048,eu(9,N0.bind(null,f,_,u,a),void 0,null),u},useId:function(){var i=cs(),a=Jt.identifierPrefix;if(vt){var u=Fs,f=js;u=(f&~(1<<32-bn(f)-1)).toString(32)+u,a=":"+a+"R"+u,u=Zl++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=TA++,a=":"+a+"r"+u.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},bA={readContext:yr,useCallback:H0,useContext:yr,useEffect:mp,useImperativeHandle:z0,useInsertionEffect:U0,useLayoutEffect:B0,useMemo:W0,useReducer:fp,useRef:j0,useState:function(){return fp(Jl)},useDebugValue:gp,useDeferredValue:function(i){var a=vr();return q0(a,Ht.memoizedState,i)},useTransition:function(){var i=fp(Jl)[0],a=vr().memoizedState;return[i,a]},useMutableSource:P0,useSyncExternalStore:k0,useId:G0,unstable_isNewReconciler:!1},AA={readContext:yr,useCallback:H0,useContext:yr,useEffect:mp,useImperativeHandle:z0,useInsertionEffect:U0,useLayoutEffect:B0,useMemo:W0,useReducer:pp,useRef:j0,useState:function(){return pp(Jl)},useDebugValue:gp,useDeferredValue:function(i){var a=vr();return Ht===null?a.memoizedState=i:q0(a,Ht.memoizedState,i)},useTransition:function(){var i=pp(Jl)[0],a=vr().memoizedState;return[i,a]},useMutableSource:P0,useSyncExternalStore:k0,useId:G0,unstable_isNewReconciler:!1};function qr(i,a){if(i&&i.defaultProps){a=ce({},a),i=i.defaultProps;for(var u in i)a[u]===void 0&&(a[u]=i[u]);return a}return a}function yp(i,a,u,f){a=i.memoizedState,u=u(f,a),u=u==null?a:ce({},a,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var pd={isMounted:function(i){return(i=i._reactInternals)?Lr(i)===i:!1},enqueueSetState:function(i,a,u){i=i._reactInternals;var f=Pn(),m=Ri(i),_=Bs(f,m);_.payload=a,u!=null&&(_.callback=u),a=Ii(i,_,m),a!==null&&(Qr(a,i,m,f),od(a,i,m))},enqueueReplaceState:function(i,a,u){i=i._reactInternals;var f=Pn(),m=Ri(i),_=Bs(f,m);_.tag=1,_.payload=a,u!=null&&(_.callback=u),a=Ii(i,_,m),a!==null&&(Qr(a,i,m,f),od(a,i,m))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var u=Pn(),f=Ri(i),m=Bs(u,f);m.tag=2,a!=null&&(m.callback=a),a=Ii(i,m,f),a!==null&&(Qr(a,i,f,u),od(a,i,f))}};function X0(i,a,u,f,m,_,x){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,_,x):a.prototype&&a.prototype.isPureReactComponent?!Ul(u,f)||!Ul(m,_):!0}function Z0(i,a,u){var f=!1,m=Ti,_=a.contextType;return typeof _=="object"&&_!==null?_=yr(_):(m=Hn(a)?wo:hn.current,f=a.contextTypes,_=(f=f!=null)?Ca(i,m):Ti),a=new a(u,_),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=pd,i.stateNode=a,a._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=m,i.__reactInternalMemoizedMaskedChildContext=_),a}function J0(i,a,u,f){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,f),a.state!==i&&pd.enqueueReplaceState(a,a.state,null)}function vp(i,a,u,f){var m=i.stateNode;m.props=u,m.state=i.memoizedState,m.refs={},sp(i);var _=a.contextType;typeof _=="object"&&_!==null?m.context=yr(_):(_=Hn(a)?wo:hn.current,m.context=Ca(i,_)),m.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(yp(i,a,_,u),m.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(a=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),a!==m.state&&pd.enqueueReplaceState(m,m.state,null),ad(i,u,m,f),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308)}function Oa(i,a){try{var u="",f=a;do u+=we(f),f=f.return;while(f);var m=u}catch(_){m=`
Error generating stack: `+_.message+`
`+_.stack}return{value:i,source:a,stack:m,digest:null}}function _p(i,a,u){return{value:i,source:null,stack:u??null,digest:a??null}}function wp(i,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var RA=typeof WeakMap=="function"?WeakMap:Map;function e_(i,a,u){u=Bs(-1,u),u.tag=3,u.payload={element:null};var f=a.value;return u.callback=function(){Ed||(Ed=!0,Vp=f),wp(i,a)},u}function t_(i,a,u){u=Bs(-1,u),u.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var m=a.value;u.payload=function(){return f(m)},u.callback=function(){wp(i,a)}}var _=i.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(u.callback=function(){wp(i,a),typeof f!="function"&&(bi===null?bi=new Set([this]):bi.add(this));var x=a.stack;this.componentDidCatch(a.value,{componentStack:x!==null?x:""})}),u}function n_(i,a,u){var f=i.pingCache;if(f===null){f=i.pingCache=new RA;var m=new Set;f.set(a,m)}else m=f.get(a),m===void 0&&(m=new Set,f.set(a,m));m.has(u)||(m.add(u),i=zA.bind(null,i,a,u),a.then(i,i))}function r_(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function s_(i,a,u,f,m){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=Bs(-1,1),a.tag=2,Ii(u,a,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=m,i)}var PA=Q.ReactCurrentOwner,Wn=!1;function Rn(i,a,u,f){a.child=i===null?x0(a,null,u,f):Pa(a,i.child,u,f)}function i_(i,a,u,f,m){u=u.render;var _=a.ref;return Da(a,m),f=dp(i,a,u,f,_,m),u=hp(),i!==null&&!Wn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~m,$s(i,a,m)):(vt&&u&&Kf(a),a.flags|=1,Rn(i,a,f,m),a.child)}function o_(i,a,u,f,m){if(i===null){var _=u.type;return typeof _=="function"&&!$p(_)&&_.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=_,a_(i,a,_,f,m)):(i=bd(u.type,null,f,a,a.mode,m),i.ref=a.ref,i.return=a,a.child=i)}if(_=i.child,(i.lanes&m)===0){var x=_.memoizedProps;if(u=u.compare,u=u!==null?u:Ul,u(x,f)&&i.ref===a.ref)return $s(i,a,m)}return a.flags|=1,i=ki(_,f),i.ref=a.ref,i.return=a,a.child=i}function a_(i,a,u,f,m){if(i!==null){var _=i.memoizedProps;if(Ul(_,f)&&i.ref===a.ref)if(Wn=!1,a.pendingProps=f=_,(i.lanes&m)!==0)(i.flags&131072)!==0&&(Wn=!0);else return a.lanes=i.lanes,$s(i,a,m)}return Ep(i,a,u,f,m)}function l_(i,a,u){var f=a.pendingProps,m=f.children,_=i!==null?i.memoizedState:null;if(f.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},dt(Ma,or),or|=u;else{if((u&1073741824)===0)return i=_!==null?_.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,dt(Ma,or),or|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=_!==null?_.baseLanes:u,dt(Ma,or),or|=f}else _!==null?(f=_.baseLanes|u,a.memoizedState=null):f=u,dt(Ma,or),or|=f;return Rn(i,a,m,u),a.child}function u_(i,a){var u=a.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function Ep(i,a,u,f,m){var _=Hn(u)?wo:hn.current;return _=Ca(a,_),Da(a,m),u=dp(i,a,u,f,_,m),f=hp(),i!==null&&!Wn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~m,$s(i,a,m)):(vt&&f&&Kf(a),a.flags|=1,Rn(i,a,u,m),a.child)}function c_(i,a,u,f,m){if(Hn(u)){var _=!0;Zc(a)}else _=!1;if(Da(a,m),a.stateNode===null)gd(i,a),Z0(a,u,f),vp(a,u,f,m),f=!0;else if(i===null){var x=a.stateNode,N=a.memoizedProps;x.props=N;var j=x.context,Y=u.contextType;typeof Y=="object"&&Y!==null?Y=yr(Y):(Y=Hn(u)?wo:hn.current,Y=Ca(a,Y));var ne=u.getDerivedStateFromProps,ie=typeof ne=="function"||typeof x.getSnapshotBeforeUpdate=="function";ie||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(N!==f||j!==Y)&&J0(a,x,f,Y),xi=!1;var te=a.memoizedState;x.state=te,ad(a,f,x,m),j=a.memoizedState,N!==f||te!==j||zn.current||xi?(typeof ne=="function"&&(yp(a,u,ne,f),j=a.memoizedState),(N=xi||X0(a,u,N,f,te,j,Y))?(ie||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(a.flags|=4194308)):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=j),x.props=f,x.state=j,x.context=Y,f=N):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{x=a.stateNode,C0(i,a),N=a.memoizedProps,Y=a.type===a.elementType?N:qr(a.type,N),x.props=Y,ie=a.pendingProps,te=x.context,j=u.contextType,typeof j=="object"&&j!==null?j=yr(j):(j=Hn(u)?wo:hn.current,j=Ca(a,j));var pe=u.getDerivedStateFromProps;(ne=typeof pe=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(N!==ie||te!==j)&&J0(a,x,f,j),xi=!1,te=a.memoizedState,x.state=te,ad(a,f,x,m);var _e=a.memoizedState;N!==ie||te!==_e||zn.current||xi?(typeof pe=="function"&&(yp(a,u,pe,f),_e=a.memoizedState),(Y=xi||X0(a,u,Y,f,te,_e,j)||!1)?(ne||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(f,_e,j),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(f,_e,j)),typeof x.componentDidUpdate=="function"&&(a.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof x.componentDidUpdate!="function"||N===i.memoizedProps&&te===i.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&te===i.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=_e),x.props=f,x.state=_e,x.context=j,f=Y):(typeof x.componentDidUpdate!="function"||N===i.memoizedProps&&te===i.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&te===i.memoizedState||(a.flags|=1024),f=!1)}return Tp(i,a,u,f,_,m)}function Tp(i,a,u,f,m,_){u_(i,a);var x=(a.flags&128)!==0;if(!f&&!x)return m&&m0(a,u,!1),$s(i,a,_);f=a.stateNode,PA.current=a;var N=x&&typeof u.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,i!==null&&x?(a.child=Pa(a,i.child,null,_),a.child=Pa(a,null,N,_)):Rn(i,a,N,_),a.memoizedState=f.state,m&&m0(a,u,!0),a.child}function d_(i){var a=i.stateNode;a.pendingContext?f0(i,a.pendingContext,a.pendingContext!==a.context):a.context&&f0(i,a.context,!1),ip(i,a.containerInfo)}function h_(i,a,u,f,m){return Ra(),Zf(m),a.flags|=256,Rn(i,a,u,f),a.child}var Sp={dehydrated:null,treeContext:null,retryLane:0};function xp(i){return{baseLanes:i,cachePool:null,transitions:null}}function f_(i,a,u){var f=a.pendingProps,m=Tt.current,_=!1,x=(a.flags&128)!==0,N;if((N=x)||(N=i!==null&&i.memoizedState===null?!1:(m&2)!==0),N?(_=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(m|=1),dt(Tt,m&1),i===null)return Xf(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(x=f.children,i=f.fallback,_?(f=a.mode,_=a.child,x={mode:"hidden",children:x},(f&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=x):_=Ad(x,f,0,null),i=Po(i,f,u,null),_.return=a,i.return=a,_.sibling=i,a.child=_,a.child.memoizedState=xp(u),a.memoizedState=Sp,i):Ip(a,x));if(m=i.memoizedState,m!==null&&(N=m.dehydrated,N!==null))return kA(i,a,x,f,N,m,u);if(_){_=f.fallback,x=a.mode,m=i.child,N=m.sibling;var j={mode:"hidden",children:f.children};return(x&1)===0&&a.child!==m?(f=a.child,f.childLanes=0,f.pendingProps=j,a.deletions=null):(f=ki(m,j),f.subtreeFlags=m.subtreeFlags&14680064),N!==null?_=ki(N,_):(_=Po(_,x,u,null),_.flags|=2),_.return=a,f.return=a,f.sibling=_,a.child=f,f=_,_=a.child,x=i.child.memoizedState,x=x===null?xp(u):{baseLanes:x.baseLanes|u,cachePool:null,transitions:x.transitions},_.memoizedState=x,_.childLanes=i.childLanes&~u,a.memoizedState=Sp,f}return _=i.child,i=_.sibling,f=ki(_,{mode:"visible",children:f.children}),(a.mode&1)===0&&(f.lanes=u),f.return=a,f.sibling=null,i!==null&&(u=a.deletions,u===null?(a.deletions=[i],a.flags|=16):u.push(i)),a.child=f,a.memoizedState=null,f}function Ip(i,a){return a=Ad({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function md(i,a,u,f){return f!==null&&Zf(f),Pa(a,i.child,null,u),i=Ip(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function kA(i,a,u,f,m,_,x){if(u)return a.flags&256?(a.flags&=-257,f=_p(Error(t(422))),md(i,a,x,f)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(_=f.fallback,m=a.mode,f=Ad({mode:"visible",children:f.children},m,0,null),_=Po(_,m,x,null),_.flags|=2,f.return=a,_.return=a,f.sibling=_,a.child=f,(a.mode&1)!==0&&Pa(a,i.child,null,x),a.child.memoizedState=xp(x),a.memoizedState=Sp,_);if((a.mode&1)===0)return md(i,a,x,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var N=f.dgst;return f=N,_=Error(t(419)),f=_p(_,f,void 0),md(i,a,x,f)}if(N=(x&i.childLanes)!==0,Wn||N){if(f=Jt,f!==null){switch(x&-x){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(f.suspendedLanes|x))!==0?0:m,m!==0&&m!==_.retryLane&&(_.retryLane=m,Us(i,m),Qr(f,i,m,-1))}return Bp(),f=_p(Error(t(421))),md(i,a,x,f)}return m.data==="$?"?(a.flags|=128,a.child=i.child,a=HA.bind(null,i),m._reactRetry=a,null):(i=_.treeContext,ir=wi(m.nextSibling),sr=a,vt=!0,Wr=null,i!==null&&(mr[gr++]=js,mr[gr++]=Fs,mr[gr++]=Eo,js=i.id,Fs=i.overflow,Eo=a),a=Ip(a,f.children),a.flags|=4096,a)}function p_(i,a,u){i.lanes|=a;var f=i.alternate;f!==null&&(f.lanes|=a),np(i.return,a,u)}function Cp(i,a,u,f,m){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:m}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=u,_.tailMode=m)}function m_(i,a,u){var f=a.pendingProps,m=f.revealOrder,_=f.tail;if(Rn(i,a,f.children,u),f=Tt.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&p_(i,u,a);else if(i.tag===19)p_(i,u,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(dt(Tt,f),(a.mode&1)===0)a.memoizedState=null;else switch(m){case"forwards":for(u=a.child,m=null;u!==null;)i=u.alternate,i!==null&&ld(i)===null&&(m=u),u=u.sibling;u=m,u===null?(m=a.child,a.child=null):(m=u.sibling,u.sibling=null),Cp(a,!1,m,u,_);break;case"backwards":for(u=null,m=a.child,a.child=null;m!==null;){if(i=m.alternate,i!==null&&ld(i)===null){a.child=m;break}i=m.sibling,m.sibling=u,u=m,m=i}Cp(a,!0,u,null,_);break;case"together":Cp(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function gd(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function $s(i,a,u){if(i!==null&&(a.dependencies=i.dependencies),Co|=a.lanes,(u&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,u=ki(i,i.pendingProps),a.child=u,u.return=a;i.sibling!==null;)i=i.sibling,u=u.sibling=ki(i,i.pendingProps),u.return=a;u.sibling=null}return a.child}function DA(i,a,u){switch(a.tag){case 3:d_(a),Ra();break;case 5:R0(a);break;case 1:Hn(a.type)&&Zc(a);break;case 4:ip(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,m=a.memoizedProps.value;dt(sd,f._currentValue),f._currentValue=m;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(dt(Tt,Tt.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?f_(i,a,u):(dt(Tt,Tt.current&1),i=$s(i,a,u),i!==null?i.sibling:null);dt(Tt,Tt.current&1);break;case 19:if(f=(u&a.childLanes)!==0,(i.flags&128)!==0){if(f)return m_(i,a,u);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),dt(Tt,Tt.current),f)break;return null;case 22:case 23:return a.lanes=0,l_(i,a,u)}return $s(i,a,u)}var g_,bp,y_,v_;g_=function(i,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},bp=function(){},y_=function(i,a,u,f){var m=i.memoizedProps;if(m!==f){i=a.stateNode,xo(us.current);var _=null;switch(u){case"input":m=xn(i,m),f=xn(i,f),_=[];break;case"select":m=ce({},m,{value:void 0}),f=ce({},f,{value:void 0}),_=[];break;case"textarea":m=_t(i,m),f=_t(i,f),_=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=Qc)}li(u,f);var x;u=null;for(Y in m)if(!f.hasOwnProperty(Y)&&m.hasOwnProperty(Y)&&m[Y]!=null)if(Y==="style"){var N=m[Y];for(x in N)N.hasOwnProperty(x)&&(u||(u={}),u[x]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?_||(_=[]):(_=_||[]).push(Y,null));for(Y in f){var j=f[Y];if(N=m!=null?m[Y]:void 0,f.hasOwnProperty(Y)&&j!==N&&(j!=null||N!=null))if(Y==="style")if(N){for(x in N)!N.hasOwnProperty(x)||j&&j.hasOwnProperty(x)||(u||(u={}),u[x]="");for(x in j)j.hasOwnProperty(x)&&N[x]!==j[x]&&(u||(u={}),u[x]=j[x])}else u||(_||(_=[]),_.push(Y,u)),u=j;else Y==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,N=N?N.__html:void 0,j!=null&&N!==j&&(_=_||[]).push(Y,j)):Y==="children"?typeof j!="string"&&typeof j!="number"||(_=_||[]).push(Y,""+j):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(j!=null&&Y==="onScroll"&&ht("scroll",i),_||N===j||(_=[])):(_=_||[]).push(Y,j))}u&&(_=_||[]).push("style",u);var Y=_;(a.updateQueue=Y)&&(a.flags|=4)}},v_=function(i,a,u,f){u!==f&&(a.flags|=4)};function tu(i,a){if(!vt)switch(i.tailMode){case"hidden":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function pn(i){var a=i.alternate!==null&&i.alternate.child===i.child,u=0,f=0;if(a)for(var m=i.child;m!==null;)u|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)u|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=f,i.childLanes=u,a}function NA(i,a,u){var f=a.pendingProps;switch(Qf(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(a),null;case 1:return Hn(a.type)&&Xc(),pn(a),null;case 3:return f=a.stateNode,Na(),ft(zn),ft(hn),lp(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(nd(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Wr!==null&&(jp(Wr),Wr=null))),bp(i,a),pn(a),null;case 5:op(a);var m=xo(Yl.current);if(u=a.type,i!==null&&a.stateNode!=null)y_(i,a,u,f,m),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(t(166));return pn(a),null}if(i=xo(us.current),nd(a)){f=a.stateNode,u=a.type;var _=a.memoizedProps;switch(f[ls]=a,f[Wl]=_,i=(a.mode&1)!==0,u){case"dialog":ht("cancel",f),ht("close",f);break;case"iframe":case"object":case"embed":ht("load",f);break;case"video":case"audio":for(m=0;m<$l.length;m++)ht($l[m],f);break;case"source":ht("error",f);break;case"img":case"image":case"link":ht("error",f),ht("load",f);break;case"details":ht("toggle",f);break;case"input":kr(f,_),ht("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!_.multiple},ht("invalid",f);break;case"textarea":In(f,_),ht("invalid",f)}li(u,_),m=null;for(var x in _)if(_.hasOwnProperty(x)){var N=_[x];x==="children"?typeof N=="string"?f.textContent!==N&&(_.suppressHydrationWarning!==!0&&Kc(f.textContent,N,i),m=["children",N]):typeof N=="number"&&f.textContent!==""+N&&(_.suppressHydrationWarning!==!0&&Kc(f.textContent,N,i),m=["children",""+N]):s.hasOwnProperty(x)&&N!=null&&x==="onScroll"&&ht("scroll",f)}switch(u){case"input":Sn(f),Nr(f,_,!0);break;case"textarea":Sn(f),Rs(f);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(f.onclick=Qc)}f=m,a.updateQueue=f,f!==null&&(a.flags|=4)}else{x=m.nodeType===9?m:m.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=at(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=x.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=x.createElement(u,{is:f.is}):(i=x.createElement(u),u==="select"&&(x=i,f.multiple?x.multiple=!0:f.size&&(x.size=f.size))):i=x.createElementNS(i,u),i[ls]=a,i[Wl]=f,g_(i,a,!1,!1),a.stateNode=i;e:{switch(x=lo(u,f),u){case"dialog":ht("cancel",i),ht("close",i),m=f;break;case"iframe":case"object":case"embed":ht("load",i),m=f;break;case"video":case"audio":for(m=0;m<$l.length;m++)ht($l[m],i);m=f;break;case"source":ht("error",i),m=f;break;case"img":case"image":case"link":ht("error",i),ht("load",i),m=f;break;case"details":ht("toggle",i),m=f;break;case"input":kr(i,f),m=xn(i,f),ht("invalid",i);break;case"option":m=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},m=ce({},f,{value:void 0}),ht("invalid",i);break;case"textarea":In(i,f),m=_t(i,f),ht("invalid",i);break;default:m=f}li(u,m),N=m;for(_ in N)if(N.hasOwnProperty(_)){var j=N[_];_==="style"?ao(i,j):_==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&Yt(i,j)):_==="children"?typeof j=="string"?(u!=="textarea"||j!=="")&&Ut(i,j):typeof j=="number"&&Ut(i,""+j):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?j!=null&&_==="onScroll"&&ht("scroll",i):j!=null&&z(i,_,j,x))}switch(u){case"input":Sn(i),Nr(i,f,!1);break;case"textarea":Sn(i),Rs(i);break;case"option":f.value!=null&&i.setAttribute("value",""+ve(f.value));break;case"select":i.multiple=!!f.multiple,_=f.value,_!=null?Vn(i,!!f.multiple,_,!1):f.defaultValue!=null&&Vn(i,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(i.onclick=Qc)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return pn(a),null;case 6:if(i&&a.stateNode!=null)v_(i,a,i.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(t(166));if(u=xo(Yl.current),xo(us.current),nd(a)){if(f=a.stateNode,u=a.memoizedProps,f[ls]=a,(_=f.nodeValue!==u)&&(i=sr,i!==null))switch(i.tag){case 3:Kc(f.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Kc(f.nodeValue,u,(i.mode&1)!==0)}_&&(a.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[ls]=a,a.stateNode=f}return pn(a),null;case 13:if(ft(Tt),f=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(vt&&ir!==null&&(a.mode&1)!==0&&(a.flags&128)===0)E0(),Ra(),a.flags|=98560,_=!1;else if(_=nd(a),f!==null&&f.dehydrated!==null){if(i===null){if(!_)throw Error(t(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[ls]=a}else Ra(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;pn(a),_=!1}else Wr!==null&&(jp(Wr),Wr=null),_=!0;if(!_)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(Tt.current&1)!==0?Wt===0&&(Wt=3):Bp())),a.updateQueue!==null&&(a.flags|=4),pn(a),null);case 4:return Na(),bp(i,a),i===null&&zl(a.stateNode.containerInfo),pn(a),null;case 10:return tp(a.type._context),pn(a),null;case 17:return Hn(a.type)&&Xc(),pn(a),null;case 19:if(ft(Tt),_=a.memoizedState,_===null)return pn(a),null;if(f=(a.flags&128)!==0,x=_.rendering,x===null)if(f)tu(_,!1);else{if(Wt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(x=ld(i),x!==null){for(a.flags|=128,tu(_,!1),f=x.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=u,u=a.child;u!==null;)_=u,i=f,_.flags&=14680066,x=_.alternate,x===null?(_.childLanes=0,_.lanes=i,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=x.childLanes,_.lanes=x.lanes,_.child=x.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=x.memoizedProps,_.memoizedState=x.memoizedState,_.updateQueue=x.updateQueue,_.type=x.type,i=x.dependencies,_.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return dt(Tt,Tt.current&1|2),a.child}i=i.sibling}_.tail!==null&&ct()>La&&(a.flags|=128,f=!0,tu(_,!1),a.lanes=4194304)}else{if(!f)if(i=ld(x),i!==null){if(a.flags|=128,f=!0,u=i.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),tu(_,!0),_.tail===null&&_.tailMode==="hidden"&&!x.alternate&&!vt)return pn(a),null}else 2*ct()-_.renderingStartTime>La&&u!==1073741824&&(a.flags|=128,f=!0,tu(_,!1),a.lanes=4194304);_.isBackwards?(x.sibling=a.child,a.child=x):(u=_.last,u!==null?u.sibling=x:a.child=x,_.last=x)}return _.tail!==null?(a=_.tail,_.rendering=a,_.tail=a.sibling,_.renderingStartTime=ct(),a.sibling=null,u=Tt.current,dt(Tt,f?u&1|2:u&1),a):(pn(a),null);case 22:case 23:return Up(),f=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(a.flags|=8192),f&&(a.mode&1)!==0?(or&1073741824)!==0&&(pn(a),a.subtreeFlags&6&&(a.flags|=8192)):pn(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function OA(i,a){switch(Qf(a),a.tag){case 1:return Hn(a.type)&&Xc(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Na(),ft(zn),ft(hn),lp(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return op(a),null;case 13:if(ft(Tt),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));Ra()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return ft(Tt),null;case 4:return Na(),null;case 10:return tp(a.type._context),null;case 22:case 23:return Up(),null;case 24:return null;default:return null}}var yd=!1,mn=!1,VA=typeof WeakSet=="function"?WeakSet:Set,ye=null;function Va(i,a){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){Rt(i,a,f)}else u.current=null}function Ap(i,a,u){try{u()}catch(f){Rt(i,a,f)}}var __=!1;function MA(i,a){if(Uf=yi,i=Xv(),Df(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var m=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var x=0,N=-1,j=-1,Y=0,ne=0,ie=i,te=null;t:for(;;){for(var pe;ie!==u||m!==0&&ie.nodeType!==3||(N=x+m),ie!==_||f!==0&&ie.nodeType!==3||(j=x+f),ie.nodeType===3&&(x+=ie.nodeValue.length),(pe=ie.firstChild)!==null;)te=ie,ie=pe;for(;;){if(ie===i)break t;if(te===u&&++Y===m&&(N=x),te===_&&++ne===f&&(j=x),(pe=ie.nextSibling)!==null)break;ie=te,te=ie.parentNode}ie=pe}u=N===-1||j===-1?null:{start:N,end:j}}else u=null}u=u||{start:0,end:0}}else u=null;for(Bf={focusedElem:i,selectionRange:u},yi=!1,ye=a;ye!==null;)if(a=ye,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,ye=i;else for(;ye!==null;){a=ye;try{var _e=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(_e!==null){var Ee=_e.memoizedProps,kt=_e.memoizedState,q=a.stateNode,U=q.getSnapshotBeforeUpdate(a.elementType===a.type?Ee:qr(a.type,Ee),kt);q.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var G=a.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(oe){Rt(a,a.return,oe)}if(i=a.sibling,i!==null){i.return=a.return,ye=i;break}ye=a.return}return _e=__,__=!1,_e}function nu(i,a,u){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&i)===i){var _=m.destroy;m.destroy=void 0,_!==void 0&&Ap(a,u,_)}m=m.next}while(m!==f)}}function vd(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&i)===i){var f=u.create;u.destroy=f()}u=u.next}while(u!==a)}}function Rp(i){var a=i.ref;if(a!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof a=="function"?a(i):a.current=i}}function w_(i){var a=i.alternate;a!==null&&(i.alternate=null,w_(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[ls],delete a[Wl],delete a[Wf],delete a[vA],delete a[_A])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function E_(i){return i.tag===5||i.tag===3||i.tag===4}function T_(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||E_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Pp(i,a,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(i,a):u.insertBefore(i,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(i,u)):(a=u,a.appendChild(i)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Qc));else if(f!==4&&(i=i.child,i!==null))for(Pp(i,a,u),i=i.sibling;i!==null;)Pp(i,a,u),i=i.sibling}function kp(i,a,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?u.insertBefore(i,a):u.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(kp(i,a,u),i=i.sibling;i!==null;)kp(i,a,u),i=i.sibling}var on=null,Gr=!1;function Ci(i,a,u){for(u=u.child;u!==null;)S_(i,a,u),u=u.sibling}function S_(i,a,u){if(er&&typeof er.onCommitFiberUnmount=="function")try{er.onCommitFiberUnmount(ho,u)}catch{}switch(u.tag){case 5:mn||Va(u,a);case 6:var f=on,m=Gr;on=null,Ci(i,a,u),on=f,Gr=m,on!==null&&(Gr?(i=on,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):on.removeChild(u.stateNode));break;case 18:on!==null&&(Gr?(i=on,u=u.stateNode,i.nodeType===8?Hf(i.parentNode,u):i.nodeType===1&&Hf(i,u),$r(i)):Hf(on,u.stateNode));break;case 4:f=on,m=Gr,on=u.stateNode.containerInfo,Gr=!0,Ci(i,a,u),on=f,Gr=m;break;case 0:case 11:case 14:case 15:if(!mn&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var _=m,x=_.destroy;_=_.tag,x!==void 0&&((_&2)!==0||(_&4)!==0)&&Ap(u,a,x),m=m.next}while(m!==f)}Ci(i,a,u);break;case 1:if(!mn&&(Va(u,a),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(N){Rt(u,a,N)}Ci(i,a,u);break;case 21:Ci(i,a,u);break;case 22:u.mode&1?(mn=(f=mn)||u.memoizedState!==null,Ci(i,a,u),mn=f):Ci(i,a,u);break;default:Ci(i,a,u)}}function x_(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new VA),a.forEach(function(f){var m=WA.bind(null,i,f);u.has(f)||(u.add(f),f.then(m,m))})}}function Kr(i,a){var u=a.deletions;if(u!==null)for(var f=0;f<u.length;f++){var m=u[f];try{var _=i,x=a,N=x;e:for(;N!==null;){switch(N.tag){case 5:on=N.stateNode,Gr=!1;break e;case 3:on=N.stateNode.containerInfo,Gr=!0;break e;case 4:on=N.stateNode.containerInfo,Gr=!0;break e}N=N.return}if(on===null)throw Error(t(160));S_(_,x,m),on=null,Gr=!1;var j=m.alternate;j!==null&&(j.return=null),m.return=null}catch(Y){Rt(m,a,Y)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)I_(a,i),a=a.sibling}function I_(i,a){var u=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Kr(a,i),ds(i),f&4){try{nu(3,i,i.return),vd(3,i)}catch(Ee){Rt(i,i.return,Ee)}try{nu(5,i,i.return)}catch(Ee){Rt(i,i.return,Ee)}}break;case 1:Kr(a,i),ds(i),f&512&&u!==null&&Va(u,u.return);break;case 5:if(Kr(a,i),ds(i),f&512&&u!==null&&Va(u,u.return),i.flags&32){var m=i.stateNode;try{Ut(m,"")}catch(Ee){Rt(i,i.return,Ee)}}if(f&4&&(m=i.stateNode,m!=null)){var _=i.memoizedProps,x=u!==null?u.memoizedProps:_,N=i.type,j=i.updateQueue;if(i.updateQueue=null,j!==null)try{N==="input"&&_.type==="radio"&&_.name!=null&&Dr(m,_),lo(N,x);var Y=lo(N,_);for(x=0;x<j.length;x+=2){var ne=j[x],ie=j[x+1];ne==="style"?ao(m,ie):ne==="dangerouslySetInnerHTML"?Yt(m,ie):ne==="children"?Ut(m,ie):z(m,ne,ie,Y)}switch(N){case"input":Nn(m,_);break;case"textarea":Or(m,_);break;case"select":var te=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!_.multiple;var pe=_.value;pe!=null?Vn(m,!!_.multiple,pe,!1):te!==!!_.multiple&&(_.defaultValue!=null?Vn(m,!!_.multiple,_.defaultValue,!0):Vn(m,!!_.multiple,_.multiple?[]:"",!1))}m[Wl]=_}catch(Ee){Rt(i,i.return,Ee)}}break;case 6:if(Kr(a,i),ds(i),f&4){if(i.stateNode===null)throw Error(t(162));m=i.stateNode,_=i.memoizedProps;try{m.nodeValue=_}catch(Ee){Rt(i,i.return,Ee)}}break;case 3:if(Kr(a,i),ds(i),f&4&&u!==null&&u.memoizedState.isDehydrated)try{$r(a.containerInfo)}catch(Ee){Rt(i,i.return,Ee)}break;case 4:Kr(a,i),ds(i);break;case 13:Kr(a,i),ds(i),m=i.child,m.flags&8192&&(_=m.memoizedState!==null,m.stateNode.isHidden=_,!_||m.alternate!==null&&m.alternate.memoizedState!==null||(Op=ct())),f&4&&x_(i);break;case 22:if(ne=u!==null&&u.memoizedState!==null,i.mode&1?(mn=(Y=mn)||ne,Kr(a,i),mn=Y):Kr(a,i),ds(i),f&8192){if(Y=i.memoizedState!==null,(i.stateNode.isHidden=Y)&&!ne&&(i.mode&1)!==0)for(ye=i,ne=i.child;ne!==null;){for(ie=ye=ne;ye!==null;){switch(te=ye,pe=te.child,te.tag){case 0:case 11:case 14:case 15:nu(4,te,te.return);break;case 1:Va(te,te.return);var _e=te.stateNode;if(typeof _e.componentWillUnmount=="function"){f=te,u=te.return;try{a=f,_e.props=a.memoizedProps,_e.state=a.memoizedState,_e.componentWillUnmount()}catch(Ee){Rt(f,u,Ee)}}break;case 5:Va(te,te.return);break;case 22:if(te.memoizedState!==null){A_(ie);continue}}pe!==null?(pe.return=te,ye=pe):A_(ie)}ne=ne.sibling}e:for(ne=null,ie=i;;){if(ie.tag===5){if(ne===null){ne=ie;try{m=ie.stateNode,Y?(_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(N=ie.stateNode,j=ie.memoizedProps.style,x=j!=null&&j.hasOwnProperty("display")?j.display:null,N.style.display=oo("display",x))}catch(Ee){Rt(i,i.return,Ee)}}}else if(ie.tag===6){if(ne===null)try{ie.stateNode.nodeValue=Y?"":ie.memoizedProps}catch(Ee){Rt(i,i.return,Ee)}}else if((ie.tag!==22&&ie.tag!==23||ie.memoizedState===null||ie===i)&&ie.child!==null){ie.child.return=ie,ie=ie.child;continue}if(ie===i)break e;for(;ie.sibling===null;){if(ie.return===null||ie.return===i)break e;ne===ie&&(ne=null),ie=ie.return}ne===ie&&(ne=null),ie.sibling.return=ie.return,ie=ie.sibling}}break;case 19:Kr(a,i),ds(i),f&4&&x_(i);break;case 21:break;default:Kr(a,i),ds(i)}}function ds(i){var a=i.flags;if(a&2){try{e:{for(var u=i.return;u!==null;){if(E_(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(Ut(m,""),f.flags&=-33);var _=T_(i);kp(i,_,m);break;case 3:case 4:var x=f.stateNode.containerInfo,N=T_(i);Pp(i,N,x);break;default:throw Error(t(161))}}catch(j){Rt(i,i.return,j)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function LA(i,a,u){ye=i,C_(i)}function C_(i,a,u){for(var f=(i.mode&1)!==0;ye!==null;){var m=ye,_=m.child;if(m.tag===22&&f){var x=m.memoizedState!==null||yd;if(!x){var N=m.alternate,j=N!==null&&N.memoizedState!==null||mn;N=yd;var Y=mn;if(yd=x,(mn=j)&&!Y)for(ye=m;ye!==null;)x=ye,j=x.child,x.tag===22&&x.memoizedState!==null?R_(m):j!==null?(j.return=x,ye=j):R_(m);for(;_!==null;)ye=_,C_(_),_=_.sibling;ye=m,yd=N,mn=Y}b_(i)}else(m.subtreeFlags&8772)!==0&&_!==null?(_.return=m,ye=_):b_(i)}}function b_(i){for(;ye!==null;){var a=ye;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:mn||vd(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!mn)if(u===null)f.componentDidMount();else{var m=a.elementType===a.type?u.memoizedProps:qr(a.type,u.memoizedProps);f.componentDidUpdate(m,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var _=a.updateQueue;_!==null&&A0(a,_,f);break;case 3:var x=a.updateQueue;if(x!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}A0(a,x,u)}break;case 5:var N=a.stateNode;if(u===null&&a.flags&4){u=N;var j=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&u.focus();break;case"img":j.src&&(u.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var Y=a.alternate;if(Y!==null){var ne=Y.memoizedState;if(ne!==null){var ie=ne.dehydrated;ie!==null&&$r(ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}mn||a.flags&512&&Rp(a)}catch(te){Rt(a,a.return,te)}}if(a===i){ye=null;break}if(u=a.sibling,u!==null){u.return=a.return,ye=u;break}ye=a.return}}function A_(i){for(;ye!==null;){var a=ye;if(a===i){ye=null;break}var u=a.sibling;if(u!==null){u.return=a.return,ye=u;break}ye=a.return}}function R_(i){for(;ye!==null;){var a=ye;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{vd(4,a)}catch(j){Rt(a,u,j)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var m=a.return;try{f.componentDidMount()}catch(j){Rt(a,m,j)}}var _=a.return;try{Rp(a)}catch(j){Rt(a,_,j)}break;case 5:var x=a.return;try{Rp(a)}catch(j){Rt(a,x,j)}}}catch(j){Rt(a,a.return,j)}if(a===i){ye=null;break}var N=a.sibling;if(N!==null){N.return=a.return,ye=N;break}ye=a.return}}var jA=Math.ceil,_d=Q.ReactCurrentDispatcher,Dp=Q.ReactCurrentOwner,_r=Q.ReactCurrentBatchConfig,Ze=0,Jt=null,Vt=null,an=0,or=0,Ma=Ei(0),Wt=0,ru=null,Co=0,wd=0,Np=0,su=null,qn=null,Op=0,La=1/0,zs=null,Ed=!1,Vp=null,bi=null,Td=!1,Ai=null,Sd=0,iu=0,Mp=null,xd=-1,Id=0;function Pn(){return(Ze&6)!==0?ct():xd!==-1?xd:xd=ct()}function Ri(i){return(i.mode&1)===0?1:(Ze&2)!==0&&an!==0?an&-an:EA.transition!==null?(Id===0&&(Id=po()),Id):(i=Ke,i!==0||(i=window.event,i=i===void 0?16:Nl(i.type)),i)}function Qr(i,a,u,f){if(50<iu)throw iu=0,Mp=null,Error(t(185));fi(i,u,f),((Ze&2)===0||i!==Jt)&&(i===Jt&&((Ze&2)===0&&(wd|=u),Wt===4&&Pi(i,an)),Gn(i,f),u===1&&Ze===0&&(a.mode&1)===0&&(La=ct()+500,Jc&&Si()))}function Gn(i,a){var u=i.callbackNode;ks(i,a);var f=fo(i,i===Jt?an:0);if(f===0)u!==null&&Al(u),i.callbackNode=null,i.callbackPriority=0;else if(a=f&-f,i.callbackPriority!==a){if(u!=null&&Al(u),a===1)i.tag===0?wA(k_.bind(null,i)):g0(k_.bind(null,i)),gA(function(){(Ze&6)===0&&Si()}),u=null;else{switch(mi(f)){case 1:u=co;break;case 4:u=ci;break;case 16:u=hr;break;case 536870912:u=Ic;break;default:u=hr}u=F_(u,P_.bind(null,i))}i.callbackPriority=a,i.callbackNode=u}}function P_(i,a){if(xd=-1,Id=0,(Ze&6)!==0)throw Error(t(327));var u=i.callbackNode;if(ja()&&i.callbackNode!==u)return null;var f=fo(i,i===Jt?an:0);if(f===0)return null;if((f&30)!==0||(f&i.expiredLanes)!==0||a)a=Cd(i,f);else{a=f;var m=Ze;Ze|=2;var _=N_();(Jt!==i||an!==a)&&(zs=null,La=ct()+500,Ao(i,a));do try{BA();break}catch(N){D_(i,N)}while(!0);ep(),_d.current=_,Ze=m,Vt!==null?a=0:(Jt=null,an=0,a=Wt)}if(a!==0){if(a===2&&(m=tr(i),m!==0&&(f=m,a=Lp(i,m))),a===1)throw u=ru,Ao(i,0),Pi(i,f),Gn(i,ct()),u;if(a===6)Pi(i,f);else{if(m=i.current.alternate,(f&30)===0&&!FA(m)&&(a=Cd(i,f),a===2&&(_=tr(i),_!==0&&(f=_,a=Lp(i,_))),a===1))throw u=ru,Ao(i,0),Pi(i,f),Gn(i,ct()),u;switch(i.finishedWork=m,i.finishedLanes=f,a){case 0:case 1:throw Error(t(345));case 2:Ro(i,qn,zs);break;case 3:if(Pi(i,f),(f&130023424)===f&&(a=Op+500-ct(),10<a)){if(fo(i,0)!==0)break;if(m=i.suspendedLanes,(m&f)!==f){Pn(),i.pingedLanes|=i.suspendedLanes&m;break}i.timeoutHandle=zf(Ro.bind(null,i,qn,zs),a);break}Ro(i,qn,zs);break;case 4:if(Pi(i,f),(f&4194240)===f)break;for(a=i.eventTimes,m=-1;0<f;){var x=31-bn(f);_=1<<x,x=a[x],x>m&&(m=x),f&=~_}if(f=m,f=ct()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*jA(f/1960))-f,10<f){i.timeoutHandle=zf(Ro.bind(null,i,qn,zs),f);break}Ro(i,qn,zs);break;case 5:Ro(i,qn,zs);break;default:throw Error(t(329))}}}return Gn(i,ct()),i.callbackNode===u?P_.bind(null,i):null}function Lp(i,a){var u=su;return i.current.memoizedState.isDehydrated&&(Ao(i,a).flags|=256),i=Cd(i,a),i!==2&&(a=qn,qn=u,a!==null&&jp(a)),i}function jp(i){qn===null?qn=i:qn.push.apply(qn,i)}function FA(i){for(var a=i;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var m=u[f],_=m.getSnapshot;m=m.value;try{if(!Hr(_(),m))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Pi(i,a){for(a&=~Np,a&=~wd,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var u=31-bn(a),f=1<<u;i[u]=-1,a&=~f}}function k_(i){if((Ze&6)!==0)throw Error(t(327));ja();var a=fo(i,0);if((a&1)===0)return Gn(i,ct()),null;var u=Cd(i,a);if(i.tag!==0&&u===2){var f=tr(i);f!==0&&(a=f,u=Lp(i,f))}if(u===1)throw u=ru,Ao(i,0),Pi(i,a),Gn(i,ct()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,Ro(i,qn,zs),Gn(i,ct()),null}function Fp(i,a){var u=Ze;Ze|=1;try{return i(a)}finally{Ze=u,Ze===0&&(La=ct()+500,Jc&&Si())}}function bo(i){Ai!==null&&Ai.tag===0&&(Ze&6)===0&&ja();var a=Ze;Ze|=1;var u=_r.transition,f=Ke;try{if(_r.transition=null,Ke=1,i)return i()}finally{Ke=f,_r.transition=u,Ze=a,(Ze&6)===0&&Si()}}function Up(){or=Ma.current,ft(Ma)}function Ao(i,a){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,mA(u)),Vt!==null)for(u=Vt.return;u!==null;){var f=u;switch(Qf(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Xc();break;case 3:Na(),ft(zn),ft(hn),lp();break;case 5:op(f);break;case 4:Na();break;case 13:ft(Tt);break;case 19:ft(Tt);break;case 10:tp(f.type._context);break;case 22:case 23:Up()}u=u.return}if(Jt=i,Vt=i=ki(i.current,null),an=or=a,Wt=0,ru=null,Np=wd=Co=0,qn=su=null,So!==null){for(a=0;a<So.length;a++)if(u=So[a],f=u.interleaved,f!==null){u.interleaved=null;var m=f.next,_=u.pending;if(_!==null){var x=_.next;_.next=m,f.next=x}u.pending=f}So=null}return i}function D_(i,a){do{var u=Vt;try{if(ep(),ud.current=fd,cd){for(var f=St.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}cd=!1}if(Io=0,Zt=Ht=St=null,Xl=!1,Zl=0,Dp.current=null,u===null||u.return===null){Wt=1,ru=a,Vt=null;break}e:{var _=i,x=u.return,N=u,j=a;if(a=an,N.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var Y=j,ne=N,ie=ne.tag;if((ne.mode&1)===0&&(ie===0||ie===11||ie===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var pe=r_(x);if(pe!==null){pe.flags&=-257,s_(pe,x,N,_,a),pe.mode&1&&n_(_,Y,a),a=pe,j=Y;var _e=a.updateQueue;if(_e===null){var Ee=new Set;Ee.add(j),a.updateQueue=Ee}else _e.add(j);break e}else{if((a&1)===0){n_(_,Y,a),Bp();break e}j=Error(t(426))}}else if(vt&&N.mode&1){var kt=r_(x);if(kt!==null){(kt.flags&65536)===0&&(kt.flags|=256),s_(kt,x,N,_,a),Zf(Oa(j,N));break e}}_=j=Oa(j,N),Wt!==4&&(Wt=2),su===null?su=[_]:su.push(_),_=x;do{switch(_.tag){case 3:_.flags|=65536,a&=-a,_.lanes|=a;var q=e_(_,j,a);b0(_,q);break e;case 1:N=j;var U=_.type,G=_.stateNode;if((_.flags&128)===0&&(typeof U.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(bi===null||!bi.has(G)))){_.flags|=65536,a&=-a,_.lanes|=a;var oe=t_(_,N,a);b0(_,oe);break e}}_=_.return}while(_!==null)}V_(u)}catch(Se){a=Se,Vt===u&&u!==null&&(Vt=u=u.return);continue}break}while(!0)}function N_(){var i=_d.current;return _d.current=fd,i===null?fd:i}function Bp(){(Wt===0||Wt===3||Wt===2)&&(Wt=4),Jt===null||(Co&268435455)===0&&(wd&268435455)===0||Pi(Jt,an)}function Cd(i,a){var u=Ze;Ze|=2;var f=N_();(Jt!==i||an!==a)&&(zs=null,Ao(i,a));do try{UA();break}catch(m){D_(i,m)}while(!0);if(ep(),Ze=u,_d.current=f,Vt!==null)throw Error(t(261));return Jt=null,an=0,Wt}function UA(){for(;Vt!==null;)O_(Vt)}function BA(){for(;Vt!==null&&!Sc();)O_(Vt)}function O_(i){var a=j_(i.alternate,i,or);i.memoizedProps=i.pendingProps,a===null?V_(i):Vt=a,Dp.current=null}function V_(i){var a=i;do{var u=a.alternate;if(i=a.return,(a.flags&32768)===0){if(u=NA(u,a,or),u!==null){Vt=u;return}}else{if(u=OA(u,a),u!==null){u.flags&=32767,Vt=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Wt=6,Vt=null;return}}if(a=a.sibling,a!==null){Vt=a;return}Vt=a=i}while(a!==null);Wt===0&&(Wt=5)}function Ro(i,a,u){var f=Ke,m=_r.transition;try{_r.transition=null,Ke=1,$A(i,a,u,f)}finally{_r.transition=m,Ke=f}return null}function $A(i,a,u,f){do ja();while(Ai!==null);if((Ze&6)!==0)throw Error(t(327));u=i.finishedWork;var m=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var _=u.lanes|u.childLanes;if(lt(i,_),i===Jt&&(Vt=Jt=null,an=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Td||(Td=!0,F_(hr,function(){return ja(),null})),_=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||_){_=_r.transition,_r.transition=null;var x=Ke;Ke=1;var N=Ze;Ze|=4,Dp.current=null,MA(i,u),I_(u,i),lA(Bf),yi=!!Uf,Bf=Uf=null,i.current=u,LA(u),xf(),Ze=N,Ke=x,_r.transition=_}else i.current=u;if(Td&&(Td=!1,Ai=i,Sd=m),_=i.pendingLanes,_===0&&(bi=null),Cc(u.stateNode),Gn(i,ct()),a!==null)for(f=i.onRecoverableError,u=0;u<a.length;u++)m=a[u],f(m.value,{componentStack:m.stack,digest:m.digest});if(Ed)throw Ed=!1,i=Vp,Vp=null,i;return(Sd&1)!==0&&i.tag!==0&&ja(),_=i.pendingLanes,(_&1)!==0?i===Mp?iu++:(iu=0,Mp=i):iu=0,Si(),null}function ja(){if(Ai!==null){var i=mi(Sd),a=_r.transition,u=Ke;try{if(_r.transition=null,Ke=16>i?16:i,Ai===null)var f=!1;else{if(i=Ai,Ai=null,Sd=0,(Ze&6)!==0)throw Error(t(331));var m=Ze;for(Ze|=4,ye=i.current;ye!==null;){var _=ye,x=_.child;if((ye.flags&16)!==0){var N=_.deletions;if(N!==null){for(var j=0;j<N.length;j++){var Y=N[j];for(ye=Y;ye!==null;){var ne=ye;switch(ne.tag){case 0:case 11:case 15:nu(8,ne,_)}var ie=ne.child;if(ie!==null)ie.return=ne,ye=ie;else for(;ye!==null;){ne=ye;var te=ne.sibling,pe=ne.return;if(w_(ne),ne===Y){ye=null;break}if(te!==null){te.return=pe,ye=te;break}ye=pe}}}var _e=_.alternate;if(_e!==null){var Ee=_e.child;if(Ee!==null){_e.child=null;do{var kt=Ee.sibling;Ee.sibling=null,Ee=kt}while(Ee!==null)}}ye=_}}if((_.subtreeFlags&2064)!==0&&x!==null)x.return=_,ye=x;else e:for(;ye!==null;){if(_=ye,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:nu(9,_,_.return)}var q=_.sibling;if(q!==null){q.return=_.return,ye=q;break e}ye=_.return}}var U=i.current;for(ye=U;ye!==null;){x=ye;var G=x.child;if((x.subtreeFlags&2064)!==0&&G!==null)G.return=x,ye=G;else e:for(x=U;ye!==null;){if(N=ye,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:vd(9,N)}}catch(Se){Rt(N,N.return,Se)}if(N===x){ye=null;break e}var oe=N.sibling;if(oe!==null){oe.return=N.return,ye=oe;break e}ye=N.return}}if(Ze=m,Si(),er&&typeof er.onPostCommitFiberRoot=="function")try{er.onPostCommitFiberRoot(ho,i)}catch{}f=!0}return f}finally{Ke=u,_r.transition=a}}return!1}function M_(i,a,u){a=Oa(u,a),a=e_(i,a,1),i=Ii(i,a,1),a=Pn(),i!==null&&(fi(i,1,a),Gn(i,a))}function Rt(i,a,u){if(i.tag===3)M_(i,i,u);else for(;a!==null;){if(a.tag===3){M_(a,i,u);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(bi===null||!bi.has(f))){i=Oa(u,i),i=t_(a,i,1),a=Ii(a,i,1),i=Pn(),a!==null&&(fi(a,1,i),Gn(a,i));break}}a=a.return}}function zA(i,a,u){var f=i.pingCache;f!==null&&f.delete(a),a=Pn(),i.pingedLanes|=i.suspendedLanes&u,Jt===i&&(an&u)===u&&(Wt===4||Wt===3&&(an&130023424)===an&&500>ct()-Op?Ao(i,0):Np|=u),Gn(i,a)}function L_(i,a){a===0&&((i.mode&1)===0?a=1:(a=aa,aa<<=1,(aa&130023424)===0&&(aa=4194304)));var u=Pn();i=Us(i,a),i!==null&&(fi(i,a,u),Gn(i,u))}function HA(i){var a=i.memoizedState,u=0;a!==null&&(u=a.retryLane),L_(i,u)}function WA(i,a){var u=0;switch(i.tag){case 13:var f=i.stateNode,m=i.memoizedState;m!==null&&(u=m.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(a),L_(i,u)}var j_;j_=function(i,a,u){if(i!==null)if(i.memoizedProps!==a.pendingProps||zn.current)Wn=!0;else{if((i.lanes&u)===0&&(a.flags&128)===0)return Wn=!1,DA(i,a,u);Wn=(i.flags&131072)!==0}else Wn=!1,vt&&(a.flags&1048576)!==0&&y0(a,td,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;gd(i,a),i=a.pendingProps;var m=Ca(a,hn.current);Da(a,u),m=dp(null,a,f,i,m,u);var _=hp();return a.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Hn(f)?(_=!0,Zc(a)):_=!1,a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,sp(a),m.updater=pd,a.stateNode=m,m._reactInternals=a,vp(a,f,i,u),a=Tp(null,a,f,!0,_,u)):(a.tag=0,vt&&_&&Kf(a),Rn(null,a,m,u),a=a.child),a;case 16:f=a.elementType;e:{switch(gd(i,a),i=a.pendingProps,m=f._init,f=m(f._payload),a.type=f,m=a.tag=GA(f),i=qr(f,i),m){case 0:a=Ep(null,a,f,i,u);break e;case 1:a=c_(null,a,f,i,u);break e;case 11:a=i_(null,a,f,i,u);break e;case 14:a=o_(null,a,f,qr(f.type,i),u);break e}throw Error(t(306,f,""))}return a;case 0:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:qr(f,m),Ep(i,a,f,m,u);case 1:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:qr(f,m),c_(i,a,f,m,u);case 3:e:{if(d_(a),i===null)throw Error(t(387));f=a.pendingProps,_=a.memoizedState,m=_.element,C0(i,a),ad(a,f,null,u);var x=a.memoizedState;if(f=x.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){m=Oa(Error(t(423)),a),a=h_(i,a,f,u,m);break e}else if(f!==m){m=Oa(Error(t(424)),a),a=h_(i,a,f,u,m);break e}else for(ir=wi(a.stateNode.containerInfo.firstChild),sr=a,vt=!0,Wr=null,u=x0(a,null,f,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Ra(),f===m){a=$s(i,a,u);break e}Rn(i,a,f,u)}a=a.child}return a;case 5:return R0(a),i===null&&Xf(a),f=a.type,m=a.pendingProps,_=i!==null?i.memoizedProps:null,x=m.children,$f(f,m)?x=null:_!==null&&$f(f,_)&&(a.flags|=32),u_(i,a),Rn(i,a,x,u),a.child;case 6:return i===null&&Xf(a),null;case 13:return f_(i,a,u);case 4:return ip(a,a.stateNode.containerInfo),f=a.pendingProps,i===null?a.child=Pa(a,null,f,u):Rn(i,a,f,u),a.child;case 11:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:qr(f,m),i_(i,a,f,m,u);case 7:return Rn(i,a,a.pendingProps,u),a.child;case 8:return Rn(i,a,a.pendingProps.children,u),a.child;case 12:return Rn(i,a,a.pendingProps.children,u),a.child;case 10:e:{if(f=a.type._context,m=a.pendingProps,_=a.memoizedProps,x=m.value,dt(sd,f._currentValue),f._currentValue=x,_!==null)if(Hr(_.value,x)){if(_.children===m.children&&!zn.current){a=$s(i,a,u);break e}}else for(_=a.child,_!==null&&(_.return=a);_!==null;){var N=_.dependencies;if(N!==null){x=_.child;for(var j=N.firstContext;j!==null;){if(j.context===f){if(_.tag===1){j=Bs(-1,u&-u),j.tag=2;var Y=_.updateQueue;if(Y!==null){Y=Y.shared;var ne=Y.pending;ne===null?j.next=j:(j.next=ne.next,ne.next=j),Y.pending=j}}_.lanes|=u,j=_.alternate,j!==null&&(j.lanes|=u),np(_.return,u,a),N.lanes|=u;break}j=j.next}}else if(_.tag===10)x=_.type===a.type?null:_.child;else if(_.tag===18){if(x=_.return,x===null)throw Error(t(341));x.lanes|=u,N=x.alternate,N!==null&&(N.lanes|=u),np(x,u,a),x=_.sibling}else x=_.child;if(x!==null)x.return=_;else for(x=_;x!==null;){if(x===a){x=null;break}if(_=x.sibling,_!==null){_.return=x.return,x=_;break}x=x.return}_=x}Rn(i,a,m.children,u),a=a.child}return a;case 9:return m=a.type,f=a.pendingProps.children,Da(a,u),m=yr(m),f=f(m),a.flags|=1,Rn(i,a,f,u),a.child;case 14:return f=a.type,m=qr(f,a.pendingProps),m=qr(f.type,m),o_(i,a,f,m,u);case 15:return a_(i,a,a.type,a.pendingProps,u);case 17:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:qr(f,m),gd(i,a),a.tag=1,Hn(f)?(i=!0,Zc(a)):i=!1,Da(a,u),Z0(a,f,m),vp(a,f,m,u),Tp(null,a,f,!0,i,u);case 19:return m_(i,a,u);case 22:return l_(i,a,u)}throw Error(t(156,a.tag))};function F_(i,a){return ia(i,a)}function qA(i,a,u,f){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wr(i,a,u,f){return new qA(i,a,u,f)}function $p(i){return i=i.prototype,!(!i||!i.isReactComponent)}function GA(i){if(typeof i=="function")return $p(i)?1:0;if(i!=null){if(i=i.$$typeof,i===H)return 11;if(i===st)return 14}return 2}function ki(i,a){var u=i.alternate;return u===null?(u=wr(i.tag,a,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=a,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,a=i.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function bd(i,a,u,f,m,_){var x=2;if(f=i,typeof i=="function")$p(i)&&(x=1);else if(typeof i=="string")x=5;else e:switch(i){case D:return Po(u.children,m,_,a);case I:x=8,m|=8;break;case k:return i=wr(12,u,a,m|2),i.elementType=k,i.lanes=_,i;case V:return i=wr(13,u,a,m),i.elementType=V,i.lanes=_,i;case rt:return i=wr(19,u,a,m),i.elementType=rt,i.lanes=_,i;case Ie:return Ad(u,m,_,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case M:x=10;break e;case L:x=9;break e;case H:x=11;break e;case st:x=14;break e;case be:x=16,f=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=wr(x,u,a,m),a.elementType=i,a.type=f,a.lanes=_,a}function Po(i,a,u,f){return i=wr(7,i,f,a),i.lanes=u,i}function Ad(i,a,u,f){return i=wr(22,i,f,a),i.elementType=Ie,i.lanes=u,i.stateNode={isHidden:!1},i}function zp(i,a,u){return i=wr(6,i,null,a),i.lanes=u,i}function Hp(i,a,u){return a=wr(4,i.children!==null?i.children:[],i.key,a),a.lanes=u,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function KA(i,a,u,f,m){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hi(0),this.expirationTimes=hi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hi(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Wp(i,a,u,f,m,_,x,N,j){return i=new KA(i,a,u,N,j),a===1?(a=1,_===!0&&(a|=8)):a=0,_=wr(3,null,null,a),i.current=_,_.stateNode=i,_.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},sp(_),i}function QA(i,a,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J,key:f==null?null:""+f,children:i,containerInfo:a,implementation:u}}function U_(i){if(!i)return Ti;i=i._reactInternals;e:{if(Lr(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Hn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(Hn(u))return p0(i,u,a)}return a}function B_(i,a,u,f,m,_,x,N,j){return i=Wp(u,f,!0,i,m,_,x,N,j),i.context=U_(null),u=i.current,f=Pn(),m=Ri(u),_=Bs(f,m),_.callback=a??null,Ii(u,_,m),i.current.lanes=m,fi(i,m,f),Gn(i,f),i}function Rd(i,a,u,f){var m=a.current,_=Pn(),x=Ri(m);return u=U_(u),a.context===null?a.context=u:a.pendingContext=u,a=Bs(_,x),a.payload={element:i},f=f===void 0?null:f,f!==null&&(a.callback=f),i=Ii(m,a,x),i!==null&&(Qr(i,m,x,_),od(i,m,x)),x}function Pd(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function $_(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<a?u:a}}function qp(i,a){$_(i,a),(i=i.alternate)&&$_(i,a)}function YA(){return null}var z_=typeof reportError=="function"?reportError:function(i){console.error(i)};function Gp(i){this._internalRoot=i}kd.prototype.render=Gp.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));Rd(i,a,null,null)},kd.prototype.unmount=Gp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;bo(function(){Rd(null,i,null,null)}),a[Ms]=null}};function kd(i){this._internalRoot=i}kd.prototype.unstable_scheduleHydration=function(i){if(i){var a=kc();i={blockedOn:null,target:i,priority:a};for(var u=0;u<ss.length&&a!==0&&a<ss[u].priority;u++);ss.splice(u,0,i),u===0&&Oc(i)}};function Kp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Dd(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function H_(){}function XA(i,a,u,f,m){if(m){if(typeof f=="function"){var _=f;f=function(){var Y=Pd(x);_.call(Y)}}var x=B_(a,f,i,0,null,!1,!1,"",H_);return i._reactRootContainer=x,i[Ms]=x.current,zl(i.nodeType===8?i.parentNode:i),bo(),x}for(;m=i.lastChild;)i.removeChild(m);if(typeof f=="function"){var N=f;f=function(){var Y=Pd(j);N.call(Y)}}var j=Wp(i,0,!1,null,null,!1,!1,"",H_);return i._reactRootContainer=j,i[Ms]=j.current,zl(i.nodeType===8?i.parentNode:i),bo(function(){Rd(a,j,u,f)}),j}function Nd(i,a,u,f,m){var _=u._reactRootContainer;if(_){var x=_;if(typeof m=="function"){var N=m;m=function(){var j=Pd(x);N.call(j)}}Rd(a,x,i,m)}else x=XA(u,a,i,m,f);return Pd(x)}Rc=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var u=di(a.pendingLanes);u!==0&&(pi(a,u|1),Gn(a,ct()),(Ze&6)===0&&(La=ct()+500,Si()))}break;case 13:bo(function(){var f=Us(i,1);if(f!==null){var m=Pn();Qr(f,i,1,m)}}),qp(i,1)}},la=function(i){if(i.tag===13){var a=Us(i,134217728);if(a!==null){var u=Pn();Qr(a,i,134217728,u)}qp(i,134217728)}},Pc=function(i){if(i.tag===13){var a=Ri(i),u=Us(i,a);if(u!==null){var f=Pn();Qr(u,i,a,f)}qp(i,a)}},kc=function(){return Ke},Dc=function(i,a){var u=Ke;try{return Ke=i,a()}finally{Ke=u}},ui=function(i,a,u){switch(a){case"input":if(Nn(i,u),a=u.name,u.type==="radio"&&a!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var f=u[a];if(f!==i&&f.form===i.form){var m=Yc(f);if(!m)throw Error(t(90));cr(f),Nn(f,m)}}}break;case"textarea":Or(i,u);break;case"select":a=u.value,a!=null&&Vn(i,!!u.multiple,a,!1)}},gt=Fp,Bt=bo;var ZA={usingClientEntryPoint:!1,Events:[ql,xa,Yc,De,mt,Fp]},ou={findFiberByHostInstance:_o,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},JA={bundleType:ou.bundleType,version:ou.version,rendererPackageName:ou.rendererPackageName,rendererConfig:ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=bl(i),i===null?null:i.stateNode},findFiberByHostInstance:ou.findFiberByHostInstance||YA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Od.isDisabled&&Od.supportsFiber)try{ho=Od.inject(JA),er=Od}catch{}}return Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZA,Kn.createPortal=function(i,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kp(a))throw Error(t(200));return QA(i,a,null,u)},Kn.createRoot=function(i,a){if(!Kp(i))throw Error(t(299));var u=!1,f="",m=z_;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(m=a.onRecoverableError)),a=Wp(i,1,!1,null,null,u,!1,f,m),i[Ms]=a.current,zl(i.nodeType===8?i.parentNode:i),new Gp(a)},Kn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=bl(a),i=i===null?null:i.stateNode,i},Kn.flushSync=function(i){return bo(i)},Kn.hydrate=function(i,a,u){if(!Dd(a))throw Error(t(200));return Nd(null,i,a,!0,u)},Kn.hydrateRoot=function(i,a,u){if(!Kp(i))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,m=!1,_="",x=z_;if(u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onRecoverableError!==void 0&&(x=u.onRecoverableError)),a=B_(a,null,i,1,u??null,m,!1,_,x),i[Ms]=a.current,zl(i),f)for(i=0;i<f.length;i++)u=f[i],m=u._getVersion,m=m(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,m]:a.mutableSourceEagerHydrationData.push(u,m);return new kd(a)},Kn.render=function(i,a,u){if(!Dd(a))throw Error(t(200));return Nd(null,i,a,!1,u)},Kn.unmountComponentAtNode=function(i){if(!Dd(i))throw Error(t(40));return i._reactRootContainer?(bo(function(){Nd(null,null,i,!1,function(){i._reactRootContainer=null,i[Ms]=null})}),!0):!1},Kn.unstable_batchedUpdates=Fp,Kn.unstable_renderSubtreeIntoContainer=function(i,a,u,f){if(!Dd(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Nd(i,a,u,!1,f)},Kn.version="18.3.1-next-f1338f8080-20240426",Kn}var Z_;function LS(){if(Z_)return Xp.exports;Z_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Xp.exports=oR(),Xp.exports}var J_;function aR(){if(J_)return Vd;J_=1;var n=LS();return Vd.createRoot=n.createRoot,Vd.hydrateRoot=n.hydrateRoot,Vd}var lR=aR(),lu={},ew;function uR(){if(ew)return lu;ew=1,Object.defineProperty(lu,"__esModule",{value:!0}),lu.parse=l,lu.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const w=function(){};return w.prototype=Object.create(null),w})();function l(w,T){const C=new o,R=w.length;if(R<2)return C;const A=(T==null?void 0:T.decode)||g;let O=0;do{const B=w.indexOf("=",O);if(B===-1)break;const z=w.indexOf(";",O),Q=z===-1?R:z;if(B>Q){O=w.lastIndexOf(";",B-1)+1;continue}const K=c(w,O,B),J=h(w,B,K),D=w.slice(K,J);if(C[D]===void 0){let I=c(w,B+1,Q),k=h(w,Q,I);const M=A(w.slice(I,k));C[D]=M}O=Q+1}while(O<R);return C}function c(w,T,C){do{const R=w.charCodeAt(T);if(R!==32&&R!==9)return T}while(++T<C);return C}function h(w,T,C){for(;T>C;){const R=w.charCodeAt(--T);if(R!==32&&R!==9)return T+1}return C}function p(w,T,C){const R=(C==null?void 0:C.encode)||encodeURIComponent;if(!n.test(w))throw new TypeError(`argument name is invalid: ${w}`);const A=R(T);if(!e.test(A))throw new TypeError(`argument val is invalid: ${T}`);let O=w+"="+A;if(!C)return O;if(C.maxAge!==void 0){if(!Number.isInteger(C.maxAge))throw new TypeError(`option maxAge is invalid: ${C.maxAge}`);O+="; Max-Age="+C.maxAge}if(C.domain){if(!t.test(C.domain))throw new TypeError(`option domain is invalid: ${C.domain}`);O+="; Domain="+C.domain}if(C.path){if(!r.test(C.path))throw new TypeError(`option path is invalid: ${C.path}`);O+="; Path="+C.path}if(C.expires){if(!y(C.expires)||!Number.isFinite(C.expires.valueOf()))throw new TypeError(`option expires is invalid: ${C.expires}`);O+="; Expires="+C.expires.toUTCString()}if(C.httpOnly&&(O+="; HttpOnly"),C.secure&&(O+="; Secure"),C.partitioned&&(O+="; Partitioned"),C.priority)switch(typeof C.priority=="string"?C.priority.toLowerCase():void 0){case"low":O+="; Priority=Low";break;case"medium":O+="; Priority=Medium";break;case"high":O+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${C.priority}`)}if(C.sameSite)switch(typeof C.sameSite=="string"?C.sameSite.toLowerCase():C.sameSite){case!0:case"strict":O+="; SameSite=Strict";break;case"lax":O+="; SameSite=Lax";break;case"none":O+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${C.sameSite}`)}return O}function g(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch{return w}}function y(w){return s.call(w)==="[object Date]"}return lu}uR();var tw="popstate";function cR(n={}){function e(r,s){let{pathname:o,search:l,hash:c}=r.location;return jm("",{pathname:o,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Ou(s)}return hR(e,t,null,n)}function Ct(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ss(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function dR(){return Math.random().toString(36).substring(2,10)}function nw(n,e){return{usr:n.state,key:n.key,idx:e}}function jm(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?dl(e):e,state:t,key:e&&e.key||r||dR()}}function Ou({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function dl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function hR(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,c="POP",h=null,p=g();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function g(){return(l.state||{idx:null}).idx}function y(){c="POP";let A=g(),O=A==null?null:A-p;p=A,h&&h({action:c,location:R.location,delta:O})}function w(A,O){c="PUSH";let B=jm(R.location,A,O);p=g()+1;let z=nw(B,p),Q=R.createHref(B);try{l.pushState(z,"",Q)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;s.location.assign(Q)}o&&h&&h({action:c,location:R.location,delta:1})}function T(A,O){c="REPLACE";let B=jm(R.location,A,O);p=g();let z=nw(B,p),Q=R.createHref(B);l.replaceState(z,"",Q),o&&h&&h({action:c,location:R.location,delta:0})}function C(A){return fR(A)}let R={get action(){return c},get location(){return n(s,l)},listen(A){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(tw,y),h=A,()=>{s.removeEventListener(tw,y),h=null}},createHref(A){return e(s,A)},createURL:C,encodeLocation(A){let O=C(A);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:w,replace:T,go(A){return l.go(A)}};return R}function fR(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ct(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Ou(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function jS(n,e,t="/"){return pR(n,e,t,!1)}function pR(n,e,t,r){let s=typeof e=="string"?dl(e):e,o=Ys(s.pathname||"/",t);if(o==null)return null;let l=FS(n);mR(l);let c=null;for(let h=0;c==null&&h<l.length;++h){let p=CR(o);c=xR(l[h],p,r)}return c}function FS(n,e=[],t=[],r=""){let s=(o,l,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};h.relativePath.startsWith("/")&&(Ct(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length));let p=Gs([r,h.relativePath]),g=t.concat(h);o.children&&o.children.length>0&&(Ct(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),FS(o.children,e,g,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:TR(p,o.index),routesMeta:g})};return n.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,l);else for(let h of US(o.path))s(o,l,h)}),e}function US(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=US(r.join("/")),c=[];return c.push(...l.map(h=>h===""?o:[o,h].join("/"))),s&&c.push(...l),c.map(h=>n.startsWith("/")&&h===""?"/":h)}function mR(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:SR(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var gR=/^:[\w-]+$/,yR=3,vR=2,_R=1,wR=10,ER=-2,rw=n=>n==="*";function TR(n,e){let t=n.split("/"),r=t.length;return t.some(rw)&&(r+=ER),e&&(r+=vR),t.filter(s=>!rw(s)).reduce((s,o)=>s+(gR.test(o)?yR:o===""?_R:wR),r)}function SR(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function xR(n,e,t=!1){let{routesMeta:r}=n,s={},o="/",l=[];for(let c=0;c<r.length;++c){let h=r[c],p=c===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",y=fh({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},g),w=h.route;if(!y&&p&&t&&!r[r.length-1].route.index&&(y=fh({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!y)return null;Object.assign(s,y.params),l.push({params:s,pathname:Gs([o,y.pathname]),pathnameBase:PR(Gs([o,y.pathnameBase])),route:w}),y.pathnameBase!=="/"&&(o=Gs([o,y.pathnameBase]))}return l}function fh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=IR(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((p,{paramName:g,isOptional:y},w)=>{if(g==="*"){let C=c[w]||"";l=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}const T=c[w];return y&&!T?p[g]=void 0:p[g]=(T||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:n}}function IR(n,e=!1,t=!0){Ss(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,h)=>(r.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function CR(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ss(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ys(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function bR(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?dl(n):n;return{pathname:t?t.startsWith("/")?t:AR(t,e):e,search:kR(r),hash:DR(s)}}function AR(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function em(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function RR(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function BS(n){let e=RR(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function $S(n,e,t,r=!1){let s;typeof n=="string"?s=dl(n):(s={...n},Ct(!s.pathname||!s.pathname.includes("?"),em("?","pathname","search",s)),Ct(!s.pathname||!s.pathname.includes("#"),em("#","pathname","hash",s)),Ct(!s.search||!s.search.includes("#"),em("#","search","hash",s)));let o=n===""||s.pathname==="",l=o?"/":s.pathname,c;if(l==null)c=t;else{let y=e.length-1;if(!r&&l.startsWith("..")){let w=l.split("/");for(;w[0]==="..";)w.shift(),y-=1;s.pathname=w.join("/")}c=y>=0?e[y]:"/"}let h=bR(s,c),p=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(p||g)&&(h.pathname+="/"),h}var Gs=n=>n.join("/").replace(/\/\/+/g,"/"),PR=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),kR=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,DR=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function NR(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var zS=["POST","PUT","PATCH","DELETE"];new Set(zS);var OR=["GET",...zS];new Set(OR);var hl=P.createContext(null);hl.displayName="DataRouter";var qh=P.createContext(null);qh.displayName="DataRouterState";var HS=P.createContext({isTransitioning:!1});HS.displayName="ViewTransition";var VR=P.createContext(new Map);VR.displayName="Fetchers";var MR=P.createContext(null);MR.displayName="Await";var bs=P.createContext(null);bs.displayName="Navigation";var rc=P.createContext(null);rc.displayName="Location";var si=P.createContext({outlet:null,matches:[],isDataRoute:!1});si.displayName="Route";var qg=P.createContext(null);qg.displayName="RouteError";function LR(n,{relative:e}={}){Ct(sc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=P.useContext(bs),{hash:s,pathname:o,search:l}=ic(n,{relative:e}),c=o;return t!=="/"&&(c=o==="/"?t:Gs([t,o])),r.createHref({pathname:c,search:l,hash:s})}function sc(){return P.useContext(rc)!=null}function Yo(){return Ct(sc(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(rc).location}var WS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function qS(n){P.useContext(bs).static||P.useLayoutEffect(n)}function jR(){let{isDataRoute:n}=P.useContext(si);return n?XR():FR()}function FR(){Ct(sc(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(hl),{basename:e,navigator:t}=P.useContext(bs),{matches:r}=P.useContext(si),{pathname:s}=Yo(),o=JSON.stringify(BS(r)),l=P.useRef(!1);return qS(()=>{l.current=!0}),P.useCallback((h,p={})=>{if(Ss(l.current,WS),!l.current)return;if(typeof h=="number"){t.go(h);return}let g=$S(h,JSON.parse(o),s,p.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Gs([e,g.pathname])),(p.replace?t.replace:t.push)(g,p.state,p)},[e,t,o,s,n])}P.createContext(null);function ic(n,{relative:e}={}){let{matches:t}=P.useContext(si),{pathname:r}=Yo(),s=JSON.stringify(BS(t));return P.useMemo(()=>$S(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function UR(n,e){return GS(n,e)}function GS(n,e,t,r){var O;Ct(sc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=P.useContext(bs),{matches:o}=P.useContext(si),l=o[o.length-1],c=l?l.params:{},h=l?l.pathname:"/",p=l?l.pathnameBase:"/",g=l&&l.route;{let B=g&&g.path||"";KS(h,!g||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let y=Yo(),w;if(e){let B=typeof e=="string"?dl(e):e;Ct(p==="/"||((O=B.pathname)==null?void 0:O.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${B.pathname}" was given in the \`location\` prop.`),w=B}else w=y;let T=w.pathname||"/",C=T;if(p!=="/"){let B=p.replace(/^\//,"").split("/");C="/"+T.replace(/^\//,"").split("/").slice(B.length).join("/")}let R=jS(n,{pathname:C});Ss(g||R!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Ss(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=WR(R&&R.map(B=>Object.assign({},B,{params:Object.assign({},c,B.params),pathname:Gs([p,s.encodeLocation?s.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?p:Gs([p,s.encodeLocation?s.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),o,t,r);return e&&A?P.createElement(rc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},A):A}function BR(){let n=YR(),e=NR(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=P.createElement(P.Fragment,null,P.createElement("p",null,"💿 Hey developer 👋"),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:o},"ErrorBoundary")," or"," ",P.createElement("code",{style:o},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:s},t):null,l)}var $R=P.createElement(BR,null),zR=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?P.createElement(si.Provider,{value:this.props.routeContext},P.createElement(qg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function HR({routeContext:n,match:e,children:t}){let r=P.useContext(hl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(si.Provider,{value:n},t)}function WR(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=t==null?void 0:t.errors;if(o!=null){let h=s.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);Ct(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let l=!1,c=-1;if(t)for(let h=0;h<s.length;h++){let p=s[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=h),p.route.id){let{loaderData:g,errors:y}=t,w=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!y||y[p.route.id]===void 0);if(p.route.lazy||w){l=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((h,p,g)=>{let y,w=!1,T=null,C=null;t&&(y=o&&p.route.id?o[p.route.id]:void 0,T=p.route.errorElement||$R,l&&(c<0&&g===0?(KS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,C=null):c===g&&(w=!0,C=p.route.hydrateFallbackElement||null)));let R=e.concat(s.slice(0,g+1)),A=()=>{let O;return y?O=T:w?O=C:p.route.Component?O=P.createElement(p.route.Component,null):p.route.element?O=p.route.element:O=h,P.createElement(HR,{match:p,routeContext:{outlet:h,matches:R,isDataRoute:t!=null},children:O})};return t&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?P.createElement(zR,{location:t.location,revalidation:t.revalidation,component:T,error:y,children:A(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):A()},null)}function Gg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qR(n){let e=P.useContext(hl);return Ct(e,Gg(n)),e}function GR(n){let e=P.useContext(qh);return Ct(e,Gg(n)),e}function KR(n){let e=P.useContext(si);return Ct(e,Gg(n)),e}function Kg(n){let e=KR(n),t=e.matches[e.matches.length-1];return Ct(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function QR(){return Kg("useRouteId")}function YR(){var r;let n=P.useContext(qg),e=GR("useRouteError"),t=Kg("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function XR(){let{router:n}=qR("useNavigate"),e=Kg("useNavigate"),t=P.useRef(!1);return qS(()=>{t.current=!0}),P.useCallback(async(s,o={})=>{Ss(t.current,WS),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var sw={};function KS(n,e,t){!e&&!sw[n]&&(sw[n]=!0,Ss(!1,t))}P.memo(ZR);function ZR({routes:n,future:e,state:t}){return GS(n,void 0,t,e)}function QS(n){Ct(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function JR({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:o=!1}){Ct(!sc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),c=P.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof t=="string"&&(t=dl(t));let{pathname:h="/",search:p="",hash:g="",state:y=null,key:w="default"}=t,T=P.useMemo(()=>{let C=Ys(h,l);return C==null?null:{location:{pathname:C,search:p,hash:g,state:y,key:w},navigationType:r}},[l,h,p,g,y,w,r]);return Ss(T!=null,`<Router basename="${l}"> is not able to match the URL "${h}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:P.createElement(bs.Provider,{value:c},P.createElement(rc.Provider,{children:e,value:T}))}function eP({children:n,location:e}){return UR(Fm(n),e)}function Fm(n,e=[]){let t=[];return P.Children.forEach(n,(r,s)=>{if(!P.isValidElement(r))return;let o=[...e,s];if(r.type===P.Fragment){t.push.apply(t,Fm(r.props.children,o));return}Ct(r.type===QS,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ct(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Fm(r.props.children,o)),t.push(l)}),t}var Yd="get",Xd="application/x-www-form-urlencoded";function Gh(n){return n!=null&&typeof n.tagName=="string"}function tP(n){return Gh(n)&&n.tagName.toLowerCase()==="button"}function nP(n){return Gh(n)&&n.tagName.toLowerCase()==="form"}function rP(n){return Gh(n)&&n.tagName.toLowerCase()==="input"}function sP(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function iP(n,e){return n.button===0&&(!e||e==="_self")&&!sP(n)}var Md=null;function oP(){if(Md===null)try{new FormData(document.createElement("form"),0),Md=!1}catch{Md=!0}return Md}var aP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function tm(n){return n!=null&&!aP.has(n)?(Ss(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xd}"`),null):n}function lP(n,e){let t,r,s,o,l;if(nP(n)){let c=n.getAttribute("action");r=c?Ys(c,e):null,t=n.getAttribute("method")||Yd,s=tm(n.getAttribute("enctype"))||Xd,o=new FormData(n)}else if(tP(n)||rP(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||c.getAttribute("action");if(r=h?Ys(h,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||Yd,s=tm(n.getAttribute("formenctype"))||tm(c.getAttribute("enctype"))||Xd,o=new FormData(c,n),!oP()){let{name:p,type:g,value:y}=n;if(g==="image"){let w=p?`${p}.`:"";o.append(`${w}x`,"0"),o.append(`${w}y`,"0")}else p&&o.append(p,y)}}else{if(Gh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Yd,r=null,s=Xd,l=n}return o&&s==="text/plain"&&(l=o,o=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:o,body:l}}function Qg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function uP(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cP(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function dP(n,e,t){let r=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await uP(o,t);return l.links?l.links():[]}return[]}));return mP(r.flat(1).filter(cP).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function iw(n,e,t,r,s,o){let l=(h,p)=>t[p]?h.route.id!==t[p].route.id:!0,c=(h,p)=>{var g;return t[p].pathname!==h.pathname||((g=t[p].route.path)==null?void 0:g.endsWith("*"))&&t[p].params["*"]!==h.params["*"]};return o==="assets"?e.filter((h,p)=>l(h,p)||c(h,p)):o==="data"?e.filter((h,p)=>{var y;let g=r.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(l(h,p)||c(h,p))return!0;if(h.route.shouldRevalidate){let w=h.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((y=t[0])==null?void 0:y.params)||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function hP(n,e,{includeHydrateFallback:t}={}){return fP(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function fP(n){return[...new Set(n)]}function pP(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function mP(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let o=JSON.stringify(pP(s));return t.has(o)||(t.add(o),r.push({key:o,link:s})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var gP=new Set([100,101,204,205]);function yP(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Ys(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function YS(){let n=P.useContext(hl);return Qg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function vP(){let n=P.useContext(qh);return Qg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Yg=P.createContext(void 0);Yg.displayName="FrameworkContext";function XS(){let n=P.useContext(Yg);return Qg(n,"You must render this element inside a <HydratedRouter> element"),n}function _P(n,e){let t=P.useContext(Yg),[r,s]=P.useState(!1),[o,l]=P.useState(!1),{onFocus:c,onBlur:h,onMouseEnter:p,onMouseLeave:g,onTouchStart:y}=e,w=P.useRef(null);P.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let R=O=>{O.forEach(B=>{l(B.isIntersecting)})},A=new IntersectionObserver(R,{threshold:.5});return w.current&&A.observe(w.current),()=>{A.disconnect()}}},[n]),P.useEffect(()=>{if(r){let R=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(R)}}},[r]);let T=()=>{s(!0)},C=()=>{s(!1),l(!1)};return t?n!=="intent"?[o,w,{}]:[o,w,{onFocus:uu(c,T),onBlur:uu(h,C),onMouseEnter:uu(p,T),onMouseLeave:uu(g,C),onTouchStart:uu(y,T)}]:[!1,w,{}]}function uu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function wP({page:n,...e}){let{router:t}=YS(),r=P.useMemo(()=>jS(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?P.createElement(TP,{page:n,matches:r,...e}):null}function EP(n){let{manifest:e,routeModules:t}=XS(),[r,s]=P.useState([]);return P.useEffect(()=>{let o=!1;return dP(n,e,t).then(l=>{o||s(l)}),()=>{o=!0}},[n,e,t]),r}function TP({page:n,matches:e,...t}){let r=Yo(),{manifest:s,routeModules:o}=XS(),{basename:l}=YS(),{loaderData:c,matches:h}=vP(),p=P.useMemo(()=>iw(n,e,h,s,r,"data"),[n,e,h,s,r]),g=P.useMemo(()=>iw(n,e,h,s,r,"assets"),[n,e,h,s,r]),y=P.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let C=new Set,R=!1;if(e.forEach(O=>{var z;let B=s.routes[O.route.id];!B||!B.hasLoader||(!p.some(Q=>Q.route.id===O.route.id)&&O.route.id in c&&((z=o[O.route.id])!=null&&z.shouldRevalidate)||B.hasClientLoader?R=!0:C.add(O.route.id))}),C.size===0)return[];let A=yP(n,l);return R&&C.size>0&&A.searchParams.set("_routes",e.filter(O=>C.has(O.route.id)).map(O=>O.route.id).join(",")),[A.pathname+A.search]},[l,c,r,s,p,e,n,o]),w=P.useMemo(()=>hP(g,s),[g,s]),T=EP(g);return P.createElement(P.Fragment,null,y.map(C=>P.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),w.map(C=>P.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),T.map(({key:C,link:R})=>P.createElement("link",{key:C,...R})))}function SP(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var ZS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ZS&&(window.__reactRouterVersion="7.6.3")}catch{}function xP({basename:n,children:e,window:t}){let r=P.useRef();r.current==null&&(r.current=cR({window:t,v5Compat:!0}));let s=r.current,[o,l]=P.useState({action:s.action,location:s.location}),c=P.useCallback(h=>{P.startTransition(()=>l(h))},[l]);return P.useLayoutEffect(()=>s.listen(c),[s,c]),P.createElement(JR,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s})}var JS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ex=P.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:l,state:c,target:h,to:p,preventScrollReset:g,viewTransition:y,...w},T){let{basename:C}=P.useContext(bs),R=typeof p=="string"&&JS.test(p),A,O=!1;if(typeof p=="string"&&R&&(A=p,ZS))try{let k=new URL(window.location.href),M=p.startsWith("//")?new URL(k.protocol+p):new URL(p),L=Ys(M.pathname,C);M.origin===k.origin&&L!=null?p=L+M.search+M.hash:O=!0}catch{Ss(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let B=LR(p,{relative:s}),[z,Q,K]=_P(r,w),J=AP(p,{replace:l,state:c,target:h,preventScrollReset:g,relative:s,viewTransition:y});function D(k){e&&e(k),k.defaultPrevented||J(k)}let I=P.createElement("a",{...w,...K,href:A||B,onClick:O||o?e:D,ref:SP(T,Q),target:h,"data-discover":!R&&t==="render"?"true":void 0});return z&&!R?P.createElement(P.Fragment,null,I,P.createElement(wP,{page:B})):I});ex.displayName="Link";var IP=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:l,viewTransition:c,children:h,...p},g){let y=ic(l,{relative:p.relative}),w=Yo(),T=P.useContext(qh),{navigator:C,basename:R}=P.useContext(bs),A=T!=null&&NP(y)&&c===!0,O=C.encodeLocation?C.encodeLocation(y).pathname:y.pathname,B=w.pathname,z=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;t||(B=B.toLowerCase(),z=z?z.toLowerCase():null,O=O.toLowerCase()),z&&R&&(z=Ys(z,R)||z);const Q=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let K=B===O||!s&&B.startsWith(O)&&B.charAt(Q)==="/",J=z!=null&&(z===O||!s&&z.startsWith(O)&&z.charAt(O.length)==="/"),D={isActive:K,isPending:J,isTransitioning:A},I=K?e:void 0,k;typeof r=="function"?k=r(D):k=[r,K?"active":null,J?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let M=typeof o=="function"?o(D):o;return P.createElement(ex,{...p,"aria-current":I,className:k,ref:g,style:M,to:l,viewTransition:c},typeof h=="function"?h(D):h)});IP.displayName="NavLink";var CP=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:o,method:l=Yd,action:c,onSubmit:h,relative:p,preventScrollReset:g,viewTransition:y,...w},T)=>{let C=kP(),R=DP(c,{relative:p}),A=l.toLowerCase()==="get"?"get":"post",O=typeof c=="string"&&JS.test(c),B=z=>{if(h&&h(z),z.defaultPrevented)return;z.preventDefault();let Q=z.nativeEvent.submitter,K=(Q==null?void 0:Q.getAttribute("formmethod"))||l;C(Q||z.currentTarget,{fetcherKey:e,method:K,navigate:t,replace:s,state:o,relative:p,preventScrollReset:g,viewTransition:y})};return P.createElement("form",{ref:T,method:A,action:R,onSubmit:r?h:B,...w,"data-discover":!O&&n==="render"?"true":void 0})});CP.displayName="Form";function bP(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tx(n){let e=P.useContext(hl);return Ct(e,bP(n)),e}function AP(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:l}={}){let c=jR(),h=Yo(),p=ic(n,{relative:o});return P.useCallback(g=>{if(iP(g,e)){g.preventDefault();let y=t!==void 0?t:Ou(h)===Ou(p);c(n,{replace:y,state:r,preventScrollReset:s,relative:o,viewTransition:l})}},[h,c,p,t,r,e,n,s,o,l])}var RP=0,PP=()=>`__${String(++RP)}__`;function kP(){let{router:n}=tx("useSubmit"),{basename:e}=P.useContext(bs),t=QR();return P.useCallback(async(r,s={})=>{let{action:o,method:l,encType:c,formData:h,body:p}=lP(r,e);if(s.navigate===!1){let g=s.fetcherKey||PP();await n.fetch(g,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:h,body:p,formMethod:s.method||l,formEncType:s.encType||c,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:h,body:p,formMethod:s.method||l,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function DP(n,{relative:e}={}){let{basename:t}=P.useContext(bs),r=P.useContext(si);Ct(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...ic(n||".",{relative:e})},l=Yo();if(n==null){o.search=l.search;let c=new URLSearchParams(o.search),h=c.getAll("index");if(h.some(g=>g==="")){c.delete("index"),h.filter(y=>y).forEach(y=>c.append("index",y));let g=c.toString();o.search=g?`?${g}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Gs([t,o.pathname])),Ou(o)}function NP(n,e={}){let t=P.useContext(HS);Ct(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=tx("useViewTransitionState"),s=ic(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Ys(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=Ys(t.nextLocation.pathname,r)||t.nextLocation.pathname;return fh(s.pathname,l)!=null||fh(s.pathname,o)!=null}[...gP];var OP=LS();const VP=Hg(OP);function MP(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}const LP=n=>{switch(n){case"success":return UP;case"info":return $P;case"warning":return BP;case"error":return zP;default:return null}},jP=Array(12).fill(0),FP=({visible:n,className:e})=>de.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},de.createElement("div",{className:"sonner-spinner"},jP.map((t,r)=>de.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),UP=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),BP=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),$P=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),zP=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),HP=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},de.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),de.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),WP=()=>{const[n,e]=de.useState(document.hidden);return de.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n};let Um=1;class qP{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:r,...s}=e,o=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Um++,l=this.toasts.find(h=>h.id===o),c=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),l?this.toasts=this.toasts.map(h=>h.id===o?(this.publish({...h,...e,id:o,title:r}),{...h,...e,id:o,dismissible:c,title:r}):h):this.addToast({title:r,...s,dismissible:c,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const s=Promise.resolve(e instanceof Function?e():e);let o=r!==void 0,l;const c=s.then(async p=>{if(l=["resolve",p],de.isValidElement(p))o=!1,this.create({id:r,type:"default",message:p});else if(KP(p)&&!p.ok){o=!1;const y=typeof t.error=="function"?await t.error(`HTTP error! status: ${p.status}`):t.error,w=typeof t.description=="function"?await t.description(`HTTP error! status: ${p.status}`):t.description,C=typeof y=="object"&&!de.isValidElement(y)?y:{message:y};this.create({id:r,type:"error",description:w,...C})}else if(p instanceof Error){o=!1;const y=typeof t.error=="function"?await t.error(p):t.error,w=typeof t.description=="function"?await t.description(p):t.description,C=typeof y=="object"&&!de.isValidElement(y)?y:{message:y};this.create({id:r,type:"error",description:w,...C})}else if(t.success!==void 0){o=!1;const y=typeof t.success=="function"?await t.success(p):t.success,w=typeof t.description=="function"?await t.description(p):t.description,C=typeof y=="object"&&!de.isValidElement(y)?y:{message:y};this.create({id:r,type:"success",description:w,...C})}}).catch(async p=>{if(l=["reject",p],t.error!==void 0){o=!1;const g=typeof t.error=="function"?await t.error(p):t.error,y=typeof t.description=="function"?await t.description(p):t.description,T=typeof g=="object"&&!de.isValidElement(g)?g:{message:g};this.create({id:r,type:"error",description:y,...T})}}).finally(()=>{o&&(this.dismiss(r),r=void 0),t.finally==null||t.finally.call(t)}),h=()=>new Promise((p,g)=>c.then(()=>l[0]==="reject"?g(l[1]):p(l[1])).catch(g));return typeof r!="string"&&typeof r!="number"?{unwrap:h}:Object.assign(r,{unwrap:h})},this.custom=(e,t)=>{const r=(t==null?void 0:t.id)||Um++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Qn=new qP,GP=(n,e)=>{const t=(e==null?void 0:e.id)||Um++;return Qn.addToast({title:n,...e,id:t}),t},KP=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",QP=GP,YP=()=>Qn.toasts,XP=()=>Qn.getActiveToasts();Object.assign(QP,{success:Qn.success,info:Qn.info,warning:Qn.warning,error:Qn.error,custom:Qn.custom,message:Qn.message,promise:Qn.promise,dismiss:Qn.dismiss,loading:Qn.loading},{getHistory:YP,getToasts:XP});MP("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Ld(n){return n.label!==void 0}const ZP=3,JP="24px",ek="16px",ow=4e3,tk=356,nk=14,rk=45,sk=200;function hs(...n){return n.filter(Boolean).join(" ")}function ik(n){const[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}const ok=n=>{var e,t,r,s,o,l,c,h,p;const{invert:g,toast:y,unstyled:w,interacting:T,setHeights:C,visibleToasts:R,heights:A,index:O,toasts:B,expanded:z,removeToast:Q,defaultRichColors:K,closeButton:J,style:D,cancelButtonStyle:I,actionButtonStyle:k,className:M="",descriptionClassName:L="",duration:H,position:V,gap:rt,expandByDefault:st,classNames:be,icons:Ie,closeButtonAriaLabel:se="Close toast"}=n,[he,ce]=de.useState(null),[F,$]=de.useState(null),[Z,le]=de.useState(!1),[we,fe]=de.useState(!1),[Ae,ve]=de.useState(!1),[Le,et]=de.useState(!1),[Sn,cr]=de.useState(!1),[Dn,xn]=de.useState(0),[kr,Dr]=de.useState(0),Nn=de.useRef(y.duration||H||ow),Nr=de.useRef(null),Kt=de.useRef(null),On=O===0,Vn=O+1<=R,_t=y.type,In=y.dismissible!==!1,Or=y.className||"",Rs=y.descriptionClassName||"",at=de.useMemo(()=>A.findIndex(De=>De.toastId===y.id)||0,[A,y.id]),ut=de.useMemo(()=>{var De;return(De=y.closeButton)!=null?De:J},[y.closeButton,J]),Qt=de.useMemo(()=>y.duration||H||ow,[y.duration,H]),Yt=de.useRef(0),Ut=de.useRef(0),Mn=de.useRef(0),Ln=de.useRef(null),[oo,ao]=V.split("-"),ai=de.useMemo(()=>A.reduce((De,mt,gt)=>gt>=at?De:De+mt.height,0),[A,at]),li=WP(),lo=y.invert||g,Vr=_t==="loading";Ut.current=de.useMemo(()=>at*rt+ai,[at,ai]),de.useEffect(()=>{Nn.current=Qt},[Qt]),de.useEffect(()=>{le(!0)},[]),de.useEffect(()=>{const De=Kt.current;if(De){const mt=De.getBoundingClientRect().height;return Dr(mt),C(gt=>[{toastId:y.id,height:mt,position:y.position},...gt]),()=>C(gt=>gt.filter(Bt=>Bt.toastId!==y.id))}},[C,y.id]),de.useLayoutEffect(()=>{if(!Z)return;const De=Kt.current,mt=De.style.height;De.style.height="auto";const gt=De.getBoundingClientRect().height;De.style.height=mt,Dr(gt),C(Bt=>Bt.find(wt=>wt.toastId===y.id)?Bt.map(wt=>wt.toastId===y.id?{...wt,height:gt}:wt):[{toastId:y.id,height:gt,position:y.position},...Bt])},[Z,y.title,y.description,C,y.id,y.jsx,y.action,y.cancel]);const Cn=de.useCallback(()=>{fe(!0),xn(Ut.current),C(De=>De.filter(mt=>mt.toastId!==y.id)),setTimeout(()=>{Q(y)},sk)},[y,Q,C,Ut]);de.useEffect(()=>{if(y.promise&&_t==="loading"||y.duration===1/0||y.type==="loading")return;let De;return z||T||li?(()=>{if(Mn.current<Yt.current){const Bt=new Date().getTime()-Yt.current;Nn.current=Nn.current-Bt}Mn.current=new Date().getTime()})():(()=>{Nn.current!==1/0&&(Yt.current=new Date().getTime(),De=setTimeout(()=>{y.onAutoClose==null||y.onAutoClose.call(y,y),Cn()},Nn.current))})(),()=>clearTimeout(De)},[z,T,y,_t,li,Cn]),de.useEffect(()=>{y.delete&&(Cn(),y.onDismiss==null||y.onDismiss.call(y,y))},[Cn,y.delete]);function ui(){var De;if(Ie!=null&&Ie.loading){var mt;return de.createElement("div",{className:hs(be==null?void 0:be.loader,y==null||(mt=y.classNames)==null?void 0:mt.loader,"sonner-loader"),"data-visible":_t==="loading"},Ie.loading)}return de.createElement(FP,{className:hs(be==null?void 0:be.loader,y==null||(De=y.classNames)==null?void 0:De.loader),visible:_t==="loading"})}const jn=y.icon||(Ie==null?void 0:Ie[_t])||LP(_t);var Jn,Ps;return de.createElement("li",{tabIndex:0,ref:Kt,className:hs(M,Or,be==null?void 0:be.toast,y==null||(e=y.classNames)==null?void 0:e.toast,be==null?void 0:be.default,be==null?void 0:be[_t],y==null||(t=y.classNames)==null?void 0:t[_t]),"data-sonner-toast":"","data-rich-colors":(Jn=y.richColors)!=null?Jn:K,"data-styled":!(y.jsx||y.unstyled||w),"data-mounted":Z,"data-promise":!!y.promise,"data-swiped":Sn,"data-removed":we,"data-visible":Vn,"data-y-position":oo,"data-x-position":ao,"data-index":O,"data-front":On,"data-swiping":Ae,"data-dismissible":In,"data-type":_t,"data-invert":lo,"data-swipe-out":Le,"data-swipe-direction":F,"data-expanded":!!(z||st&&Z),style:{"--index":O,"--toasts-before":O,"--z-index":B.length-O,"--offset":`${we?Dn:Ut.current}px`,"--initial-height":st?"auto":`${kr}px`,...D,...y.style},onDragEnd:()=>{ve(!1),ce(null),Ln.current=null},onPointerDown:De=>{Vr||!In||(Nr.current=new Date,xn(Ut.current),De.target.setPointerCapture(De.pointerId),De.target.tagName!=="BUTTON"&&(ve(!0),Ln.current={x:De.clientX,y:De.clientY}))},onPointerUp:()=>{var De,mt,gt;if(Le||!In)return;Ln.current=null;const Bt=Number(((De=Kt.current)==null?void 0:De.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Fn=Number(((mt=Kt.current)==null?void 0:mt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),wt=new Date().getTime()-((gt=Nr.current)==null?void 0:gt.getTime()),Qe=he==="x"?Bt:Fn,Mr=Math.abs(Qe)/wt;if(Math.abs(Qe)>=rk||Mr>.11){xn(Ut.current),y.onDismiss==null||y.onDismiss.call(y,y),$(he==="x"?Bt>0?"right":"left":Fn>0?"down":"up"),Cn(),et(!0);return}else{var Et,$t;(Et=Kt.current)==null||Et.style.setProperty("--swipe-amount-x","0px"),($t=Kt.current)==null||$t.style.setProperty("--swipe-amount-y","0px")}cr(!1),ve(!1),ce(null)},onPointerMove:De=>{var mt,gt,Bt;if(!Ln.current||!In||((mt=window.getSelection())==null?void 0:mt.toString().length)>0)return;const wt=De.clientY-Ln.current.y,Qe=De.clientX-Ln.current.x;var Mr;const Et=(Mr=n.swipeDirections)!=null?Mr:ik(V);!he&&(Math.abs(Qe)>1||Math.abs(wt)>1)&&ce(Math.abs(Qe)>Math.abs(wt)?"x":"y");let $t={x:0,y:0};const ns=Un=>1/(1.5+Math.abs(Un)/20);if(he==="y"){if(Et.includes("top")||Et.includes("bottom"))if(Et.includes("top")&&wt<0||Et.includes("bottom")&&wt>0)$t.y=wt;else{const Un=wt*ns(wt);$t.y=Math.abs(Un)<Math.abs(wt)?Un:wt}}else if(he==="x"&&(Et.includes("left")||Et.includes("right")))if(Et.includes("left")&&Qe<0||Et.includes("right")&&Qe>0)$t.x=Qe;else{const Un=Qe*ns(Qe);$t.x=Math.abs(Un)<Math.abs(Qe)?Un:Qe}(Math.abs($t.x)>0||Math.abs($t.y)>0)&&cr(!0),(gt=Kt.current)==null||gt.style.setProperty("--swipe-amount-x",`${$t.x}px`),(Bt=Kt.current)==null||Bt.style.setProperty("--swipe-amount-y",`${$t.y}px`)}},ut&&!y.jsx&&_t!=="loading"?de.createElement("button",{"aria-label":se,"data-disabled":Vr,"data-close-button":!0,onClick:Vr||!In?()=>{}:()=>{Cn(),y.onDismiss==null||y.onDismiss.call(y,y)},className:hs(be==null?void 0:be.closeButton,y==null||(r=y.classNames)==null?void 0:r.closeButton)},(Ps=Ie==null?void 0:Ie.close)!=null?Ps:HP):null,(_t||y.icon||y.promise)&&y.icon!==null&&((Ie==null?void 0:Ie[_t])!==null||y.icon)?de.createElement("div",{"data-icon":"",className:hs(be==null?void 0:be.icon,y==null||(s=y.classNames)==null?void 0:s.icon)},y.promise||y.type==="loading"&&!y.icon?y.icon||ui():null,y.type!=="loading"?jn:null):null,de.createElement("div",{"data-content":"",className:hs(be==null?void 0:be.content,y==null||(o=y.classNames)==null?void 0:o.content)},de.createElement("div",{"data-title":"",className:hs(be==null?void 0:be.title,y==null||(l=y.classNames)==null?void 0:l.title)},y.jsx?y.jsx:typeof y.title=="function"?y.title():y.title),y.description?de.createElement("div",{"data-description":"",className:hs(L,Rs,be==null?void 0:be.description,y==null||(c=y.classNames)==null?void 0:c.description)},typeof y.description=="function"?y.description():y.description):null),de.isValidElement(y.cancel)?y.cancel:y.cancel&&Ld(y.cancel)?de.createElement("button",{"data-button":!0,"data-cancel":!0,style:y.cancelButtonStyle||I,onClick:De=>{Ld(y.cancel)&&In&&(y.cancel.onClick==null||y.cancel.onClick.call(y.cancel,De),Cn())},className:hs(be==null?void 0:be.cancelButton,y==null||(h=y.classNames)==null?void 0:h.cancelButton)},y.cancel.label):null,de.isValidElement(y.action)?y.action:y.action&&Ld(y.action)?de.createElement("button",{"data-button":!0,"data-action":!0,style:y.actionButtonStyle||k,onClick:De=>{Ld(y.action)&&(y.action.onClick==null||y.action.onClick.call(y.action,De),!De.defaultPrevented&&Cn())},className:hs(be==null?void 0:be.actionButton,y==null||(p=y.classNames)==null?void 0:p.actionButton)},y.action.label):null)};function aw(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function ak(n,e){const t={};return[n,e].forEach((r,s)=>{const o=s===1,l=o?"--mobile-offset":"--offset",c=o?ek:JP;function h(p){["top","right","bottom","left"].forEach(g=>{t[`${l}-${g}`]=typeof p=="number"?`${p}px`:p})}typeof r=="number"||typeof r=="string"?h(r):typeof r=="object"?["top","right","bottom","left"].forEach(p=>{r[p]===void 0?t[`${l}-${p}`]=c:t[`${l}-${p}`]=typeof r[p]=="number"?`${r[p]}px`:r[p]}):h(c)}),t}const lk=de.forwardRef(function(e,t){const{invert:r,position:s="bottom-right",hotkey:o=["altKey","KeyT"],expand:l,closeButton:c,className:h,offset:p,mobileOffset:g,theme:y="light",richColors:w,duration:T,style:C,visibleToasts:R=ZP,toastOptions:A,dir:O=aw(),gap:B=nk,icons:z,containerAriaLabel:Q="Notifications"}=e,[K,J]=de.useState([]),D=de.useMemo(()=>Array.from(new Set([s].concat(K.filter(F=>F.position).map(F=>F.position)))),[K,s]),[I,k]=de.useState([]),[M,L]=de.useState(!1),[H,V]=de.useState(!1),[rt,st]=de.useState(y!=="system"?y:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),be=de.useRef(null),Ie=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),se=de.useRef(null),he=de.useRef(!1),ce=de.useCallback(F=>{J($=>{var Z;return(Z=$.find(le=>le.id===F.id))!=null&&Z.delete||Qn.dismiss(F.id),$.filter(({id:le})=>le!==F.id)})},[]);return de.useEffect(()=>Qn.subscribe(F=>{if(F.dismiss){requestAnimationFrame(()=>{J($=>$.map(Z=>Z.id===F.id?{...Z,delete:!0}:Z))});return}setTimeout(()=>{VP.flushSync(()=>{J($=>{const Z=$.findIndex(le=>le.id===F.id);return Z!==-1?[...$.slice(0,Z),{...$[Z],...F},...$.slice(Z+1)]:[F,...$]})})})}),[K]),de.useEffect(()=>{if(y!=="system"){st(y);return}if(y==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?st("dark"):st("light")),typeof window>"u")return;const F=window.matchMedia("(prefers-color-scheme: dark)");try{F.addEventListener("change",({matches:$})=>{st($?"dark":"light")})}catch{F.addListener(({matches:Z})=>{try{st(Z?"dark":"light")}catch(le){console.error(le)}})}},[y]),de.useEffect(()=>{K.length<=1&&L(!1)},[K]),de.useEffect(()=>{const F=$=>{var Z;if(o.every(fe=>$[fe]||$.code===fe)){var we;L(!0),(we=be.current)==null||we.focus()}$.code==="Escape"&&(document.activeElement===be.current||(Z=be.current)!=null&&Z.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",F),()=>document.removeEventListener("keydown",F)},[o]),de.useEffect(()=>{if(be.current)return()=>{se.current&&(se.current.focus({preventScroll:!0}),se.current=null,he.current=!1)}},[be.current]),de.createElement("section",{ref:t,"aria-label":`${Q} ${Ie}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},D.map((F,$)=>{var Z;const[le,we]=F.split("-");return K.length?de.createElement("ol",{key:F,dir:O==="auto"?aw():O,tabIndex:-1,ref:be,className:h,"data-sonner-toaster":!0,"data-sonner-theme":rt,"data-y-position":le,"data-x-position":we,style:{"--front-toast-height":`${((Z=I[0])==null?void 0:Z.height)||0}px`,"--width":`${tk}px`,"--gap":`${B}px`,...C,...ak(p,g)},onBlur:fe=>{he.current&&!fe.currentTarget.contains(fe.relatedTarget)&&(he.current=!1,se.current&&(se.current.focus({preventScroll:!0}),se.current=null))},onFocus:fe=>{fe.target instanceof HTMLElement&&fe.target.dataset.dismissible==="false"||he.current||(he.current=!0,se.current=fe.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{H||L(!1)},onDragEnd:()=>L(!1),onPointerDown:fe=>{fe.target instanceof HTMLElement&&fe.target.dataset.dismissible==="false"||V(!0)},onPointerUp:()=>V(!1)},K.filter(fe=>!fe.position&&$===0||fe.position===F).map((fe,Ae)=>{var ve,Le;return de.createElement(ok,{key:fe.id,icons:z,index:Ae,toast:fe,defaultRichColors:w,duration:(ve=A==null?void 0:A.duration)!=null?ve:T,className:A==null?void 0:A.className,descriptionClassName:A==null?void 0:A.descriptionClassName,invert:r,visibleToasts:R,closeButton:(Le=A==null?void 0:A.closeButton)!=null?Le:c,interacting:H,position:F,style:A==null?void 0:A.style,unstyled:A==null?void 0:A.unstyled,classNames:A==null?void 0:A.classNames,cancelButtonStyle:A==null?void 0:A.cancelButtonStyle,actionButtonStyle:A==null?void 0:A.actionButtonStyle,closeButtonAriaLabel:A==null?void 0:A.closeButtonAriaLabel,removeToast:ce,toasts:K.filter(et=>et.position==fe.position),heights:I.filter(et=>et.position==fe.position),setHeights:k,expandByDefault:l,gap:B,expanded:M,swipeDirections:e.swipeDirections})})):null}))}),Xg=P.createContext({});function Zg(n){const e=P.useRef(null);return e.current===null&&(e.current=n()),e.current}const Jg=typeof window<"u",nx=Jg?P.useLayoutEffect:P.useEffect,Kh=P.createContext(null);function ey(n,e){n.indexOf(e)===-1&&n.push(e)}function ty(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Xs=(n,e,t)=>t>e?e:t<n?n:t;let ny=()=>{};const Zs={},rx=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function sx(n){return typeof n=="object"&&n!==null}const ix=n=>/^0[^.\s]+$/u.test(n);function ry(n){let e;return()=>(e===void 0&&(e=n()),e)}const br=n=>n,uk=(n,e)=>t=>e(n(t)),oc=(...n)=>n.reduce(uk),Vu=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class sy{constructor(){this.subscriptions=[]}add(e){return ey(this.subscriptions,e),()=>ty(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let o=0;o<s;o++){const l=this.subscriptions[o];l&&l(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ps=n=>n*1e3,ms=n=>n/1e3;function ox(n,e){return e?n*(1e3/e):0}const ax=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,ck=1e-7,dk=12;function hk(n,e,t,r,s){let o,l,c=0;do l=e+(t-e)/2,o=ax(l,r,s)-n,o>0?t=l:e=l;while(Math.abs(o)>ck&&++c<dk);return l}function ac(n,e,t,r){if(n===e&&t===r)return br;const s=o=>hk(o,0,1,n,t);return o=>o===0||o===1?o:ax(s(o),e,r)}const lx=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,ux=n=>e=>1-n(1-e),cx=ac(.33,1.53,.69,.99),iy=ux(cx),dx=lx(iy),hx=n=>(n*=2)<1?.5*iy(n):.5*(2-Math.pow(2,-10*(n-1))),oy=n=>1-Math.sin(Math.acos(n)),fx=ux(oy),px=lx(oy),fk=ac(.42,0,1,1),pk=ac(0,0,.58,1),mx=ac(.42,0,.58,1),mk=n=>Array.isArray(n)&&typeof n[0]!="number",gx=n=>Array.isArray(n)&&typeof n[0]=="number",gk={linear:br,easeIn:fk,easeInOut:mx,easeOut:pk,circIn:oy,circInOut:px,circOut:fx,backIn:iy,backInOut:dx,backOut:cx,anticipate:hx},yk=n=>typeof n=="string",lw=n=>{if(gx(n)){ny(n.length===4);const[e,t,r,s]=n;return ac(e,t,r,s)}else if(yk(n))return gk[n];return n},jd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],uw={value:null};function vk(n,e){let t=new Set,r=new Set,s=!1,o=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},h=0;function p(y){l.has(y)&&(g.schedule(y),n()),h++,y(c)}const g={schedule:(y,w=!1,T=!1)=>{const R=T&&s?t:r;return w&&l.add(y),R.has(y)||R.add(y),y},cancel:y=>{r.delete(y),l.delete(y)},process:y=>{if(c=y,s){o=!0;return}s=!0,[t,r]=[r,t],t.forEach(p),e&&uw.value&&uw.value.frameloop[e].push(h),h=0,t.clear(),s=!1,o&&(o=!1,g.process(y))}};return g}const _k=40;function yx(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,l=jd.reduce((z,Q)=>(z[Q]=vk(o,e?Q:void 0),z),{}),{setup:c,read:h,resolveKeyframes:p,preUpdate:g,update:y,preRender:w,render:T,postRender:C}=l,R=()=>{const z=Zs.useManualTiming?s.timestamp:performance.now();t=!1,Zs.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(z-s.timestamp,_k),1)),s.timestamp=z,s.isProcessing=!0,c.process(s),h.process(s),p.process(s),g.process(s),y.process(s),w.process(s),T.process(s),C.process(s),s.isProcessing=!1,t&&e&&(r=!1,n(R))},A=()=>{t=!0,r=!0,s.isProcessing||n(R)};return{schedule:jd.reduce((z,Q)=>{const K=l[Q];return z[Q]=(J,D=!1,I=!1)=>(t||A(),K.schedule(J,D,I)),z},{}),cancel:z=>{for(let Q=0;Q<jd.length;Q++)l[jd[Q]].cancel(z)},state:s,steps:l}}const{schedule:bt,cancel:qi,state:ln,steps:nm}=yx(typeof requestAnimationFrame<"u"?requestAnimationFrame:br,!0);let Zd;function wk(){Zd=void 0}const Xn={now:()=>(Zd===void 0&&Xn.set(ln.isProcessing||Zs.useManualTiming?ln.timestamp:performance.now()),Zd),set:n=>{Zd=n,queueMicrotask(wk)}},vx=n=>e=>typeof e=="string"&&e.startsWith(n),ay=vx("--"),Ek=vx("var(--"),ly=n=>Ek(n)?Tk.test(n.split("/*")[0].trim()):!1,Tk=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,fl={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Mu={...fl,transform:n=>Xs(0,1,n)},Fd={...fl,default:1},wu=n=>Math.round(n*1e5)/1e5,uy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Sk(n){return n==null}const xk=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,cy=(n,e)=>t=>!!(typeof t=="string"&&xk.test(t)&&t.startsWith(n)||e&&!Sk(t)&&Object.prototype.hasOwnProperty.call(t,e)),_x=(n,e,t)=>r=>{if(typeof r!="string")return r;const[s,o,l,c]=r.match(uy);return{[n]:parseFloat(s),[e]:parseFloat(o),[t]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},Ik=n=>Xs(0,255,n),rm={...fl,transform:n=>Math.round(Ik(n))},Oo={test:cy("rgb","red"),parse:_x("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+rm.transform(n)+", "+rm.transform(e)+", "+rm.transform(t)+", "+wu(Mu.transform(r))+")"};function Ck(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Bm={test:cy("#"),parse:Ck,transform:Oo.transform},lc=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Oi=lc("deg"),gs=lc("%"),Ve=lc("px"),bk=lc("vh"),Ak=lc("vw"),cw={...gs,parse:n=>gs.parse(n)/100,transform:n=>gs.transform(n*100)},Wa={test:cy("hsl","hue"),parse:_x("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+gs.transform(wu(e))+", "+gs.transform(wu(t))+", "+wu(Mu.transform(r))+")"},Lt={test:n=>Oo.test(n)||Bm.test(n)||Wa.test(n),parse:n=>Oo.test(n)?Oo.parse(n):Wa.test(n)?Wa.parse(n):Bm.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Oo.transform(n):Wa.transform(n),getAnimatableNone:n=>{const e=Lt.parse(n);return e.alpha=0,Lt.transform(e)}},Rk=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Pk(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(uy))==null?void 0:e.length)||0)+(((t=n.match(Rk))==null?void 0:t.length)||0)>0}const wx="number",Ex="color",kk="var",Dk="var(",dw="${}",Nk=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Lu(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},s=[];let o=0;const c=e.replace(Nk,h=>(Lt.test(h)?(r.color.push(o),s.push(Ex),t.push(Lt.parse(h))):h.startsWith(Dk)?(r.var.push(o),s.push(kk),t.push(h)):(r.number.push(o),s.push(wx),t.push(parseFloat(h))),++o,dw)).split(dw);return{values:t,split:c,indexes:r,types:s}}function Tx(n){return Lu(n).values}function Sx(n){const{split:e,types:t}=Lu(n),r=e.length;return s=>{let o="";for(let l=0;l<r;l++)if(o+=e[l],s[l]!==void 0){const c=t[l];c===wx?o+=wu(s[l]):c===Ex?o+=Lt.transform(s[l]):o+=s[l]}return o}}const Ok=n=>typeof n=="number"?0:Lt.test(n)?Lt.getAnimatableNone(n):n;function Vk(n){const e=Tx(n);return Sx(n)(e.map(Ok))}const Gi={test:Pk,parse:Tx,createTransformer:Sx,getAnimatableNone:Vk};function sm(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Mk({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,o=0,l=0;if(!e)s=o=l=t;else{const c=t<.5?t*(1+e):t+e-t*e,h=2*t-c;s=sm(h,c,n+1/3),o=sm(h,c,n),l=sm(h,c,n-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:r}}function ph(n,e){return t=>t>0?e:n}const It=(n,e,t)=>n+(e-n)*t,im=(n,e,t)=>{const r=n*n,s=t*(e*e-r)+r;return s<0?0:Math.sqrt(s)},Lk=[Bm,Oo,Wa],jk=n=>Lk.find(e=>e.test(n));function hw(n){const e=jk(n);if(!e)return!1;let t=e.parse(n);return e===Wa&&(t=Mk(t)),t}const fw=(n,e)=>{const t=hw(n),r=hw(e);if(!t||!r)return ph(n,e);const s={...t};return o=>(s.red=im(t.red,r.red,o),s.green=im(t.green,r.green,o),s.blue=im(t.blue,r.blue,o),s.alpha=It(t.alpha,r.alpha,o),Oo.transform(s))},$m=new Set(["none","hidden"]);function Fk(n,e){return $m.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function Uk(n,e){return t=>It(n,e,t)}function dy(n){return typeof n=="number"?Uk:typeof n=="string"?ly(n)?ph:Lt.test(n)?fw:zk:Array.isArray(n)?xx:typeof n=="object"?Lt.test(n)?fw:Bk:ph}function xx(n,e){const t=[...n],r=t.length,s=n.map((o,l)=>dy(o)(o,e[l]));return o=>{for(let l=0;l<r;l++)t[l]=s[l](o);return t}}function Bk(n,e){const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=dy(n[s])(n[s],e[s]));return s=>{for(const o in r)t[o]=r[o](s);return t}}function $k(n,e){const t=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],l=n.indexes[o][r[o]],c=n.values[l]??0;t[s]=c,r[o]++}return t}const zk=(n,e)=>{const t=Gi.createTransformer(e),r=Lu(n),s=Lu(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?$m.has(n)&&!s.values.length||$m.has(e)&&!r.values.length?Fk(n,e):oc(xx($k(r,s),s.values),t):ph(n,e)};function Ix(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?It(n,e,t):dy(n)(n,e)}const Hk=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>bt.update(e,t),stop:()=>qi(e),now:()=>ln.isProcessing?ln.timestamp:Xn.now()}},Cx=(n,e,t=10)=>{let r="";const s=Math.max(Math.round(e/t),2);for(let o=0;o<s;o++)r+=Math.round(n(o/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},mh=2e4;function hy(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<mh;)e+=t,r=n.next(e);return e>=mh?1/0:e}function Wk(n,e=100,t){const r=t({...n,keyframes:[0,e]}),s=Math.min(hy(r),mh);return{type:"keyframes",ease:o=>r.next(s*o).value/e,duration:ms(s)}}const qk=5;function bx(n,e,t){const r=Math.max(e-qk,0);return ox(t-n(r),e-r)}const Pt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},om=.001;function Gk({duration:n=Pt.duration,bounce:e=Pt.bounce,velocity:t=Pt.velocity,mass:r=Pt.mass}){let s,o,l=1-e;l=Xs(Pt.minDamping,Pt.maxDamping,l),n=Xs(Pt.minDuration,Pt.maxDuration,ms(n)),l<1?(s=p=>{const g=p*l,y=g*n,w=g-t,T=zm(p,l),C=Math.exp(-y);return om-w/T*C},o=p=>{const y=p*l*n,w=y*t+t,T=Math.pow(l,2)*Math.pow(p,2)*n,C=Math.exp(-y),R=zm(Math.pow(p,2),l);return(-s(p)+om>0?-1:1)*((w-T)*C)/R}):(s=p=>{const g=Math.exp(-p*n),y=(p-t)*n+1;return-om+g*y},o=p=>{const g=Math.exp(-p*n),y=(t-p)*(n*n);return g*y});const c=5/n,h=Qk(s,o,c);if(n=ps(n),isNaN(h))return{stiffness:Pt.stiffness,damping:Pt.damping,duration:n};{const p=Math.pow(h,2)*r;return{stiffness:p,damping:l*2*Math.sqrt(r*p),duration:n}}}const Kk=12;function Qk(n,e,t){let r=t;for(let s=1;s<Kk;s++)r=r-n(r)/e(r);return r}function zm(n,e){return n*Math.sqrt(1-e*e)}const Yk=["duration","bounce"],Xk=["stiffness","damping","mass"];function pw(n,e){return e.some(t=>n[t]!==void 0)}function Zk(n){let e={velocity:Pt.velocity,stiffness:Pt.stiffness,damping:Pt.damping,mass:Pt.mass,isResolvedFromDuration:!1,...n};if(!pw(n,Xk)&&pw(n,Yk))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),s=r*r,o=2*Xs(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:Pt.mass,stiffness:s,damping:o}}else{const t=Gk(n);e={...e,...t,mass:Pt.mass},e.isResolvedFromDuration=!0}return e}function gh(n=Pt.visualDuration,e=Pt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:s}=t;const o=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],c={done:!1,value:o},{stiffness:h,damping:p,mass:g,duration:y,velocity:w,isResolvedFromDuration:T}=Zk({...t,velocity:-ms(t.velocity||0)}),C=w||0,R=p/(2*Math.sqrt(h*g)),A=l-o,O=ms(Math.sqrt(h/g)),B=Math.abs(A)<5;r||(r=B?Pt.restSpeed.granular:Pt.restSpeed.default),s||(s=B?Pt.restDelta.granular:Pt.restDelta.default);let z;if(R<1){const K=zm(O,R);z=J=>{const D=Math.exp(-R*O*J);return l-D*((C+R*O*A)/K*Math.sin(K*J)+A*Math.cos(K*J))}}else if(R===1)z=K=>l-Math.exp(-O*K)*(A+(C+O*A)*K);else{const K=O*Math.sqrt(R*R-1);z=J=>{const D=Math.exp(-R*O*J),I=Math.min(K*J,300);return l-D*((C+R*O*A)*Math.sinh(I)+K*A*Math.cosh(I))/K}}const Q={calculatedDuration:T&&y||null,next:K=>{const J=z(K);if(T)c.done=K>=y;else{let D=K===0?C:0;R<1&&(D=K===0?ps(C):bx(z,K,J));const I=Math.abs(D)<=r,k=Math.abs(l-J)<=s;c.done=I&&k}return c.value=c.done?l:J,c},toString:()=>{const K=Math.min(hy(Q),mh),J=Cx(D=>Q.next(K*D).value,K,30);return K+"ms "+J},toTransition:()=>{}};return Q}gh.applyToOptions=n=>{const e=Wk(n,100,gh);return n.ease=e.ease,n.duration=ps(e.duration),n.type="keyframes",n};function Hm({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:h,restDelta:p=.5,restSpeed:g}){const y=n[0],w={done:!1,value:y},T=I=>c!==void 0&&I<c||h!==void 0&&I>h,C=I=>c===void 0?h:h===void 0||Math.abs(c-I)<Math.abs(h-I)?c:h;let R=t*e;const A=y+R,O=l===void 0?A:l(A);O!==A&&(R=O-y);const B=I=>-R*Math.exp(-I/r),z=I=>O+B(I),Q=I=>{const k=B(I),M=z(I);w.done=Math.abs(k)<=p,w.value=w.done?O:M};let K,J;const D=I=>{T(w.value)&&(K=I,J=gh({keyframes:[w.value,C(w.value)],velocity:bx(z,I,w.value),damping:s,stiffness:o,restDelta:p,restSpeed:g}))};return D(0),{calculatedDuration:null,next:I=>{let k=!1;return!J&&K===void 0&&(k=!0,Q(I),D(I)),K!==void 0&&I>=K?J.next(I-K):(!k&&Q(I),w)}}}function Jk(n,e,t){const r=[],s=t||Zs.mix||Ix,o=n.length-1;for(let l=0;l<o;l++){let c=s(n[l],n[l+1]);if(e){const h=Array.isArray(e)?e[l]||br:e;c=oc(h,c)}r.push(c)}return r}function eD(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const o=n.length;if(ny(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=Jk(e,r,s),h=c.length,p=g=>{if(l&&g<n[0])return e[0];let y=0;if(h>1)for(;y<n.length-2&&!(g<n[y+1]);y++);const w=Vu(n[y],n[y+1],g);return c[y](w)};return t?g=>p(Xs(n[0],n[o-1],g)):p}function tD(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=Vu(0,e,r);n.push(It(t,1,s))}}function nD(n){const e=[0];return tD(e,n.length-1),e}function rD(n,e){return n.map(t=>t*e)}function sD(n,e){return n.map(()=>e||mx).splice(0,n.length-1)}function Eu({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=mk(r)?r.map(lw):lw(r),o={done:!1,value:e[0]},l=rD(t&&t.length===e.length?t:nD(e),n),c=eD(l,e,{ease:Array.isArray(s)?s:sD(e,s)});return{calculatedDuration:n,next:h=>(o.value=c(h),o.done=h>=n,o)}}const iD=n=>n!==null;function fy(n,{repeat:e,repeatType:t="loop"},r,s=1){const o=n.filter(iD),c=s<0||e&&t!=="loop"&&e%2===1?0:o.length-1;return!c||r===void 0?o[c]:r}const oD={decay:Hm,inertia:Hm,tween:Eu,keyframes:Eu,spring:gh};function Ax(n){typeof n.type=="string"&&(n.type=oD[n.type])}class py{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const aD=n=>n/100;class my extends py{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:t}=this.options;t&&t.updatedAt!==Xn.now()&&this.tick(Xn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Ax(e);const{type:t=Eu,repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:l=0}=e;let{keyframes:c}=e;const h=t||Eu;h!==Eu&&typeof c[0]!="number"&&(this.mixKeyframes=oc(aD,Ix(c[0],c[1])),c=[0,100]);const p=h({...e,keyframes:c});o==="mirror"&&(this.mirroredGenerator=h({...e,keyframes:[...c].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=hy(p));const{calculatedDuration:g}=p;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=p}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:s,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:h}=this;if(this.startTime===null)return r.next(0);const{delay:p=0,keyframes:g,repeat:y,repeatType:w,repeatDelay:T,type:C,onUpdate:R,finalKeyframe:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const O=this.currentTime-p*(this.playbackSpeed>=0?1:-1),B=this.playbackSpeed>=0?O<0:O>s;this.currentTime=Math.max(O,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let z=this.currentTime,Q=r;if(y){const I=Math.min(this.currentTime,s)/c;let k=Math.floor(I),M=I%1;!M&&I>=1&&(M=1),M===1&&k--,k=Math.min(k,y+1),!!(k%2)&&(w==="reverse"?(M=1-M,T&&(M-=T/c)):w==="mirror"&&(Q=l)),z=Xs(0,1,M)*c}const K=B?{done:!1,value:g[0]}:Q.next(z);o&&(K.value=o(K.value));let{done:J}=K;!B&&h!==null&&(J=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&J);return D&&C!==Hm&&(K.value=fy(g,this.options,A,this.speed)),R&&R(K.value),D&&this.finish(),K}then(e,t){return this.finished.then(e,t)}get duration(){return ms(this.calculatedDuration)}get time(){return ms(this.currentTime)}set time(e){var t;e=ps(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Xn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=ms(this.currentTime))}play(){var s,o;if(this.isStopped)return;const{driver:e=Hk,startTime:t}=this.options;this.driver||(this.driver=e(l=>this.tick(l))),(o=(s=this.options).onPlay)==null||o.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Xn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function lD(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Vo=n=>n*180/Math.PI,Wm=n=>{const e=Vo(Math.atan2(n[1],n[0]));return qm(e)},uD={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Wm,rotateZ:Wm,skewX:n=>Vo(Math.atan(n[1])),skewY:n=>Vo(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},qm=n=>(n=n%360,n<0&&(n+=360),n),mw=Wm,gw=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),yw=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),cD={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:gw,scaleY:yw,scale:n=>(gw(n)+yw(n))/2,rotateX:n=>qm(Vo(Math.atan2(n[6],n[5]))),rotateY:n=>qm(Vo(Math.atan2(-n[2],n[0]))),rotateZ:mw,rotate:mw,skewX:n=>Vo(Math.atan(n[4])),skewY:n=>Vo(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Gm(n){return n.includes("scale")?1:0}function Km(n,e){if(!n||n==="none")return Gm(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(t)r=cD,s=t;else{const c=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=uD,s=c}if(!s)return Gm(e);const o=r[e],l=s[1].split(",").map(hD);return typeof o=="function"?o(l):l[o]}const dD=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Km(t,e)};function hD(n){return parseFloat(n.trim())}const pl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ml=new Set(pl),vw=n=>n===fl||n===Ve,fD=new Set(["x","y","z"]),pD=pl.filter(n=>!fD.has(n));function mD(n){const e=[];return pD.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const Fo={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Km(e,"x"),y:(n,{transform:e})=>Km(e,"y")};Fo.translateX=Fo.x;Fo.translateY=Fo.y;const Uo=new Set;let Qm=!1,Ym=!1,Xm=!1;function Rx(){if(Ym){const n=Array.from(Uo).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const s=mD(r);s.length&&(t.set(r,s),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=t.get(r);s&&s.forEach(([o,l])=>{var c;(c=r.getValue(o))==null||c.set(l)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Ym=!1,Qm=!1,Uo.forEach(n=>n.complete(Xm)),Uo.clear()}function Px(){Uo.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Ym=!0)})}function gD(){Xm=!0,Px(),Rx(),Xm=!1}class gy{constructor(e,t,r,s,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=s,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Uo.add(this),Qm||(Qm=!0,bt.read(Px),bt.resolveKeyframes(Rx))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:s}=this;if(e[0]===null){const o=s==null?void 0:s.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&t){const c=r.readValue(t,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),s&&o===void 0&&s.set(e[0])}lD(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Uo.delete(this)}cancel(){this.state==="scheduled"&&(Uo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const yD=n=>n.startsWith("--");function vD(n,e,t){yD(e)?n.style.setProperty(e,t):n.style[e]=t}const _D=ry(()=>window.ScrollTimeline!==void 0),wD={};function ED(n,e){const t=ry(n);return()=>wD[e]??t()}const kx=ED(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),hu=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,_w={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:hu([0,.65,.55,1]),circOut:hu([.55,0,1,.45]),backIn:hu([.31,.01,.66,-.59]),backOut:hu([.33,1.53,.69,.99])};function Dx(n,e){if(n)return typeof n=="function"?kx()?Cx(n,e):"ease-out":gx(n)?hu(n):Array.isArray(n)?n.map(t=>Dx(t,e)||_w.easeOut):_w[n]}function TD(n,e,t,{delay:r=0,duration:s=300,repeat:o=0,repeatType:l="loop",ease:c="easeOut",times:h}={},p=void 0){const g={[e]:t};h&&(g.offset=h);const y=Dx(c,s);Array.isArray(y)&&(g.easing=y);const w={delay:r,duration:s,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return p&&(w.pseudoElement=p),n.animate(g,w)}function Nx(n){return typeof n=="function"&&"applyToOptions"in n}function SD({type:n,...e}){return Nx(n)&&kx()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class xD extends py{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:s,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:c,onComplete:h}=e;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=e,ny(typeof e.type!="string");const p=SD(e);this.animation=TD(t,r,s,p,o),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const g=fy(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(g):vD(t,r,g),this.animation.cancel()}h==null||h(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,r;const e=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return ms(Number(e))}get time(){return ms(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ps(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&_D()?(this.animation.timeline=e,br):t(this)}}const Ox={anticipate:hx,backInOut:dx,circInOut:px};function ID(n){return n in Ox}function CD(n){typeof n.ease=="string"&&ID(n.ease)&&(n.ease=Ox[n.ease])}const ww=10;class bD extends xD{constructor(e){CD(e),Ax(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:s,element:o,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const c=new my({...l,autoplay:!1}),h=ps(this.finishedTime??this.time);t.setWithVelocity(c.sample(h-ww).value,c.sample(h).value,ww),c.stop()}}const Ew=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Gi.test(n)||n==="0")&&!n.startsWith("url("));function AD(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function RD(n,e,t,r){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],l=Ew(s,e),c=Ew(o,e);return!l||!c?!1:AD(n)||(t==="spring"||Nx(t))&&r}function yy(n){return sx(n)&&"offsetHeight"in n}const PD=new Set(["opacity","clipPath","filter","transform"]),kD=ry(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function DD(n){var p;const{motionValue:e,name:t,repeatDelay:r,repeatType:s,damping:o,type:l}=n;if(!yy((p=e==null?void 0:e.owner)==null?void 0:p.current))return!1;const{onUpdate:c,transformTemplate:h}=e.owner.getProps();return kD()&&t&&PD.has(t)&&(t!=="transform"||!h)&&!c&&!r&&s!=="mirror"&&o!==0&&l!=="inertia"}const ND=40;class OD extends py{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",keyframes:c,name:h,motionValue:p,element:g,...y}){var C;super(),this.stop=()=>{var R,A;this._animation&&(this._animation.stop(),(R=this.stopTimeline)==null||R.call(this)),(A=this.keyframeResolver)==null||A.cancel()},this.createdAt=Xn.now();const w={autoplay:e,delay:t,type:r,repeat:s,repeatDelay:o,repeatType:l,name:h,motionValue:p,element:g,...y},T=(g==null?void 0:g.KeyframeResolver)||gy;this.keyframeResolver=new T(c,(R,A,O)=>this.onKeyframesResolved(R,A,w,!O),h,p,g),(C=this.keyframeResolver)==null||C.scheduleResolve()}onKeyframesResolved(e,t,r,s){this.keyframeResolver=void 0;const{name:o,type:l,velocity:c,delay:h,isHandoff:p,onUpdate:g}=r;this.resolvedAt=Xn.now(),RD(e,o,l,c)||((Zs.instantAnimations||!h)&&(g==null||g(fy(e,r,t))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const w={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>ND?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},T=!p&&DD(w)?new bD({...w,element:w.motionValue.owner.current}):new my(w);T.finished.then(()=>this.notifyFinished()).catch(br),this.pendingTimeline&&(this.stopTimeline=T.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=T}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),gD()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const VD=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function MD(n){const e=VD.exec(n);if(!e)return[,];const[,t,r,s]=e;return[`--${t??r}`,s]}function Vx(n,e,t=1){const[r,s]=MD(n);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const l=o.trim();return rx(l)?parseFloat(l):l}return ly(s)?Vx(s,e,t+1):s}function vy(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}const Mx=new Set(["width","height","top","left","right","bottom",...pl]),LD={test:n=>n==="auto",parse:n=>n},Lx=n=>e=>e.test(n),jx=[fl,Ve,gs,Oi,Ak,bk,LD],Tw=n=>jx.find(Lx(n));function jD(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||ix(n):!0}const FD=new Set(["brightness","contrast","saturate","opacity"]);function UD(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(uy)||[];if(!r)return n;const s=t.replace(r,"");let o=FD.has(e)?1:0;return r!==t&&(o*=100),e+"("+o+s+")"}const BD=/\b([a-z-]*)\(.*?\)/gu,Zm={...Gi,getAnimatableNone:n=>{const e=n.match(BD);return e?e.map(UD).join(" "):n}},Sw={...fl,transform:Math.round},$D={rotate:Oi,rotateX:Oi,rotateY:Oi,rotateZ:Oi,scale:Fd,scaleX:Fd,scaleY:Fd,scaleZ:Fd,skew:Oi,skewX:Oi,skewY:Oi,distance:Ve,translateX:Ve,translateY:Ve,translateZ:Ve,x:Ve,y:Ve,z:Ve,perspective:Ve,transformPerspective:Ve,opacity:Mu,originX:cw,originY:cw,originZ:Ve},_y={borderWidth:Ve,borderTopWidth:Ve,borderRightWidth:Ve,borderBottomWidth:Ve,borderLeftWidth:Ve,borderRadius:Ve,radius:Ve,borderTopLeftRadius:Ve,borderTopRightRadius:Ve,borderBottomRightRadius:Ve,borderBottomLeftRadius:Ve,width:Ve,maxWidth:Ve,height:Ve,maxHeight:Ve,top:Ve,right:Ve,bottom:Ve,left:Ve,padding:Ve,paddingTop:Ve,paddingRight:Ve,paddingBottom:Ve,paddingLeft:Ve,margin:Ve,marginTop:Ve,marginRight:Ve,marginBottom:Ve,marginLeft:Ve,backgroundPositionX:Ve,backgroundPositionY:Ve,...$D,zIndex:Sw,fillOpacity:Mu,strokeOpacity:Mu,numOctaves:Sw},zD={..._y,color:Lt,backgroundColor:Lt,outlineColor:Lt,fill:Lt,stroke:Lt,borderColor:Lt,borderTopColor:Lt,borderRightColor:Lt,borderBottomColor:Lt,borderLeftColor:Lt,filter:Zm,WebkitFilter:Zm},Fx=n=>zD[n];function Ux(n,e){let t=Fx(n);return t!==Zm&&(t=Gi),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const HD=new Set(["auto","none","0"]);function WD(n,e,t){let r=0,s;for(;r<n.length&&!s;){const o=n[r];typeof o=="string"&&!HD.has(o)&&Lu(o).values.length&&(s=n[r]),r++}if(s&&t)for(const o of e)n[o]=Ux(t,s)}class qD extends gy{constructor(e,t,r,s,o){super(e,t,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let p=e[h];if(typeof p=="string"&&(p=p.trim(),ly(p))){const g=Vx(p,t.current);g!==void 0&&(e[h]=g),h===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!Mx.has(r)||e.length!==2)return;const[s,o]=e,l=Tw(s),c=Tw(o);if(l!==c)if(vw(l)&&vw(c))for(let h=0;h<e.length;h++){const p=e[h];typeof p=="string"&&(e[h]=parseFloat(p))}else Fo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||jD(e[s]))&&r.push(s);r.length&&WD(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Fo[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var c;const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,l=r[o];r[o]=Fo[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([h,p])=>{e.getValue(h).set(p)}),this.resolveNoneKeyframes()}}function GD(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const s=(t==null?void 0:t[n])??r.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const Bx=(n,e)=>e&&typeof n=="number"?e.transform(n):n,xw=30,KD=n=>!isNaN(parseFloat(n));class QD{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{var l,c;const o=Xn.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((l=this.events.change)==null||l.notify(this.current),this.dependents))for(const h of this.dependents)h.dirty();s&&((c=this.events.renderRequest)==null||c.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Xn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=KD(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new sy);const r=this.events[e].add(t);return e==="change"?()=>{r(),bt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Xn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>xw)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,xw);return ox(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function el(n,e){return new QD(n,e)}const{schedule:wy}=yx(queueMicrotask,!1),Yr={x:!1,y:!1};function $x(){return Yr.x||Yr.y}function YD(n){return n==="x"||n==="y"?Yr[n]?null:(Yr[n]=!0,()=>{Yr[n]=!1}):Yr.x||Yr.y?null:(Yr.x=Yr.y=!0,()=>{Yr.x=Yr.y=!1})}function zx(n,e){const t=GD(n),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[t,s,()=>r.abort()]}function Iw(n){return!(n.pointerType==="touch"||$x())}function XD(n,e,t={}){const[r,s,o]=zx(n,t),l=c=>{if(!Iw(c))return;const{target:h}=c,p=e(h,c);if(typeof p!="function"||!h)return;const g=y=>{Iw(y)&&(p(y),h.removeEventListener("pointerleave",g))};h.addEventListener("pointerleave",g,s)};return r.forEach(c=>{c.addEventListener("pointerenter",l,s)}),o}const Hx=(n,e)=>e?n===e?!0:Hx(n,e.parentElement):!1,Ey=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,ZD=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function JD(n){return ZD.has(n.tagName)||n.tabIndex!==-1}const Jd=new WeakSet;function Cw(n){return e=>{e.key==="Enter"&&n(e)}}function am(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const eN=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=Cw(()=>{if(Jd.has(t))return;am(t,"down");const s=Cw(()=>{am(t,"up")}),o=()=>am(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function bw(n){return Ey(n)&&!$x()}function tN(n,e,t={}){const[r,s,o]=zx(n,t),l=c=>{const h=c.currentTarget;if(!bw(c))return;Jd.add(h);const p=e(h,c),g=(T,C)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",w),Jd.has(h)&&Jd.delete(h),bw(T)&&typeof p=="function"&&p(T,{success:C})},y=T=>{g(T,h===window||h===document||t.useGlobalTarget||Hx(h,T.target))},w=T=>{g(T,!1)};window.addEventListener("pointerup",y,s),window.addEventListener("pointercancel",w,s)};return r.forEach(c=>{(t.useGlobalTarget?window:c).addEventListener("pointerdown",l,s),yy(c)&&(c.addEventListener("focus",p=>eN(p,s)),!JD(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),o}function Wx(n){return sx(n)&&"ownerSVGElement"in n}function nN(n){return Wx(n)&&n.tagName==="svg"}const wn=n=>!!(n&&n.getVelocity),rN=[...jx,Lt,Gi],sN=n=>rN.find(Lx(n)),Ty=P.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class iN extends P.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,s=yy(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function oN({children:n,isPresent:e,anchorX:t,root:r}){const s=P.useId(),o=P.useRef(null),l=P.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=P.useContext(Ty);return P.useInsertionEffect(()=>{const{width:h,height:p,top:g,left:y,right:w}=l.current;if(e||!o.current||!h||!p)return;const T=t==="left"?`left: ${y}`:`right: ${w}`;o.current.dataset.motionPopId=s;const C=document.createElement("style");c&&(C.nonce=c);const R=r??document.head;return R.appendChild(C),C.sheet&&C.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${p}px !important;
            ${T}px !important;
            top: ${g}px !important;
          }
        `),()=>{R.removeChild(C),R.contains(C)&&R.removeChild(C)}},[e]),S.jsx(iN,{isPresent:e,childRef:o,sizeRef:l,children:P.cloneElement(n,{ref:o})})}const aN=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:l,anchorX:c,root:h})=>{const p=Zg(lN),g=P.useId();let y=!0,w=P.useMemo(()=>(y=!1,{id:g,initial:e,isPresent:t,custom:s,onExitComplete:T=>{p.set(T,!0);for(const C of p.values())if(!C)return;r&&r()},register:T=>(p.set(T,!1),()=>p.delete(T))}),[t,p,r]);return o&&y&&(w={...w}),P.useMemo(()=>{p.forEach((T,C)=>p.set(C,!1))},[t]),P.useEffect(()=>{!t&&!p.size&&r&&r()},[t]),l==="popLayout"&&(n=S.jsx(oN,{isPresent:t,anchorX:c,root:h,children:n})),S.jsx(Kh.Provider,{value:w,children:n})};function lN(){return new Map}function qx(n=!0){const e=P.useContext(Kh);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=e,o=P.useId();P.useEffect(()=>{if(n)return s(o)},[n]);const l=P.useCallback(()=>n&&r&&r(o),[o,r,n]);return!t&&r?[!1,l]:[!0]}const Ud=n=>n.key||"";function Aw(n){const e=[];return P.Children.forEach(n,t=>{P.isValidElement(t)&&e.push(t)}),e}const Rw=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync",propagate:l=!1,anchorX:c="left",root:h})=>{const[p,g]=qx(l),y=P.useMemo(()=>Aw(n),[n]),w=l&&!p?[]:y.map(Ud),T=P.useRef(!0),C=P.useRef(y),R=Zg(()=>new Map),[A,O]=P.useState(y),[B,z]=P.useState(y);nx(()=>{T.current=!1,C.current=y;for(let J=0;J<B.length;J++){const D=Ud(B[J]);w.includes(D)?R.delete(D):R.get(D)!==!0&&R.set(D,!1)}},[B,w.length,w.join("-")]);const Q=[];if(y!==A){let J=[...y];for(let D=0;D<B.length;D++){const I=B[D],k=Ud(I);w.includes(k)||(J.splice(D,0,I),Q.push(I))}return o==="wait"&&Q.length&&(J=Q),z(Aw(J)),O(y),null}const{forceRender:K}=P.useContext(Xg);return S.jsx(S.Fragment,{children:B.map(J=>{const D=Ud(J),I=l&&!p?!1:y===B||w.includes(D),k=()=>{if(R.has(D))R.set(D,!0);else return;let M=!0;R.forEach(L=>{L||(M=!1)}),M&&(K==null||K(),z(C.current),l&&(g==null||g()),r&&r())};return S.jsx(aN,{isPresent:I,initial:!T.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,root:h,onExitComplete:I?void 0:k,anchorX:c,children:J},D)})})},Gx=P.createContext({strict:!1}),Pw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},tl={};for(const n in Pw)tl[n]={isEnabled:e=>Pw[n].some(t=>!!e[t])};function uN(n){for(const e in n)tl[e]={...tl[e],...n[e]}}const cN=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function yh(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||cN.has(n)}let Kx=n=>!yh(n);function dN(n){typeof n=="function"&&(Kx=e=>e.startsWith("on")?!yh(e):n(e))}try{dN(require("@emotion/is-prop-valid").default)}catch{}function hN(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(Kx(s)||t===!0&&yh(s)||!e&&!yh(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}function fN(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,s)=>s==="create"?n:(e.has(s)||e.set(s,n(s)),e.get(s))})}const Qh=P.createContext({});function Yh(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function ju(n){return typeof n=="string"||Array.isArray(n)}const Sy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],xy=["initial",...Sy];function Xh(n){return Yh(n.animate)||xy.some(e=>ju(n[e]))}function Qx(n){return!!(Xh(n)||n.variants)}function pN(n,e){if(Xh(n)){const{initial:t,animate:r}=n;return{initial:t===!1||ju(t)?t:void 0,animate:ju(r)?r:void 0}}return n.inherit!==!1?e:{}}function mN(n){const{initial:e,animate:t}=pN(n,P.useContext(Qh));return P.useMemo(()=>({initial:e,animate:t}),[kw(e),kw(t)])}function kw(n){return Array.isArray(n)?n.join(" "):n}const gN=Symbol.for("motionComponentSymbol");function qa(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function yN(n,e,t){return P.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):qa(t)&&(t.current=r))},[e])}const Iy=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),vN="framerAppearId",Yx="data-"+Iy(vN),Xx=P.createContext({});function _N(n,e,t,r,s){var R,A;const{visualElement:o}=P.useContext(Qh),l=P.useContext(Gx),c=P.useContext(Kh),h=P.useContext(Ty).reducedMotion,p=P.useRef(null);r=r||l.renderer,!p.current&&r&&(p.current=r(n,{visualState:e,parent:o,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const g=p.current,y=P.useContext(Xx);g&&!g.projection&&s&&(g.type==="html"||g.type==="svg")&&wN(p.current,t,s,y);const w=P.useRef(!1);P.useInsertionEffect(()=>{g&&w.current&&g.update(t,c)});const T=t[Yx],C=P.useRef(!!T&&!((R=window.MotionHandoffIsComplete)!=null&&R.call(window,T))&&((A=window.MotionHasOptimisedAnimation)==null?void 0:A.call(window,T)));return nx(()=>{g&&(w.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),wy.render(g.render),C.current&&g.animationState&&g.animationState.animateChanges())}),P.useEffect(()=>{g&&(!C.current&&g.animationState&&g.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{var O;(O=window.MotionHandoffMarkAsComplete)==null||O.call(window,T)}),C.current=!1))}),g}function wN(n,e,t,r){const{layoutId:s,layout:o,drag:l,dragConstraints:c,layoutScroll:h,layoutRoot:p,layoutCrossfade:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:Zx(n.parent)),n.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!l||c&&qa(c),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:h,layoutRoot:p})}function Zx(n){if(n)return n.options.allowProjection!==!1?n.projection:Zx(n.parent)}function EN({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:s}){n&&uN(n);function o(c,h){let p;const g={...P.useContext(Ty),...c,layoutId:TN(c)},{isStatic:y}=g,w=mN(c),T=r(c,y);if(!y&&Jg){SN();const C=xN(g);p=C.MeasureLayout,w.visualElement=_N(s,T,g,e,C.ProjectionNode)}return S.jsxs(Qh.Provider,{value:w,children:[p&&w.visualElement?S.jsx(p,{visualElement:w.visualElement,...g}):null,t(s,c,yN(T,w.visualElement,h),T,y,w.visualElement)]})}o.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const l=P.forwardRef(o);return l[gN]=s,l}function TN({layoutId:n}){const e=P.useContext(Xg).id;return e&&n!==void 0?e+"-"+n:n}function SN(n,e){P.useContext(Gx).strict}function xN(n){const{drag:e,layout:t}=tl;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Fu={};function IN(n){for(const e in n)Fu[e]=n[e],ay(e)&&(Fu[e].isCSSVariable=!0)}function Jx(n,{layout:e,layoutId:t}){return ml.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Fu[n]||n==="opacity")}const CN={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},bN=pl.length;function AN(n,e,t){let r="",s=!0;for(let o=0;o<bN;o++){const l=pl[o],c=n[l];if(c===void 0)continue;let h=!0;if(typeof c=="number"?h=c===(l.startsWith("scale")?1:0):h=parseFloat(c)===0,!h||t){const p=Bx(c,_y[l]);if(!h){s=!1;const g=CN[l]||l;r+=`${g}(${p}) `}t&&(e[l]=p)}}return r=r.trim(),t?r=t(e,s?"":r):s&&(r="none"),r}function Cy(n,e,t){const{style:r,vars:s,transformOrigin:o}=n;let l=!1,c=!1;for(const h in e){const p=e[h];if(ml.has(h)){l=!0;continue}else if(ay(h)){s[h]=p;continue}else{const g=Bx(p,_y[h]);h.startsWith("origin")?(c=!0,o[h]=g):r[h]=g}}if(e.transform||(l||t?r.transform=AN(e,n.transform,t):r.transform&&(r.transform="none")),c){const{originX:h="50%",originY:p="50%",originZ:g=0}=o;r.transformOrigin=`${h} ${p} ${g}`}}const by=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function eI(n,e,t){for(const r in e)!wn(e[r])&&!Jx(r,t)&&(n[r]=e[r])}function RN({transformTemplate:n},e){return P.useMemo(()=>{const t=by();return Cy(t,e,n),Object.assign({},t.vars,t.style)},[e])}function PN(n,e){const t=n.style||{},r={};return eI(r,t,n),Object.assign(r,RN(n,e)),r}function kN(n,e){const t={},r=PN(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const DN={offset:"stroke-dashoffset",array:"stroke-dasharray"},NN={offset:"strokeDashoffset",array:"strokeDasharray"};function ON(n,e,t=1,r=0,s=!0){n.pathLength=1;const o=s?DN:NN;n[o.offset]=Ve.transform(-r);const l=Ve.transform(e),c=Ve.transform(t);n[o.array]=`${l} ${c}`}function tI(n,{attrX:e,attrY:t,attrScale:r,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...c},h,p,g){if(Cy(n,c,p),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:y,style:w}=n;y.transform&&(w.transform=y.transform,delete y.transform),(w.transform||y.transformOrigin)&&(w.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),w.transform&&(w.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete y.transformBox),e!==void 0&&(y.x=e),t!==void 0&&(y.y=t),r!==void 0&&(y.scale=r),s!==void 0&&ON(y,s,o,l,!1)}const nI=()=>({...by(),attrs:{}}),rI=n=>typeof n=="string"&&n.toLowerCase()==="svg";function VN(n,e,t,r){const s=P.useMemo(()=>{const o=nI();return tI(o,e,rI(r),n.transformTemplate,n.style),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};eI(o,n.style,n),s.style={...o,...s.style}}return s}const MN=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ay(n){return typeof n!="string"||n.includes("-")?!1:!!(MN.indexOf(n)>-1||/[A-Z]/u.test(n))}function LN(n=!1){return(t,r,s,{latestValues:o},l)=>{const h=(Ay(t)?VN:kN)(r,o,l,t),p=hN(r,typeof t=="string",n),g=t!==P.Fragment?{...p,...h,ref:s}:{},{children:y}=r,w=P.useMemo(()=>wn(y)?y.get():y,[y]);return P.createElement(t,{...g,children:w})}}function Dw(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function Ry(n,e,t,r){if(typeof e=="function"){const[s,o]=Dw(r);e=e(t!==void 0?t:n.custom,s,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,o]=Dw(r);e=e(t!==void 0?t:n.custom,s,o)}return e}function eh(n){return wn(n)?n.get():n}function jN({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,s){return{latestValues:FN(t,r,s,n),renderState:e()}}const sI=n=>(e,t)=>{const r=P.useContext(Qh),s=P.useContext(Kh),o=()=>jN(n,e,r,s);return t?o():Zg(o)};function FN(n,e,t,r){const s={},o=r(n,{});for(const w in o)s[w]=eh(o[w]);let{initial:l,animate:c}=n;const h=Xh(n),p=Qx(n);e&&p&&!h&&n.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let g=t?t.initial===!1:!1;g=g||l===!1;const y=g?c:l;if(y&&typeof y!="boolean"&&!Yh(y)){const w=Array.isArray(y)?y:[y];for(let T=0;T<w.length;T++){const C=Ry(n,w[T]);if(C){const{transitionEnd:R,transition:A,...O}=C;for(const B in O){let z=O[B];if(Array.isArray(z)){const Q=g?z.length-1:0;z=z[Q]}z!==null&&(s[B]=z)}for(const B in R)s[B]=R[B]}}}return s}function Py(n,e,t){var o;const{style:r}=n,s={};for(const l in r)(wn(r[l])||e.style&&wn(e.style[l])||Jx(l,n)||((o=t==null?void 0:t.getValue(l))==null?void 0:o.liveStyle)!==void 0)&&(s[l]=r[l]);return s}const UN={useVisualState:sI({scrapeMotionValuesFromProps:Py,createRenderState:by})};function iI(n,e,t){const r=Py(n,e,t);for(const s in n)if(wn(n[s])||wn(e[s])){const o=pl.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=n[s]}return r}const BN={useVisualState:sI({scrapeMotionValuesFromProps:iI,createRenderState:nI})};function $N(n,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const l={...Ay(r)?BN:UN,preloadedFeatures:n,useRender:LN(s),createVisualElement:e,Component:r};return EN(l)}}function Uu(n,e,t){const r=n.getProps();return Ry(r,e,t!==void 0?t:r.custom,n)}const Jm=n=>Array.isArray(n);function zN(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,el(t))}function HN(n){return Jm(n)?n[n.length-1]||0:n}function WN(n,e){const t=Uu(n,e);let{transitionEnd:r={},transition:s={},...o}=t||{};o={...o,...r};for(const l in o){const c=HN(o[l]);zN(n,l,c)}}function qN(n){return!!(wn(n)&&n.add)}function eg(n,e){const t=n.getValue("willChange");if(qN(t))return t.add(e);if(!t&&Zs.WillChange){const r=new Zs.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function oI(n){return n.props[Yx]}const GN=n=>n!==null;function KN(n,{repeat:e,repeatType:t="loop"},r){const s=n.filter(GN),o=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[o]}const QN={type:"spring",stiffness:500,damping:25,restSpeed:10},YN=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),XN={type:"keyframes",duration:.8},ZN={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},JN=(n,{keyframes:e})=>e.length>2?XN:ml.has(n)?n.startsWith("scale")?YN(e[1]):QN:ZN;function eO({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:l,repeatDelay:c,from:h,elapsed:p,...g}){return!!Object.keys(g).length}const ky=(n,e,t,r={},s,o)=>l=>{const c=vy(r,n)||{},h=c.delay||r.delay||0;let{elapsed:p=0}=r;p=p-ps(h);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-p,onUpdate:w=>{e.set(w),c.onUpdate&&c.onUpdate(w)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:n,motionValue:e,element:o?void 0:s};eO(c)||Object.assign(g,JN(n,g)),g.duration&&(g.duration=ps(g.duration)),g.repeatDelay&&(g.repeatDelay=ps(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(y=!0)),(Zs.instantAnimations||Zs.skipAnimations)&&(y=!0,g.duration=0,g.delay=0),g.allowFlatten=!c.type&&!c.ease,y&&!o&&e.get()!==void 0){const w=KN(g.keyframes,c);if(w!==void 0){bt.update(()=>{g.onUpdate(w),g.onComplete()});return}}return c.isSync?new my(g):new OD(g)};function tO({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function aI(n,e,{delay:t=0,transitionOverride:r,type:s}={}){let{transition:o=n.getDefaultTransition(),transitionEnd:l,...c}=e;r&&(o=r);const h=[],p=s&&n.animationState&&n.animationState.getState()[s];for(const g in c){const y=n.getValue(g,n.latestValues[g]??null),w=c[g];if(w===void 0||p&&tO(p,g))continue;const T={delay:t,...vy(o||{},g)},C=y.get();if(C!==void 0&&!y.isAnimating&&!Array.isArray(w)&&w===C&&!T.velocity)continue;let R=!1;if(window.MotionHandoffAnimation){const O=oI(n);if(O){const B=window.MotionHandoffAnimation(O,g,bt);B!==null&&(T.startTime=B,R=!0)}}eg(n,g),y.start(ky(g,y,w,n.shouldReduceMotion&&Mx.has(g)?{type:!1}:T,n,R));const A=y.animation;A&&h.push(A)}return l&&Promise.all(h).then(()=>{bt.update(()=>{l&&WN(n,l)})}),h}function tg(n,e,t={}){var h;const r=Uu(n,e,t.type==="exit"?(h=n.presenceContext)==null?void 0:h.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const o=r?()=>Promise.all(aI(n,r,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(p=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:w}=s;return nO(n,e,g+p,y,w,t)}:()=>Promise.resolve(),{when:c}=s;if(c){const[p,g]=c==="beforeChildren"?[o,l]:[l,o];return p().then(()=>g())}else return Promise.all([o(),l(t.delay)])}function nO(n,e,t=0,r=0,s=1,o){const l=[],c=(n.variantChildren.size-1)*r,h=s===1?(p=0)=>p*r:(p=0)=>c-p*r;return Array.from(n.variantChildren).sort(rO).forEach((p,g)=>{p.notify("AnimationStart",e),l.push(tg(p,e,{...o,delay:t+h(g)}).then(()=>p.notify("AnimationComplete",e)))}),Promise.all(l)}function rO(n,e){return n.sortNodePosition(e)}function sO(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>tg(n,o,t));r=Promise.all(s)}else if(typeof e=="string")r=tg(n,e,t);else{const s=typeof e=="function"?Uu(n,e,t.custom):e;r=Promise.all(aI(n,s,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function lI(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const iO=xy.length;function uI(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?uI(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<iO;t++){const r=xy[t],s=n.props[r];(ju(s)||s===!1)&&(e[r]=s)}return e}const oO=[...Sy].reverse(),aO=Sy.length;function lO(n){return e=>Promise.all(e.map(({animation:t,options:r})=>sO(n,t,r)))}function uO(n){let e=lO(n),t=Nw(),r=!0;const s=h=>(p,g)=>{var w;const y=Uu(n,g,h==="exit"?(w=n.presenceContext)==null?void 0:w.custom:void 0);if(y){const{transition:T,transitionEnd:C,...R}=y;p={...p,...R,...C}}return p};function o(h){e=h(n)}function l(h){const{props:p}=n,g=uI(n.parent)||{},y=[],w=new Set;let T={},C=1/0;for(let A=0;A<aO;A++){const O=oO[A],B=t[O],z=p[O]!==void 0?p[O]:g[O],Q=ju(z),K=O===h?B.isActive:null;K===!1&&(C=A);let J=z===g[O]&&z!==p[O]&&Q;if(J&&r&&n.manuallyAnimateOnMount&&(J=!1),B.protectedKeys={...T},!B.isActive&&K===null||!z&&!B.prevProp||Yh(z)||typeof z=="boolean")continue;const D=cO(B.prevProp,z);let I=D||O===h&&B.isActive&&!J&&Q||A>C&&Q,k=!1;const M=Array.isArray(z)?z:[z];let L=M.reduce(s(O),{});K===!1&&(L={});const{prevResolvedValues:H={}}=B,V={...H,...L},rt=Ie=>{I=!0,w.has(Ie)&&(k=!0,w.delete(Ie)),B.needsAnimating[Ie]=!0;const se=n.getValue(Ie);se&&(se.liveStyle=!1)};for(const Ie in V){const se=L[Ie],he=H[Ie];if(T.hasOwnProperty(Ie))continue;let ce=!1;Jm(se)&&Jm(he)?ce=!lI(se,he):ce=se!==he,ce?se!=null?rt(Ie):w.add(Ie):se!==void 0&&w.has(Ie)?rt(Ie):B.protectedKeys[Ie]=!0}B.prevProp=z,B.prevResolvedValues=L,B.isActive&&(T={...T,...L}),r&&n.blockInitialAnimation&&(I=!1),I&&(!(J&&D)||k)&&y.push(...M.map(Ie=>({animation:Ie,options:{type:O}})))}if(w.size){const A={};if(typeof p.initial!="boolean"){const O=Uu(n,Array.isArray(p.initial)?p.initial[0]:p.initial);O&&O.transition&&(A.transition=O.transition)}w.forEach(O=>{const B=n.getBaseTarget(O),z=n.getValue(O);z&&(z.liveStyle=!0),A[O]=B??null}),y.push({animation:A})}let R=!!y.length;return r&&(p.initial===!1||p.initial===p.animate)&&!n.manuallyAnimateOnMount&&(R=!1),r=!1,R?e(y):Promise.resolve()}function c(h,p){var y;if(t[h].isActive===p)return Promise.resolve();(y=n.variantChildren)==null||y.forEach(w=>{var T;return(T=w.animationState)==null?void 0:T.setActive(h,p)}),t[h].isActive=p;const g=l(h);for(const w in t)t[w].protectedKeys={};return g}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>t,reset:()=>{t=Nw(),r=!0}}}function cO(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!lI(e,n):!1}function ko(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Nw(){return{animate:ko(!0),whileInView:ko(),whileHover:ko(),whileTap:ko(),whileDrag:ko(),whileFocus:ko(),exit:ko()}}class so{constructor(e){this.isMounted=!1,this.node=e}update(){}}class dO extends so{constructor(e){super(e),e.animationState||(e.animationState=uO(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Yh(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let hO=0;class fO extends so{constructor(){super(...arguments),this.id=hO++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const pO={animation:{Feature:dO},exit:{Feature:fO}};function Bu(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function uc(n){return{point:{x:n.pageX,y:n.pageY}}}const mO=n=>e=>Ey(e)&&n(e,uc(e));function Tu(n,e,t,r){return Bu(n,e,mO(t),r)}function cI({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function gO({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function yO(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}const dI=1e-4,vO=1-dI,_O=1+dI,hI=.01,wO=0-hI,EO=0+hI;function kn(n){return n.max-n.min}function TO(n,e,t){return Math.abs(n-e)<=t}function Ow(n,e,t,r=.5){n.origin=r,n.originPoint=It(e.min,e.max,n.origin),n.scale=kn(t)/kn(e),n.translate=It(t.min,t.max,n.origin)-n.originPoint,(n.scale>=vO&&n.scale<=_O||isNaN(n.scale))&&(n.scale=1),(n.translate>=wO&&n.translate<=EO||isNaN(n.translate))&&(n.translate=0)}function Su(n,e,t,r){Ow(n.x,e.x,t.x,r?r.originX:void 0),Ow(n.y,e.y,t.y,r?r.originY:void 0)}function Vw(n,e,t){n.min=t.min+e.min,n.max=n.min+kn(e)}function SO(n,e,t){Vw(n.x,e.x,t.x),Vw(n.y,e.y,t.y)}function Mw(n,e,t){n.min=e.min-t.min,n.max=n.min+kn(e)}function xu(n,e,t){Mw(n.x,e.x,t.x),Mw(n.y,e.y,t.y)}const Lw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ga=()=>({x:Lw(),y:Lw()}),jw=()=>({min:0,max:0}),Dt=()=>({x:jw(),y:jw()});function Sr(n){return[n("x"),n("y")]}function lm(n){return n===void 0||n===1}function ng({scale:n,scaleX:e,scaleY:t}){return!lm(n)||!lm(e)||!lm(t)}function Do(n){return ng(n)||fI(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function fI(n){return Fw(n.x)||Fw(n.y)}function Fw(n){return n&&n!=="0%"}function vh(n,e,t){const r=n-t,s=e*r;return t+s}function Uw(n,e,t,r,s){return s!==void 0&&(n=vh(n,s,r)),vh(n,t,r)+e}function rg(n,e=0,t=1,r,s){n.min=Uw(n.min,e,t,r,s),n.max=Uw(n.max,e,t,r,s)}function pI(n,{x:e,y:t}){rg(n.x,e.translate,e.scale,e.originPoint),rg(n.y,t.translate,t.scale,t.originPoint)}const Bw=.999999999999,$w=1.0000000000001;function xO(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let o,l;for(let c=0;c<s;c++){o=t[c],l=o.projectionDelta;const{visualElement:h}=o.options;h&&h.props.style&&h.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Qa(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,pI(n,l)),r&&Do(o.latestValues)&&Qa(n,o.latestValues))}e.x<$w&&e.x>Bw&&(e.x=1),e.y<$w&&e.y>Bw&&(e.y=1)}function Ka(n,e){n.min=n.min+e,n.max=n.max+e}function zw(n,e,t,r,s=.5){const o=It(n.min,n.max,s);rg(n,e,t,o,r)}function Qa(n,e){zw(n.x,e.x,e.scaleX,e.scale,e.originX),zw(n.y,e.y,e.scaleY,e.scale,e.originY)}function mI(n,e){return cI(yO(n.getBoundingClientRect(),e))}function IO(n,e,t){const r=mI(n,t),{scroll:s}=e;return s&&(Ka(r.x,s.offset.x),Ka(r.y,s.offset.y)),r}const gI=({current:n})=>n?n.ownerDocument.defaultView:null,Hw=(n,e)=>Math.abs(n-e);function CO(n,e){const t=Hw(n.x,e.x),r=Hw(n.y,e.y);return Math.sqrt(t**2+r**2)}class yI{constructor(e,t,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=cm(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,T=CO(y.offset,{x:0,y:0})>=3;if(!w&&!T)return;const{point:C}=y,{timestamp:R}=ln;this.history.push({...C,timestamp:R});const{onStart:A,onMove:O}=this.handlers;w||(A&&A(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),O&&O(this.lastMoveEvent,y)},this.handlePointerMove=(y,w)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=um(w,this.transformPagePoint),bt.update(this.updatePoint,!0)},this.handlePointerUp=(y,w)=>{this.end();const{onEnd:T,onSessionEnd:C,resumeAnimation:R}=this.handlers;if(this.dragSnapToOrigin&&R&&R(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=cm(y.type==="pointercancel"?this.lastMoveEventInfo:um(w,this.transformPagePoint),this.history);this.startEvent&&T&&T(y,A),C&&C(y,A)},!Ey(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=r,this.contextWindow=s||window;const l=uc(e),c=um(l,this.transformPagePoint),{point:h}=c,{timestamp:p}=ln;this.history=[{...h,timestamp:p}];const{onSessionStart:g}=t;g&&g(e,cm(c,this.history)),this.removeListeners=oc(Tu(this.contextWindow,"pointermove",this.handlePointerMove),Tu(this.contextWindow,"pointerup",this.handlePointerUp),Tu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),qi(this.updatePoint)}}function um(n,e){return e?{point:e(n.point)}:n}function Ww(n,e){return{x:n.x-e.x,y:n.y-e.y}}function cm({point:n},e){return{point:n,delta:Ww(n,vI(e)),offset:Ww(n,bO(e)),velocity:AO(e,.1)}}function bO(n){return n[0]}function vI(n){return n[n.length-1]}function AO(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=vI(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>ps(e)));)t--;if(!r)return{x:0,y:0};const o=ms(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const l={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function RO(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?It(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?It(t,n,r.max):Math.min(n,t)),n}function qw(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function PO(n,{top:e,left:t,bottom:r,right:s}){return{x:qw(n.x,t,s),y:qw(n.y,e,r)}}function Gw(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function kO(n,e){return{x:Gw(n.x,e.x),y:Gw(n.y,e.y)}}function DO(n,e){let t=.5;const r=kn(n),s=kn(e);return s>r?t=Vu(e.min,e.max-r,n.min):r>s&&(t=Vu(n.min,n.max-s,e.min)),Xs(0,1,t)}function NO(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const sg=.35;function OO(n=sg){return n===!1?n=0:n===!0&&(n=sg),{x:Kw(n,"left","right"),y:Kw(n,"top","bottom")}}function Kw(n,e,t){return{min:Qw(n,e),max:Qw(n,t)}}function Qw(n,e){return typeof n=="number"?n:n[e]||0}const VO=new WeakMap;class MO{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Dt(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=g=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(uc(g).point)},o=(g,y)=>{const{drag:w,dragPropagation:T,onDragStart:C}=this.getProps();if(w&&!T&&(this.openDragLock&&this.openDragLock(),this.openDragLock=YD(w),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Sr(A=>{let O=this.getAxisMotionValue(A).get()||0;if(gs.test(O)){const{projection:B}=this.visualElement;if(B&&B.layout){const z=B.layout.layoutBox[A];z&&(O=kn(z)*(parseFloat(O)/100))}}this.originPoint[A]=O}),C&&bt.postRender(()=>C(g,y)),eg(this.visualElement,"transform");const{animationState:R}=this.visualElement;R&&R.setActive("whileDrag",!0)},l=(g,y)=>{const{dragPropagation:w,dragDirectionLock:T,onDirectionLock:C,onDrag:R}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:A}=y;if(T&&this.currentDirection===null){this.currentDirection=LO(A),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",y.point,A),this.updateAxis("y",y.point,A),this.visualElement.render(),R&&R(g,y)},c=(g,y)=>this.stop(g,y),h=()=>Sr(g=>{var y;return this.getAnimationState(g)==="paused"&&((y=this.getAxisMotionValue(g).animation)==null?void 0:y.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new yI(e,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,contextWindow:gI(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&bt.postRender(()=>o(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!Bd(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=RO(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,s=this.constraints;e&&qa(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=PO(r.layoutBox,e):this.constraints=!1,this.elastic=OO(t),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Sr(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=NO(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!qa(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=IO(r,s.root,this.visualElement.getTransformPagePoint());let l=kO(s.layout.layoutBox,o);if(t){const c=t(gO(l));this.hasMutatedConstraints=!!c,c&&(l=cI(c))}return l}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),h=this.constraints||{},p=Sr(g=>{if(!Bd(g,t,this.currentDirection))return;let y=h&&h[g]||{};l&&(y={min:0,max:0});const w=s?200:1e6,T=s?40:1e7,C={type:"inertia",velocity:r?e[g]:0,bounceStiffness:w,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...o,...y};return this.startAxisValueAnimation(g,C)});return Promise.all(p).then(c)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return eg(this.visualElement,e),r.start(ky(e,r,0,t,this.visualElement,!1))}stopAnimation(){Sr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Sr(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Sr(t=>{const{drag:r}=this.getProps();if(!Bd(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(t);if(s&&s.layout){const{min:l,max:c}=s.layout.layoutBox[t];o.set(e[t]-It(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!qa(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Sr(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const h=c.get();s[l]=DO({min:h,max:h},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Sr(l=>{if(!Bd(l,e,null))return;const c=this.getAxisMotionValue(l),{min:h,max:p}=this.constraints[l];c.set(It(h,p,s[l]))})}addListeners(){if(!this.visualElement.current)return;VO.set(this.visualElement,this);const e=this.visualElement.current,t=Tu(e,"pointerdown",h=>{const{drag:p,dragListener:g=!0}=this.getProps();p&&g&&this.start(h)}),r=()=>{const{dragConstraints:h}=this.getProps();qa(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),bt.read(r);const l=Bu(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p})=>{this.isDragging&&p&&(Sr(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=h[g].translate,y.set(y.get()+h[g].translate))}),this.visualElement.render())});return()=>{l(),t(),o(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:l=sg,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function Bd(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function LO(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class jO extends so{constructor(e){super(e),this.removeGroupControls=br,this.removeListeners=br,this.controls=new MO(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||br}unmount(){this.removeGroupControls(),this.removeListeners()}}const Yw=n=>(e,t)=>{n&&bt.postRender(()=>n(e,t))};class FO extends so{constructor(){super(...arguments),this.removePointerDownListener=br}onPointerDown(e){this.session=new yI(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:gI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Yw(e),onStart:Yw(t),onMove:r,onEnd:(o,l)=>{delete this.session,s&&bt.postRender(()=>s(o,l))}}}mount(){this.removePointerDownListener=Tu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const th={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Xw(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const cu={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ve.test(n))n=parseFloat(n);else return n;const t=Xw(n,e.target.x),r=Xw(n,e.target.y);return`${t}% ${r}%`}},UO={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=Gi.parse(n);if(s.length>5)return r;const o=Gi.createTransformer(n),l=typeof s[0]!="number"?1:0,c=t.x.scale*e.x,h=t.y.scale*e.y;s[0+l]/=c,s[1+l]/=h;const p=It(c,h,.5);return typeof s[2+l]=="number"&&(s[2+l]/=p),typeof s[3+l]=="number"&&(s[3+l]/=p),o(s)}};class BO extends P.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;IN($O),o&&(t.group&&t.group.add(o),r&&r.register&&s&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),th.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:o}=this.props,{projection:l}=r;return l&&(l.isPresent=o,s||e.layoutDependency!==t||t===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||bt.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),wy.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function _I(n){const[e,t]=qx(),r=P.useContext(Xg);return S.jsx(BO,{...n,layoutGroup:r,switchLayoutGroup:P.useContext(Xx),isPresent:e,safeToRemove:t})}const $O={borderRadius:{...cu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:cu,borderTopRightRadius:cu,borderBottomLeftRadius:cu,borderBottomRightRadius:cu,boxShadow:UO};function zO(n,e,t){const r=wn(n)?n:el(n);return r.start(ky("",r,e,t)),r.animation}const HO=(n,e)=>n.depth-e.depth;class WO{constructor(){this.children=[],this.isDirty=!1}add(e){ey(this.children,e),this.isDirty=!0}remove(e){ty(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(HO),this.isDirty=!1,this.children.forEach(e)}}function qO(n,e){const t=Xn.now(),r=({timestamp:s})=>{const o=s-t;o>=e&&(qi(r),n(o-e))};return bt.setup(r,!0),()=>qi(r)}const wI=["TopLeft","TopRight","BottomLeft","BottomRight"],GO=wI.length,Zw=n=>typeof n=="string"?parseFloat(n):n,Jw=n=>typeof n=="number"||Ve.test(n);function KO(n,e,t,r,s,o){s?(n.opacity=It(0,t.opacity??1,QO(r)),n.opacityExit=It(e.opacity??1,0,YO(r))):o&&(n.opacity=It(e.opacity??1,t.opacity??1,r));for(let l=0;l<GO;l++){const c=`border${wI[l]}Radius`;let h=eE(e,c),p=eE(t,c);if(h===void 0&&p===void 0)continue;h||(h=0),p||(p=0),h===0||p===0||Jw(h)===Jw(p)?(n[c]=Math.max(It(Zw(h),Zw(p),r),0),(gs.test(p)||gs.test(h))&&(n[c]+="%")):n[c]=p}(e.rotate||t.rotate)&&(n.rotate=It(e.rotate||0,t.rotate||0,r))}function eE(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const QO=EI(0,.5,fx),YO=EI(.5,.95,br);function EI(n,e,t){return r=>r<n?0:r>e?1:t(Vu(n,e,r))}function tE(n,e){n.min=e.min,n.max=e.max}function Er(n,e){tE(n.x,e.x),tE(n.y,e.y)}function nE(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function rE(n,e,t,r,s){return n-=e,n=vh(n,1/t,r),s!==void 0&&(n=vh(n,1/s,r)),n}function XO(n,e=0,t=1,r=.5,s,o=n,l=n){if(gs.test(e)&&(e=parseFloat(e),e=It(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=It(o.min,o.max,r);n===o&&(c-=e),n.min=rE(n.min,e,t,c,s),n.max=rE(n.max,e,t,c,s)}function sE(n,e,[t,r,s],o,l){XO(n,e[t],e[r],e[s],e.scale,o,l)}const ZO=["x","scaleX","originX"],JO=["y","scaleY","originY"];function iE(n,e,t,r){sE(n.x,e,ZO,t?t.x:void 0,r?r.x:void 0),sE(n.y,e,JO,t?t.y:void 0,r?r.y:void 0)}function oE(n){return n.translate===0&&n.scale===1}function TI(n){return oE(n.x)&&oE(n.y)}function aE(n,e){return n.min===e.min&&n.max===e.max}function e2(n,e){return aE(n.x,e.x)&&aE(n.y,e.y)}function lE(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function SI(n,e){return lE(n.x,e.x)&&lE(n.y,e.y)}function uE(n){return kn(n.x)/kn(n.y)}function cE(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class t2{constructor(){this.members=[]}add(e){ey(this.members,e),e.scheduleRender()}remove(e){if(ty(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function n2(n,e,t){let r="";const s=n.x.translate/e.x,o=n.y.translate/e.y,l=(t==null?void 0:t.z)||0;if((s||o||l)&&(r=`translate3d(${s}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:p,rotate:g,rotateX:y,rotateY:w,skewX:T,skewY:C}=t;p&&(r=`perspective(${p}px) ${r}`),g&&(r+=`rotate(${g}deg) `),y&&(r+=`rotateX(${y}deg) `),w&&(r+=`rotateY(${w}deg) `),T&&(r+=`skewX(${T}deg) `),C&&(r+=`skewY(${C}deg) `)}const c=n.x.scale*e.x,h=n.y.scale*e.y;return(c!==1||h!==1)&&(r+=`scale(${c}, ${h})`),r||"none"}const dm=["","X","Y","Z"],r2={visibility:"hidden"},s2=1e3;let i2=0;function hm(n,e,t,r){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),r&&(r[n]=0))}function xI(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=oI(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",bt,!(s||o))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&xI(r)}function II({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},c=e==null?void 0:e()){this.id=i2++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(l2),this.nodes.forEach(h2),this.nodes.forEach(f2),this.nodes.forEach(u2)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new WO)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new sy),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const h=this.eventHandlers.get(l);h&&h.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=Wx(l)&&!nN(l),this.instance=l;const{layoutId:c,layout:h,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||c)&&(this.isLayoutDirty=!0),n){let g;const y=()=>this.root.updateBlockedByResize=!1;n(l,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=qO(y,250),th.hasAnimatedSinceResize&&(th.hasAnimatedSinceResize=!1,this.nodes.forEach(fE))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&p&&(c||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:w,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const C=this.options.transition||p.getDefaultTransition()||v2,{onLayoutAnimationStart:R,onLayoutAnimationComplete:A}=p.getProps(),O=!this.targetLayout||!SI(this.targetLayout,T),B=!y&&w;if(this.options.layoutRoot||this.resumeFrom||B||y&&(O||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const z={...vy(C,"layout"),onPlay:R,onComplete:A};(p.shouldReduceMotion||this.options.layoutRoot)&&(z.delay=0,z.type=!1),this.startAnimation(z),this.setAnimationOrigin(g,B)}else y||fE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),qi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(p2),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&xI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:c,layout:h}=this.options;if(c===void 0&&!h)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(dE);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(hE);return}this.isUpdating||this.nodes.forEach(hE),this.animationCommitId=this.animationId,this.isUpdating=!1,this.nodes.forEach(d2),this.nodes.forEach(o2),this.nodes.forEach(a2),this.clearAllSnapshots();const c=Xn.now();ln.delta=Xs(0,1e3/60,c-ln.timestamp),ln.timestamp=c,ln.isProcessing=!0,nm.update.process(ln),nm.preRender.process(ln),nm.render.process(ln),ln.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,wy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(c2),this.sharedNodes.forEach(m2)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,bt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){bt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!kn(this.snapshot.measuredBox.x)&&!kn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const h=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!TI(this.projectionDelta),h=this.getTransformTemplate(),p=h?h(this.latestValues,""):void 0,g=p!==this.prevTransformTemplateValue;l&&this.instance&&(c||Do(this.latestValues)||g)&&(s(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let h=this.removeElementScroll(c);return l&&(h=this.removeTransform(h)),_2(h),{animationId:this.root.animationId,measuredBox:c,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var p;const{visualElement:l}=this.options;if(!l)return Dt();const c=l.measureViewportBox();if(!(((p=this.scroll)==null?void 0:p.wasRoot)||this.path.some(w2))){const{scroll:g}=this.root;g&&(Ka(c.x,g.offset.x),Ka(c.y,g.offset.y))}return c}removeElementScroll(l){var h;const c=Dt();if(Er(c,l),(h=this.scroll)!=null&&h.wasRoot)return c;for(let p=0;p<this.path.length;p++){const g=this.path[p],{scroll:y,options:w}=g;g!==this.root&&y&&w.layoutScroll&&(y.wasRoot&&Er(c,l),Ka(c.x,y.offset.x),Ka(c.y,y.offset.y))}return c}applyTransform(l,c=!1){const h=Dt();Er(h,l);for(let p=0;p<this.path.length;p++){const g=this.path[p];!c&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Qa(h,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Do(g.latestValues)&&Qa(h,g.latestValues)}return Do(this.latestValues)&&Qa(h,this.latestValues),h}removeTransform(l){const c=Dt();Er(c,l);for(let h=0;h<this.path.length;h++){const p=this.path[h];if(!p.instance||!Do(p.latestValues))continue;ng(p.latestValues)&&p.updateSnapshot();const g=Dt(),y=p.measurePageBox();Er(g,y),iE(c,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,g)}return Do(this.latestValues)&&iE(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ln.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var w;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==c;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!(!this.layout||!(g||y))){if(this.resolvedRelativeTargetAt=ln.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),xu(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),Er(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Dt(),this.targetWithTransforms=Dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),SO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Er(this.target,this.layout.layoutBox),pI(this.target,this.targetDelta)):Er(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),xu(this.relativeTargetOrigin,this.target,T.target),Er(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||ng(this.parent.latestValues)||fI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var C;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||(C=this.parent)!=null&&C.isProjectionDirty)&&(h=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===ln.timestamp&&(h=!1),h)return;const{layout:p,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||g))return;Er(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,w=this.treeScale.y;xO(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Dt());const{target:T}=l;if(!T){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(nE(this.prevProjectionDelta.x,this.projectionDelta.x),nE(this.prevProjectionDelta.y,this.projectionDelta.y)),Su(this.projectionDelta,this.layoutCorrected,T,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==w||!cE(this.projectionDelta.x,this.prevProjectionDelta.x)||!cE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),l){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ga(),this.projectionDelta=Ga(),this.projectionDeltaWithTransform=Ga()}setAnimationOrigin(l,c=!1){const h=this.snapshot,p=h?h.latestValues:{},g={...this.latestValues},y=Ga();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const w=Dt(),T=h?h.source:void 0,C=this.layout?this.layout.source:void 0,R=T!==C,A=this.getStack(),O=!A||A.members.length<=1,B=!!(R&&!O&&this.options.crossfade===!0&&!this.path.some(y2));this.animationProgress=0;let z;this.mixTargetDelta=Q=>{const K=Q/1e3;pE(y.x,l.x,K),pE(y.y,l.y,K),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(xu(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),g2(this.relativeTarget,this.relativeTargetOrigin,w,K),z&&e2(this.relativeTarget,z)&&(this.isProjectionDirty=!1),z||(z=Dt()),Er(z,this.relativeTarget)),R&&(this.animationValues=g,KO(g,p,this.latestValues,K,B,O)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=K},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var c,h,p;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(),(p=(h=this.resumingFrom)==null?void 0:h.currentAnimation)==null||p.stop(),this.pendingAnimation&&(qi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=bt.update(()=>{th.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=el(0)),this.currentAnimation=zO(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),l.onUpdate&&l.onUpdate(g)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(s2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:h,layout:p,latestValues:g}=l;if(!(!c||!h||!p)){if(this!==l&&this.layout&&p&&CI(this.options.animationType,this.layout.layoutBox,p.layoutBox)){h=this.target||Dt();const y=kn(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+y;const w=kn(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+w}Er(c,h),Qa(c,g),Su(this.projectionDeltaWithTransform,this.layoutCorrected,c,g)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new t2),this.sharedNodes.get(l).add(c);const p=c.options.initialPromotionConfig;c.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var c;const{layoutId:l}=this.options;return l?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:l}=this.options;return l?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:h}={}){const p=this.getStack();p&&p.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(c=!0),!c)return;const p={};h.z&&hm("z",l,p,this.animationValues);for(let g=0;g<dm.length;g++)hm(`rotate${dm[g]}`,l,p,this.animationValues),hm(`skew${dm[g]}`,l,p,this.animationValues);l.render();for(const g in p)l.setStaticValue(g,p[g]),this.animationValues&&(this.animationValues[g]=p[g]);l.scheduleRender()}getProjectionStyles(l){if(!this.instance||this.isSVG)return;if(!this.isVisible)return r2;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=eh(l==null?void 0:l.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const T={};return this.options.layoutId&&(T.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,T.pointerEvents=eh(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Do(this.latestValues)&&(T.transform=h?h({},""):"none",this.hasProjected=!1),T}const g=p.animationValues||p.latestValues;this.applyTransformsToTarget(),c.transform=n2(this.projectionDeltaWithTransform,this.treeScale,g),h&&(c.transform=h(g,c.transform));const{x:y,y:w}=this.projectionDelta;c.transformOrigin=`${y.origin*100}% ${w.origin*100}% 0`,p.animationValues?c.opacity=p===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:c.opacity=p===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const T in Fu){if(g[T]===void 0)continue;const{correct:C,applyTo:R,isCSSVariable:A}=Fu[T],O=c.transform==="none"?g[T]:C(g[T],p);if(R){const B=R.length;for(let z=0;z<B;z++)c[R[z]]=O}else A?this.options.visualElement.renderState.vars[T]=O:c[T]=O}return this.options.layoutId&&(c.pointerEvents=p===this?eh(l==null?void 0:l.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(dE),this.root.sharedNodes.clear()}}}function o2(n){n.updateLayout()}function a2(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=n.layout,{animationType:o}=n.options,l=e.source!==n.layout.source;o==="size"?Sr(y=>{const w=l?e.measuredBox[y]:e.layoutBox[y],T=kn(w);w.min=r[y].min,w.max=w.min+T}):CI(o,e.layoutBox,r)&&Sr(y=>{const w=l?e.measuredBox[y]:e.layoutBox[y],T=kn(r[y]);w.max=w.min+T,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[y].max=n.relativeTarget[y].min+T)});const c=Ga();Su(c,r,e.layoutBox);const h=Ga();l?Su(h,n.applyTransform(s,!0),e.measuredBox):Su(h,r,e.layoutBox);const p=!TI(c);let g=!1;if(!n.resumeFrom){const y=n.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:w,layout:T}=y;if(w&&T){const C=Dt();xu(C,e.layoutBox,w.layoutBox);const R=Dt();xu(R,r,T.layoutBox),SI(C,R)||(g=!0),y.options.layoutRoot&&(n.relativeTarget=R,n.relativeTargetOrigin=C,n.relativeParent=y)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:h,layoutDelta:c,hasLayoutChanged:p,hasRelativeLayoutChanged:g})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function l2(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function u2(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function c2(n){n.clearSnapshot()}function dE(n){n.clearMeasurements()}function hE(n){n.isLayoutDirty=!1}function d2(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function fE(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function h2(n){n.resolveTargetDelta()}function f2(n){n.calcProjection()}function p2(n){n.resetSkewAndRotation()}function m2(n){n.removeLeadSnapshot()}function pE(n,e,t){n.translate=It(e.translate,0,t),n.scale=It(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function mE(n,e,t,r){n.min=It(e.min,t.min,r),n.max=It(e.max,t.max,r)}function g2(n,e,t,r){mE(n.x,e.x,t.x,r),mE(n.y,e.y,t.y,r)}function y2(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const v2={duration:.45,ease:[.4,0,.1,1]},gE=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),yE=gE("applewebkit/")&&!gE("chrome/")?Math.round:br;function vE(n){n.min=yE(n.min),n.max=yE(n.max)}function _2(n){vE(n.x),vE(n.y)}function CI(n,e,t){return n==="position"||n==="preserve-aspect"&&!TO(uE(e),uE(t),.2)}function w2(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const E2=II({attachResizeListener:(n,e)=>Bu(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),fm={current:void 0},bI=II({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!fm.current){const n=new E2({});n.mount(window),n.setOptions({layoutScroll:!0}),fm.current=n}return fm.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),T2={pan:{Feature:FO},drag:{Feature:jO,ProjectionNode:bI,MeasureLayout:_I}};function _E(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,o=r[s];o&&bt.postRender(()=>o(e,uc(e)))}class S2 extends so{mount(){const{current:e}=this.node;e&&(this.unmount=XD(e,(t,r)=>(_E(this.node,r,"Start"),s=>_E(this.node,s,"End"))))}unmount(){}}class x2 extends so{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=oc(Bu(this.node.current,"focus",()=>this.onFocus()),Bu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function wE(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),o=r[s];o&&bt.postRender(()=>o(e,uc(e)))}class I2 extends so{mount(){const{current:e}=this.node;e&&(this.unmount=tN(e,(t,r)=>(wE(this.node,r,"Start"),(s,{success:o})=>wE(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ig=new WeakMap,pm=new WeakMap,C2=n=>{const e=ig.get(n.target);e&&e(n)},b2=n=>{n.forEach(C2)};function A2({root:n,...e}){const t=n||document;pm.has(t)||pm.set(t,{});const r=pm.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(b2,{root:n,...e})),r[s]}function R2(n,e,t){const r=A2(e);return ig.set(n,t),r.observe(n),()=>{ig.delete(n),r.unobserve(n)}}const P2={some:0,all:1};class k2 extends so{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:o}=e,l={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:P2[s]},c=h=>{const{isIntersecting:p}=h;if(this.isInView===p||(this.isInView=p,o&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),w=p?g:y;w&&w(h)};return R2(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(D2(e,t))&&this.startObserver()}unmount(){}}function D2({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const N2={inView:{Feature:k2},tap:{Feature:I2},focus:{Feature:x2},hover:{Feature:S2}},O2={layout:{ProjectionNode:bI,MeasureLayout:_I}},og={current:null},AI={current:!1};function V2(){if(AI.current=!0,!!Jg)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>og.current=n.matches;n.addListener(e),e()}else og.current=!1}const M2=new WeakMap;function L2(n,e,t){for(const r in e){const s=e[r],o=t[r];if(wn(s))n.addValue(r,s);else if(wn(o))n.addValue(r,el(s,{owner:n}));else if(o!==s)if(n.hasValue(r)){const l=n.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=n.getStaticValue(r);n.addValue(r,el(l!==void 0?l:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const EE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class j2{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=gy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=Xn.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,bt.render(this.render,!1,!0))};const{latestValues:h,renderState:p}=l;this.latestValues=h,this.baseTarget={...h},this.initialValues=t.initial?{...h}:{},this.renderState=p,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=Xh(t),this.isVariantNode=Qx(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(t,{},this);for(const w in y){const T=y[w];h[w]!==void 0&&wn(T)&&T.set(h[w],!1)}}mount(e){this.current=e,M2.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),AI.current||V2(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:og.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),qi(this.notifyUpdate),qi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ml.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&bt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=t.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),o(),l&&l(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in tl){const t=tl[e];if(!t)continue;const{isEnabled:r,Feature:s}=t;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Dt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<EE.length;r++){const s=EE[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,l=e[o];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=L2(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=el(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(rx(r)||ix(r))?r=parseFloat(r):!sN(r)&&Gi.test(t)&&(r=Ux(e,t)),this.setBaseTarget(e,wn(r)?r.get():r)),wn(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var o;const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const l=Ry(this.props,t,(o=this.presenceContext)==null?void 0:o.custom);l&&(r=l[e])}if(t&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!wn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new sy),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class RI extends j2{constructor(){super(...arguments),this.KeyframeResolver=qD}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;wn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function PI(n,{style:e,vars:t},r,s){Object.assign(n.style,e,s&&s.getProjectionStyles(r));for(const o in t)n.style.setProperty(o,t[o])}function F2(n){return window.getComputedStyle(n)}class U2 extends RI{constructor(){super(...arguments),this.type="html",this.renderInstance=PI}readValueFromInstance(e,t){var r;if(ml.has(t))return(r=this.projection)!=null&&r.isProjecting?Gm(t):dD(e,t);{const s=F2(e),o=(ay(t)?s.getPropertyValue(t):s[t])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:t}){return mI(e,t)}build(e,t,r){Cy(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return Py(e,t,r)}}const kI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function B2(n,e,t,r){PI(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(kI.has(s)?s:Iy(s),e.attrs[s])}class $2 extends RI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Dt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ml.has(t)){const r=Fx(t);return r&&r.default||0}return t=kI.has(t)?t:Iy(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return iI(e,t,r)}build(e,t,r){tI(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,s){B2(e,t,r,s)}mount(e){this.isSVGTag=rI(e.tagName),super.mount(e)}}const z2=(n,e)=>Ay(n)?new $2(e):new U2(e,{allowProjection:n!==P.Fragment}),H2=$N({...pO,...N2,...T2,...O2},z2),_n=fN(H2);var nt;(function(n){n.assertEqual=s=>{};function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const o={};for(const l of s)o[l]=l;return o},n.getValidEnumValues=s=>{const o=n.objectKeys(s).filter(c=>typeof s[s[c]]!="number"),l={};for(const c of o)l[c]=s[c];return n.objectValues(l)},n.objectValues=s=>n.objectKeys(s).map(function(o){return s[o]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const o=[];for(const l in s)Object.prototype.hasOwnProperty.call(s,l)&&o.push(l);return o},n.find=(s,o)=>{for(const l of s)if(o(l))return l},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,o=" | "){return s.map(l=>typeof l=="string"?`'${l}'`:l).join(o)}n.joinValues=r,n.jsonStringifyReplacer=(s,o)=>typeof o=="bigint"?o.toString():o})(nt||(nt={}));var TE;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(TE||(TE={}));const Te=nt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Vi=n=>{switch(typeof n){case"undefined":return Te.undefined;case"string":return Te.string;case"number":return Number.isNaN(n)?Te.nan:Te.number;case"boolean":return Te.boolean;case"function":return Te.function;case"bigint":return Te.bigint;case"symbol":return Te.symbol;case"object":return Array.isArray(n)?Te.array:n===null?Te.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?Te.promise:typeof Map<"u"&&n instanceof Map?Te.map:typeof Set<"u"&&n instanceof Set?Te.set:typeof Date<"u"&&n instanceof Date?Te.date:Te.object;default:return Te.unknown}},ae=nt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Js extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(o){return o.message},r={_errors:[]},s=o=>{for(const l of o.issues)if(l.code==="invalid_union")l.unionErrors.map(s);else if(l.code==="invalid_return_type")s(l.returnTypeError);else if(l.code==="invalid_arguments")s(l.argumentsError);else if(l.path.length===0)r._errors.push(t(l));else{let c=r,h=0;for(;h<l.path.length;){const p=l.path[h];h===l.path.length-1?(c[p]=c[p]||{_errors:[]},c[p]._errors.push(t(l))):c[p]=c[p]||{_errors:[]},c=c[p],h++}}};return s(this),r}static assert(e){if(!(e instanceof Js))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,nt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}Js.create=n=>new Js(n);const ag=(n,e)=>{let t;switch(n.code){case ae.invalid_type:n.received===Te.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case ae.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,nt.jsonStringifyReplacer)}`;break;case ae.unrecognized_keys:t=`Unrecognized key(s) in object: ${nt.joinValues(n.keys,", ")}`;break;case ae.invalid_union:t="Invalid input";break;case ae.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${nt.joinValues(n.options)}`;break;case ae.invalid_enum_value:t=`Invalid enum value. Expected ${nt.joinValues(n.options)}, received '${n.received}'`;break;case ae.invalid_arguments:t="Invalid function arguments";break;case ae.invalid_return_type:t="Invalid function return type";break;case ae.invalid_date:t="Invalid date";break;case ae.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:nt.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case ae.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case ae.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case ae.custom:t="Invalid input";break;case ae.invalid_intersection_types:t="Intersection results could not be merged";break;case ae.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case ae.not_finite:t="Number must be finite";break;default:t=e.defaultError,nt.assertNever(n)}return{message:t}};let W2=ag;function q2(){return W2}const G2=n=>{const{data:e,path:t,errorMaps:r,issueData:s}=n,o=[...t,...s.path||[]],l={...s,path:o};if(s.message!==void 0)return{...s,path:o,message:s.message};let c="";const h=r.filter(p=>!!p).slice().reverse();for(const p of h)c=p(l,{data:e,defaultError:c}).message;return{...s,path:o,message:c}};function me(n,e){const t=q2(),r=G2({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===ag?void 0:ag].filter(s=>!!s)});n.common.issues.push(r)}class ur{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const s of t){if(s.status==="aborted")return Fe;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const s of t){const o=await s.key,l=await s.value;r.push({key:o,value:l})}return ur.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const s of t){const{key:o,value:l}=s;if(o.status==="aborted"||l.status==="aborted")return Fe;o.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof l.value<"u"||s.alwaysSet)&&(r[o.value]=l.value)}return{status:e.value,value:r}}}const Fe=Object.freeze({status:"aborted"}),fu=n=>({status:"dirty",value:n}),Pr=n=>({status:"valid",value:n}),SE=n=>n.status==="aborted",xE=n=>n.status==="dirty",nl=n=>n.status==="valid",_h=n=>typeof Promise<"u"&&n instanceof Promise;var xe;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(xe||(xe={}));class Ki{constructor(e,t,r,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const IE=(n,e)=>{if(nl(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Js(n.common.issues);return this._error=t,this._error}}};function We(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:s}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(l,c)=>{const{message:h}=n;return l.code==="invalid_enum_value"?{message:h??c.defaultError}:typeof c.data>"u"?{message:h??r??c.defaultError}:l.code!=="invalid_type"?{message:c.defaultError}:{message:h??t??c.defaultError}},description:s}}class Je{get description(){return this._def.description}_getType(e){return Vi(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Vi(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ur,ctx:{common:e.parent.common,data:e.data,parsedType:Vi(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(_h(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){const r={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Vi(e)},s=this._parseSync({data:e,path:r.path,parent:r});return IE(r,s)}"~validate"(e){var r,s;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Vi(e)};if(!this["~standard"].async)try{const o=this._parseSync({data:e,path:[],parent:t});return nl(o)?{value:o.value}:{issues:t.common.issues}}catch(o){(s=(r=o==null?void 0:o.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(o=>nl(o)?{value:o.value}:{issues:t.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Vi(e)},s=this._parse({data:e,path:r.path,parent:r}),o=await(_h(s)?s:Promise.resolve(s));return IE(r,o)}refine(e,t){const r=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,o)=>{const l=e(s),c=()=>o.addIssue({code:ae.custom,...r(s)});return typeof Promise<"u"&&l instanceof Promise?l.then(h=>h?!0:(c(),!1)):l?!0:(c(),!1)})}refinement(e,t){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof t=="function"?t(r,s):t),!1))}_refinement(e){return new sl({schema:this,typeName:Ue.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Bi.create(this,this._def)}nullable(){return il.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ys.create(this)}promise(){return Sh.create(this,this._def)}or(e){return Eh.create([this,e],this._def)}and(e){return Th.create(this,e,this._def)}transform(e){return new sl({...We(this._def),schema:this,typeName:Ue.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new ug({...We(this._def),innerType:this,defaultValue:t,typeName:Ue.ZodDefault})}brand(){return new gV({typeName:Ue.ZodBranded,type:this,...We(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new cg({...We(this._def),innerType:this,catchValue:t,typeName:Ue.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Dy.create(this,e)}readonly(){return dg.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const K2=/^c[^\s-]{8,}$/i,Q2=/^[0-9a-z]+$/,Y2=/^[0-9A-HJKMNP-TV-Z]{26}$/i,X2=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Z2=/^[a-z0-9_-]{21}$/i,J2=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,eV=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,tV=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,nV="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let mm;const rV=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,sV=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,iV=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,oV=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,aV=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,lV=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,DI="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",uV=new RegExp(`^${DI}$`);function NI(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function cV(n){return new RegExp(`^${NI(n)}$`)}function dV(n){let e=`${DI}T${NI(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function hV(n,e){return!!((e==="v4"||!e)&&rV.test(n)||(e==="v6"||!e)&&iV.test(n))}function fV(n,e){if(!J2.test(n))return!1;try{const[t]=n.split("."),r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function pV(n,e){return!!((e==="v4"||!e)&&sV.test(n)||(e==="v6"||!e)&&oV.test(n))}class Fi extends Je{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Te.string){const o=this._getOrReturnCtx(e);return me(o,{code:ae.invalid_type,expected:Te.string,received:o.parsedType}),Fe}const r=new ur;let s;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(s=this._getOrReturnCtx(e,s),me(s,{code:ae.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(s=this._getOrReturnCtx(e,s),me(s,{code:ae.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const l=e.data.length>o.value,c=e.data.length<o.value;(l||c)&&(s=this._getOrReturnCtx(e,s),l?me(s,{code:ae.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):c&&me(s,{code:ae.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")tV.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"email",code:ae.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")mm||(mm=new RegExp(nV,"u")),mm.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"emoji",code:ae.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")X2.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"uuid",code:ae.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")Z2.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"nanoid",code:ae.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")K2.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"cuid",code:ae.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")Q2.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"cuid2",code:ae.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")Y2.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"ulid",code:ae.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),me(s,{validation:"url",code:ae.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"regex",code:ae.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(s=this._getOrReturnCtx(e,s),me(s,{code:ae.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(s=this._getOrReturnCtx(e,s),me(s,{code:ae.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(s=this._getOrReturnCtx(e,s),me(s,{code:ae.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?dV(o).test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{code:ae.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?uV.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{code:ae.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?cV(o).test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{code:ae.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?eV.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"duration",code:ae.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?hV(e.data,o.version)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"ip",code:ae.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?fV(e.data,o.alg)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"jwt",code:ae.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?pV(e.data,o.version)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"cidr",code:ae.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?aV.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"base64",code:ae.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?lV.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"base64url",code:ae.invalid_string,message:o.message}),r.dirty()):nt.assertNever(o);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(s=>e.test(s),{validation:t,code:ae.invalid_string,...xe.errToObj(r)})}_addCheck(e){return new Fi({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...xe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...xe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...xe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...xe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...xe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...xe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...xe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...xe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...xe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...xe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...xe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...xe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...xe.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...xe.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...xe.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...xe.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...xe.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...xe.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...xe.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...xe.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...xe.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...xe.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...xe.errToObj(t)})}nonempty(e){return this.min(1,xe.errToObj(e))}trim(){return new Fi({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Fi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Fi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Fi.create=n=>new Fi({checks:[],typeName:Ue.ZodString,coerce:(n==null?void 0:n.coerce)??!1,...We(n)});function mV(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=t>r?t:r,o=Number.parseInt(n.toFixed(s).replace(".","")),l=Number.parseInt(e.toFixed(s).replace(".",""));return o%l/10**s}class $u extends Je{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Te.number){const o=this._getOrReturnCtx(e);return me(o,{code:ae.invalid_type,expected:Te.number,received:o.parsedType}),Fe}let r;const s=new ur;for(const o of this._def.checks)o.kind==="int"?nt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),me(r,{code:ae.invalid_type,expected:"integer",received:"float",message:o.message}),s.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),me(r,{code:ae.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),me(r,{code:ae.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="multipleOf"?mV(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),me(r,{code:ae.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),me(r,{code:ae.not_finite,message:o.message}),s.dirty()):nt.assertNever(o);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,xe.toString(t))}gt(e,t){return this.setLimit("min",e,!1,xe.toString(t))}lte(e,t){return this.setLimit("max",e,!0,xe.toString(t))}lt(e,t){return this.setLimit("max",e,!1,xe.toString(t))}setLimit(e,t,r,s){return new $u({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:xe.toString(s)}]})}_addCheck(e){return new $u({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:xe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:xe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:xe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:xe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:xe.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:xe.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:xe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:xe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:xe.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&nt.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}$u.create=n=>new $u({checks:[],typeName:Ue.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...We(n)});class zu extends Je{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Te.bigint)return this._getInvalidInput(e);let r;const s=new ur;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),me(r,{code:ae.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),me(r,{code:ae.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),me(r,{code:ae.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):nt.assertNever(o);return{status:s.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return me(t,{code:ae.invalid_type,expected:Te.bigint,received:t.parsedType}),Fe}gte(e,t){return this.setLimit("min",e,!0,xe.toString(t))}gt(e,t){return this.setLimit("min",e,!1,xe.toString(t))}lte(e,t){return this.setLimit("max",e,!0,xe.toString(t))}lt(e,t){return this.setLimit("max",e,!1,xe.toString(t))}setLimit(e,t,r,s){return new zu({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:xe.toString(s)}]})}_addCheck(e){return new zu({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:xe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:xe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:xe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:xe.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:xe.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}zu.create=n=>new zu({checks:[],typeName:Ue.ZodBigInt,coerce:(n==null?void 0:n.coerce)??!1,...We(n)});class CE extends Je{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Te.boolean){const r=this._getOrReturnCtx(e);return me(r,{code:ae.invalid_type,expected:Te.boolean,received:r.parsedType}),Fe}return Pr(e.data)}}CE.create=n=>new CE({typeName:Ue.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...We(n)});class wh extends Je{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Te.date){const o=this._getOrReturnCtx(e);return me(o,{code:ae.invalid_type,expected:Te.date,received:o.parsedType}),Fe}if(Number.isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return me(o,{code:ae.invalid_date}),Fe}const r=new ur;let s;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(s=this._getOrReturnCtx(e,s),me(s,{code:ae.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(s=this._getOrReturnCtx(e,s),me(s,{code:ae.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):nt.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new wh({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:xe.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:xe.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}wh.create=n=>new wh({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:Ue.ZodDate,...We(n)});class bE extends Je{_parse(e){if(this._getType(e)!==Te.symbol){const r=this._getOrReturnCtx(e);return me(r,{code:ae.invalid_type,expected:Te.symbol,received:r.parsedType}),Fe}return Pr(e.data)}}bE.create=n=>new bE({typeName:Ue.ZodSymbol,...We(n)});class AE extends Je{_parse(e){if(this._getType(e)!==Te.undefined){const r=this._getOrReturnCtx(e);return me(r,{code:ae.invalid_type,expected:Te.undefined,received:r.parsedType}),Fe}return Pr(e.data)}}AE.create=n=>new AE({typeName:Ue.ZodUndefined,...We(n)});class RE extends Je{_parse(e){if(this._getType(e)!==Te.null){const r=this._getOrReturnCtx(e);return me(r,{code:ae.invalid_type,expected:Te.null,received:r.parsedType}),Fe}return Pr(e.data)}}RE.create=n=>new RE({typeName:Ue.ZodNull,...We(n)});class PE extends Je{constructor(){super(...arguments),this._any=!0}_parse(e){return Pr(e.data)}}PE.create=n=>new PE({typeName:Ue.ZodAny,...We(n)});class kE extends Je{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Pr(e.data)}}kE.create=n=>new kE({typeName:Ue.ZodUnknown,...We(n)});class Qi extends Je{_parse(e){const t=this._getOrReturnCtx(e);return me(t,{code:ae.invalid_type,expected:Te.never,received:t.parsedType}),Fe}}Qi.create=n=>new Qi({typeName:Ue.ZodNever,...We(n)});class DE extends Je{_parse(e){if(this._getType(e)!==Te.undefined){const r=this._getOrReturnCtx(e);return me(r,{code:ae.invalid_type,expected:Te.void,received:r.parsedType}),Fe}return Pr(e.data)}}DE.create=n=>new DE({typeName:Ue.ZodVoid,...We(n)});class ys extends Je{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),s=this._def;if(t.parsedType!==Te.array)return me(t,{code:ae.invalid_type,expected:Te.array,received:t.parsedType}),Fe;if(s.exactLength!==null){const l=t.data.length>s.exactLength.value,c=t.data.length<s.exactLength.value;(l||c)&&(me(t,{code:l?ae.too_big:ae.too_small,minimum:c?s.exactLength.value:void 0,maximum:l?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(me(t,{code:ae.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(me(t,{code:ae.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((l,c)=>s.type._parseAsync(new Ki(t,l,t.path,c)))).then(l=>ur.mergeArray(r,l));const o=[...t.data].map((l,c)=>s.type._parseSync(new Ki(t,l,t.path,c)));return ur.mergeArray(r,o)}get element(){return this._def.type}min(e,t){return new ys({...this._def,minLength:{value:e,message:xe.toString(t)}})}max(e,t){return new ys({...this._def,maxLength:{value:e,message:xe.toString(t)}})}length(e,t){return new ys({...this._def,exactLength:{value:e,message:xe.toString(t)}})}nonempty(e){return this.min(1,e)}}ys.create=(n,e)=>new ys({type:n,minLength:null,maxLength:null,exactLength:null,typeName:Ue.ZodArray,...We(e)});function Ua(n){if(n instanceof jt){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=Bi.create(Ua(r))}return new jt({...n._def,shape:()=>e})}else return n instanceof ys?new ys({...n._def,type:Ua(n.element)}):n instanceof Bi?Bi.create(Ua(n.unwrap())):n instanceof il?il.create(Ua(n.unwrap())):n instanceof $o?$o.create(n.items.map(e=>Ua(e))):n}class jt extends Je{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=nt.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==Te.object){const p=this._getOrReturnCtx(e);return me(p,{code:ae.invalid_type,expected:Te.object,received:p.parsedType}),Fe}const{status:r,ctx:s}=this._processInputParams(e),{shape:o,keys:l}=this._getCached(),c=[];if(!(this._def.catchall instanceof Qi&&this._def.unknownKeys==="strip"))for(const p in s.data)l.includes(p)||c.push(p);const h=[];for(const p of l){const g=o[p],y=s.data[p];h.push({key:{status:"valid",value:p},value:g._parse(new Ki(s,y,s.path,p)),alwaysSet:p in s.data})}if(this._def.catchall instanceof Qi){const p=this._def.unknownKeys;if(p==="passthrough")for(const g of c)h.push({key:{status:"valid",value:g},value:{status:"valid",value:s.data[g]}});else if(p==="strict")c.length>0&&(me(s,{code:ae.unrecognized_keys,keys:c}),r.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const p=this._def.catchall;for(const g of c){const y=s.data[g];h.push({key:{status:"valid",value:g},value:p._parse(new Ki(s,y,s.path,g)),alwaysSet:g in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const p=[];for(const g of h){const y=await g.key,w=await g.value;p.push({key:y,value:w,alwaysSet:g.alwaysSet})}return p}).then(p=>ur.mergeObjectSync(r,p)):ur.mergeObjectSync(r,h)}get shape(){return this._def.shape()}strict(e){return xe.errToObj,new jt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var o,l;const s=((l=(o=this._def).errorMap)==null?void 0:l.call(o,t,r).message)??r.defaultError;return t.code==="unrecognized_keys"?{message:xe.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new jt({...this._def,unknownKeys:"strip"})}passthrough(){return new jt({...this._def,unknownKeys:"passthrough"})}extend(e){return new jt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new jt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ue.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new jt({...this._def,catchall:e})}pick(e){const t={};for(const r of nt.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new jt({...this._def,shape:()=>t})}omit(e){const t={};for(const r of nt.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new jt({...this._def,shape:()=>t})}deepPartial(){return Ua(this)}partial(e){const t={};for(const r of nt.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?t[r]=s:t[r]=s.optional()}return new jt({...this._def,shape:()=>t})}required(e){const t={};for(const r of nt.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof Bi;)o=o._def.innerType;t[r]=o}return new jt({...this._def,shape:()=>t})}keyof(){return OI(nt.objectKeys(this.shape))}}jt.create=(n,e)=>new jt({shape:()=>n,unknownKeys:"strip",catchall:Qi.create(),typeName:Ue.ZodObject,...We(e)});jt.strictCreate=(n,e)=>new jt({shape:()=>n,unknownKeys:"strict",catchall:Qi.create(),typeName:Ue.ZodObject,...We(e)});jt.lazycreate=(n,e)=>new jt({shape:n,unknownKeys:"strip",catchall:Qi.create(),typeName:Ue.ZodObject,...We(e)});class Eh extends Je{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function s(o){for(const c of o)if(c.result.status==="valid")return c.result;for(const c of o)if(c.result.status==="dirty")return t.common.issues.push(...c.ctx.common.issues),c.result;const l=o.map(c=>new Js(c.ctx.common.issues));return me(t,{code:ae.invalid_union,unionErrors:l}),Fe}if(t.common.async)return Promise.all(r.map(async o=>{const l={...t,common:{...t.common,issues:[]},parent:null};return{result:await o._parseAsync({data:t.data,path:t.path,parent:l}),ctx:l}})).then(s);{let o;const l=[];for(const h of r){const p={...t,common:{...t.common,issues:[]},parent:null},g=h._parseSync({data:t.data,path:t.path,parent:p});if(g.status==="valid")return g;g.status==="dirty"&&!o&&(o={result:g,ctx:p}),p.common.issues.length&&l.push(p.common.issues)}if(o)return t.common.issues.push(...o.ctx.common.issues),o.result;const c=l.map(h=>new Js(h));return me(t,{code:ae.invalid_union,unionErrors:c}),Fe}}get options(){return this._def.options}}Eh.create=(n,e)=>new Eh({options:n,typeName:Ue.ZodUnion,...We(e)});function lg(n,e){const t=Vi(n),r=Vi(e);if(n===e)return{valid:!0,data:n};if(t===Te.object&&r===Te.object){const s=nt.objectKeys(e),o=nt.objectKeys(n).filter(c=>s.indexOf(c)!==-1),l={...n,...e};for(const c of o){const h=lg(n[c],e[c]);if(!h.valid)return{valid:!1};l[c]=h.data}return{valid:!0,data:l}}else if(t===Te.array&&r===Te.array){if(n.length!==e.length)return{valid:!1};const s=[];for(let o=0;o<n.length;o++){const l=n[o],c=e[o],h=lg(l,c);if(!h.valid)return{valid:!1};s.push(h.data)}return{valid:!0,data:s}}else return t===Te.date&&r===Te.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class Th extends Je{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=(o,l)=>{if(SE(o)||SE(l))return Fe;const c=lg(o.value,l.value);return c.valid?((xE(o)||xE(l))&&t.dirty(),{status:t.value,value:c.data}):(me(r,{code:ae.invalid_intersection_types}),Fe)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,l])=>s(o,l)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Th.create=(n,e,t)=>new Th({left:n,right:e,typeName:Ue.ZodIntersection,...We(t)});class $o extends Je{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Te.array)return me(r,{code:ae.invalid_type,expected:Te.array,received:r.parsedType}),Fe;if(r.data.length<this._def.items.length)return me(r,{code:ae.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Fe;!this._def.rest&&r.data.length>this._def.items.length&&(me(r,{code:ae.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const o=[...r.data].map((l,c)=>{const h=this._def.items[c]||this._def.rest;return h?h._parse(new Ki(r,l,r.path,c)):null}).filter(l=>!!l);return r.common.async?Promise.all(o).then(l=>ur.mergeArray(t,l)):ur.mergeArray(t,o)}get items(){return this._def.items}rest(e){return new $o({...this._def,rest:e})}}$o.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new $o({items:n,typeName:Ue.ZodTuple,rest:null,...We(e)})};class NE extends Je{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Te.map)return me(r,{code:ae.invalid_type,expected:Te.map,received:r.parsedType}),Fe;const s=this._def.keyType,o=this._def.valueType,l=[...r.data.entries()].map(([c,h],p)=>({key:s._parse(new Ki(r,c,r.path,[p,"key"])),value:o._parse(new Ki(r,h,r.path,[p,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const h of l){const p=await h.key,g=await h.value;if(p.status==="aborted"||g.status==="aborted")return Fe;(p.status==="dirty"||g.status==="dirty")&&t.dirty(),c.set(p.value,g.value)}return{status:t.value,value:c}})}else{const c=new Map;for(const h of l){const p=h.key,g=h.value;if(p.status==="aborted"||g.status==="aborted")return Fe;(p.status==="dirty"||g.status==="dirty")&&t.dirty(),c.set(p.value,g.value)}return{status:t.value,value:c}}}}NE.create=(n,e,t)=>new NE({valueType:e,keyType:n,typeName:Ue.ZodMap,...We(t)});class Hu extends Je{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Te.set)return me(r,{code:ae.invalid_type,expected:Te.set,received:r.parsedType}),Fe;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(me(r,{code:ae.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(me(r,{code:ae.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const o=this._def.valueType;function l(h){const p=new Set;for(const g of h){if(g.status==="aborted")return Fe;g.status==="dirty"&&t.dirty(),p.add(g.value)}return{status:t.value,value:p}}const c=[...r.data.values()].map((h,p)=>o._parse(new Ki(r,h,r.path,p)));return r.common.async?Promise.all(c).then(h=>l(h)):l(c)}min(e,t){return new Hu({...this._def,minSize:{value:e,message:xe.toString(t)}})}max(e,t){return new Hu({...this._def,maxSize:{value:e,message:xe.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Hu.create=(n,e)=>new Hu({valueType:n,minSize:null,maxSize:null,typeName:Ue.ZodSet,...We(e)});class OE extends Je{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}OE.create=(n,e)=>new OE({getter:n,typeName:Ue.ZodLazy,...We(e)});class VE extends Je{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return me(t,{received:t.data,code:ae.invalid_literal,expected:this._def.value}),Fe}return{status:"valid",value:e.data}}get value(){return this._def.value}}VE.create=(n,e)=>new VE({value:n,typeName:Ue.ZodLiteral,...We(e)});function OI(n,e){return new rl({values:n,typeName:Ue.ZodEnum,...We(e)})}class rl extends Je{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return me(t,{expected:nt.joinValues(r),received:t.parsedType,code:ae.invalid_type}),Fe}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return me(t,{received:t.data,code:ae.invalid_enum_value,options:r}),Fe}return Pr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return rl.create(e,{...this._def,...t})}exclude(e,t=this._def){return rl.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}rl.create=OI;class ME extends Je{_parse(e){const t=nt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Te.string&&r.parsedType!==Te.number){const s=nt.objectValues(t);return me(r,{expected:nt.joinValues(s),received:r.parsedType,code:ae.invalid_type}),Fe}if(this._cache||(this._cache=new Set(nt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=nt.objectValues(t);return me(r,{received:r.data,code:ae.invalid_enum_value,options:s}),Fe}return Pr(e.data)}get enum(){return this._def.values}}ME.create=(n,e)=>new ME({values:n,typeName:Ue.ZodNativeEnum,...We(e)});class Sh extends Je{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Te.promise&&t.common.async===!1)return me(t,{code:ae.invalid_type,expected:Te.promise,received:t.parsedType}),Fe;const r=t.parsedType===Te.promise?t.data:Promise.resolve(t.data);return Pr(r.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Sh.create=(n,e)=>new Sh({type:n,typeName:Ue.ZodPromise,...We(e)});class sl extends Je{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ue.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=this._def.effect||null,o={addIssue:l=>{me(r,l),l.fatal?t.abort():t.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),s.type==="preprocess"){const l=s.transform(r.data,o);if(r.common.async)return Promise.resolve(l).then(async c=>{if(t.value==="aborted")return Fe;const h=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return h.status==="aborted"?Fe:h.status==="dirty"||t.value==="dirty"?fu(h.value):h});{if(t.value==="aborted")return Fe;const c=this._def.schema._parseSync({data:l,path:r.path,parent:r});return c.status==="aborted"?Fe:c.status==="dirty"||t.value==="dirty"?fu(c.value):c}}if(s.type==="refinement"){const l=c=>{const h=s.refinement(c,o);if(r.common.async)return Promise.resolve(h);if(h instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?Fe:(c.status==="dirty"&&t.dirty(),l(c.value),{status:t.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?Fe:(c.status==="dirty"&&t.dirty(),l(c.value).then(()=>({status:t.value,value:c.value}))))}if(s.type==="transform")if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!nl(l))return Fe;const c=s.transform(l.value,o);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>nl(l)?Promise.resolve(s.transform(l.value,o)).then(c=>({status:t.value,value:c})):Fe);nt.assertNever(s)}}sl.create=(n,e,t)=>new sl({schema:n,typeName:Ue.ZodEffects,effect:e,...We(t)});sl.createWithPreprocess=(n,e,t)=>new sl({schema:e,effect:{type:"preprocess",transform:n},typeName:Ue.ZodEffects,...We(t)});class Bi extends Je{_parse(e){return this._getType(e)===Te.undefined?Pr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Bi.create=(n,e)=>new Bi({innerType:n,typeName:Ue.ZodOptional,...We(e)});class il extends Je{_parse(e){return this._getType(e)===Te.null?Pr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}il.create=(n,e)=>new il({innerType:n,typeName:Ue.ZodNullable,...We(e)});class ug extends Je{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===Te.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ug.create=(n,e)=>new ug({innerType:n,typeName:Ue.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...We(e)});class cg extends Je{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return _h(s)?s.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Js(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Js(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}cg.create=(n,e)=>new cg({innerType:n,typeName:Ue.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...We(e)});class LE extends Je{_parse(e){if(this._getType(e)!==Te.nan){const r=this._getOrReturnCtx(e);return me(r,{code:ae.invalid_type,expected:Te.nan,received:r.parsedType}),Fe}return{status:"valid",value:e.data}}}LE.create=n=>new LE({typeName:Ue.ZodNaN,...We(n)});class gV extends Je{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class Dy extends Je{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Fe:o.status==="dirty"?(t.dirty(),fu(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Fe:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,t){return new Dy({in:e,out:t,typeName:Ue.ZodPipeline})}}class dg extends Je{_parse(e){const t=this._def.innerType._parse(e),r=s=>(nl(s)&&(s.value=Object.freeze(s.value)),s);return _h(t)?t.then(s=>r(s)):r(t)}unwrap(){return this._def.innerType}}dg.create=(n,e)=>new dg({innerType:n,typeName:Ue.ZodReadonly,...We(e)});var Ue;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(Ue||(Ue={}));const $d=Fi.create;Qi.create;ys.create;const yV=jt.create;Eh.create;Th.create;$o.create;rl.create;Sh.create;Bi.create;il.create;const vV=yV({name:$d().min(1,"网站名不能为空"),url:$d().url("请输入有效的网址"),favicon:$d().url("请输入有效的图标URL"),note:$d().optional()});function VI({id:n,name:e,url:t,favicon:r,tags:s,note:o,onClose:l,onSave:c,onDelete:h}){const[p,g]=P.useState({name:e,url:t,favicon:r,note:o||""}),[y,w]=P.useState({}),[T,C]=P.useState(!1),R=Q=>{const K=/\{([^}]+)\}/g;return(Q.match(K)||[]).map(D=>D.replace(/\{|\}/g,"").trim())},A=Q=>Q.replace(/\{[^}]+\}/g,"").trim(),O=async()=>{if(!p.url||!p.url.startsWith("http")){w({url:"请输入有效的网址(以http://或https://开头)"});return}try{C(!0);const Q=new URL(p.url).hostname;g(K=>({...K,favicon:`https://www.google.com/s2/favicons?domain=${p.url}`})),g(K=>({...K,name:Q.replace("www.","").split(".")[0]})),w(K=>{const J={...K};return delete J.url,J})}catch(Q){console.error("自动获取信息失败:",Q),w({url:"无法解析该网址，请检查格式是否正确"})}finally{C(!1)}},B=Q=>{Q.preventDefault();try{const K=vV.safeParse(p);if(!K.success){const I={};K.error.errors.forEach(k=>{I[k.path[0]]=k.message}),w(I);return}const J=R(p.note||""),D=A(p.note||"");c({id:n,name:p.name,url:p.url,favicon:p.favicon,tags:J,note:D}),l()}catch(K){console.error("保存失败:",K)}},z=Q=>{const{name:K,value:J}=Q.target;g(D=>({...D,[K]:J})),y[K]&&w(D=>{const I={...D};return delete I[K],I})};return S.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 select-none",children:S.jsxs(_n.div,{className:"w-full max-w-md bg-white rounded-xl shadow-xl p-6 select-none",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{type:"spring",damping:25},children:[S.jsxs("div",{className:"flex justify-between items-center mb-4 select-none",children:[S.jsx("h2",{className:"text-xl font-semibold select-none",children:"编辑卡片"}),S.jsx("button",{onClick:l,className:"text-gray-500 hover:text-gray-700 select-none",children:S.jsx("i",{className:"fa-solid fa-xmark select-none"})})]}),S.jsxs("form",{onSubmit:B,className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 select-none",children:"网址"}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("input",{type:"url",name:"url",value:p.url,onChange:z,className:"flex-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com"}),S.jsx("button",{type:"button",onClick:O,disabled:T||!p.url,className:"px-3 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-blue-300 select-none",children:T?"获取中...":"自动获取"})]}),y.url&&S.jsx("p",{className:"mt-1 text-sm text-red-500 select-none",children:y.url})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 select-none",children:"网站名"}),S.jsx("input",{type:"text",name:"name",value:p.name,onChange:z,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"网站名称"}),y.name&&S.jsx("p",{className:"mt-1 text-sm text-red-500 select-none",children:y.name})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 select-none",children:"图标"}),S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"flex-1",children:S.jsx("input",{type:"url",name:"favicon",value:p.favicon,onChange:z,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/favicon.ico"})}),S.jsx("span",{className:"text-gray-400 select-none",children:"或"}),S.jsxs("label",{className:"cursor-pointer select-none",children:[S.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Q=>{var J;const K=(J=Q.target.files)==null?void 0:J[0];if(K){const D=new FileReader;D.onload=I=>{var k;(k=I.target)!=null&&k.result&&g(M=>{var L;return{...M,favicon:(L=I.target)==null?void 0:L.result}})},D.readAsDataURL(K)}}}),S.jsxs("div",{className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm text-gray-700 transition-colors select-none",children:[S.jsx("i",{className:"fa-solid fa-upload mr-1 select-none"}),"上传"]})]})]}),p.favicon&&S.jsxs("div",{className:"mt-2 flex items-center select-none",children:[S.jsx("img",{src:p.favicon,alt:"图标预览",className:"w-8 h-8 rounded mr-2 select-none"}),S.jsx("span",{className:"text-xs text-gray-500 truncate max-w-xs select-none",children:p.favicon.startsWith("data:image")?"上传的图标":p.favicon})]}),y.favicon&&S.jsx("p",{className:"mt-1 text-sm text-red-500 select-none",children:y.favicon})]}),S.jsxs("div",{children:[S.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 select-none",children:["备注 (使用","标记标签，如: 备注内容 ","工作"," ","代码",")"]}),S.jsxs("div",{className:"text-xs text-gray-500 mb-1 select-none",children:["花括号","内的内容会被识别为标签"]}),S.jsx("textarea",{name:"note",value:p.note,onChange:z,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"网站用途说明..."})]}),S.jsxs("div",{className:"flex flex-col gap-4 pt-4 select-none",children:[S.jsxs("div",{className:"flex gap-2 select-none",children:[S.jsx("button",{type:"button",onClick:l,className:"flex-1 px-4 py-2 text-gray-700 border rounded-md hover:bg-gray-50 select-none",children:"取消"}),S.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 select-none",children:"保存"})]}),h&&S.jsxs("button",{type:"button",onClick:()=>{confirm("确定要删除这个卡片吗？")&&(h(n),l())},className:"w-full px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 shadow-md select-none",children:[S.jsx("i",{className:"fa-solid fa-trash mr-2 select-none"}),"删除卡片"]})]})]})]})})}const MI=P.createContext(void 0);function _V({children:n}){const[e,t]=P.useState(()=>{const c=localStorage.getItem("cardOpacity");return c?parseFloat(c):.1}),[r,s]=P.useState(()=>{const c=localStorage.getItem("searchBarOpacity");return c?parseFloat(c):.1}),[o,l]=P.useState(()=>{const c=localStorage.getItem("parallaxEnabled");return c?JSON.parse(c):!0});return P.useEffect(()=>{localStorage.setItem("cardOpacity",e.toString())},[e]),P.useEffect(()=>{localStorage.setItem("searchBarOpacity",r.toString())},[r]),P.useEffect(()=>{localStorage.setItem("parallaxEnabled",JSON.stringify(o))},[o]),S.jsx(MI.Provider,{value:{cardOpacity:e,searchBarOpacity:r,parallaxEnabled:o,setCardOpacity:t,setSearchBarOpacity:s,setParallaxEnabled:l},children:n})}function cc(){const n=P.useContext(MI);if(n===void 0)throw new Error("useTransparency must be used within a TransparencyProvider");return n}function wV({id:n,name:e,url:t,favicon:r,tags:s,visitCount:o,lastVisit:l,note:c,onSave:h,onDelete:p}){const[g,y]=P.useState(!1),w=P.useRef(null),{cardOpacity:T}=cc(),C=()=>{h({id:n,name:e,url:t,favicon:r,tags:s,note:c,visitCount:(o||0)+1,lastVisit:new Date().toISOString().split("T")[0]}),window.open(t,"_blank")};return S.jsxs(S.Fragment,{children:[S.jsxs(_n.div,{ref:w,className:"w-32 h-32 rounded-xl cursor-pointer shadow-lg backdrop-blur-md border border-white/20 overflow-hidden relative group select-none",style:{backgroundColor:`rgba(255, 255, 255, ${T})`},whileHover:{scale:1.05},whileTap:{scale:.98},transition:{type:"spring",stiffness:300,damping:15},onClick:C,children:[S.jsx("div",{className:"absolute bottom-0.5 right-0.5 z-11",children:S.jsx("button",{onClick:R=>{R.stopPropagation(),y(!0)},className:"p-1 text-white/50 hover:text-white select-none",children:S.jsx("i",{className:"fa-solid fa-gear text-xs select-none"})})}),S.jsxs("div",{className:"h-full flex flex-col pt-3",children:[S.jsxs("div",{className:"flex flex-col items-center px-2 select-none",children:[S.jsxs("div",{className:"w-11 h-11 mb-1 rounded-md overflow-hidden select-none",children:[" ",S.jsx("img",{src:r,alt:`${e} favicon`,className:"w-full h-full object-contain select-none",onError:R=>{const A=R.target;if(!A.dataset.triedGoogle)A.src=`https://www.google.com/s2/favicons?domain=${t}&sz=128`,A.dataset.triedGoogle="1";else if(A.dataset.triedYandex)if(A.dataset.triedApple)if(A.dataset.triedDuck)try{const O=t.replace(/^(https?:\/\/)?(www\.)?/,"").split("/")[0];A.src=`https://${O}/favicon.ico`}catch{}else{const O=t.replace(/^(https?:\/\/)?(www\.)?/,"").split("/")[0];A.src=`https://icons.duckduckgo.com/ip3/${O}.ico`,A.dataset.triedDuck="1"}else{const O=t.replace(/^(https?:\/\/)?(www\.)?/,"").split("/")[0];A.src=`https://${O}/apple-touch-icon.png`,A.dataset.triedApple="1"}else{const O=t.replace(/^(https?:\/\/)?(www\.)?/,"").split("/")[0];A.src=`https://favicon.yandex.net/favicon/v2/${O}?size=120`,A.dataset.triedYandex="1"}}})]}),S.jsx("h3",{className:"text-xs font-medium text-white text-center line-clamp-2 px-2 mt-1 select-none",children:e})," "]}),S.jsx("div",{className:"px-2 mb-1 select-none",children:S.jsx("p",{className:"text-white/60 text-[0.65rem] text-center line-clamp-2 select-none",children:c||new URL(t).hostname})}),S.jsx("div",{className:"mt-0 px-3 pb-2 select-none",children:S.jsx("div",{className:"flex flex-wrap gap-1 justify-center select-none",children:s.slice(0,6).map(R=>S.jsx("span",{className:"px-1.5 py-0.5 bg-white/20 rounded-full text-[0.65rem] text-white max-w-[60px] truncate select-none",children:R},R))})})]})]}),g&&S.jsx(VI,{id:n,name:e,url:t,favicon:r,tags:s,note:c,onClose:()=>y(!1),onSave:R=>{h(R),y(!1)},onDelete:p})]})}function EV(n={}){var ce,F;const[e,t]=P.useState(""),[r,s]=P.useState(!1),[o,l]=P.useState("bing"),[c,h]=P.useState(!1),[p,g]=P.useState([]),[y,w]=P.useState(!1),[T,C]=P.useState(-1),R=P.useRef(null),[A,O]=P.useState(null),[B,z]=P.useState(null),[Q,K]=P.useState(!1),J=P.useRef(null),{searchBarOpacity:D}=cc(),I=[{key:"bing",label:"Bing",icon:S.jsx("i",{className:"fa-brands fa-microsoft text-blue-400"})},{key:"google",label:"Google",icon:S.jsx("i",{className:"fa-brands fa-google text-blue-500"})}],k=($,Z)=>{const le=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FECA57","#FF9FF3","#54A0FF","#5F27CD","#00D2D3","#FF9F43","#EE5A24","#FD79A8","#0FB9B1","#A55EEA","#26D0CE","#FDCB6E","#6C5CE7","#74B9FF","#E17055","#F39C12","#E74C3C","#3498DB","#9B59B6","#1ABC9C"],we=["M2,5 Q12,2 22,5 Q32,8 42,5 L42,8 Q32,11 22,8 Q12,5 2,8 Z","M20,2 L38,2 L29,12 Z","M20,7 A6,6 0,1,1 20,7.1 Z","M20,2 L30,7 L20,12 L10,7 Z","M20,2 L22,8 L28,8 L23,11 L25,17 L20,14 L15,17 L17,11 L12,8 L18,8 Z","M2,6 Q15,2 28,6 Q41,10 54,6 L54,9 Q41,13 28,9 Q15,5 2,9 Z","M5,5 L10,2 L15,5 L20,2 L25,5 L30,2 L35,5 L35,8 L30,11 L25,8 L20,11 L15,8 L10,11 L5,8 Z","M20,2 Q25,7 20,12 Q15,7 20,2 M20,2 Q25,7 30,2 Q25,7 30,12 Q25,7 20,12","M20,4 C18,2 15,2 15,5 C15,8 20,12 20,12 C20,12 25,8 25,5 C25,2 22,2 20,4 Z","M15,4 Q10,7 15,10 Q20,7 25,10 Q30,7 25,4 Q20,7 15,4","M5,4 Q20,2 35,4 Q40,7 35,10 Q20,8 5,10 Q0,7 5,4","M2,7 Q10,3 18,7 Q26,11 34,7 Q38,5 42,7 L42,10 Q38,8 34,10 Q26,14 18,10 Q10,6 2,10 Z"];for(let Ae=0;Ae<50;Ae++){const ve=document.createElementNS("http://www.w3.org/2000/svg","svg"),Le=document.createElementNS("http://www.w3.org/2000/svg","path"),et=le[Math.floor(Math.random()*le.length)],Sn=we[Math.floor(Math.random()*we.length)],cr=Math.random()*.6+.5,Dn=44*cr,xn=16*cr;if(ve.setAttribute("width",Dn.toString()),ve.setAttribute("height",xn.toString()),ve.setAttribute("viewBox","0 0 44 16"),ve.style.cssText=`
        position: fixed;
        pointer-events: none;
        z-index: 10000;
        left: ${$-Dn/2}px;
        top: ${Z-xn/2}px;
        transform-origin: center;
      `,Le.setAttribute("d",Sn),Le.setAttribute("fill",et),Math.random()>.5&&(Le.setAttribute("stroke",et),Le.setAttribute("stroke-width","1"),Le.setAttribute("fill-opacity","0.8")),Math.random()>.7){const ut=`gradient-${Date.now()}-${Ae}`,Qt=document.createElementNS("http://www.w3.org/2000/svg","defs"),Yt=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),Ut=document.createElementNS("http://www.w3.org/2000/svg","stop"),Mn=document.createElementNS("http://www.w3.org/2000/svg","stop");Yt.setAttribute("id",ut),Yt.setAttribute("x1","0%"),Yt.setAttribute("y1","0%"),Yt.setAttribute("x2","100%"),Yt.setAttribute("y2","100%"),Ut.setAttribute("offset","0%"),Ut.setAttribute("stop-color",et),Mn.setAttribute("offset","100%"),Mn.setAttribute("stop-color",le[Math.floor(Math.random()*le.length)]),Yt.appendChild(Ut),Yt.appendChild(Mn),Qt.appendChild(Yt),ve.appendChild(Qt),Le.setAttribute("fill",`url(#${ut})`)}ve.appendChild(Le),document.body.appendChild(ve);const kr=Math.random()*360*(Math.PI/180),Dr=Math.random()*4+2;let Nn=Math.cos(kr)*Dr,Nr=Math.sin(kr)*Dr;const Kt=(Math.random()-.5)*80;let On=Math.random()*360,Vn=$-Dn/2,_t=Z-xn/2;const In=.2,Or=.998,Rs=Date.now(),at=()=>{const ut=(Date.now()-Rs)/1e3;Nr+=In,Nn*=Or,Nr*=Or,Vn+=Nn,_t+=Nr,On+=Kt*(1/60),ve.style.left=Vn+"px",ve.style.top=_t+"px",ve.style.transform=`rotate(${On}deg)`;const Qt=Math.max(0,1-ut/7);ve.style.opacity=Qt.toString(),Qt>0&&_t<window.innerHeight+100?requestAnimationFrame(at):document.body.contains(ve)&&document.body.removeChild(ve)};setTimeout(()=>{requestAnimationFrame(at)},Math.random()*150)}},M=()=>{const $=I.findIndex(le=>le.key===o),Z=I[($+1)%I.length].key;if(l(Z),J.current){const le=J.current.getBoundingClientRect(),we=le.left+60,fe=le.top+le.height/2;k(we,fe)}},L=["chatGPT","Gemini","Deepseek","Kimi"],H=["https://chatgpt.com/","https://gemini.google.com/","https://chat.deepseek.com/","https://www.kimi.com/"],V=[S.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,verticalAlign:"middle",position:"relative",top:"1px",userSelect:"none"},children:S.jsx("img",{src:"/jiang_ai_web/icon/chatgpt.svg",alt:"chatGPT",style:{width:20,height:20,display:"block",userSelect:"none"}})}),S.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,verticalAlign:"middle",position:"relative",top:"1px",userSelect:"none"},children:S.jsx("img",{src:"/jiang_ai_web/icon/gemini.svg",alt:"Gemini",style:{width:20,height:20,display:"block",userSelect:"none"}})}),S.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,verticalAlign:"middle",position:"relative",top:"1px",userSelect:"none"},children:S.jsx("img",{src:"/jiang_ai_web/icon/deepseek.svg",alt:"Deepseek",style:{width:20,height:20,display:"block",userSelect:"none"}})}),S.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,verticalAlign:"middle",position:"relative",top:"1px",userSelect:"none"},children:S.jsx("img",{src:"/jiang_ai_web/icon/kimi.svg",alt:"Kimi",style:{width:20,height:20,display:"block",userSelect:"none"}})})],rt=($,Z)=>{switch($){case"google":return`https://www.google.com/search?q=${encodeURIComponent(Z)}`;default:return`https://www.bing.com/search?q=${encodeURIComponent(Z)}`}},st=async $=>{if(!$.trim())return[];try{const Z=document.createElement("script"),le=`baiduCallback_${Date.now()}`;return new Promise(we=>{window[le]=fe=>{if(fe&&fe.s&&Array.isArray(fe.s)){const Ae=fe.s.slice(0,5).map((ve,Le)=>({id:`baidu-${Le}`,text:ve,query:ve}));we(Ae)}else{const Ae=be($);we(Ae.slice(0,5).map((ve,Le)=>({id:`local-${Le}`,text:ve,query:ve})))}document.head.removeChild(Z),delete window[le]},setTimeout(()=>{if(window[le]){const fe=be($);we(fe.slice(0,5).map((Ae,ve)=>({id:`local-${ve}`,text:Ae,query:Ae}))),document.head.contains(Z)&&document.head.removeChild(Z),delete window[le]}},2e3),Z.src=`https://suggestion.baidu.com/su?wd=${encodeURIComponent($)}&cb=${le}`,Z.onerror=()=>{const fe=be($);we(fe.slice(0,5).map((Ae,ve)=>({id:`local-${ve}`,text:Ae,query:Ae}))),document.head.contains(Z)&&document.head.removeChild(Z),delete window[le]},document.head.appendChild(Z)})}catch(Z){return console.warn("Failed to fetch Baidu suggestions:",Z),be($).slice(0,5).map((we,fe)=>({id:`local-${fe}`,text:we,query:we}))}},be=$=>{const Z=[],le=$.toLowerCase(),we=[$,`${$} 是什么`,`${$} 怎么用`,`${$} 教程`,`如何 ${$}`,`${$} 下载`,`${$} 官网`,`${$} 价格`];return le.includes("什么")||le.includes("how")?Z.push(`${$}`,`${$} 详解`,`${$} 原理`):le.includes("怎么")||le.includes("如何")?Z.push(`${$}`,`${$} 步骤`,`${$} 方法`):Z.push(...we),[...new Set(Z)]};P.useEffect(()=>{const $=setTimeout(()=>{e.trim()?st(e).then(Z=>{g(Z),w(Z.length>0),C(-1)}):(g([]),w(!1),C(-1))},500);return()=>clearTimeout($)},[e]);const Ie=($,Z)=>{$.preventDefault();const le=Z||(T>=0&&p[T]?p[T].query:e);le.trim()&&(window.open(rt(o,le),"_blank"),t(""),w(!1))},se=$=>{switch($.key){case"ArrowDown":if(!y)return;$.preventDefault(),C(Z=>Z<p.length-1?Z+1:Z);break;case"ArrowUp":if(!y)return;$.preventDefault(),C(Z=>Z>-1?Z-1:-1);break;case"Escape":w(!1),C(-1);break;case"Tab":$.shiftKey||($.preventDefault(),M());break}},he=P.useRef(null);return P.useLayoutEffect(()=>{if(c&&R.current){const $=R.current.getBoundingClientRect();O({left:$.left+$.width/2,top:$.top})}else O(null)},[c,o]),S.jsx("div",{className:"relative left-0 right-0 z-50 flex justify-center px-4 select-none",children:S.jsx(_n.div,{className:"w-full flex justify-center",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},children:S.jsx("form",{ref:J,onSubmit:Ie,className:"relative flex items-center justify-center",onMouseEnter:()=>{he.current&&(clearTimeout(he.current),he.current=null),s(!0)},onMouseLeave:()=>{he.current&&clearTimeout(he.current),he.current=setTimeout(()=>{s(!1),h(!1),setTimeout(()=>{w(!1)},100)},200)},children:S.jsxs(_n.div,{animate:{width:r?520:340},initial:{width:340},transition:{type:"tween",duration:.28,ease:"easeInOut"},style:{display:"flex",alignItems:"center",position:"relative"},onAnimationComplete:()=>{r&&h(!0)},children:[S.jsxs("div",{className:"relative flex items-center",children:[S.jsxs("button",{type:"button",className:"flex items-center gap-2 px-1.5 py-1 text-white/80 hover:text-white bg-transparent border-none outline-none text-lg select-none relative z-20",style:{pointerEvents:"auto",height:36,minWidth:36,minHeight:36,justifyContent:"center",alignItems:"center",display:"flex"},tabIndex:-1,onClick:()=>{M()},onMouseEnter:()=>K(!0),onMouseLeave:()=>K(!1),children:[(ce=I.find($=>$.key===o))==null?void 0:ce.icon,S.jsx("span",{className:"hidden sm:inline text-base font-semibold select-none",children:(F=I.find($=>$.key===o))==null?void 0:F.label})]}),Q&&S.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800/90 text-white text-sm rounded-lg shadow-lg backdrop-blur-sm border border-white/10 whitespace-nowrap z-30",children:["切换至 ",o==="bing"?"Google":"Bing",S.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-800/90"})]})]}),S.jsx("span",{className:"mx-2 text-white/30 select-none font-normal text-base z-10",children:"|"}),S.jsx("span",{className:"text-white/60 select-none font-normal text-base z-10"}),S.jsx("input",{type:"text",value:e,onChange:$=>t($.target.value),onKeyDown:se,placeholder:"输入内容...",className:"backdrop-blur-md border border-white/20 rounded-full pl-4 py-2 text-white placeholder-white/60 focus:outline-none focus:ring-1 focus:ring-white/30 text-base transition-all duration-200 pr-12 w-full ml-3",style:{backgroundColor:`rgba(255, 255, 255, ${D})`,minWidth:"4rem",maxWidth:"100%"}}),S.jsx("button",{ref:R,type:"submit",className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-white/70 hover:text-white transition-colors bg-transparent border-none outline-none group select-none",style:{pointerEvents:"auto"},children:S.jsx(_n.i,{className:"fa-solid fa-magnifying-glass text-sm",whileHover:{scale:1.22,rotate:18,color:"#fff"},whileTap:{scale:.95,rotate:0},animate:{color:r?"#fff":void 0},transition:{type:"spring",stiffness:350,damping:18},style:{display:"inline-block"}})}),y&&p.length>0&&S.jsx(_n.div,{className:"absolute top-full left-0 right-0 mt-2 backdrop-blur-md rounded-lg shadow-lg border border-white/20 z-50 overflow-hidden max-h-60 overflow-y-auto",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.2},style:{pointerEvents:"auto",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:p.map(($,Z)=>S.jsx("div",{className:`px-4 py-3 cursor-pointer transition-colors border-b border-white/10 last:border-b-0 select-none ${Z===T?"bg-blue-500/20 text-gray-800":"hover:bg-white/50 text-gray-700"}`,onClick:le=>{le.stopPropagation(),t($.text),Ie(le,$.query)},onMouseEnter:()=>C(Z),onMouseDown:le=>le.preventDefault(),children:S.jsxs("div",{className:"flex items-center gap-3 select-none",children:[S.jsx("i",{className:"fa-solid fa-magnifying-glass text-gray-400 text-sm w-4 select-none"}),S.jsx("div",{className:"flex-1 min-w-0 select-none",children:S.jsx("div",{className:"font-medium text-sm truncate select-none",children:$.text})})]})},$.id))}),r&&c&&A&&S.jsx("div",{className:"fixed z-30",style:{left:A.left,top:A.top,width:0,height:0,pointerEvents:"auto",transform:"translate(-50%, -50%)"},children:S.jsx("div",{style:{position:"absolute",left:0,top:0},children:V.map(($,Z,le)=>{const fe=(-60+120/(le.length-1)*Z)*(Math.PI/180),Ae=44,ve=Ae*Math.cos(fe),Le=Ae*Math.sin(fe),et=19,Sn=et*3.6;return S.jsxs(_n.span,{role:"img","aria-label":L[Z],initial:{x:0,y:0,scale:.3,opacity:0,filter:"none"},animate:{x:ve,y:Le,scale:1.18,opacity:1,filter:"none"},whileHover:{scale:1.38,filter:"drop-shadow(0 0 4px #fff) drop-shadow(0 0 8px #fff)"},transition:{type:"spring",stiffness:400,damping:22,delay:.08*Z},style:{position:"absolute",left:0,top:0,fontSize:22,cursor:"pointer",userSelect:"none",zIndex:2,willChange:"filter, transform"},onClick:()=>window.open(H[Z],"_blank"),onMouseEnter:()=>z(Z),onMouseLeave:()=>z(null),children:[$,B===Z&&S.jsx("div",{style:{position:"absolute",left:28,top:"50%",transform:"translateY(-50%)",height:et,width:Sn,background:"rgba(255,255,255,0.98)",color:"#222",borderRadius:et/2,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 12px #0003",fontSize:14,fontWeight:500,pointerEvents:"auto",zIndex:10,padding:"0 10px",whiteSpace:"nowrap"},children:S.jsx("span",{style:{userSelect:"none"},children:L[Z]})})]},Z)})})})]})})})})}function TV(){const n=()=>{window.open("https://github.com/jiangjianghong","_blank")};return S.jsx("div",{className:"cat-container",children:S.jsxs("div",{className:"cat",onClick:n,style:{cursor:"pointer"},children:[S.jsx("div",{className:"paw"}),S.jsx("div",{className:"paw"}),S.jsxs("div",{className:"shake",children:[S.jsx("div",{className:"tail"}),S.jsxs("div",{className:"main",children:[S.jsx("div",{className:"head"}),S.jsx("div",{className:"body",children:S.jsx("div",{className:"leg"})}),S.jsxs("div",{className:"face",children:[S.jsxs("div",{className:"mustache_cont",children:[S.jsx("div",{className:"mustache"}),S.jsx("div",{className:"mustache"})]}),S.jsxs("div",{className:"mustache_cont",children:[S.jsx("div",{className:"mustache"}),S.jsx("div",{className:"mustache"})]}),S.jsx("div",{className:"nose"}),S.jsx("div",{className:"eye"}),S.jsx("div",{className:"eye"}),S.jsxs("div",{className:"brow_cont",children:[S.jsx("div",{className:"brow"}),S.jsx("div",{className:"brow"})]}),S.jsxs("div",{className:"brow_cont",children:[S.jsx("div",{className:"brow"}),S.jsx("div",{className:"brow"})]}),S.jsx("div",{className:"ear_l",children:S.jsx("div",{className:"inner"})}),S.jsxs("div",{className:"ear_r",children:[S.jsx("div",{className:"outer"}),S.jsx("div",{className:"inner"})]})]})]})]})]})})}const LI=P.createContext({dragDropManager:void 0});function Tr(n){return"Minified Redux error #"+n+"; visit https://redux.js.org/Errors?code="+n+" for the full message or use the non-minified dev environment for full errors. "}var jE=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),FE=function(){return Math.random().toString(36).substring(7).split("").join(".")},UE={INIT:"@@redux/INIT"+FE(),REPLACE:"@@redux/REPLACE"+FE()};function SV(n){if(typeof n!="object"||n===null)return!1;for(var e=n;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function jI(n,e,t){var r;if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Tr(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Tr(1));return t(jI)(n,e)}if(typeof n!="function")throw new Error(Tr(2));var s=n,o=e,l=[],c=l,h=!1;function p(){c===l&&(c=l.slice())}function g(){if(h)throw new Error(Tr(3));return o}function y(R){if(typeof R!="function")throw new Error(Tr(4));if(h)throw new Error(Tr(5));var A=!0;return p(),c.push(R),function(){if(A){if(h)throw new Error(Tr(6));A=!1,p();var B=c.indexOf(R);c.splice(B,1),l=null}}}function w(R){if(!SV(R))throw new Error(Tr(7));if(typeof R.type>"u")throw new Error(Tr(8));if(h)throw new Error(Tr(9));try{h=!0,o=s(o,R)}finally{h=!1}for(var A=l=c,O=0;O<A.length;O++){var B=A[O];B()}return R}function T(R){if(typeof R!="function")throw new Error(Tr(10));s=R,w({type:UE.REPLACE})}function C(){var R,A=y;return R={subscribe:function(B){if(typeof B!="object"||B===null)throw new Error(Tr(11));function z(){B.next&&B.next(g())}z();var Q=A(z);return{unsubscribe:Q}}},R[jE]=function(){return this},R}return w({type:UE.INIT}),r={dispatch:w,subscribe:y,getState:g,replaceReducer:T},r[jE]=C,r}function $e(n,e,...t){if(xV()&&e===void 0)throw new Error("invariant requires an error message argument");if(!n){let r;if(e===void 0)r=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let s=0;r=new Error(e.replace(/%s/g,function(){return t[s++]})),r.name="Invariant Violation"}throw r.framesToPop=1,r}}function xV(){return typeof process<"u"&&!0}function IV(n,e,t){return e.split(".").reduce((r,s)=>r&&r[s]?r[s]:t||null,n)}function CV(n,e){return n.filter(t=>t!==e)}function FI(n){return typeof n=="object"}function bV(n,e){const t=new Map,r=o=>{t.set(o,t.has(o)?t.get(o)+1:1)};n.forEach(r),e.forEach(r);const s=[];return t.forEach((o,l)=>{o===1&&s.push(l)}),s}function AV(n,e){return n.filter(t=>e.indexOf(t)>-1)}const Ny="dnd-core/INIT_COORDS",Zh="dnd-core/BEGIN_DRAG",Oy="dnd-core/PUBLISH_DRAG_SOURCE",Jh="dnd-core/HOVER",ef="dnd-core/DROP",tf="dnd-core/END_DRAG";function BE(n,e){return{type:Ny,payload:{sourceClientOffset:e||null,clientOffset:n||null}}}const RV={type:Ny,payload:{clientOffset:null,sourceClientOffset:null}};function PV(n){return function(t=[],r={publishSource:!0}){const{publishSource:s=!0,clientOffset:o,getSourceClientOffset:l}=r,c=n.getMonitor(),h=n.getRegistry();n.dispatch(BE(o)),kV(t,c,h);const p=OV(t,c);if(p==null){n.dispatch(RV);return}let g=null;if(o){if(!l)throw new Error("getSourceClientOffset must be defined");DV(l),g=l(p)}n.dispatch(BE(o,g));const w=h.getSource(p).beginDrag(c,p);if(w==null)return;NV(w),h.pinSource(p);const T=h.getSourceType(p);return{type:Zh,payload:{itemType:T,item:w,sourceId:p,clientOffset:o||null,sourceClientOffset:g||null,isSourcePublic:!!s}}}}function kV(n,e,t){$e(!e.isDragging(),"Cannot call beginDrag while dragging."),n.forEach(function(r){$e(t.getSource(r),"Expected sourceIds to be registered.")})}function DV(n){$e(typeof n=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function NV(n){$e(FI(n),"Item must be an object.")}function OV(n,e){let t=null;for(let r=n.length-1;r>=0;r--)if(e.canDragSource(n[r])){t=n[r];break}return t}function VV(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function MV(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),r.forEach(function(s){VV(n,s,t[s])})}return n}function LV(n){return function(t={}){const r=n.getMonitor(),s=n.getRegistry();jV(r),BV(r).forEach((l,c)=>{const h=FV(l,c,s,r),p={type:ef,payload:{dropResult:MV({},t,h)}};n.dispatch(p)})}}function jV(n){$e(n.isDragging(),"Cannot call drop while not dragging."),$e(!n.didDrop(),"Cannot call drop twice during one drag operation.")}function FV(n,e,t,r){const s=t.getTarget(n);let o=s?s.drop(r,n):void 0;return UV(o),typeof o>"u"&&(o=e===0?{}:r.getDropResult()),o}function UV(n){$e(typeof n>"u"||FI(n),"Drop result must either be an object or undefined.")}function BV(n){const e=n.getTargetIds().filter(n.canDropOnTarget,n);return e.reverse(),e}function $V(n){return function(){const t=n.getMonitor(),r=n.getRegistry();zV(t);const s=t.getSourceId();return s!=null&&(r.getSource(s,!0).endDrag(t,s),r.unpinSource()),{type:tf}}}function zV(n){$e(n.isDragging(),"Cannot call endDrag while not dragging.")}function hg(n,e){return e===null?n===null:Array.isArray(n)?n.some(t=>t===e):n===e}function HV(n){return function(t,{clientOffset:r}={}){WV(t);const s=t.slice(0),o=n.getMonitor(),l=n.getRegistry(),c=o.getItemType();return GV(s,l,c),qV(s,o,l),KV(s,o,l),{type:Jh,payload:{targetIds:s,clientOffset:r||null}}}}function WV(n){$e(Array.isArray(n),"Expected targetIds to be an array.")}function qV(n,e,t){$e(e.isDragging(),"Cannot call hover while not dragging."),$e(!e.didDrop(),"Cannot call hover after drop.");for(let r=0;r<n.length;r++){const s=n[r];$e(n.lastIndexOf(s)===r,"Expected targetIds to be unique in the passed array.");const o=t.getTarget(s);$e(o,"Expected targetIds to be registered.")}}function GV(n,e,t){for(let r=n.length-1;r>=0;r--){const s=n[r],o=e.getTargetType(s);hg(o,t)||n.splice(r,1)}}function KV(n,e,t){n.forEach(function(r){t.getTarget(r).hover(e,r)})}function QV(n){return function(){if(n.getMonitor().isDragging())return{type:Oy}}}function YV(n){return{beginDrag:PV(n),publishDragSource:QV(n),hover:HV(n),drop:LV(n),endDrag:$V(n)}}class XV{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;function r(o){return(...l)=>{const c=o.apply(e,l);typeof c<"u"&&t(c)}}const s=YV(this);return Object.keys(s).reduce((o,l)=>{const c=s[l];return o[l]=r(c),o},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{const r=this.store.getState().refCount>0;this.backend&&(r&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!r&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function ZV(n,e){return{x:n.x+e.x,y:n.y+e.y}}function UI(n,e){return{x:n.x-e.x,y:n.y-e.y}}function JV(n){const{clientOffset:e,initialClientOffset:t,initialSourceClientOffset:r}=n;return!e||!t||!r?null:UI(ZV(e,r),t)}function eM(n){const{clientOffset:e,initialClientOffset:t}=n;return!e||!t?null:UI(e,t)}const Iu=[],Vy=[];Iu.__IS_NONE__=!0;Vy.__IS_ALL__=!0;function tM(n,e){return n===Iu?!1:n===Vy||typeof e>"u"?!0:AV(e,n).length>0}class nM{subscribeToStateChange(e,t={}){const{handlerIds:r}=t;$e(typeof e=="function","listener must be a function."),$e(typeof r>"u"||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let s=this.store.getState().stateId;const o=()=>{const l=this.store.getState(),c=l.stateId;try{c===s||c===s+1&&!tM(l.dirtyHandlerIds,r)||e()}finally{s=c}};return this.store.subscribe(o)}subscribeToOffsetChange(e){$e(typeof e=="function","listener must be a function.");let t=this.store.getState().dragOffset;const r=()=>{const s=this.store.getState().dragOffset;s!==t&&(t=s,e())};return this.store.subscribe(r)}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return $e(t,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if($e(t,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const r=this.registry.getTargetType(e),s=this.getItemType();return hg(r,s)&&t.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if($e(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const r=this.registry.getSourceType(e),s=this.getItemType();return r!==s?!1:t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;const{shallow:r}=t;if(!this.isDragging())return!1;const s=this.registry.getTargetType(e),o=this.getItemType();if(o&&!hg(s,o))return!1;const l=this.getTargetIds();if(!l.length)return!1;const c=l.indexOf(e);return r?c===l.length-1:c>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return JV(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return eM(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}const $E=typeof global<"u"?global:self,BI=$E.MutationObserver||$E.WebKitMutationObserver;function $I(n){return function(){const t=setTimeout(s,0),r=setInterval(s,50);function s(){clearTimeout(t),clearInterval(r),n()}}}function rM(n){let e=1;const t=new BI(n),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}const sM=typeof BI=="function"?rM:$I;class iM{enqueueTask(e){const{queue:t,requestFlush:r}=this;t.length||(r(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let r=0,s=e.length-this.index;r<s;r++)e[r]=e[r+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=sM(this.flush),this.requestErrorThrow=$I(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class oM{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}class aM{create(e){const t=this.freeTasks,r=t.length?t.pop():new oM(this.onError,s=>t[t.length]=s);return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}}const zI=new iM,lM=new aM(zI.registerPendingError);function uM(n){zI.enqueueTask(lM.create(n))}const My="dnd-core/ADD_SOURCE",Ly="dnd-core/ADD_TARGET",jy="dnd-core/REMOVE_SOURCE",nf="dnd-core/REMOVE_TARGET";function cM(n){return{type:My,payload:{sourceId:n}}}function dM(n){return{type:Ly,payload:{targetId:n}}}function hM(n){return{type:jy,payload:{sourceId:n}}}function fM(n){return{type:nf,payload:{targetId:n}}}function pM(n){$e(typeof n.canDrag=="function","Expected canDrag to be a function."),$e(typeof n.beginDrag=="function","Expected beginDrag to be a function."),$e(typeof n.endDrag=="function","Expected endDrag to be a function.")}function mM(n){$e(typeof n.canDrop=="function","Expected canDrop to be a function."),$e(typeof n.hover=="function","Expected hover to be a function."),$e(typeof n.drop=="function","Expected beginDrag to be a function.")}function fg(n,e){if(e&&Array.isArray(n)){n.forEach(t=>fg(t,!1));return}$e(typeof n=="string"||typeof n=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var xr;(function(n){n.SOURCE="SOURCE",n.TARGET="TARGET"})(xr||(xr={}));let gM=0;function yM(){return gM++}function vM(n){const e=yM().toString();switch(n){case xr.SOURCE:return`S${e}`;case xr.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${n}`)}}function zE(n){switch(n[0]){case"S":return xr.SOURCE;case"T":return xr.TARGET;default:throw new Error(`Cannot parse handler ID: ${n}`)}}function HE(n,e){const t=n.entries();let r=!1;do{const{done:s,value:[,o]}=t.next();if(o===e)return!0;r=!!s}while(!r);return!1}class _M{addSource(e,t){fg(e),pM(t);const r=this.addHandler(xr.SOURCE,e,t);return this.store.dispatch(cM(r)),r}addTarget(e,t){fg(e,!0),mM(t);const r=this.addHandler(xr.TARGET,e,t);return this.store.dispatch(dM(r)),r}containsHandler(e){return HE(this.dragSources,e)||HE(this.dropTargets,e)}getSource(e,t=!1){return $e(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return $e(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return $e(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return $e(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return zE(e)===xr.SOURCE}isTargetId(e){return zE(e)===xr.TARGET}removeSource(e){$e(this.getSource(e),"Expected an existing source."),this.store.dispatch(hM(e)),uM(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){$e(this.getTarget(e),"Expected an existing target."),this.store.dispatch(fM(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);$e(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){$e(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,r){const s=vM(e);return this.types.set(s,t),e===xr.SOURCE?this.dragSources.set(s,r):e===xr.TARGET&&this.dropTargets.set(s,r),s}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const wM=(n,e)=>n===e;function EM(n,e){return!n&&!e?!0:!n||!e?!1:n.x===e.x&&n.y===e.y}function TM(n,e,t=wM){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!t(n[r],e[r]))return!1;return!0}function SM(n=Iu,e){switch(e.type){case Jh:break;case My:case Ly:case nf:case jy:return Iu;case Zh:case Oy:case tf:case ef:default:return Vy}const{targetIds:t=[],prevTargetIds:r=[]}=e.payload,s=bV(t,r);if(!(s.length>0||!TM(t,r)))return Iu;const l=r[r.length-1],c=t[t.length-1];return l!==c&&(l&&s.push(l),c&&s.push(c)),s}function xM(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function IM(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),r.forEach(function(s){xM(n,s,t[s])})}return n}const WE={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function CM(n=WE,e){const{payload:t}=e;switch(e.type){case Ny:case Zh:return{initialSourceClientOffset:t.sourceClientOffset,initialClientOffset:t.clientOffset,clientOffset:t.clientOffset};case Jh:return EM(n.clientOffset,t.clientOffset)?n:IM({},n,{clientOffset:t.clientOffset});case tf:case ef:return WE;default:return n}}function bM(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Fa(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),r.forEach(function(s){bM(n,s,t[s])})}return n}const AM={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function RM(n=AM,e){const{payload:t}=e;switch(e.type){case Zh:return Fa({},n,{itemType:t.itemType,item:t.item,sourceId:t.sourceId,isSourcePublic:t.isSourcePublic,dropResult:null,didDrop:!1});case Oy:return Fa({},n,{isSourcePublic:!0});case Jh:return Fa({},n,{targetIds:t.targetIds});case nf:return n.targetIds.indexOf(t.targetId)===-1?n:Fa({},n,{targetIds:CV(n.targetIds,t.targetId)});case ef:return Fa({},n,{dropResult:t.dropResult,didDrop:!0,targetIds:[]});case tf:return Fa({},n,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return n}}function PM(n=0,e){switch(e.type){case My:case Ly:return n+1;case jy:case nf:return n-1;default:return n}}function kM(n=0){return n+1}function DM(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function NM(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),r.forEach(function(s){DM(n,s,t[s])})}return n}function OM(n={},e){return{dirtyHandlerIds:SM(n.dirtyHandlerIds,{type:e.type,payload:NM({},e.payload,{prevTargetIds:IV(n,"dragOperation.targetIds",[])})}),dragOffset:CM(n.dragOffset,e),refCount:PM(n.refCount,e),dragOperation:RM(n.dragOperation,e),stateId:kM(n.stateId)}}function VM(n,e=void 0,t={},r=!1){const s=MM(r),o=new nM(s,new _M(s)),l=new XV(s,o),c=n(l,e,t);return l.receiveBackend(c),l}function MM(n){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return jI(OM,n&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function LM(n,e){if(n==null)return{};var t=jM(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function jM(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}let qE=0;const nh=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var FM=P.memo(function(e){var{children:t}=e,r=LM(e,["children"]);const[s,o]=UM(r);return P.useEffect(()=>{if(o){const l=HI();return++qE,()=>{--qE===0&&(l[nh]=null)}}},[]),S.jsx(LI.Provider,{value:s,children:t})});function UM(n){if("manager"in n)return[{dragDropManager:n.manager},!1];const e=BM(n.backend,n.context,n.options,n.debugMode),t=!n.context;return[e,t]}function BM(n,e=HI(),t,r){const s=e;return s[nh]||(s[nh]={dragDropManager:VM(n,e,t,r)}),s[nh]}function HI(){return typeof global<"u"?global:window}var gm,GE;function $M(){return GE||(GE=1,gm=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,s,o;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(s=r;s--!==0;)if(!n(e[s],t[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[s]))return!1;for(s=r;s--!==0;){var l=o[s];if(!n(e[l],t[l]))return!1}return!0}return e!==e&&t!==t}),gm}var zM=$M();const HM=Hg(zM),zo=typeof window<"u"?P.useLayoutEffect:P.useEffect;function WM(n,e,t){const[r,s]=P.useState(()=>e(n)),o=P.useCallback(()=>{const l=e(n);HM(r,l)||(s(l),t&&t())},[r,n,t]);return zo(o),[r,o]}function qM(n,e,t){const[r,s]=WM(n,e,t);return zo(function(){const l=n.getHandlerId();if(l!=null)return n.subscribeToStateChange(s,{handlerIds:[l]})},[n,s]),r}function WI(n,e,t){return qM(e,n||(()=>({})),()=>t.reconnect())}function qI(n,e){const t=[];return typeof n!="function"&&t.push(n),P.useMemo(()=>typeof n=="function"?n():n,t)}function GM(n){return P.useMemo(()=>n.hooks.dragSource(),[n])}function KM(n){return P.useMemo(()=>n.hooks.dragPreview(),[n])}let ym=!1,vm=!1;class QM{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){$e(!ym,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return ym=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{ym=!1}}isDragging(){if(!this.sourceId)return!1;$e(!vm,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return vm=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{vm=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let _m=!1;class YM{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;$e(!_m,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return _m=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{_m=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function XM(n,e,t){const r=t.getRegistry(),s=r.addTarget(n,e);return[s,()=>r.removeTarget(s)]}function ZM(n,e,t){const r=t.getRegistry(),s=r.addSource(n,e);return[s,()=>r.removeSource(s)]}function pg(n,e,t,r){let s;if(s!==void 0)return!!s;if(n===e)return!0;if(typeof n!="object"||!n||typeof e!="object"||!e)return!1;const o=Object.keys(n),l=Object.keys(e);if(o.length!==l.length)return!1;const c=Object.prototype.hasOwnProperty.bind(e);for(let h=0;h<o.length;h++){const p=o[h];if(!c(p))return!1;const g=n[p],y=e[p];if(s=void 0,s===!1||s===void 0&&g!==y)return!1}return!0}function mg(n){return n!==null&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function JM(n){if(typeof n.type=="string")return;const e=n.type.displayName||n.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function eL(n){return(e=null,t=null)=>{if(!P.isValidElement(e)){const o=e;return n(o,t),o}const r=e;return JM(r),tL(r,t?o=>n(o,t):n)}}function GI(n){const e={};return Object.keys(n).forEach(t=>{const r=n[t];if(t.endsWith("Ref"))e[t]=n[t];else{const s=eL(r);e[t]=()=>s}}),e}function KE(n,e){typeof n=="function"?n(e):n.current=e}function tL(n,e){const t=n.ref;return $e(typeof t!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),t?P.cloneElement(n,{ref:r=>{KE(t,r),KE(e,r)}}):P.cloneElement(n,{ref:e})}class nL{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(e=!1){const t=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),!!this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!pg(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!pg(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=GI({dragSource:(t,r)=>{this.clearDragSource(),this.dragSourceOptions=r||null,mg(t)?this.dragSourceRef=t:this.dragSourceNode=t,this.reconnectDragSource()},dragPreview:(t,r)=>{this.clearDragPreview(),this.dragPreviewOptions=r||null,mg(t)?this.dragPreviewRef=t:this.dragPreviewNode=t,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class rL{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;if(this.handlerId){if(!t){this.lastConnectedDropTarget=t;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!pg(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=GI({dropTarget:(t,r)=>{this.clearDropTarget(),this.dropTargetOptions=r,mg(t)?this.dropTargetRef=t:this.dropTargetNode=t,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function gl(){const{dragDropManager:n}=P.useContext(LI);return $e(n!=null,"Expected drag drop context"),n}function sL(n,e){const t=gl(),r=P.useMemo(()=>new nL(t.getBackend()),[t]);return zo(()=>(r.dragSourceOptions=n||null,r.reconnect(),()=>r.disconnectDragSource()),[r,n]),zo(()=>(r.dragPreviewOptions=e||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,e]),r}function iL(){const n=gl();return P.useMemo(()=>new QM(n),[n])}class oL{beginDrag(){const e=this.spec,t=this.monitor;let r=null;return typeof e.item=="object"?r=e.item:typeof e.item=="function"?r=e.item(t):r={},r??null}canDrag(){const e=this.spec,t=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(t):!0}isDragging(e,t){const r=this.spec,s=this.monitor,{isDragging:o}=r;return o?o(s):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,r=this.connector,{end:s}=e;s&&s(t.getItem(),t),r.reconnect()}constructor(e,t,r){this.spec=e,this.monitor=t,this.connector=r}}function aL(n,e,t){const r=P.useMemo(()=>new oL(n,e,t),[e,t]);return P.useEffect(()=>{r.spec=n},[n]),r}function lL(n){return P.useMemo(()=>{const e=n.type;return $e(e!=null,"spec.type must be defined"),e},[n])}function uL(n,e,t){const r=gl(),s=aL(n,e,t),o=lL(n);zo(function(){if(o!=null){const[c,h]=ZM(o,s,r);return e.receiveHandlerId(c),t.receiveHandlerId(c),h}},[r,e,t,s,o])}function cL(n,e){const t=qI(n);$e(!t.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=iL(),s=sL(t.options,t.previewOptions);return uL(t,r,s),[WI(t.collect,r,s),GM(s),KM(s)]}function dL(n){return P.useMemo(()=>n.hooks.dropTarget(),[n])}function hL(n){const e=gl(),t=P.useMemo(()=>new rL(e.getBackend()),[e]);return zo(()=>(t.dropTargetOptions=n||null,t.reconnect(),()=>t.disconnectDropTarget()),[n]),t}function fL(){const n=gl();return P.useMemo(()=>new YM(n),[n])}function pL(n){const{accept:e}=n;return P.useMemo(()=>($e(n.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class mL{canDrop(){const e=this.spec,t=this.monitor;return e.canDrop?e.canDrop(t.getItem(),t):!0}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function gL(n,e){const t=P.useMemo(()=>new mL(n,e),[e]);return P.useEffect(()=>{t.spec=n},[n]),t}function yL(n,e,t){const r=gl(),s=gL(n,e),o=pL(n);zo(function(){const[c,h]=XM(o,s,r);return e.receiveHandlerId(c),t.receiveHandlerId(c),h},[r,e,s,t,o.map(l=>l.toString()).join("|")])}function vL(n,e){const t=qI(n),r=fL(),s=hL(t.options);return yL(t,r,s),[WI(t.collect,r,s),dL(s)]}function _L(n,e){const t=(l,c)=>{const h=n[l],p=[...n];p.splice(l,1),p.splice(c,0,h),e(p)},[,r]=vL({accept:"WEBSITE_CARD",hover(l,c){if(!c.isOver({shallow:!0}))return;const h=l.index,p=n.findIndex(g=>g.id===l.id);h!==p&&(t(h,p),l.index=p)},drop:()=>({name:"WEBSITE_CARD"})}),[{isDragging:s},o]=cL({type:"WEBSITE_CARD",item:l=>{const c=n[l];return{id:(c==null?void 0:c.id)||"",index:l}},collect:l=>({isDragging:l.isDragging()})});return{drag:o,drop:r,isDragging:s}}function wL(){const[n,e]=P.useState(()=>{const r=localStorage.getItem("theme");return r||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});return P.useEffect(()=>{document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(n),localStorage.setItem("theme",n)},[n]),{theme:n,toggleTheme:()=>{e(r=>r==="light"?"dark":"light")},isDark:n==="dark"}}const EL=()=>{};var QE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},TL=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],l=n[t++],c=n[t++],h=((s&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},QI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],l=s+1<n.length,c=l?n[s+1]:0,h=s+2<n.length,p=h?n[s+2]:0,g=o>>2,y=(o&3)<<4|c>>4;let w=(c&15)<<2|p>>6,T=p&63;h||(T=64,l||(w=64)),r.push(t[g],t[y],t[w],t[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(KI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):TL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],c=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const y=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||c==null||p==null||y==null)throw new SL;const w=o<<2|c>>4;if(r.push(w),p!==64){const T=c<<4&240|p>>2;if(r.push(T),y!==64){const C=p<<6&192|y;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class SL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xL=function(n){const e=KI(n);return QI.encodeByteArray(e,!0)},xh=function(n){return xL(n).replace(/\./g,"")},YI=function(n){try{return QI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL=()=>IL().__FIREBASE_DEFAULTS__,bL=()=>{if(typeof process>"u"||typeof QE>"u")return;const n=QE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},AL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&YI(n[1]);return e&&JSON.parse(e)},rf=()=>{try{return EL()||CL()||bL()||AL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},XI=n=>{var e,t;return(t=(e=rf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},RL=n=>{const e=XI(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},ZI=()=>{var n;return(n=rf())===null||n===void 0?void 0:n.config},JI=n=>{var e;return(e=rf())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function e1(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kL(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[xh(JSON.stringify(t)),xh(JSON.stringify(l)),""].join(".")}const Cu={};function DL(){const n={prod:[],emulator:[]};for(const e of Object.keys(Cu))Cu[e]?n.emulator.push(e):n.prod.push(e);return n}function NL(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let YE=!1;function t1(n,e){if(typeof window>"u"||typeof document>"u"||!yl(window.location.host)||Cu[n]===e||Cu[n]||YE)return;Cu[n]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",o=DL().prod.length>0;function l(){const w=document.getElementById(r);w&&w.remove()}function c(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function h(w,T){w.setAttribute("width","24"),w.setAttribute("id",T),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{YE=!0,l()},w}function g(w,T){w.setAttribute("id",T),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function y(){const w=NL(r),T=t("text"),C=document.getElementById(T)||document.createElement("span"),R=t("learnmore"),A=document.getElementById(R)||document.createElement("a"),O=t("preprendIcon"),B=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const z=w.element;c(z),g(A,R);const Q=p();h(B,O),z.append(B,C,A,Q),document.body.appendChild(z)}o?(C.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(En())}function VL(){var n;const e=(n=rf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ML(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function n1(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function LL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jL(){const n=En();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function FL(){return!VL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function r1(){try{return typeof indexedDB=="object"}catch{return!1}}function s1(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}function UL(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL="FirebaseError";class ts extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=BL,Object.setPrototypeOf(this,ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xo.prototype.create)}}class Xo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?$L(o,r):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new ts(s,c,r)}}function $L(n,e){return n.replace(zL,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const zL=/\{\$([^}]+)}/g;function HL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Yi(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],l=e[s];if(XE(o)&&XE(l)){if(!Yi(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function XE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function pu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function mu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function WL(n,e){const t=new qL(n,e);return t.subscribe.bind(t)}class qL{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");GL(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=wm),s.error===void 0&&(s.error=wm),s.complete===void 0&&(s.complete=wm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function GL(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function wm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=1e3,QL=2,YL=4*60*60*1e3,XL=.5;function ZE(n,e=KL,t=QL){const r=e*Math.pow(t,n),s=Math.round(XL*r*(Math.random()-.5)*2);return Math.min(YL,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(n){return n&&n._delegate?n._delegate:n}class es{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new PL;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(e4(e))try{this.getOrInitializeService({instanceIdentifier:No})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=No){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=No){return this.instances.has(e)}getOptions(e=No){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:JL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=No){return this.component?this.component.multipleInstances?e:No:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JL(n){return n===No?void 0:n}function e4(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ZL(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(qe||(qe={}));const n4={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},r4=qe.INFO,s4={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},i4=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=s4[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sf{constructor(e){this.name=e,this._logLevel=r4,this._logHandler=i4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?n4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const o4=(n,e)=>e.some(t=>n instanceof t);let JE,eT;function a4(){return JE||(JE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function l4(){return eT||(eT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const i1=new WeakMap,gg=new WeakMap,o1=new WeakMap,Em=new WeakMap,Fy=new WeakMap;function u4(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t($i(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&i1.set(t,n)}).catch(()=>{}),Fy.set(e,n),e}function c4(n){if(gg.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});gg.set(n,e)}let yg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return gg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||o1.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $i(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function d4(n){yg=n(yg)}function h4(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Tm(this),e,...t);return o1.set(r,e.sort?e.sort():[e]),$i(r)}:l4().includes(n)?function(...e){return n.apply(Tm(this),e),$i(i1.get(this))}:function(...e){return $i(n.apply(Tm(this),e))}}function f4(n){return typeof n=="function"?h4(n):(n instanceof IDBTransaction&&c4(n),o4(n,a4())?new Proxy(n,yg):n)}function $i(n){if(n instanceof IDBRequest)return u4(n);if(Em.has(n))return Em.get(n);const e=f4(n);return e!==n&&(Em.set(n,e),Fy.set(e,n)),e}const Tm=n=>Fy.get(n);function a1(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(n,e),c=$i(l);return r&&l.addEventListener("upgradeneeded",h=>{r($i(l.result),h.oldVersion,h.newVersion,$i(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{o&&h.addEventListener("close",()=>o()),s&&h.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),c}const p4=["get","getKey","getAll","getAllKeys","count"],m4=["put","add","delete","clear"],Sm=new Map;function tT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Sm.get(e))return Sm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=m4.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||p4.includes(t)))return;const o=async function(l,...c){const h=this.transaction(l,s?"readwrite":"readonly");let p=h.store;return r&&(p=p.index(c.shift())),(await Promise.all([p[t](...c),s&&h.done]))[0]};return Sm.set(e,o),o}d4(n=>({...n,get:(e,t,r)=>tT(e,t)||n.get(e,t,r),has:(e,t)=>!!tT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(y4(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function y4(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vg="@firebase/app",nT="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=new sf("@firebase/app"),v4="@firebase/app-compat",_4="@firebase/analytics-compat",w4="@firebase/analytics",E4="@firebase/app-check-compat",T4="@firebase/app-check",S4="@firebase/auth",x4="@firebase/auth-compat",I4="@firebase/database",C4="@firebase/data-connect",b4="@firebase/database-compat",A4="@firebase/functions",R4="@firebase/functions-compat",P4="@firebase/installations",k4="@firebase/installations-compat",D4="@firebase/messaging",N4="@firebase/messaging-compat",O4="@firebase/performance",V4="@firebase/performance-compat",M4="@firebase/remote-config",L4="@firebase/remote-config-compat",j4="@firebase/storage",F4="@firebase/storage-compat",U4="@firebase/firestore",B4="@firebase/ai",$4="@firebase/firestore-compat",z4="firebase",H4="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="[DEFAULT]",W4={[vg]:"fire-core",[v4]:"fire-core-compat",[w4]:"fire-analytics",[_4]:"fire-analytics-compat",[T4]:"fire-app-check",[E4]:"fire-app-check-compat",[S4]:"fire-auth",[x4]:"fire-auth-compat",[I4]:"fire-rtdb",[C4]:"fire-data-connect",[b4]:"fire-rtdb-compat",[A4]:"fire-fn",[R4]:"fire-fn-compat",[P4]:"fire-iid",[k4]:"fire-iid-compat",[D4]:"fire-fcm",[N4]:"fire-fcm-compat",[O4]:"fire-perf",[V4]:"fire-perf-compat",[M4]:"fire-rc",[L4]:"fire-rc-compat",[j4]:"fire-gcs",[F4]:"fire-gcs-compat",[U4]:"fire-fst",[$4]:"fire-fst-compat",[B4]:"fire-vertex","fire-js":"fire-js",[z4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new Map,q4=new Map,wg=new Map;function rT(n,e){try{n.container.addComponent(e)}catch(t){ei.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function xs(n){const e=n.name;if(wg.has(e))return ei.debug(`There were multiple attempts to register component ${e}.`),!1;wg.set(e,n);for(const t of Ih.values())rT(t,n);for(const t of q4.values())rT(t,n);return!0}function Zo(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ar(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zi=new Xo("app","Firebase",G4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new es("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=H4;function l1(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:_g,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw zi.create("bad-app-name",{appName:String(s)});if(t||(t=ZI()),!t)throw zi.create("no-options");const o=Ih.get(s);if(o){if(Yi(t,o.options)&&Yi(r,o.config))return o;throw zi.create("duplicate-app",{appName:s})}const l=new t4(s);for(const h of wg.values())l.addComponent(h);const c=new K4(t,r,l);return Ih.set(s,c),c}function Uy(n=_g){const e=Ih.get(n);if(!e&&n===_g&&ZI())return l1();if(!e)throw zi.create("no-app",{appName:n});return e}function Ar(n,e,t){var r;let s=(r=W4[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ei.warn(c.join(" "));return}xs(new es(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4="firebase-heartbeat-database",Y4=1,Wu="firebase-heartbeat-store";let xm=null;function u1(){return xm||(xm=a1(Q4,Y4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Wu)}catch(t){console.warn(t)}}}}).catch(n=>{throw zi.create("idb-open",{originalErrorMessage:n.message})})),xm}async function X4(n){try{const t=(await u1()).transaction(Wu),r=await t.objectStore(Wu).get(c1(n));return await t.done,r}catch(e){if(e instanceof ts)ei.warn(e.message);else{const t=zi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ei.warn(t.message)}}}async function sT(n,e){try{const r=(await u1()).transaction(Wu,"readwrite");await r.objectStore(Wu).put(e,c1(n)),await r.done}catch(t){if(t instanceof ts)ei.warn(t.message);else{const r=zi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ei.warn(r.message)}}}function c1(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4=1024,J4=30;class ej{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new nj(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=iT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>J4){const l=rj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ei.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=iT(),{heartbeatsToSend:r,unsentEntries:s}=tj(this._heartbeatsCache.heartbeats),o=xh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return ei.warn(t),""}}}function iT(){return new Date().toISOString().substring(0,10)}function tj(n,e=Z4){const t=[];let r=n.slice();for(const s of n){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),oT(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),oT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class nj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return r1()?s1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await X4(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return sT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return sT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function oT(n){return xh(JSON.stringify({version:2,heartbeats:n})).length}function rj(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sj(n){xs(new es("platform-logger",e=>new g4(e),"PRIVATE")),xs(new es("heartbeat",e=>new ej(e),"PRIVATE")),Ar(vg,nT,n),Ar(vg,nT,"esm2017"),Ar("fire-js","")}sj("");function By(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function d1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ij=d1,h1=new Xo("auth","Firebase",d1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch=new sf("@firebase/auth");function oj(n,...e){Ch.logLevel<=qe.WARN&&Ch.warn(`Auth (${vl}): ${n}`,...e)}function rh(n,...e){Ch.logLevel<=qe.ERROR&&Ch.error(`Auth (${vl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(n,...e){throw zy(n,...e)}function Jr(n,...e){return zy(n,...e)}function $y(n,e,t){const r=Object.assign(Object.assign({},ij()),{[e]:t});return new Xo("auth","Firebase",r).create(e,{appName:n.name})}function Ks(n){return $y(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function aj(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Rr(n,"argument-error"),$y(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function zy(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return h1.create(n,...e)}function Ne(n,e,...t){if(!n)throw zy(e,...t)}function Ws(n){const e="INTERNAL ASSERTION FAILED: "+n;throw rh(e),new Error(e)}function ti(n,e){n||Ws(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function lj(){return aT()==="http:"||aT()==="https:"}function aT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lj()||n1()||"connection"in navigator)?navigator.onLine:!0}function cj(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,t){this.shortDelay=e,this.longDelay=t,ti(t>e,"Short delay should be less than long delay!"),this.isMobile=OL()||LL()}get(){return uj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(n,e){ti(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ws("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ws("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ws("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fj=new hc(3e4,6e4);function ii(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function oi(n,e,t,r,s={}){return p1(n,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=dc(Object.assign({key:n.config.apiKey},l)).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:h},o);return ML()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&yl(n.emulatorConfig.host)&&(p.credentials="include"),f1.fetch()(await m1(n,n.config.apiHost,t,c),p)})}async function p1(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},dj),e);try{const s=new mj(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw zd(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[h,p]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw zd(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw zd(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw zd(n,"user-disabled",l);const g=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw $y(n,g,p);Rr(n,g)}}catch(s){if(s instanceof ts)throw s;Rr(n,"network-request-failed",{message:String(s)})}}async function fc(n,e,t,r,s={}){const o=await oi(n,e,t,r,s);return"mfaPendingCredential"in o&&Rr(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function m1(n,e,t,r){const s=`${e}${t}?${r}`,o=n,l=o.config.emulator?Hy(n.config,s):`${n.config.apiScheme}://${s}`;return hj.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function pj(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Jr(this.auth,"network-request-failed")),fj.get())})}}function zd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Jr(n,e,r);return s.customData._tokenResponse=t,s}function lT(n){return n!==void 0&&n.enterprise!==void 0}class gj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return pj(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function yj(n,e){return oi(n,"GET","/v2/recaptchaConfig",ii(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vj(n,e){return oi(n,"POST","/v1/accounts:delete",e)}async function bh(n,e){return oi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _j(n,e=!1){const t=Tn(n),r=await t.getIdToken(e),s=Wy(r);Ne(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:bu(Im(s.auth_time)),issuedAtTime:bu(Im(s.iat)),expirationTime:bu(Im(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Im(n){return Number(n)*1e3}function Wy(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return rh("JWT malformed, contained fewer than 3 sections"),null;try{const s=YI(t);return s?JSON.parse(s):(rh("Failed to decode base64 JWT payload"),null)}catch(s){return rh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function uT(n){const e=Wy(n);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ts&&wj(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function wj({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=bu(this.lastLoginAt),this.creationTime=bu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ah(n){var e;const t=n.auth,r=await n.getIdToken(),s=await qu(n,bh(t,{idToken:r}));Ne(s==null?void 0:s.users.length,t,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?y1(o.providerUserInfo):[],c=Tj(n.providerData,l),h=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),g=h?p:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Tg(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(n,y)}async function g1(n){const e=Tn(n);await Ah(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Tj(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function y1(n){return n.map(e=>{var{providerId:t}=e,r=By(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sj(n,e){const t=await p1(n,{},async()=>{const r=dc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,l=await m1(n,s,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:c,body:r};return n.emulatorConfig&&yl(n.emulatorConfig.host)&&(h.credentials="include"),f1.fetch()(l,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function xj(n,e){return oi(n,"POST","/v2/accounts:revokeToken",ii(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):uT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const t=uT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await Sj(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,l=new Ya;return r&&(Ne(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Ne(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Ne(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ya,this.toJSON())}_performRefresh(){return Ws("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(n,e){Ne(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Xr{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,o=By(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ej(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Tg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await qu(this,this.stsTokenManager.getToken(this.auth,e));return Ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return _j(this,e)}reload(){return g1(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Ah(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ar(this.auth.app))return Promise.reject(Ks(this.auth));const e=await this.getIdToken();return await qu(this,vj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,o,l,c,h,p,g;const y=(r=t.displayName)!==null&&r!==void 0?r:void 0,w=(s=t.email)!==null&&s!==void 0?s:void 0,T=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,C=(l=t.photoURL)!==null&&l!==void 0?l:void 0,R=(c=t.tenantId)!==null&&c!==void 0?c:void 0,A=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,O=(p=t.createdAt)!==null&&p!==void 0?p:void 0,B=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:z,emailVerified:Q,isAnonymous:K,providerData:J,stsTokenManager:D}=t;Ne(z&&D,e,"internal-error");const I=Ya.fromJSON(this.name,D);Ne(typeof z=="string",e,"internal-error"),Ni(y,e.name),Ni(w,e.name),Ne(typeof Q=="boolean",e,"internal-error"),Ne(typeof K=="boolean",e,"internal-error"),Ni(T,e.name),Ni(C,e.name),Ni(R,e.name),Ni(A,e.name),Ni(O,e.name),Ni(B,e.name);const k=new Xr({uid:z,auth:e,email:w,emailVerified:Q,displayName:y,isAnonymous:K,photoURL:C,phoneNumber:T,tenantId:R,stsTokenManager:I,createdAt:O,lastLoginAt:B});return J&&Array.isArray(J)&&(k.providerData=J.map(M=>Object.assign({},M))),A&&(k._redirectEventId=A),k}static async _fromIdTokenResponse(e,t,r=!1){const s=new Ya;s.updateFromServerResponse(t);const o=new Xr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ah(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Ne(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?y1(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),c=new Ya;c.updateFromIdToken(r);const h=new Xr({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Tg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,p),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=new Map;function qs(n){ti(n instanceof Function,"Expected a class definition");let e=cT.get(n);return e?(ti(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,cT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}v1.type="NONE";const dT=v1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(n,e,t){return`firebase:${n}:${e}:${t}`}class Xa{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=sh(this.userKey,s.apiKey,o),this.fullPersistenceKey=sh("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await bh(this.auth,{idToken:e}).catch(()=>{});return t?Xr._fromGetAccountInfoResponse(this.auth,t,e):null}return Xr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Xa(qs(dT),e,r);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||qs(dT);const l=sh(r,e.config.apiKey,e.name);let c=null;for(const p of t)try{const g=await p._get(l);if(g){let y;if(typeof g=="string"){const w=await bh(e,{idToken:g}).catch(()=>{});if(!w)break;y=await Xr._fromGetAccountInfoResponse(e,w,g)}else y=Xr._fromJSON(e,g);p!==o&&(c=y),o=p;break}}catch{}const h=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Xa(o,e,r):(o=h[0],c&&await o._set(l,c.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new Xa(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(T1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(x1(e))return"Blackberry";if(I1(e))return"Webos";if(w1(e))return"Safari";if((e.includes("chrome/")||E1(e))&&!e.includes("edge/"))return"Chrome";if(S1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function _1(n=En()){return/firefox\//i.test(n)}function w1(n=En()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function E1(n=En()){return/crios\//i.test(n)}function T1(n=En()){return/iemobile/i.test(n)}function S1(n=En()){return/android/i.test(n)}function x1(n=En()){return/blackberry/i.test(n)}function I1(n=En()){return/webos/i.test(n)}function qy(n=En()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Ij(n=En()){var e;return qy(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Cj(){return jL()&&document.documentMode===10}function C1(n=En()){return qy(n)||S1(n)||I1(n)||x1(n)||/windows phone/i.test(n)||T1(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(n,e=[]){let t;switch(n){case"Browser":t=hT(En());break;case"Worker":t=`${hT(En())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${vl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,c)=>{try{const h=e(o);l(h)}catch(h){c(h)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aj(n,e={}){return oi(n,"GET","/v2/passwordPolicy",ii(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rj=6;class Pj{constructor(e){var t,r,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:Rj,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,o,l,c;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(s=h.containsLowercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(o=h.containsUppercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(l=h.containsNumericCharacter)!==null&&l!==void 0?l:!0),h.isValid&&(h.isValid=(c=h.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),h}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fT(this),this.idTokenSubscription=new fT(this),this.beforeStateQueue=new bj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=h1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=qs(t)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await Xa.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await bh(this,{idToken:e}),r=await Xr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ar(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=s==null?void 0:s._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&(h!=null&&h.user)&&(s=h.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ah(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ar(this.app))return Promise.reject(Ks(this));const t=e?Tn(e):null;return t&&Ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ar(this.app)?Promise.reject(Ks(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ar(this.app)?Promise.reject(Ks(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Aj(this),t=new Pj(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await xj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&qs(e)||this._popupRedirectResolver;Ne(t,this,"argument-error"),this.redirectPersistenceManager=await Xa.create(this,[qs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,s);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=b1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(ar(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&oj(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function io(n){return Tn(n)}class fT{constructor(e){this.auth=e,this.observer=null,this.addObserver=WL(t=>this.observer=t)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let of={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Dj(n){of=n}function A1(n){return of.loadJS(n)}function Nj(){return of.recaptchaEnterpriseScript}function Oj(){return of.gapiScript}function Vj(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class Mj{constructor(){this.enterprise=new Lj}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Lj{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const jj="recaptcha-enterprise",R1="NO_RECAPTCHA";class Fj{constructor(e){this.type=jj,this.auth=io(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{yj(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const p=new gj(h);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(h=>{c(h)})})}function s(o,l,c){const h=window.grecaptcha;lT(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(R1)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Mj().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(c=>{if(!t&&lT(window.grecaptcha))s(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=Nj();h.length!==0&&(h+=c),A1(h).then(()=>{s(c,o,l)}).catch(p=>{l(p)})}}).catch(c=>{l(c)})})}}async function pT(n,e,t,r=!1,s=!1){const o=new Fj(n);let l;if(s)l=R1;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const c=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const h=c.phoneEnrollmentInfo.phoneNumber,p=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const h=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Sg(n,e,t,r,s){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await pT(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await pT(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uj(n,e){const t=Zo(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(Yi(o,e??{}))return s;Rr(s,"already-initialized")}return t.initialize({options:e})}function Bj(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(qs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function $j(n,e,t){const r=io(n);Ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=P1(e),{host:l,port:c}=zj(e),h=c===null?"":`:${c}`,p={url:`${o}//${l}${h}/`},g=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ne(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ne(Yi(p,r.config.emulator)&&Yi(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,yl(l)?(e1(`${o}//${l}${h}`),t1("Auth",!0)):Hj()}function P1(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function zj(n){const e=P1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:mT(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:mT(l)}}}function mT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Hj(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ws("not implemented")}_getIdTokenResponse(e){return Ws("not implemented")}_linkToIdToken(e,t){return Ws("not implemented")}_getReauthenticationResolver(e){return Ws("not implemented")}}async function Wj(n,e){return oi(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qj(n,e){return fc(n,"POST","/v1/accounts:signInWithPassword",ii(n,e))}async function Gj(n,e){return oi(n,"POST","/v1/accounts:sendOobCode",ii(n,e))}async function Kj(n,e){return Gj(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qj(n,e){return fc(n,"POST","/v1/accounts:signInWithEmailLink",ii(n,e))}async function Yj(n,e){return fc(n,"POST","/v1/accounts:signInWithEmailLink",ii(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu extends Gy{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Gu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Gu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sg(e,t,"signInWithPassword",qj);case"emailLink":return Qj(e,{email:this._email,oobCode:this._password});default:Rr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sg(e,r,"signUpPassword",Wj);case"emailLink":return Yj(e,{idToken:t,email:this._email,oobCode:this._password});default:Rr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Za(n,e){return fc(n,"POST","/v1/accounts:signInWithIdp",ii(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj="http://localhost";class Ho extends Gy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ho(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Rr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,o=By(t,["providerId","signInMethod"]);if(!r||!s)return null;const l=new Ho(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Za(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Za(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Za(e,t)}buildRequest(){const e={requestUri:Xj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=dc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Jj(n){const e=pu(mu(n)).link,t=e?pu(mu(e)).deep_link_id:null,r=pu(mu(n)).deep_link_id;return(r?pu(mu(r)).link:null)||r||t||e||n}class Ky{constructor(e){var t,r,s,o,l,c;const h=pu(mu(e)),p=(t=h.apiKey)!==null&&t!==void 0?t:null,g=(r=h.oobCode)!==null&&r!==void 0?r:null,y=Zj((s=h.mode)!==null&&s!==void 0?s:null);Ne(p&&g&&y,"argument-error"),this.apiKey=p,this.operation=y,this.code=g,this.continueUrl=(o=h.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=h.lang)!==null&&l!==void 0?l:null,this.tenantId=(c=h.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const t=Jj(e);try{return new Ky(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(){this.providerId=_l.PROVIDER_ID}static credential(e,t){return Gu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Ky.parseLink(t);return Ne(r,"argument-error"),Gu._fromEmailAndCode(e,r.code,r.tenantId)}}_l.PROVIDER_ID="password";_l.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_l.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc extends Qy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends pc{constructor(){super("facebook.com")}static credential(e){return Ho._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mi.credential(e.oauthAccessToken)}catch{return null}}}Mi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends pc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ho._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Hs.credential(t,r)}catch{return null}}}Hs.GOOGLE_SIGN_IN_METHOD="google.com";Hs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends pc{constructor(){super("github.com")}static credential(e){return Ho._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Li.credential(e.oauthAccessToken)}catch{return null}}}Li.GITHUB_SIGN_IN_METHOD="github.com";Li.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends pc{constructor(){super("twitter.com")}static credential(e,t){return Ho._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ji.credential(t,r)}catch{return null}}}ji.TWITTER_SIGN_IN_METHOD="twitter.com";ji.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eF(n,e){return fc(n,"POST","/v1/accounts:signUp",ii(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await Xr._fromIdTokenResponse(e,r,s),l=gT(r);return new Wo({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=gT(r);return new Wo({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function gT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh extends ts{constructor(e,t,r,s){var o;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Rh.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Rh(e,t,r,s)}}function k1(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Rh._fromErrorAndOperation(n,o,e,r):o})}async function tF(n,e,t=!1){const r=await qu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Wo._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nF(n,e,t=!1){const{auth:r}=n;if(ar(r.app))return Promise.reject(Ks(r));const s="reauthenticate";try{const o=await qu(n,k1(r,s,e,n),t);Ne(o.idToken,r,"internal-error");const l=Wy(o.idToken);Ne(l,r,"internal-error");const{sub:c}=l;return Ne(n.uid===c,r,"user-mismatch"),Wo._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Rr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D1(n,e,t=!1){if(ar(n.app))return Promise.reject(Ks(n));const r="signIn",s=await k1(n,r,e),o=await Wo._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function rF(n,e){return D1(io(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N1(n){const e=io(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function sF(n,e,t){if(ar(n.app))return Promise.reject(Ks(n));const r=io(n),l=await Sg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",eF).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&N1(n),h}),c=await Wo._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(c.user),c}function iF(n,e,t){return ar(n.app)?Promise.reject(Ks(n)):rF(Tn(n),_l.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&N1(n),r})}async function yT(n,e){const t=Tn(n),s={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:o}=await Kj(t.auth,s);o!==n.email&&await n.reload()}function oF(n,e,t,r){return Tn(n).onIdTokenChanged(e,t,r)}function aF(n,e,t){return Tn(n).beforeAuthStateChanged(e,t)}function lF(n,e,t,r){return Tn(n).onAuthStateChanged(e,t,r)}function uF(n){return Tn(n).signOut()}const Ph="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ph,"1"),this.storage.removeItem(Ph),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cF=1e3,dF=10;class V1 extends O1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=C1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);Cj()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,dF):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},cF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}V1.type="LOCAL";const hF=V1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1 extends O1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}M1.type="SESSION";const L1=M1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fF(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new af(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(l).map(async p=>p(t.origin,o)),h=await fF(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}af.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((c,h)=>{const p=Yy("",20);s.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(y){const w=y;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(w.data.response);break;default:clearTimeout(g),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(){return window}function mF(n){vs().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(){return typeof vs().WorkerGlobalScope<"u"&&typeof vs().importScripts=="function"}async function gF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yF(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function vF(){return j1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="firebaseLocalStorageDb",_F=1,kh="firebaseLocalStorage",U1="fbase_key";class mc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function lf(n,e){return n.transaction([kh],e?"readwrite":"readonly").objectStore(kh)}function wF(){const n=indexedDB.deleteDatabase(F1);return new mc(n).toPromise()}function xg(){const n=indexedDB.open(F1,_F);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(kh,{keyPath:U1})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(kh)?e(r):(r.close(),await wF(),e(await xg()))})})}async function vT(n,e,t){const r=lf(n,!0).put({[U1]:e,value:t});return new mc(r).toPromise()}async function EF(n,e){const t=lf(n,!1).get(e),r=await new mc(t).toPromise();return r===void 0?null:r.value}function _T(n,e){const t=lf(n,!0).delete(e);return new mc(t).toPromise()}const TF=800,SF=3;class B1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>SF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return j1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=af._getInstance(vF()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await gF(),!this.activeServiceWorker)return;this.sender=new pF(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xg();return await vT(e,Ph,"1"),await _T(e,Ph),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>vT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>EF(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>_T(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=lf(s,!1).getAll();return new mc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}B1.type="LOCAL";const xF=B1;new hc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(n,e){return e?qs(e):(Ne(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy extends Gy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Za(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Za(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Za(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function IF(n){return D1(n.auth,new Xy(n),n.bypassAuthState)}function CF(n){const{auth:e,user:t}=n;return Ne(t,e,"internal-error"),nF(t,new Xy(n),n.bypassAuthState)}async function bF(n){const{auth:e,user:t}=n;return Ne(t,e,"internal-error"),tF(t,new Xy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return IF;case"linkViaPopup":case"linkViaRedirect":return bF;case"reauthViaPopup":case"reauthViaRedirect":return CF;default:Rr(this.auth,"internal-error")}}resolve(e){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AF=new hc(2e3,1e4);async function RF(n,e,t){if(ar(n.app))return Promise.reject(Jr(n,"operation-not-supported-in-this-environment"));const r=io(n);aj(n,e,Qy);const s=$1(r,t);return new Mo(r,"signInViaPopup",e,s).executeNotNull()}class Mo extends z1{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Mo.currentPopupAction&&Mo.currentPopupAction.cancel(),Mo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){ti(this.filter.length===1,"Popup operations only handle one event");const e=Yy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Jr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Jr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Mo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,AF.get())};e()}}Mo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF="pendingRedirect",ih=new Map;class kF extends z1{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=ih.get(this.auth._key());if(!e){try{const r=await DF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ih.set(this.auth._key(),e)}return this.bypassAuthState||ih.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DF(n,e){const t=VF(e),r=OF(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function NF(n,e){ih.set(n._key(),e)}function OF(n){return qs(n._redirectPersistence)}function VF(n){return sh(PF,n.config.apiKey,n.name)}async function MF(n,e,t=!1){if(ar(n.app))return Promise.reject(Ks(n));const r=io(n),s=$1(r,e),l=await new kF(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF=10*60*1e3;class jF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FF(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!H1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Jr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LF&&this.cachedEventUids.clear(),this.cachedEventUids.has(wT(e))}saveEventToCache(e){this.cachedEventUids.add(wT(e)),this.lastProcessedEventTime=Date.now()}}function wT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function H1({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function FF(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return H1(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UF(n,e={}){return oi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$F=/^https?/;async function zF(n){if(n.config.emulator)return;const{authorizedDomains:e}=await UF(n);for(const t of e)try{if(HF(t))return}catch{}Rr(n,"unauthorized-domain")}function HF(n){const e=Eg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!$F.test(t))return!1;if(BF.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WF=new hc(3e4,6e4);function ET(){const n=vs().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function qF(n){return new Promise((e,t)=>{var r,s,o;function l(){ET(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ET(),t(Jr(n,"network-request-failed"))},timeout:WF.get()})}if(!((s=(r=vs().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=vs().gapi)===null||o===void 0)&&o.load)l();else{const c=Vj("iframefcb");return vs()[c]=()=>{gapi.load?l():t(Jr(n,"network-request-failed"))},A1(`${Oj()}?onload=${c}`).catch(h=>t(h))}}).catch(e=>{throw oh=null,e})}let oh=null;function GF(n){return oh=oh||qF(n),oh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF=new hc(5e3,15e3),QF="__/auth/iframe",YF="emulator/auth/iframe",XF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JF(n){const e=n.config;Ne(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Hy(e,YF):`https://${n.config.authDomain}/${QF}`,r={apiKey:e.apiKey,appName:n.name,v:vl},s=ZF.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${dc(r).slice(1)}`}async function e5(n){const e=await GF(n),t=vs().gapi;return Ne(t,n,"internal-error"),e.open({where:document.body,url:JF(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XF,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=Jr(n,"network-request-failed"),c=vs().setTimeout(()=>{o(l)},KF.get());function h(){vs().clearTimeout(c),s(r)}r.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},n5=500,r5=600,s5="_blank",i5="http://localhost";class TT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function o5(n,e,t,r=n5,s=r5){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h=Object.assign(Object.assign({},t5),{width:r.toString(),height:s.toString(),top:o,left:l}),p=En().toLowerCase();t&&(c=E1(p)?s5:t),_1(p)&&(e=e||i5,h.scrollbars="yes");const g=Object.entries(h).reduce((w,[T,C])=>`${w}${T}=${C},`,"");if(Ij(p)&&c!=="_self")return a5(e||"",c),new TT(null);const y=window.open(e||"",c,g);Ne(y,n,"popup-blocked");try{y.focus()}catch{}return new TT(y)}function a5(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5="__/auth/handler",u5="emulator/auth/handler",c5=encodeURIComponent("fac");async function ST(n,e,t,r,s,o){Ne(n.config.authDomain,n,"auth-domain-config-required"),Ne(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:vl,eventId:s};if(e instanceof Qy){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",HL(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))l[g]=y}if(e instanceof pc){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const g of Object.keys(c))c[g]===void 0&&delete c[g];const h=await n._getAppCheckToken(),p=h?`#${c5}=${encodeURIComponent(h)}`:"";return`${d5(n)}?${dc(c).slice(1)}${p}`}function d5({config:n}){return n.emulator?Hy(n,u5):`https://${n.authDomain}/${l5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="webStorageSupport";class h5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=L1,this._completeRedirectFn=MF,this._overrideRedirectResult=NF}async _openPopup(e,t,r,s){var o;ti((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await ST(e,t,r,Eg(),s);return o5(e,l,Yy())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await ST(e,t,r,Eg(),s);return mF(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(ti(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await e5(e),r=new jF(e);return t.register("authEvent",s=>(Ne(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Cm,{type:Cm},s=>{var o;const l=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[Cm];l!==void 0&&t(!!l),Rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=zF(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return C1()||w1()||qy()}}const f5=h5;var xT="@firebase/auth",IT="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m5(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function g5(n){xs(new es("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;Ne(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:b1(n)},p=new kj(r,s,o,h);return Bj(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),xs(new es("auth-internal",e=>{const t=io(e.getProvider("auth").getImmediate());return(r=>new p5(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ar(xT,IT,m5(n)),Ar(xT,IT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y5=5*60,v5=JI("authIdTokenMaxAge")||y5;let CT=null;const _5=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>v5)return;const s=t==null?void 0:t.token;CT!==s&&(CT=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function w5(n=Uy()){const e=Zo(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Uj(n,{popupRedirectResolver:f5,persistence:[xF,hF,L1]}),r=JI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=_5(o.toString());aF(t,l,()=>l(t.currentUser)),oF(t,c=>l(c))}}const s=XI("auth");return s&&$j(t,`http://${s}`),t}function E5(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Dj({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=Jr("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",E5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});g5("Browser");var T5="firebase",S5="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ar(T5,S5,"app");var bT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hi,W1;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,I){function k(){}k.prototype=I.prototype,D.D=I.prototype,D.prototype=new k,D.prototype.constructor=D,D.C=function(M,L,H){for(var V=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)V[rt-2]=arguments[rt];return I.prototype[L].apply(M,V)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(D,I,k){k||(k=0);var M=Array(16);if(typeof I=="string")for(var L=0;16>L;++L)M[L]=I.charCodeAt(k++)|I.charCodeAt(k++)<<8|I.charCodeAt(k++)<<16|I.charCodeAt(k++)<<24;else for(L=0;16>L;++L)M[L]=I[k++]|I[k++]<<8|I[k++]<<16|I[k++]<<24;I=D.g[0],k=D.g[1],L=D.g[2];var H=D.g[3],V=I+(H^k&(L^H))+M[0]+3614090360&4294967295;I=k+(V<<7&4294967295|V>>>25),V=H+(L^I&(k^L))+M[1]+3905402710&4294967295,H=I+(V<<12&4294967295|V>>>20),V=L+(k^H&(I^k))+M[2]+606105819&4294967295,L=H+(V<<17&4294967295|V>>>15),V=k+(I^L&(H^I))+M[3]+3250441966&4294967295,k=L+(V<<22&4294967295|V>>>10),V=I+(H^k&(L^H))+M[4]+4118548399&4294967295,I=k+(V<<7&4294967295|V>>>25),V=H+(L^I&(k^L))+M[5]+1200080426&4294967295,H=I+(V<<12&4294967295|V>>>20),V=L+(k^H&(I^k))+M[6]+2821735955&4294967295,L=H+(V<<17&4294967295|V>>>15),V=k+(I^L&(H^I))+M[7]+4249261313&4294967295,k=L+(V<<22&4294967295|V>>>10),V=I+(H^k&(L^H))+M[8]+1770035416&4294967295,I=k+(V<<7&4294967295|V>>>25),V=H+(L^I&(k^L))+M[9]+2336552879&4294967295,H=I+(V<<12&4294967295|V>>>20),V=L+(k^H&(I^k))+M[10]+4294925233&4294967295,L=H+(V<<17&4294967295|V>>>15),V=k+(I^L&(H^I))+M[11]+2304563134&4294967295,k=L+(V<<22&4294967295|V>>>10),V=I+(H^k&(L^H))+M[12]+1804603682&4294967295,I=k+(V<<7&4294967295|V>>>25),V=H+(L^I&(k^L))+M[13]+4254626195&4294967295,H=I+(V<<12&4294967295|V>>>20),V=L+(k^H&(I^k))+M[14]+2792965006&4294967295,L=H+(V<<17&4294967295|V>>>15),V=k+(I^L&(H^I))+M[15]+1236535329&4294967295,k=L+(V<<22&4294967295|V>>>10),V=I+(L^H&(k^L))+M[1]+4129170786&4294967295,I=k+(V<<5&4294967295|V>>>27),V=H+(k^L&(I^k))+M[6]+3225465664&4294967295,H=I+(V<<9&4294967295|V>>>23),V=L+(I^k&(H^I))+M[11]+643717713&4294967295,L=H+(V<<14&4294967295|V>>>18),V=k+(H^I&(L^H))+M[0]+3921069994&4294967295,k=L+(V<<20&4294967295|V>>>12),V=I+(L^H&(k^L))+M[5]+3593408605&4294967295,I=k+(V<<5&4294967295|V>>>27),V=H+(k^L&(I^k))+M[10]+38016083&4294967295,H=I+(V<<9&4294967295|V>>>23),V=L+(I^k&(H^I))+M[15]+3634488961&4294967295,L=H+(V<<14&4294967295|V>>>18),V=k+(H^I&(L^H))+M[4]+3889429448&4294967295,k=L+(V<<20&4294967295|V>>>12),V=I+(L^H&(k^L))+M[9]+568446438&4294967295,I=k+(V<<5&4294967295|V>>>27),V=H+(k^L&(I^k))+M[14]+3275163606&4294967295,H=I+(V<<9&4294967295|V>>>23),V=L+(I^k&(H^I))+M[3]+4107603335&4294967295,L=H+(V<<14&4294967295|V>>>18),V=k+(H^I&(L^H))+M[8]+1163531501&4294967295,k=L+(V<<20&4294967295|V>>>12),V=I+(L^H&(k^L))+M[13]+2850285829&4294967295,I=k+(V<<5&4294967295|V>>>27),V=H+(k^L&(I^k))+M[2]+4243563512&4294967295,H=I+(V<<9&4294967295|V>>>23),V=L+(I^k&(H^I))+M[7]+1735328473&4294967295,L=H+(V<<14&4294967295|V>>>18),V=k+(H^I&(L^H))+M[12]+2368359562&4294967295,k=L+(V<<20&4294967295|V>>>12),V=I+(k^L^H)+M[5]+4294588738&4294967295,I=k+(V<<4&4294967295|V>>>28),V=H+(I^k^L)+M[8]+2272392833&4294967295,H=I+(V<<11&4294967295|V>>>21),V=L+(H^I^k)+M[11]+1839030562&4294967295,L=H+(V<<16&4294967295|V>>>16),V=k+(L^H^I)+M[14]+4259657740&4294967295,k=L+(V<<23&4294967295|V>>>9),V=I+(k^L^H)+M[1]+2763975236&4294967295,I=k+(V<<4&4294967295|V>>>28),V=H+(I^k^L)+M[4]+1272893353&4294967295,H=I+(V<<11&4294967295|V>>>21),V=L+(H^I^k)+M[7]+4139469664&4294967295,L=H+(V<<16&4294967295|V>>>16),V=k+(L^H^I)+M[10]+3200236656&4294967295,k=L+(V<<23&4294967295|V>>>9),V=I+(k^L^H)+M[13]+681279174&4294967295,I=k+(V<<4&4294967295|V>>>28),V=H+(I^k^L)+M[0]+3936430074&4294967295,H=I+(V<<11&4294967295|V>>>21),V=L+(H^I^k)+M[3]+3572445317&4294967295,L=H+(V<<16&4294967295|V>>>16),V=k+(L^H^I)+M[6]+76029189&4294967295,k=L+(V<<23&4294967295|V>>>9),V=I+(k^L^H)+M[9]+3654602809&4294967295,I=k+(V<<4&4294967295|V>>>28),V=H+(I^k^L)+M[12]+3873151461&4294967295,H=I+(V<<11&4294967295|V>>>21),V=L+(H^I^k)+M[15]+530742520&4294967295,L=H+(V<<16&4294967295|V>>>16),V=k+(L^H^I)+M[2]+3299628645&4294967295,k=L+(V<<23&4294967295|V>>>9),V=I+(L^(k|~H))+M[0]+4096336452&4294967295,I=k+(V<<6&4294967295|V>>>26),V=H+(k^(I|~L))+M[7]+1126891415&4294967295,H=I+(V<<10&4294967295|V>>>22),V=L+(I^(H|~k))+M[14]+2878612391&4294967295,L=H+(V<<15&4294967295|V>>>17),V=k+(H^(L|~I))+M[5]+4237533241&4294967295,k=L+(V<<21&4294967295|V>>>11),V=I+(L^(k|~H))+M[12]+1700485571&4294967295,I=k+(V<<6&4294967295|V>>>26),V=H+(k^(I|~L))+M[3]+2399980690&4294967295,H=I+(V<<10&4294967295|V>>>22),V=L+(I^(H|~k))+M[10]+4293915773&4294967295,L=H+(V<<15&4294967295|V>>>17),V=k+(H^(L|~I))+M[1]+2240044497&4294967295,k=L+(V<<21&4294967295|V>>>11),V=I+(L^(k|~H))+M[8]+1873313359&4294967295,I=k+(V<<6&4294967295|V>>>26),V=H+(k^(I|~L))+M[15]+4264355552&4294967295,H=I+(V<<10&4294967295|V>>>22),V=L+(I^(H|~k))+M[6]+2734768916&4294967295,L=H+(V<<15&4294967295|V>>>17),V=k+(H^(L|~I))+M[13]+1309151649&4294967295,k=L+(V<<21&4294967295|V>>>11),V=I+(L^(k|~H))+M[4]+4149444226&4294967295,I=k+(V<<6&4294967295|V>>>26),V=H+(k^(I|~L))+M[11]+3174756917&4294967295,H=I+(V<<10&4294967295|V>>>22),V=L+(I^(H|~k))+M[2]+718787259&4294967295,L=H+(V<<15&4294967295|V>>>17),V=k+(H^(L|~I))+M[9]+3951481745&4294967295,D.g[0]=D.g[0]+I&4294967295,D.g[1]=D.g[1]+(L+(V<<21&4294967295|V>>>11))&4294967295,D.g[2]=D.g[2]+L&4294967295,D.g[3]=D.g[3]+H&4294967295}r.prototype.u=function(D,I){I===void 0&&(I=D.length);for(var k=I-this.blockSize,M=this.B,L=this.h,H=0;H<I;){if(L==0)for(;H<=k;)s(this,D,H),H+=this.blockSize;if(typeof D=="string"){for(;H<I;)if(M[L++]=D.charCodeAt(H++),L==this.blockSize){s(this,M),L=0;break}}else for(;H<I;)if(M[L++]=D[H++],L==this.blockSize){s(this,M),L=0;break}}this.h=L,this.o+=I},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var I=1;I<D.length-8;++I)D[I]=0;var k=8*this.o;for(I=D.length-8;I<D.length;++I)D[I]=k&255,k/=256;for(this.u(D),D=Array(16),I=k=0;4>I;++I)for(var M=0;32>M;M+=8)D[k++]=this.g[I]>>>M&255;return D};function o(D,I){var k=c;return Object.prototype.hasOwnProperty.call(k,D)?k[D]:k[D]=I(D)}function l(D,I){this.h=I;for(var k=[],M=!0,L=D.length-1;0<=L;L--){var H=D[L]|0;M&&H==I||(k[L]=H,M=!1)}this.g=k}var c={};function h(D){return-128<=D&&128>D?o(D,function(I){return new l([I|0],0>I?-1:0)}):new l([D|0],0>D?-1:0)}function p(D){if(isNaN(D)||!isFinite(D))return y;if(0>D)return A(p(-D));for(var I=[],k=1,M=0;D>=k;M++)I[M]=D/k|0,k*=4294967296;return new l(I,0)}function g(D,I){if(D.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(D.charAt(0)=="-")return A(g(D.substring(1),I));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=p(Math.pow(I,8)),M=y,L=0;L<D.length;L+=8){var H=Math.min(8,D.length-L),V=parseInt(D.substring(L,L+H),I);8>H?(H=p(Math.pow(I,H)),M=M.j(H).add(p(V))):(M=M.j(k),M=M.add(p(V)))}return M}var y=h(0),w=h(1),T=h(16777216);n=l.prototype,n.m=function(){if(R(this))return-A(this).m();for(var D=0,I=1,k=0;k<this.g.length;k++){var M=this.i(k);D+=(0<=M?M:4294967296+M)*I,I*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(C(this))return"0";if(R(this))return"-"+A(this).toString(D);for(var I=p(Math.pow(D,6)),k=this,M="";;){var L=Q(k,I).g;k=O(k,L.j(I));var H=((0<k.g.length?k.g[0]:k.h)>>>0).toString(D);if(k=L,C(k))return H+M;for(;6>H.length;)H="0"+H;M=H+M}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function C(D){if(D.h!=0)return!1;for(var I=0;I<D.g.length;I++)if(D.g[I]!=0)return!1;return!0}function R(D){return D.h==-1}n.l=function(D){return D=O(this,D),R(D)?-1:C(D)?0:1};function A(D){for(var I=D.g.length,k=[],M=0;M<I;M++)k[M]=~D.g[M];return new l(k,~D.h).add(w)}n.abs=function(){return R(this)?A(this):this},n.add=function(D){for(var I=Math.max(this.g.length,D.g.length),k=[],M=0,L=0;L<=I;L++){var H=M+(this.i(L)&65535)+(D.i(L)&65535),V=(H>>>16)+(this.i(L)>>>16)+(D.i(L)>>>16);M=V>>>16,H&=65535,V&=65535,k[L]=V<<16|H}return new l(k,k[k.length-1]&-2147483648?-1:0)};function O(D,I){return D.add(A(I))}n.j=function(D){if(C(this)||C(D))return y;if(R(this))return R(D)?A(this).j(A(D)):A(A(this).j(D));if(R(D))return A(this.j(A(D)));if(0>this.l(T)&&0>D.l(T))return p(this.m()*D.m());for(var I=this.g.length+D.g.length,k=[],M=0;M<2*I;M++)k[M]=0;for(M=0;M<this.g.length;M++)for(var L=0;L<D.g.length;L++){var H=this.i(M)>>>16,V=this.i(M)&65535,rt=D.i(L)>>>16,st=D.i(L)&65535;k[2*M+2*L]+=V*st,B(k,2*M+2*L),k[2*M+2*L+1]+=H*st,B(k,2*M+2*L+1),k[2*M+2*L+1]+=V*rt,B(k,2*M+2*L+1),k[2*M+2*L+2]+=H*rt,B(k,2*M+2*L+2)}for(M=0;M<I;M++)k[M]=k[2*M+1]<<16|k[2*M];for(M=I;M<2*I;M++)k[M]=0;return new l(k,0)};function B(D,I){for(;(D[I]&65535)!=D[I];)D[I+1]+=D[I]>>>16,D[I]&=65535,I++}function z(D,I){this.g=D,this.h=I}function Q(D,I){if(C(I))throw Error("division by zero");if(C(D))return new z(y,y);if(R(D))return I=Q(A(D),I),new z(A(I.g),A(I.h));if(R(I))return I=Q(D,A(I)),new z(A(I.g),I.h);if(30<D.g.length){if(R(D)||R(I))throw Error("slowDivide_ only works with positive integers.");for(var k=w,M=I;0>=M.l(D);)k=K(k),M=K(M);var L=J(k,1),H=J(M,1);for(M=J(M,2),k=J(k,2);!C(M);){var V=H.add(M);0>=V.l(D)&&(L=L.add(k),H=V),M=J(M,1),k=J(k,1)}return I=O(D,L.j(I)),new z(L,I)}for(L=y;0<=D.l(I);){for(k=Math.max(1,Math.floor(D.m()/I.m())),M=Math.ceil(Math.log(k)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),H=p(k),V=H.j(I);R(V)||0<V.l(D);)k-=M,H=p(k),V=H.j(I);C(H)&&(H=w),L=L.add(H),D=O(D,V)}return new z(L,D)}n.A=function(D){return Q(this,D).h},n.and=function(D){for(var I=Math.max(this.g.length,D.g.length),k=[],M=0;M<I;M++)k[M]=this.i(M)&D.i(M);return new l(k,this.h&D.h)},n.or=function(D){for(var I=Math.max(this.g.length,D.g.length),k=[],M=0;M<I;M++)k[M]=this.i(M)|D.i(M);return new l(k,this.h|D.h)},n.xor=function(D){for(var I=Math.max(this.g.length,D.g.length),k=[],M=0;M<I;M++)k[M]=this.i(M)^D.i(M);return new l(k,this.h^D.h)};function K(D){for(var I=D.g.length+1,k=[],M=0;M<I;M++)k[M]=D.i(M)<<1|D.i(M-1)>>>31;return new l(k,D.h)}function J(D,I){var k=I>>5;I%=32;for(var M=D.g.length-k,L=[],H=0;H<M;H++)L[H]=0<I?D.i(H+k)>>>I|D.i(H+k+1)<<32-I:D.i(H+k);return new l(L,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,W1=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=g,Hi=l}).apply(typeof bT<"u"?bT:typeof self<"u"?self:typeof window<"u"?window:{});var Hd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var q1,gu,G1,ah,Ig,K1,Q1,Y1;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,v,E){return d==Array.prototype||d==Object.prototype||(d[v]=E.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hd=="object"&&Hd];for(var v=0;v<d.length;++v){var E=d[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function s(d,v){if(v)e:{var E=r;d=d.split(".");for(var b=0;b<d.length-1;b++){var W=d[b];if(!(W in E))break e;E=E[W]}d=d[d.length-1],b=E[d],v=v(b),v!=b&&v!=null&&e(E,d,{configurable:!0,writable:!0,value:v})}}function o(d,v){d instanceof String&&(d+="");var E=0,b=!1,W={next:function(){if(!b&&E<d.length){var X=E++;return{value:v(X,d[X]),done:!1}}return b=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}s("Array.prototype.values",function(d){return d||function(){return o(this,function(v,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(d){var v=typeof d;return v=v!="object"?v:d?Array.isArray(d)?"array":v:"null",v=="array"||v=="object"&&typeof d.length=="number"}function p(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function g(d,v,E){return d.call.apply(d.bind,arguments)}function y(d,v,E){if(!d)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,b),d.apply(v,W)}}return function(){return d.apply(v,arguments)}}function w(d,v,E){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:y,w.apply(null,arguments)}function T(d,v){var E=Array.prototype.slice.call(arguments,1);return function(){var b=E.slice();return b.push.apply(b,arguments),d.apply(this,b)}}function C(d,v){function E(){}E.prototype=v.prototype,d.aa=v.prototype,d.prototype=new E,d.prototype.constructor=d,d.Qb=function(b,W,X){for(var ue=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)ue[ot-2]=arguments[ot];return v.prototype[W].apply(b,ue)}}function R(d){const v=d.length;if(0<v){const E=Array(v);for(let b=0;b<v;b++)E[b]=d[b];return E}return[]}function A(d,v){for(let E=1;E<arguments.length;E++){const b=arguments[E];if(h(b)){const W=d.length||0,X=b.length||0;d.length=W+X;for(let ue=0;ue<X;ue++)d[W+ue]=b[ue]}else d.push(b)}}class O{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function B(d){return/^[\s\xa0]*$/.test(d)}function z(){var d=c.navigator;return d&&(d=d.userAgent)?d:""}function Q(d){return Q[" "](d),d}Q[" "]=function(){};var K=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function J(d,v,E){for(const b in d)v.call(E,d[b],b,d)}function D(d,v){for(const E in d)v.call(void 0,d[E],E,d)}function I(d){const v={};for(const E in d)v[E]=d[E];return v}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(d,v){let E,b;for(let W=1;W<arguments.length;W++){b=arguments[W];for(E in b)d[E]=b[E];for(let X=0;X<k.length;X++)E=k[X],Object.prototype.hasOwnProperty.call(b,E)&&(d[E]=b[E])}}function L(d){var v=1;d=d.split(":");const E=[];for(;0<v&&d.length;)E.push(d.shift()),v--;return d.length&&E.push(d.join(":")),E}function H(d){c.setTimeout(()=>{throw d},0)}function V(){var d=he;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class rt{constructor(){this.h=this.g=null}add(v,E){const b=st.get();b.set(v,E),this.h?this.h.next=b:this.g=b,this.h=b}}var st=new O(()=>new be,d=>d.reset());class be{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Ie,se=!1,he=new rt,ce=()=>{const d=c.Promise.resolve(void 0);Ie=()=>{d.then(F)}};var F=()=>{for(var d;d=V();){try{d.h.call(d.g)}catch(E){H(E)}var v=st;v.j(d),100>v.h&&(v.h++,d.next=v.g,v.g=d)}se=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var le=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};c.addEventListener("test",E,v),c.removeEventListener("test",E,v)}catch{}return d}();function we(d,v){if(Z.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var E=this.type=d.type,b=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget){if(K){e:{try{Q(v.nodeName);var W=!0;break e}catch{}W=!1}W||(v=null)}}else E=="mouseover"?v=d.fromElement:E=="mouseout"&&(v=d.toElement);this.relatedTarget=v,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:fe[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&we.aa.h.call(this)}}C(we,Z);var fe={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ae="closure_listenable_"+(1e6*Math.random()|0),ve=0;function Le(d,v,E,b,W){this.listener=d,this.proxy=null,this.src=v,this.type=E,this.capture=!!b,this.ha=W,this.key=++ve,this.da=this.fa=!1}function et(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Sn(d){this.src=d,this.g={},this.h=0}Sn.prototype.add=function(d,v,E,b,W){var X=d.toString();d=this.g[X],d||(d=this.g[X]=[],this.h++);var ue=Dn(d,v,b,W);return-1<ue?(v=d[ue],E||(v.fa=!1)):(v=new Le(v,this.src,X,!!b,W),v.fa=E,d.push(v)),v};function cr(d,v){var E=v.type;if(E in d.g){var b=d.g[E],W=Array.prototype.indexOf.call(b,v,void 0),X;(X=0<=W)&&Array.prototype.splice.call(b,W,1),X&&(et(v),d.g[E].length==0&&(delete d.g[E],d.h--))}}function Dn(d,v,E,b){for(var W=0;W<d.length;++W){var X=d[W];if(!X.da&&X.listener==v&&X.capture==!!E&&X.ha==b)return W}return-1}var xn="closure_lm_"+(1e6*Math.random()|0),kr={};function Dr(d,v,E,b,W){if(Array.isArray(v)){for(var X=0;X<v.length;X++)Dr(d,v[X],E,b,W);return null}return E=Rs(E),d&&d[Ae]?d.K(v,E,p(b)?!!b.capture:!1,W):Nn(d,v,E,!1,b,W)}function Nn(d,v,E,b,W,X){if(!v)throw Error("Invalid event type");var ue=p(W)?!!W.capture:!!W,ot=In(d);if(ot||(d[xn]=ot=new Sn(d)),E=ot.add(v,E,b,ue,X),E.proxy)return E;if(b=Nr(),E.proxy=b,b.src=d,b.listener=E,d.addEventListener)le||(W=ue),W===void 0&&(W=!1),d.addEventListener(v.toString(),b,W);else if(d.attachEvent)d.attachEvent(Vn(v.toString()),b);else if(d.addListener&&d.removeListener)d.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Nr(){function d(E){return v.call(d.src,d.listener,E)}const v=_t;return d}function Kt(d,v,E,b,W){if(Array.isArray(v))for(var X=0;X<v.length;X++)Kt(d,v[X],E,b,W);else b=p(b)?!!b.capture:!!b,E=Rs(E),d&&d[Ae]?(d=d.i,v=String(v).toString(),v in d.g&&(X=d.g[v],E=Dn(X,E,b,W),-1<E&&(et(X[E]),Array.prototype.splice.call(X,E,1),X.length==0&&(delete d.g[v],d.h--)))):d&&(d=In(d))&&(v=d.g[v.toString()],d=-1,v&&(d=Dn(v,E,b,W)),(E=-1<d?v[d]:null)&&On(E))}function On(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[Ae])cr(v.i,d);else{var E=d.type,b=d.proxy;v.removeEventListener?v.removeEventListener(E,b,d.capture):v.detachEvent?v.detachEvent(Vn(E),b):v.addListener&&v.removeListener&&v.removeListener(b),(E=In(v))?(cr(E,d),E.h==0&&(E.src=null,v[xn]=null)):et(d)}}}function Vn(d){return d in kr?kr[d]:kr[d]="on"+d}function _t(d,v){if(d.da)d=!0;else{v=new we(v,this);var E=d.listener,b=d.ha||d.src;d.fa&&On(d),d=E.call(b,v)}return d}function In(d){return d=d[xn],d instanceof Sn?d:null}var Or="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rs(d){return typeof d=="function"?d:(d[Or]||(d[Or]=function(v){return d.handleEvent(v)}),d[Or])}function at(){$.call(this),this.i=new Sn(this),this.M=this,this.F=null}C(at,$),at.prototype[Ae]=!0,at.prototype.removeEventListener=function(d,v,E,b){Kt(this,d,v,E,b)};function ut(d,v){var E,b=d.F;if(b)for(E=[];b;b=b.F)E.push(b);if(d=d.M,b=v.type||v,typeof v=="string")v=new Z(v,d);else if(v instanceof Z)v.target=v.target||d;else{var W=v;v=new Z(b,d),M(v,W)}if(W=!0,E)for(var X=E.length-1;0<=X;X--){var ue=v.g=E[X];W=Qt(ue,b,!0,v)&&W}if(ue=v.g=d,W=Qt(ue,b,!0,v)&&W,W=Qt(ue,b,!1,v)&&W,E)for(X=0;X<E.length;X++)ue=v.g=E[X],W=Qt(ue,b,!1,v)&&W}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var d=this.i,v;for(v in d.g){for(var E=d.g[v],b=0;b<E.length;b++)et(E[b]);delete d.g[v],d.h--}}this.F=null},at.prototype.K=function(d,v,E,b){return this.i.add(String(d),v,!1,E,b)},at.prototype.L=function(d,v,E,b){return this.i.add(String(d),v,!0,E,b)};function Qt(d,v,E,b){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();for(var W=!0,X=0;X<v.length;++X){var ue=v[X];if(ue&&!ue.da&&ue.capture==E){var ot=ue.listener,zt=ue.ha||ue.src;ue.fa&&cr(d.i,ue),W=ot.call(zt,b)!==!1&&W}}return W&&!b.defaultPrevented}function Yt(d,v,E){if(typeof d=="function")E&&(d=w(d,E));else if(d&&typeof d.handleEvent=="function")d=w(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:c.setTimeout(d,v||0)}function Ut(d){d.g=Yt(()=>{d.g=null,d.i&&(d.i=!1,Ut(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class Mn extends ${constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Ut(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ln(d){$.call(this),this.h=d,this.g={}}C(Ln,$);var oo=[];function ao(d){J(d.g,function(v,E){this.g.hasOwnProperty(E)&&On(v)},d),d.g={}}Ln.prototype.N=function(){Ln.aa.N.call(this),ao(this)},Ln.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ai=c.JSON.stringify,li=c.JSON.parse,lo=class{stringify(d){return c.JSON.stringify(d,void 0)}parse(d){return c.JSON.parse(d,void 0)}};function Vr(){}Vr.prototype.h=null;function Cn(d){return d.h||(d.h=d.i())}function ui(){}var jn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Jn(){Z.call(this,"d")}C(Jn,Z);function Ps(){Z.call(this,"c")}C(Ps,Z);var De={},mt=null;function gt(){return mt=mt||new at}De.La="serverreachability";function Bt(d){Z.call(this,De.La,d)}C(Bt,Z);function Fn(d){const v=gt();ut(v,new Bt(v))}De.STAT_EVENT="statevent";function wt(d,v){Z.call(this,De.STAT_EVENT,d),this.stat=v}C(wt,Z);function Qe(d){const v=gt();ut(v,new wt(v,d))}De.Ma="timingevent";function Mr(d,v){Z.call(this,De.Ma,d),this.size=v}C(Mr,Z);function Et(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){d()},v)}function $t(){this.g=!0}$t.prototype.xa=function(){this.g=!1};function ns(d,v,E,b,W,X){d.info(function(){if(d.g)if(X)for(var ue="",ot=X.split("&"),zt=0;zt<ot.length;zt++){var Ye=ot[zt].split("=");if(1<Ye.length){var Xt=Ye[0];Ye=Ye[1];var Ot=Xt.split("_");ue=2<=Ot.length&&Ot[1]=="type"?ue+(Xt+"="+Ye+"&"):ue+(Xt+"=redacted&")}}else ue=null;else ue=X;return"XMLHTTP REQ ("+b+") [attempt "+W+"]: "+v+`
`+E+`
`+ue})}function Un(d,v,E,b,W,X,ue){d.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+W+"]: "+v+`
`+E+`
`+X+" "+ue})}function dr(d,v,E,b){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+Sf(d,E)+(b?" "+b:"")})}function Cl(d,v){d.info(function(){return"TIMEOUT: "+v})}$t.prototype.info=function(){};function Sf(d,v){if(!d.g)return v;if(!v)return null;try{var E=JSON.parse(v);if(E){for(d=0;d<E.length;d++)if(Array.isArray(E[d])){var b=E[d];if(!(2>b.length)){var W=b[1];if(Array.isArray(W)&&!(1>W.length)){var X=W[0];if(X!="noop"&&X!="stop"&&X!="close")for(var ue=1;ue<W.length;ue++)W[ue]=""}}}}return ai(E)}catch{return v}}var ra={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ec={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Lr;function uo(){}C(uo,Vr),uo.prototype.g=function(){return new XMLHttpRequest},uo.prototype.i=function(){return{}},Lr=new uo;function jr(d,v,E,b){this.j=d,this.i=v,this.l=E,this.R=b||1,this.U=new Ln(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tc}function Tc(){this.i=null,this.g="",this.h=!1}var bl={},sa={};function ia(d,v,E){d.L=1,d.v=pi(tr(v)),d.m=E,d.P=!0,Al(d,null)}function Al(d,v){d.F=Date.now(),ct(d),d.A=tr(d.v);var E=d.A,b=d.R;Array.isArray(b)||(b=[String(b)]),gi(E.i,"t",b),d.C=0,E=d.j.J,d.h=new Tc,d.g=Uc(d.j,E?v:null,!d.m),0<d.O&&(d.M=new Mn(w(d.Y,d,d.g),d.O)),v=d.U,E=d.g,b=d.ca;var W="readystatechange";Array.isArray(W)||(W&&(oo[0]=W.toString()),W=oo);for(var X=0;X<W.length;X++){var ue=Dr(E,W[X],b||v.handleEvent,!1,v.h||v);if(!ue)break;v.g[ue.key]=ue}v=d.H?I(d.H):{},d.m?(d.u||(d.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,v)):(d.u="GET",d.g.ea(d.A,d.u,null,v)),Fn(),ns(d.i,d.u,d.A,d.l,d.R,d.m)}jr.prototype.ca=function(d){d=d.target;const v=this.M;v&&$n(d)==3?v.j():this.Y(d)},jr.prototype.Y=function(d){try{if(d==this.g)e:{const Ot=$n(this.g);var v=this.g.Ba();const pr=this.g.Z();if(!(3>Ot)&&(Ot!=3||this.g&&(this.h.h||this.g.oa()||Ol(this.g)))){this.J||Ot!=4||v==7||(v==8||0>=pr?Fn(3):Fn(2)),co(this);var E=this.g.Z();this.X=E;t:if(Sc(this)){var b=Ol(this.g);d="";var W=b.length,X=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hr(this),ci(this);var ue="";break t}this.h.i=new c.TextDecoder}for(v=0;v<W;v++)this.h.h=!0,d+=this.h.i.decode(b[v],{stream:!(X&&v==W-1)});b.length=0,this.h.g+=d,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=E==200,Un(this.i,this.u,this.A,this.l,this.R,Ot,E),this.o){if(this.T&&!this.K){t:{if(this.g){var ot,zt=this.g;if((ot=zt.g?zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(ot)){var Ye=ot;break t}}Ye=null}if(E=Ye)dr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rl(this,E);else{this.o=!1,this.s=3,Qe(12),hr(this),ci(this);break e}}if(this.P){E=!0;let rr;for(;!this.J&&this.C<ue.length;)if(rr=xf(this,ue),rr==sa){Ot==4&&(this.s=4,Qe(14),E=!1),dr(this.i,this.l,null,"[Incomplete Response]");break}else if(rr==bl){this.s=4,Qe(15),dr(this.i,this.l,ue,"[Invalid Chunk]"),E=!1;break}else dr(this.i,this.l,rr,null),Rl(this,rr);if(Sc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||ue.length!=0||this.h.h||(this.s=1,Qe(16),E=!1),this.o=this.o&&E,!E)dr(this.i,this.l,ue,"[Invalid Chunked Response]"),hr(this),ci(this);else if(0<ue.length&&!this.W){this.W=!0;var Xt=this.j;Xt.g==this&&Xt.ba&&!Xt.M&&(Xt.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),Ml(Xt),Xt.M=!0,Qe(11))}}else dr(this.i,this.l,ue,null),Rl(this,ue);Ot==4&&hr(this),this.o&&!this.J&&(Ot==4?ga(this.j,this):(this.o=!1,ct(this)))}else da(this.g),E==400&&0<ue.indexOf("Unknown SID")?(this.s=3,Qe(12)):(this.s=0,Qe(13)),hr(this),ci(this)}}}catch{}finally{}};function Sc(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function xf(d,v){var E=d.C,b=v.indexOf(`
`,E);return b==-1?sa:(E=Number(v.substring(E,b)),isNaN(E)?bl:(b+=1,b+E>v.length?sa:(v=v.slice(b,b+E),d.C=b+E,v)))}jr.prototype.cancel=function(){this.J=!0,hr(this)};function ct(d){d.S=Date.now()+d.I,xc(d,d.I)}function xc(d,v){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Et(w(d.ba,d),v)}function co(d){d.B&&(c.clearTimeout(d.B),d.B=null)}jr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Cl(this.i,this.A),this.L!=2&&(Fn(),Qe(17)),hr(this),this.s=2,ci(this)):xc(this,this.S-d)};function ci(d){d.j.G==0||d.J||ga(d.j,d)}function hr(d){co(d);var v=d.M;v&&typeof v.ma=="function"&&v.ma(),d.M=null,ao(d.U),d.g&&(v=d.g,d.g=null,v.abort(),v.ma())}function Rl(d,v){try{var E=d.j;if(E.G!=0&&(E.g==d||bn(E.h,d))){if(!d.K&&bn(E.h,d)&&E.G==3){try{var b=E.Da.g.parse(v)}catch{b=null}if(Array.isArray(b)&&b.length==3){var W=b;if(W[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<d.F)ma(E),zr(E);else break e;pa(E),Qe(18)}}else E.za=W[1],0<E.za-E.T&&37500>W[2]&&E.F&&E.v==0&&!E.C&&(E.C=Et(w(E.Za,E),6e3));if(1>=Cc(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Vs(E,11)}else if((d.K||E.g==d)&&ma(E),!B(v))for(W=E.Da.g.parse(v),v=0;v<W.length;v++){let Ye=W[v];if(E.T=Ye[0],Ye=Ye[1],E.G==2)if(Ye[0]=="c"){E.K=Ye[1],E.ia=Ye[2];const Xt=Ye[3];Xt!=null&&(E.la=Xt,E.j.info("VER="+E.la));const Ot=Ye[4];Ot!=null&&(E.Aa=Ot,E.j.info("SVER="+E.Aa));const pr=Ye[5];pr!=null&&typeof pr=="number"&&0<pr&&(b=1.5*pr,E.L=b,E.j.info("backChannelRequestTimeoutMs_="+b)),b=E;const rr=d.g;if(rr){const vo=rr.g?rr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vo){var X=b.h;X.g||vo.indexOf("spdy")==-1&&vo.indexOf("quic")==-1&&vo.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Pl(X,X.h),X.h=null))}if(b.D){const va=rr.g?rr.g.getResponseHeader("X-HTTP-Session-Id"):null;va&&(b.ya=va,lt(b.I,b.D,va))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-d.F,E.j.info("Handshake RTT: "+E.R+"ms")),b=E;var ue=d;if(b.qa=Fc(b,b.J?b.ia:null,b.W),ue.K){bc(b.h,ue);var ot=ue,zt=b.L;zt&&(ot.I=zt),ot.B&&(co(ot),ct(ot)),b.g=ue}else yo(b);0<E.i.length&&os(E)}else Ye[0]!="stop"&&Ye[0]!="close"||Vs(E,7);else E.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?Vs(E,7):sn(E):Ye[0]!="noop"&&E.l&&E.l.ta(Ye),E.v=0)}}Fn(4)}catch{}}var Ic=class{constructor(d,v){this.g=d,this.map=v}};function ho(d){this.l=d||10,c.PerformanceNavigationTiming?(d=c.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function er(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Cc(d){return d.h?1:d.g?d.g.size:0}function bn(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function Pl(d,v){d.g?d.g.add(v):d.h=v}function bc(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}ho.prototype.cancel=function(){if(this.i=Ac(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Ac(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const E of d.g.values())v=v.concat(E.D);return v}return R(d.i)}function oa(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(h(d)){for(var v=[],E=d.length,b=0;b<E;b++)v.push(d[b]);return v}v=[],E=0;for(b in d)v[E++]=d[b];return v}function aa(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(h(d)||typeof d=="string"){var v=[];d=d.length;for(var E=0;E<d;E++)v.push(E);return v}v=[],E=0;for(const b in d)v[E++]=b;return v}}}function di(d,v){if(d.forEach&&typeof d.forEach=="function")d.forEach(v,void 0);else if(h(d)||typeof d=="string")Array.prototype.forEach.call(d,v,void 0);else for(var E=aa(d),b=oa(d),W=b.length,X=0;X<W;X++)v.call(void 0,b[X],E&&E[X],d)}var fo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function If(d,v){if(d){d=d.split("&");for(var E=0;E<d.length;E++){var b=d[E].indexOf("="),W=null;if(0<=b){var X=d[E].substring(0,b);W=d[E].substring(b+1)}else X=d[E];v(X,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function ks(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof ks){this.h=d.h,po(this,d.j),this.o=d.o,this.g=d.g,hi(this,d.s),this.l=d.l;var v=d.i,E=new rs;E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),fi(this,E),this.m=d.m}else d&&(v=String(d).match(fo))?(this.h=!1,po(this,v[1]||"",!0),this.o=Ke(v[2]||""),this.g=Ke(v[3]||"",!0),hi(this,v[4]),this.l=Ke(v[5]||"",!0),fi(this,v[6]||"",!0),this.m=Ke(v[7]||"")):(this.h=!1,this.i=new rs(null,this.h))}ks.prototype.toString=function(){var d=[],v=this.j;v&&d.push(mi(v,la,!0),":");var E=this.g;return(E||v=="file")&&(d.push("//"),(v=this.o)&&d.push(mi(v,la,!0),"@"),d.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&d.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(mi(E,E.charAt(0)=="/"?kc:Pc,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",mi(E,kl)),d.join("")};function tr(d){return new ks(d)}function po(d,v,E){d.j=E?Ke(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function hi(d,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);d.s=v}else d.s=null}function fi(d,v,E){v instanceof rs?(d.i=v,ss(d.i,d.h)):(E||(v=mi(v,Dc)),d.i=new rs(v,d.h))}function lt(d,v,E){d.i.set(v,E)}function pi(d){return lt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Ke(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function mi(d,v,E){return typeof d=="string"?(d=encodeURI(d).replace(v,Rc),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Rc(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var la=/[#\/\?@]/g,Pc=/[#\?:]/g,kc=/[#\?]/g,Dc=/[#\?@]/g,kl=/#/g;function rs(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function rn(d){d.g||(d.g=new Map,d.h=0,d.i&&If(d.i,function(v,E){d.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}n=rs.prototype,n.add=function(d,v){rn(this),this.i=null,d=fr(this,d);var E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(v),this.h+=1,this};function Fr(d,v){rn(d),v=fr(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function Ur(d,v){return rn(d),v=fr(d,v),d.g.has(v)}n.forEach=function(d,v){rn(this),this.g.forEach(function(E,b){E.forEach(function(W){d.call(v,W,b,this)},this)},this)},n.na=function(){rn(this);const d=Array.from(this.g.values()),v=Array.from(this.g.keys()),E=[];for(let b=0;b<v.length;b++){const W=d[b];for(let X=0;X<W.length;X++)E.push(v[b])}return E},n.V=function(d){rn(this);let v=[];if(typeof d=="string")Ur(this,d)&&(v=v.concat(this.g.get(fr(this,d))));else{d=Array.from(this.g.values());for(let E=0;E<d.length;E++)v=v.concat(d[E])}return v},n.set=function(d,v){return rn(this),this.i=null,d=fr(this,d),Ur(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},n.get=function(d,v){return d?(d=this.V(d),0<d.length?String(d[0]):v):v};function gi(d,v,E){Fr(d,v),0<E.length&&(d.i=null,d.g.set(fr(d,v),R(E)),d.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(var E=0;E<v.length;E++){var b=v[E];const X=encodeURIComponent(String(b)),ue=this.V(b);for(b=0;b<ue.length;b++){var W=X;ue[b]!==""&&(W+="="+encodeURIComponent(String(ue[b]))),d.push(W)}}return this.i=d.join("&")};function fr(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function ss(d,v){v&&!d.j&&(rn(d),d.i=null,d.g.forEach(function(E,b){var W=b.toLowerCase();b!=W&&(Fr(this,b),gi(this,W,E))},d)),d.j=v}function Cf(d,v){const E=new $t;if(c.Image){const b=new Image;b.onload=T(Bn,E,"TestLoadImage: loaded",!0,v,b),b.onerror=T(Bn,E,"TestLoadImage: error",!1,v,b),b.onabort=T(Bn,E,"TestLoadImage: abort",!1,v,b),b.ontimeout=T(Bn,E,"TestLoadImage: timeout",!1,v,b),c.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=d}else v(!1)}function Nc(d,v){const E=new $t,b=new AbortController,W=setTimeout(()=>{b.abort(),Bn(E,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:b.signal}).then(X=>{clearTimeout(W),X.ok?Bn(E,"TestPingServer: ok",!0,v):Bn(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(W),Bn(E,"TestPingServer: error",!1,v)})}function Bn(d,v,E,b,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),b(E)}catch{}}function bf(){this.g=new lo}function Oc(d,v,E){const b=E||"";try{di(d,function(W,X){let ue=W;p(W)&&(ue=ai(W)),v.push(b+X+"="+encodeURIComponent(ue))})}catch(W){throw v.push(b+"type="+encodeURIComponent("_badmap")),W}}function Ds(d){this.l=d.Ub||null,this.j=d.eb||!1}C(Ds,Vr),Ds.prototype.g=function(){return new mo(this.l,this.j)},Ds.prototype.i=function(d){return function(){return d}}({});function mo(d,v){at.call(this),this.D=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(mo,at),n=mo.prototype,n.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=v,this.readyState=1,$r(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(v.body=d),(this.D||c).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Br(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,$r(this)),this.g&&(this.readyState=3,$r(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vc(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vc(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?Br(this):$r(this),this.readyState==3&&Vc(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Br(this))},n.Qa=function(d){this.g&&(this.response=d,Br(this))},n.ga=function(){this.g&&Br(this)};function Br(d){d.readyState=4,d.l=null,d.j=null,d.v=null,$r(d)}n.setRequestHeader=function(d,v){this.u.append(d,v)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=v.next();return d.join(`\r
`)};function $r(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(mo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Ns(d){let v="";return J(d,function(E,b){v+=b,v+=":",v+=E,v+=`\r
`}),v}function yi(d,v,E){e:{for(b in E){var b=!1;break e}b=!0}b||(E=Ns(E),typeof d=="string"?E!=null&&encodeURIComponent(String(E)):lt(d,v,E))}function yt(d){at.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(yt,at);var Af=/^https?$/i,Dl=["POST","PUT"];n=yt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,v,E,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Lr.g(),this.v=this.o?Cn(this.o):Cn(Lr),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(X){go(this,X);return}if(d=E||"",E=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var W in b)E.set(W,b[W]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const X of b.keys())E.set(X,b.get(X));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(E.keys()).find(X=>X.toLowerCase()=="content-type"),W=c.FormData&&d instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Dl,v,void 0))||b||W||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ue]of E)this.g.setRequestHeader(X,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ca(this),this.u=!0,this.g.send(d),this.u=!1}catch(X){go(this,X)}};function go(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.m=5,ua(d),nr(d)}function ua(d){d.A||(d.A=!0,ut(d,"complete"),ut(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,ut(this,"complete"),ut(this,"abort"),nr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nr(this,!0)),yt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Nl(this):this.bb())},n.bb=function(){Nl(this)};function Nl(d){if(d.h&&typeof l<"u"&&(!d.v[1]||$n(d)!=4||d.Z()!=2)){if(d.u&&$n(d)==4)Yt(d.Ea,0,d);else if(ut(d,"readystatechange"),$n(d)==4){d.h=!1;try{const ue=d.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var b;if(b=ue===0){var W=String(d.D).match(fo)[1]||null;!W&&c.self&&c.self.location&&(W=c.self.location.protocol.slice(0,-1)),b=!Af.test(W?W.toLowerCase():"")}E=b}if(E)ut(d,"complete"),ut(d,"success");else{d.m=6;try{var X=2<$n(d)?d.g.statusText:""}catch{X=""}d.l=X+" ["+d.Z()+"]",ua(d)}}finally{nr(d)}}}}function nr(d,v){if(d.g){ca(d);const E=d.g,b=d.v[0]?()=>{}:null;d.g=null,d.v=null,v||ut(d,"ready");try{E.onreadystatechange=b}catch{}}}function ca(d){d.I&&(c.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function $n(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),li(v)}};function Ol(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function da(d){const v={};d=(d.g&&2<=$n(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<d.length;b++){if(B(d[b]))continue;var E=L(d[b]);const W=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const X=v[W]||[];v[W]=X,X.push(E)}D(v,function(b){return b.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function is(d,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||v}function Vl(d){this.Aa=0,this.i=[],this.j=new $t,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=is("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=is("baseRetryDelayMs",5e3,d),this.cb=is("retryDelaySeedMs",1e4,d),this.Wa=is("forwardChannelMaxRetries",2,d),this.wa=is("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new ho(d&&d.concurrentRequestLimit),this.Da=new bf,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Vl.prototype,n.la=8,n.G=1,n.connect=function(d,v,E,b){Qe(0),this.W=d,this.H=v||{},E&&b!==void 0&&(this.H.OSID=E,this.H.OAID=b),this.F=this.X,this.I=Fc(this,null,this.W),os(this)};function sn(d){if(ha(d),d.G==3){var v=d.U++,E=tr(d.I);if(lt(E,"SID",d.K),lt(E,"RID",v),lt(E,"TYPE","terminate"),Os(d,E),v=new jr(d,d.j,v),v.L=2,v.v=pi(tr(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(v.v.toString(),"")}catch{}!E&&c.Image&&(new Image().src=v.v,E=!0),E||(v.g=Uc(v.j,null),v.g.ea(v.v)),v.F=Date.now(),ct(v)}jc(d)}function zr(d){d.g&&(Ml(d),d.g.cancel(),d.g=null)}function ha(d){zr(d),d.u&&(c.clearTimeout(d.u),d.u=null),ma(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&c.clearTimeout(d.s),d.s=null)}function os(d){if(!er(d.h)&&!d.s){d.s=!0;var v=d.Ga;Ie||ce(),se||(Ie(),se=!0),he.add(v,d),d.B=0}}function Rf(d,v){return Cc(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=v.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Et(w(d.Ga,d,v),Lc(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const W=new jr(this,this.j,d);let X=this.o;if(this.S&&(X?(X=I(X),M(X,this.S)):X=this.S),this.m!==null||this.O||(W.H=X,X=null),this.P)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var b=this.i[E];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(v+=b,4096<v){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=vi(this,W,v),E=tr(this.I),lt(E,"RID",d),lt(E,"CVER",22),this.D&&lt(E,"X-HTTP-Session-Id",this.D),Os(this,E),X&&(this.O?v="headers="+encodeURIComponent(String(Ns(X)))+"&"+v:this.m&&yi(E,this.m,X)),Pl(this.h,W),this.Ua&&lt(E,"TYPE","init"),this.P?(lt(E,"$req",v),lt(E,"SID","null"),W.T=!0,ia(W,E,null)):ia(W,E,v),this.G=2}}else this.G==3&&(d?fa(this,d):this.i.length==0||er(this.h)||fa(this))};function fa(d,v){var E;v?E=v.l:E=d.U++;const b=tr(d.I);lt(b,"SID",d.K),lt(b,"RID",E),lt(b,"AID",d.T),Os(d,b),d.m&&d.o&&yi(b,d.m,d.o),E=new jr(d,d.j,E,d.B+1),d.m===null&&(E.H=d.o),v&&(d.i=v.D.concat(d.i)),v=vi(d,E,1e3),E.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Pl(d.h,E),ia(E,b,v)}function Os(d,v){d.H&&J(d.H,function(E,b){lt(v,b,E)}),d.l&&di({},function(E,b){lt(v,b,E)})}function vi(d,v,E){E=Math.min(d.i.length,E);var b=d.l?w(d.l.Na,d.l,d):null;e:{var W=d.i;let X=-1;for(;;){const ue=["count="+E];X==-1?0<E?(X=W[0].g,ue.push("ofs="+X)):X=0:ue.push("ofs="+X);let ot=!0;for(let zt=0;zt<E;zt++){let Ye=W[zt].g;const Xt=W[zt].map;if(Ye-=X,0>Ye)X=Math.max(0,W[zt].g-100),ot=!1;else try{Oc(Xt,ue,"req"+Ye+"_")}catch{b&&b(Xt)}}if(ot){b=ue.join("&");break e}}}return d=d.i.splice(0,E),v.D=d,b}function yo(d){if(!d.g&&!d.u){d.Y=1;var v=d.Fa;Ie||ce(),se||(Ie(),se=!0),he.add(v,d),d.v=0}}function pa(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Et(w(d.Fa,d),Lc(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,Mc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Et(w(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qe(10),zr(this),Mc(this))};function Ml(d){d.A!=null&&(c.clearTimeout(d.A),d.A=null)}function Mc(d){d.g=new jr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var v=tr(d.qa);lt(v,"RID","rpc"),lt(v,"SID",d.K),lt(v,"AID",d.T),lt(v,"CI",d.F?"0":"1"),!d.F&&d.ja&&lt(v,"TO",d.ja),lt(v,"TYPE","xmlhttp"),Os(d,v),d.m&&d.o&&yi(v,d.m,d.o),d.L&&(d.g.I=d.L);var E=d.g;d=d.ia,E.L=1,E.v=pi(tr(v)),E.m=null,E.P=!0,Al(E,d)}n.Za=function(){this.C!=null&&(this.C=null,zr(this),pa(this),Qe(19))};function ma(d){d.C!=null&&(c.clearTimeout(d.C),d.C=null)}function ga(d,v){var E=null;if(d.g==v){ma(d),Ml(d),d.g=null;var b=2}else if(bn(d.h,v))E=v.D,bc(d.h,v),b=1;else return;if(d.G!=0){if(v.o)if(b==1){E=v.m?v.m.length:0,v=Date.now()-v.F;var W=d.B;b=gt(),ut(b,new Mr(b,E)),os(d)}else yo(d);else if(W=v.s,W==3||W==0&&0<v.X||!(b==1&&Rf(d,v)||b==2&&pa(d)))switch(E&&0<E.length&&(v=d.h,v.i=v.i.concat(E)),W){case 1:Vs(d,5);break;case 4:Vs(d,10);break;case 3:Vs(d,6);break;default:Vs(d,2)}}}function Lc(d,v){let E=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(E*=2),E*v}function Vs(d,v){if(d.j.info("Error code "+v),v==2){var E=w(d.fb,d),b=d.Xa;const W=!b;b=new ks(b||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||po(b,"https"),pi(b),W?Cf(b.toString(),E):Nc(b.toString(),E)}else Qe(2);d.G=0,d.l&&d.l.sa(v),jc(d),ha(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Qe(2)):(this.j.info("Failed to ping google.com"),Qe(1))};function jc(d){if(d.G=0,d.ka=[],d.l){const v=Ac(d.h);(v.length!=0||d.i.length!=0)&&(A(d.ka,v),A(d.ka,d.i),d.h.i.length=0,R(d.i),d.i.length=0),d.l.ra()}}function Fc(d,v,E){var b=E instanceof ks?tr(E):new ks(E);if(b.g!="")v&&(b.g=v+"."+b.g),hi(b,b.s);else{var W=c.location;b=W.protocol,v=v?v+"."+W.hostname:W.hostname,W=+W.port;var X=new ks(null);b&&po(X,b),v&&(X.g=v),W&&hi(X,W),E&&(X.l=E),b=X}return E=d.D,v=d.ya,E&&v&&lt(b,E,v),lt(b,"VER",d.la),Os(d,b),b}function Uc(d,v,E){if(v&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Ca&&!d.pa?new yt(new Ds({eb:E})):new yt(d.pa),v.Ha(d.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ll(){}n=Ll.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ya(){}ya.prototype.g=function(d,v){return new An(d,v)};function An(d,v){at.call(this),this.g=new Vl(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(d?d["X-WebChannel-Client-Profile"]=v.va:d={"X-WebChannel-Client-Profile":v.va}),this.g.S=d,(d=v&&v.Sb)&&!B(d)&&(this.g.m=d),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!B(v)&&(this.g.D=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new as(this)}C(An,at),An.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){sn(this.g)},An.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.u&&(E={},E.__data__=ai(d),d=E);v.i.push(new Ic(v.Ya++,d)),v.G==3&&os(v)},An.prototype.N=function(){this.g.l=null,delete this.j,sn(this.g),delete this.g,An.aa.N.call(this)};function Bc(d){Jn.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const E in v){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}C(Bc,Jn);function $c(){Ps.call(this),this.status=1}C($c,Ps);function as(d){this.g=d}C(as,Ll),as.prototype.ua=function(){ut(this.g,"a")},as.prototype.ta=function(d){ut(this.g,new Bc(d))},as.prototype.sa=function(d){ut(this.g,new $c)},as.prototype.ra=function(){ut(this.g,"b")},ya.prototype.createWebChannel=ya.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,Y1=function(){return new ya},Q1=function(){return gt()},K1=De,Ig={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ra.NO_ERROR=0,ra.TIMEOUT=8,ra.HTTP_ERROR=6,ah=ra,Ec.COMPLETE="complete",G1=Ec,ui.EventType=jn,jn.OPEN="a",jn.CLOSE="b",jn.ERROR="c",jn.MESSAGE="d",at.prototype.listen=at.prototype.K,gu=ui,yt.prototype.listenOnce=yt.prototype.L,yt.prototype.getLastError=yt.prototype.Ka,yt.prototype.getLastErrorCode=yt.prototype.Ba,yt.prototype.getStatus=yt.prototype.Z,yt.prototype.getResponseJson=yt.prototype.Oa,yt.prototype.getResponseText=yt.prototype.oa,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Ha,q1=yt}).apply(typeof Hd<"u"?Hd:typeof self<"u"?self:typeof window<"u"?window:{});const AT="@firebase/firestore",RT="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wl="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=new sf("@firebase/firestore");function Ba(){return qo.logLevel}function ge(n,...e){if(qo.logLevel<=qe.DEBUG){const t=e.map(Zy);qo.debug(`Firestore (${wl}): ${n}`,...t)}}function ni(n,...e){if(qo.logLevel<=qe.ERROR){const t=e.map(Zy);qo.error(`Firestore (${wl}): ${n}`,...t)}}function Xi(n,...e){if(qo.logLevel<=qe.WARN){const t=e.map(Zy);qo.warn(`Firestore (${wl}): ${n}`,...t)}}function Zy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,X1(n,r,t)}function X1(n,e,t){let r=`FIRESTORE (${wl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ni(r),new Error(r)}function it(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||X1(e,s,r)}function Be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends ts{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class x5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yn.UNAUTHENTICATED))}shutdown(){}}class I5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class C5{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){it(this.o===void 0,42304);let r=this.i;const s=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let o=new Wi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Wi,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await s(this.currentUser)})},c=h=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Wi)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(it(typeof r.accessToken=="string",31837,{l:r}),new Z1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new yn(e)}}class b5{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class A5{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new b5(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class PT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class R5{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ar(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){it(this.o===void 0,3512);const r=o=>{o.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,ge("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new PT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(it(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new PT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P5(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=P5(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function ze(n,e){return n<e?-1:n>e?1:0}function Cg(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return ze(r,s);{const o=J1(),l=k5(o.encode(kT(n,t)),o.encode(kT(e,t)));return l!==0?l:ze(r,s)}}t+=r>65535?2:1}return ze(n.length,e.length)}function kT(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function k5(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ze(n[t],e[t]);return ze(n.length,e.length)}function ol(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="__name__";class fs{constructor(e,t,r){t===void 0?t=0:t>e.length&&Oe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Oe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return fs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fs?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=fs.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return ze(e.length,t.length)}static compareSegments(e,t){const r=fs.isNumericId(e),s=fs.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?fs.extractNumericId(e).compare(fs.extractNumericId(t)):Cg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hi.fromString(e.substring(4,e.length-2))}}class xt extends fs{construct(e,t,r){return new xt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ce(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new xt(t)}static emptyPath(){return new xt([])}}const D5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends fs{construct(e,t,r){return new cn(e,t,r)}static isValidIdentifier(e){return D5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===DT}static keyField(){return new cn([DT])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new Ce(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Ce(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Ce(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(r+=c,s++):(o(),s++)}if(o(),l)throw new Ce(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cn(t)}static emptyPath(){return new cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.path=e}static fromPath(e){return new ke(xt.fromString(e))}static fromName(e){return new ke(xt.fromString(e).popFirst(5))}static empty(){return new ke(xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return xt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new xt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N5(n,e,t){if(!t)throw new Ce(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function O5(n,e,t,r){if(e===!0&&r===!0)throw new Ce(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function NT(n){if(!ke.isDocumentKey(n))throw new Ce(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function eC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ev(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Oe(12329,{type:typeof n})}function Ku(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ce(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ev(n);throw new Ce(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(n,e){const t={typeString:n};return e&&(t.value=e),t}function gc(n,e){if(!eC(n))throw new Ce(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(s&&typeof l!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new Ce(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT=-62135596800,VT=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*VT);return new pt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ce(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ce(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<OT)throw new Ce(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/VT}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(gc(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-OT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:Ft("string",pt._jsonSchemaVersion),seconds:Ft("number"),nanoseconds:Ft("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{static fromTimestamp(e){return new je(e)}static min(){return new je(new pt(0,0))}static max(){return new je(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=-1;function V5(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=je.fromTimestamp(r===1e9?new pt(t+1,0):new pt(t,r));return new Zi(s,ke.empty(),e)}function M5(n){return new Zi(n.readTime,n.key,Qu)}class Zi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Zi(je.min(),ke.empty(),Qu)}static max(){return new Zi(je.max(),ke.empty(),Qu)}}function L5(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ke.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class F5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==j5)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.reject(t)}static resolve(e){return new ee((t,r)=>{t(e)})}static reject(e){return new ee((t,r)=>{r(e)})}static waitFor(e){return new ee((t,r)=>{let s=0,o=0,l=!1;e.forEach(c=>{++s,c.next(()=>{++o,l&&o===s&&t()},h=>r(h))}),l=!0,o===s&&t()})}static or(e){let t=ee.resolve(!1);for(const r of e)t=t.next(s=>s?ee.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,o)=>{r.push(t.call(this,s,o))}),this.waitFor(r)}static mapArray(e,t){return new ee((r,s)=>{const o=e.length,l=new Array(o);let c=0;for(let h=0;h<o;h++){const p=h;t(e[p]).next(g=>{l[p]=g,++c,c===o&&r(l)},g=>s(g))}})}static doWhile(e,t){return new ee((r,s)=>{const o=()=>{e()===!0?t().next(()=>{o()},s):r()};o()})}}function U5(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Tl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}uf.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv=-1;function cf(n){return n==null}function Dh(n){return n===0&&1/n==-1/0}function B5(n){return typeof n=="number"&&Number.isInteger(n)&&!Dh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="";function $5(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=MT(e)),e=z5(n.get(t),e);return MT(e)}function z5(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case tC:t+="";break;default:t+=o}}return t}function MT(n){return n+tC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Jo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function nC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,t){this.comparator=e,this.root=t||un.EMPTY}insert(e,t){return new At(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,un.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,un.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wd(this.root,e,this.comparator,!0)}}class Wd{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class un{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??un.RED,this.left=s??un.EMPTY,this.right=o??un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new un(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return un.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Oe(27949);return e+(this.isRed()?0:1)}}un.EMPTY=null,un.RED=!0,un.BLACK=!1;un.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe(57766)}get value(){throw Oe(16141)}get color(){throw Oe(16727)}get left(){throw Oe(29726)}get right(){throw Oe(36894)}copy(e,t,r,s,o){return this}insert(e,t,r){return new un(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jT(this.data.getIterator())}getIteratorFrom(e){return new jT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Gt(this.comparator);return t.data=e,t}}class jT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new Zr([])}unionWith(e){let t=new Gt(cn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Zr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ol(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new rC("Invalid base64 string: "+o):o}}(e);return new dn(t)}static fromUint8Array(e){const t=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new dn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const H5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ji(n){if(it(!!n,39018),typeof n=="string"){let e=0;const t=H5.exec(n);if(it(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Nt(n.seconds),nanos:Nt(n.nanos)}}function Nt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function eo(n){return typeof n=="string"?dn.fromBase64String(n):dn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="server_timestamp",iC="__type__",oC="__previous_value__",aC="__local_write_time__";function nv(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[iC])===null||t===void 0?void 0:t.stringValue)===sC}function df(n){const e=n.mapValue.fields[oC];return nv(e)?df(e):e}function Yu(n){const e=Ji(n.mapValue.fields[aC].timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e,t,r,s,o,l,c,h,p,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=p,this.isUsingEmulator=g}}const Nh="(default)";class Xu{constructor(e,t){this.projectId=e,this.database=t||Nh}static empty(){return new Xu("","")}get isDefaultDatabase(){return this.database===Nh}isEqual(e){return e instanceof Xu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="__type__",q5="__max__",qd={mapValue:{}},uC="__vector__",Oh="value";function to(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?nv(n)?4:K5(n)?9007199254740991:G5(n)?10:11:Oe(28295,{value:n})}function Is(n,e){if(n===e)return!0;const t=to(n);if(t!==to(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Yu(n).isEqual(Yu(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Ji(s.timestampValue),c=Ji(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return eo(s.bytesValue).isEqual(eo(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return Nt(s.geoPointValue.latitude)===Nt(o.geoPointValue.latitude)&&Nt(s.geoPointValue.longitude)===Nt(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Nt(s.integerValue)===Nt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=Nt(s.doubleValue),c=Nt(o.doubleValue);return l===c?Dh(l)===Dh(c):isNaN(l)&&isNaN(c)}return!1}(n,e);case 9:return ol(n.arrayValue.values||[],e.arrayValue.values||[],Is);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},c=o.mapValue.fields||{};if(LT(l)!==LT(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!Is(l[h],c[h])))return!1;return!0}(n,e);default:return Oe(52216,{left:n})}}function Zu(n,e){return(n.values||[]).find(t=>Is(t,e))!==void 0}function al(n,e){if(n===e)return 0;const t=to(n),r=to(e);if(t!==r)return ze(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return function(o,l){const c=Nt(o.integerValue||o.doubleValue),h=Nt(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return FT(n.timestampValue,e.timestampValue);case 4:return FT(Yu(n),Yu(e));case 5:return Cg(n.stringValue,e.stringValue);case 6:return function(o,l){const c=eo(o),h=eo(l);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const c=o.split("/"),h=l.split("/");for(let p=0;p<c.length&&p<h.length;p++){const g=ze(c[p],h[p]);if(g!==0)return g}return ze(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const c=ze(Nt(o.latitude),Nt(l.latitude));return c!==0?c:ze(Nt(o.longitude),Nt(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return UT(n.arrayValue,e.arrayValue);case 10:return function(o,l){var c,h,p,g;const y=o.fields||{},w=l.fields||{},T=(c=y[Oh])===null||c===void 0?void 0:c.arrayValue,C=(h=w[Oh])===null||h===void 0?void 0:h.arrayValue,R=ze(((p=T==null?void 0:T.values)===null||p===void 0?void 0:p.length)||0,((g=C==null?void 0:C.values)===null||g===void 0?void 0:g.length)||0);return R!==0?R:UT(T,C)}(n.mapValue,e.mapValue);case 11:return function(o,l){if(o===qd.mapValue&&l===qd.mapValue)return 0;if(o===qd.mapValue)return 1;if(l===qd.mapValue)return-1;const c=o.fields||{},h=Object.keys(c),p=l.fields||{},g=Object.keys(p);h.sort(),g.sort();for(let y=0;y<h.length&&y<g.length;++y){const w=Cg(h[y],g[y]);if(w!==0)return w;const T=al(c[h[y]],p[g[y]]);if(T!==0)return T}return ze(h.length,g.length)}(n.mapValue,e.mapValue);default:throw Oe(23264,{le:t})}}function FT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);const t=Ji(n),r=Ji(e),s=ze(t.seconds,r.seconds);return s!==0?s:ze(t.nanos,r.nanos)}function UT(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=al(t[s],r[s]);if(o)return o}return ze(t.length,r.length)}function ll(n){return bg(n)}function bg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ji(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return eo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ke.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=bg(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${bg(t.fields[l])}`;return s+"}"}(n.mapValue):Oe(61005,{value:n})}function lh(n){switch(to(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=df(n);return e?16+lh(e):16;case 5:return 2*n.stringValue.length;case 6:return eo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+lh(o),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return Jo(r.fields,(o,l)=>{s+=o.length+lh(l)}),s}(n.mapValue);default:throw Oe(13486,{value:n})}}function Ag(n){return!!n&&"integerValue"in n}function rv(n){return!!n&&"arrayValue"in n}function BT(n){return!!n&&"nullValue"in n}function $T(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function uh(n){return!!n&&"mapValue"in n}function G5(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[lC])===null||t===void 0?void 0:t.stringValue)===uC}function Au(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Jo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Au(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Au(n.arrayValue.values[t]);return e}return Object.assign({},n)}function K5(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===q5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.value=e}static empty(){return new Ir({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!uh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Au(t)}setAll(e){let t=cn.emptyPath(),r={},s=[];e.forEach((l,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,r,s),r={},s=[],t=c.popLast()}l?r[c.lastSegment()]=Au(l):s.push(c.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());uh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Is(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];uh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Jo(t,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new Ir(Au(this.value))}}function cC(n){const e=[];return Jo(n.fields,(t,r)=>{const s=new cn([t]);if(uh(r)){const o=cC(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new Zr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,t,r,s,o,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new vn(e,0,je.min(),je.min(),je.min(),Ir.empty(),0)}static newFoundDocument(e,t,r,s){return new vn(e,1,t,je.min(),r,s,0)}static newNoDocument(e,t){return new vn(e,2,t,je.min(),je.min(),Ir.empty(),0)}static newUnknownDocument(e,t){return new vn(e,3,t,je.min(),je.min(),Ir.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ir.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ir.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,t){this.position=e,this.inclusive=t}}function zT(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],l=n.position[s];if(o.field.isKeyField()?r=ke.comparator(ke.fromName(l.referenceValue),t.key):r=al(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function HT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Is(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,t="asc"){this.field=e,this.dir=t}}function Q5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{}class qt extends dC{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new X5(e,t,r):t==="array-contains"?new e3(e,r):t==="in"?new t3(e,r):t==="not-in"?new n3(e,r):t==="array-contains-any"?new r3(e,r):new qt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Z5(e,r):new J5(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(al(t,this.value)):t!==null&&to(this.value)===to(t)&&this.matchesComparison(al(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cs extends dC{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Cs(e,t)}matches(e){return hC(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function hC(n){return n.op==="and"}function fC(n){return Y5(n)&&hC(n)}function Y5(n){for(const e of n.filters)if(e instanceof Cs)return!1;return!0}function Rg(n){if(n instanceof qt)return n.field.canonicalString()+n.op.toString()+ll(n.value);if(fC(n))return n.filters.map(e=>Rg(e)).join(",");{const e=n.filters.map(t=>Rg(t)).join(",");return`${n.op}(${e})`}}function pC(n,e){return n instanceof qt?function(r,s){return s instanceof qt&&r.op===s.op&&r.field.isEqual(s.field)&&Is(r.value,s.value)}(n,e):n instanceof Cs?function(r,s){return s instanceof Cs&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,l,c)=>o&&pC(l,s.filters[c]),!0):!1}(n,e):void Oe(19439)}function mC(n){return n instanceof qt?function(t){return`${t.field.canonicalString()} ${t.op} ${ll(t.value)}`}(n):n instanceof Cs?function(t){return t.op.toString()+" {"+t.getFilters().map(mC).join(" ,")+"}"}(n):"Filter"}class X5 extends qt{constructor(e,t,r){super(e,t,r),this.key=ke.fromName(r.referenceValue)}matches(e){const t=ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class Z5 extends qt{constructor(e,t){super(e,"in",t),this.keys=gC("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class J5 extends qt{constructor(e,t){super(e,"not-in",t),this.keys=gC("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function gC(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ke.fromName(r.referenceValue))}class e3 extends qt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return rv(t)&&Zu(t.arrayValue,this.value)}}class t3 extends qt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Zu(this.value.arrayValue,t)}}class n3 extends qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Zu(this.value.arrayValue,t)}}class r3 extends qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!rv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Zu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e,t=null,r=[],s=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=c,this.Pe=null}}function WT(n,e=null,t=[],r=[],s=null,o=null,l=null){return new s3(n,e,t,r,s,o,l)}function sv(n){const e=Be(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Rg(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),cf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ll(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ll(r)).join(",")),e.Pe=t}return e.Pe}function iv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Q5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!pC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!HT(n.startAt,e.startAt)&&HT(n.endAt,e.endAt)}function Pg(n){return ke.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t=null,r=[],s=[],o=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=h,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function i3(n,e,t,r,s,o,l,c){return new hf(n,e,t,r,s,o,l,c)}function ov(n){return new hf(n)}function qT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function o3(n){return n.collectionGroup!==null}function Ru(n){const e=Be(n);if(e.Te===null){e.Te=[];const t=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Gt(cn.comparator);return l.filters.forEach(h=>{h.getFlattenedFilters().forEach(p=>{p.isInequality()&&(c=c.add(p.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Mh(o,r))}),t.has(cn.keyField().canonicalString())||e.Te.push(new Mh(cn.keyField(),r))}return e.Te}function _s(n){const e=Be(n);return e.Ie||(e.Ie=a3(e,Ru(n))),e.Ie}function a3(n,e){if(n.limitType==="F")return WT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Mh(s.field,o)});const t=n.endAt?new Vh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Vh(n.startAt.position,n.startAt.inclusive):null;return WT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function kg(n,e,t){return new hf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ff(n,e){return iv(_s(n),_s(e))&&n.limitType===e.limitType}function yC(n){return`${sv(_s(n))}|lt:${n.limitType}`}function $a(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>mC(s)).join(", ")}]`),cf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>ll(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>ll(s)).join(",")),`Target(${r})`}(_s(n))}; limitType=${n.limitType})`}function pf(n,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ke.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,s){for(const o of Ru(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(l,c,h){const p=zT(l,c,h);return l.inclusive?p<=0:p<0}(r.startAt,Ru(r),s)||r.endAt&&!function(l,c,h){const p=zT(l,c,h);return l.inclusive?p>=0:p>0}(r.endAt,Ru(r),s))}(n,e)}function l3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vC(n){return(e,t)=>{let r=!1;for(const s of Ru(n)){const o=u3(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function u3(n,e,t){const r=n.field.isKeyField()?ke.comparator(e.key,t.key):function(o,l,c){const h=l.data.field(o),p=c.data.field(o);return h!==null&&p!==null?al(h,p):Oe(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Oe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Jo(this.inner,(t,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return nC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3=new At(ke.comparator);function ri(){return c3}const _C=new At(ke.comparator);function yu(...n){let e=_C;for(const t of n)e=e.insert(t.key,t);return e}function wC(n){let e=_C;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Lo(){return Pu()}function EC(){return Pu()}function Pu(){return new ea(n=>n.toString(),(n,e)=>n.isEqual(e))}const d3=new At(ke.comparator),h3=new Gt(ke.comparator);function Ge(...n){let e=h3;for(const t of n)e=e.add(t);return e}const f3=new Gt(ze);function p3(){return f3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dh(e)?"-0":e}}function TC(n){return{integerValue:""+n}}function m3(n,e){return B5(e)?TC(e):av(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(){this._=void 0}}function g3(n,e,t){return n instanceof Ju?function(s,o){const l={fields:{[iC]:{stringValue:sC},[aC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&nv(o)&&(o=df(o)),o&&(l.fields[oC]=o),{mapValue:l}}(t,e):n instanceof ec?xC(n,e):n instanceof tc?IC(n,e):function(s,o){const l=SC(s,o),c=GT(l)+GT(s.Ee);return Ag(l)&&Ag(s.Ee)?TC(c):av(s.serializer,c)}(n,e)}function y3(n,e,t){return n instanceof ec?xC(n,e):n instanceof tc?IC(n,e):t}function SC(n,e){return n instanceof Lh?function(r){return Ag(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Ju extends mf{}class ec extends mf{constructor(e){super(),this.elements=e}}function xC(n,e){const t=CC(e);for(const r of n.elements)t.some(s=>Is(s,r))||t.push(r);return{arrayValue:{values:t}}}class tc extends mf{constructor(e){super(),this.elements=e}}function IC(n,e){let t=CC(e);for(const r of n.elements)t=t.filter(s=>!Is(s,r));return{arrayValue:{values:t}}}class Lh extends mf{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function GT(n){return Nt(n.integerValue||n.doubleValue)}function CC(n){return rv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(e,t){this.field=e,this.transform=t}}function _3(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof ec&&s instanceof ec||r instanceof tc&&s instanceof tc?ol(r.elements,s.elements,Is):r instanceof Lh&&s instanceof Lh?Is(r.Ee,s.Ee):r instanceof Ju&&s instanceof Ju}(n.transform,e.transform)}class w3{constructor(e,t){this.version=e,this.transformResults=t}}class Qs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qs}static exists(e){return new Qs(void 0,e)}static updateTime(e){return new Qs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ch(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class gf{}function bC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new RC(n.key,Qs.none()):new yc(n.key,n.data,Qs.none());{const t=n.data,r=Ir.empty();let s=new Gt(cn.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new ta(n.key,r,new Zr(s.toArray()),Qs.none())}}function E3(n,e,t){n instanceof yc?function(s,o,l){const c=s.value.clone(),h=QT(s.fieldTransforms,o,l.transformResults);c.setAll(h),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(n,e,t):n instanceof ta?function(s,o,l){if(!ch(s.precondition,o))return void o.convertToUnknownDocument(l.version);const c=QT(s.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(AC(s)),h.setAll(c),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,e,t):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function ku(n,e,t,r){return n instanceof yc?function(o,l,c,h){if(!ch(o.precondition,l))return c;const p=o.value.clone(),g=YT(o.fieldTransforms,h,l);return p.setAll(g),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof ta?function(o,l,c,h){if(!ch(o.precondition,l))return c;const p=YT(o.fieldTransforms,h,l),g=l.data;return g.setAll(AC(o)),g.setAll(p),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(n,e,t,r):function(o,l,c){return ch(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(n,e,t)}function T3(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=SC(r.transform,s||null);o!=null&&(t===null&&(t=Ir.empty()),t.set(r.field,o))}return t||null}function KT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ol(r,s,(o,l)=>_3(o,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class yc extends gf{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ta extends gf{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function AC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function QT(n,e,t){const r=new Map;it(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let s=0;s<t.length;s++){const o=n[s],l=o.transform,c=e.data.field(o.field);r.set(o.field,y3(l,c,t[s]))}return r}function YT(n,e,t){const r=new Map;for(const s of n){const o=s.transform,l=t.data.field(s.field);r.set(s.field,g3(o,l,e))}return r}class RC extends gf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class S3 extends gf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&E3(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ku(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ku(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=EC();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(s.key)?null:c;const h=bC(l,c);h!==null&&r.set(s.key,h),l.isValidDocument()||l.convertToNoDocument(je.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ge())}isEqual(e){return this.batchId===e.batchId&&ol(this.mutations,e.mutations,(t,r)=>KT(t,r))&&ol(this.baseMutations,e.baseMutations,(t,r)=>KT(t,r))}}class lv{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){it(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return d3}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new lv(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,Xe;function b3(n){switch(n){case re.OK:return Oe(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Oe(15467,{code:n})}}function PC(n){if(n===void 0)return ni("GRPC error has no .code"),re.UNKNOWN;switch(n){case Mt.OK:return re.OK;case Mt.CANCELLED:return re.CANCELLED;case Mt.UNKNOWN:return re.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return re.INTERNAL;case Mt.UNAVAILABLE:return re.UNAVAILABLE;case Mt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Mt.NOT_FOUND:return re.NOT_FOUND;case Mt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Mt.ABORTED:return re.ABORTED;case Mt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Mt.DATA_LOSS:return re.DATA_LOSS;default:return Oe(39323,{code:n})}}(Xe=Mt||(Mt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=new Hi([4294967295,4294967295],0);function XT(n){const e=J1().encode(n),t=new W1;return t.update(e),new Uint8Array(t.digest())}function ZT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Hi([t,r],0),new Hi([s,o],0)]}class uv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new vu(`Invalid padding: ${t}`);if(r<0)throw new vu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new vu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new vu(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Hi.fromNumber(this.fe)}pe(e,t,r){let s=e.add(t.multiply(Hi.fromNumber(r)));return s.compare(A3)===1&&(s=new Hi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=XT(e),[r,s]=ZT(t);for(let o=0;o<this.hashCount;o++){const l=this.pe(r,s,o);if(!this.ye(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new uv(o,s,t);return r.forEach(c=>l.insert(c)),l}insert(e){if(this.fe===0)return;const t=XT(e),[r,s]=ZT(t);for(let o=0;o<this.hashCount;o++){const l=this.pe(r,s,o);this.we(l)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class vu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,vc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new yf(je.min(),s,new At(ze),ri(),Ge())}}class vc{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new vc(r,t,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=s}}class kC{constructor(e,t){this.targetId=e,this.De=t}}class DC{constructor(e,t,r=dn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class JT{constructor(){this.ve=0,this.Ce=eS(),this.Fe=dn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ge(),t=Ge(),r=Ge();return this.Ce.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Oe(38017,{changeType:o})}}),new vc(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=eS()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,it(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class R3{constructor(e){this.We=e,this.Ge=new Map,this.ze=ri(),this.je=Gd(),this.Je=Gd(),this.He=new At(ze)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Oe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,s)=>{this.nt(s)&&t(s)})}it(e){const t=e.targetId,r=e.De.count,s=this.st(t);if(s){const o=s.target;if(Pg(o))if(r===0){const l=new ke(o.path);this.Xe(t,l,vn.newNoDocument(l,je.min()))}else it(r===1,20013,{expectedCount:r});else{const l=this.ot(t);if(l!==r){const c=this._t(e),h=c?this.ut(c,e,l):1;if(h!==0){this.rt(t);const p=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,p)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let l,c;try{l=eo(r).toUint8Array()}catch(h){if(h instanceof rC)return Xi("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new uv(l,s,o)}catch(h){return Xi(h instanceof vu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.fe===0?null:c}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let s=0;return r.forEach(o=>{const l=this.We.lt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Xe(t,o,null),s++)}),s}Pt(e){const t=new Map;this.Ge.forEach((o,l)=>{const c=this.st(l);if(c){if(o.current&&Pg(c.target)){const h=new ke(c.target.path);this.Tt(h).has(l)||this.It(l,h)||this.Xe(l,h,vn.newNoDocument(h,e))}o.Ne&&(t.set(l,o.Le()),o.ke())}});let r=Ge();this.Je.forEach((o,l)=>{let c=!0;l.forEachWhile(h=>{const p=this.st(h);return!p||p.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ze.forEach((o,l)=>l.setReadTime(e));const s=new yf(e,t,this.He,this.ze,r);return this.ze=ri(),this.je=Gd(),this.Je=Gd(),this.He=new At(ze),s}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,t)?s.qe(t,1):s.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new JT,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Gt(ze),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Gt(ze),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new JT),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Gd(){return new At(ke.comparator)}function eS(){return new At(ke.comparator)}const P3={asc:"ASCENDING",desc:"DESCENDING"},k3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},D3={and:"AND",or:"OR"};class N3{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Dg(n,e){return n.useProto3Json||cf(e)?e:{value:e}}function jh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function O3(n,e){return jh(n,e.toTimestamp())}function ws(n){return it(!!n,49232),je.fromTimestamp(function(t){const r=Ji(t);return new pt(r.seconds,r.nanos)}(n))}function cv(n,e){return Ng(n,e).canonicalString()}function Ng(n,e){const t=function(s){return new xt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function OC(n){const e=xt.fromString(n);return it(FC(e),10190,{key:e.toString()}),e}function Og(n,e){return cv(n.databaseId,e.path)}function bm(n,e){const t=OC(e);if(t.get(1)!==n.databaseId.projectId)throw new Ce(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ce(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ke(MC(t))}function VC(n,e){return cv(n.databaseId,e)}function V3(n){const e=OC(n);return e.length===4?xt.emptyPath():MC(e)}function Vg(n){return new xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function MC(n){return it(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function tS(n,e,t){return{name:Og(n,e),fields:t.value.mapValue.fields}}function M3(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Oe(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(p,g){return p.useProto3Json?(it(g===void 0||typeof g=="string",58123),dn.fromBase64String(g||"")):(it(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),dn.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(p){const g=p.code===void 0?re.UNKNOWN:PC(p.code);return new Ce(g,p.message||"")}(l);t=new DC(r,s,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=bm(n,r.document.name),o=ws(r.document.updateTime),l=r.document.createTime?ws(r.document.createTime):je.min(),c=new Ir({mapValue:{fields:r.document.fields}}),h=vn.newFoundDocument(s,o,l,c),p=r.targetIds||[],g=r.removedTargetIds||[];t=new dh(p,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=bm(n,r.document),o=r.readTime?ws(r.readTime):je.min(),l=vn.newNoDocument(s,o),c=r.removedTargetIds||[];t=new dh([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=bm(n,r.document),o=r.removedTargetIds||[];t=new dh([],o,s,null)}else{if(!("filter"in e))return Oe(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new C3(s,o),c=r.targetId;t=new kC(c,l)}}return t}function L3(n,e){let t;if(e instanceof yc)t={update:tS(n,e.key,e.value)};else if(e instanceof RC)t={delete:Og(n,e.key)};else if(e instanceof ta)t={update:tS(n,e.key,e.data),updateMask:q3(e.fieldMask)};else{if(!(e instanceof S3))return Oe(16599,{Rt:e.type});t={verify:Og(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const c=l.transform;if(c instanceof Ju)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ec)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof tc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Lh)return{fieldPath:l.field.canonicalString(),increment:c.Ee};throw Oe(20930,{transform:l.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:O3(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Oe(27497)}(n,e.precondition)),t}function j3(n,e){return n&&n.length>0?(it(e!==void 0,14353),n.map(t=>function(s,o){let l=s.updateTime?ws(s.updateTime):ws(o);return l.isEqual(je.min())&&(l=ws(o)),new w3(l,s.transformResults||[])}(t,e))):[]}function F3(n,e){return{documents:[VC(n,e.path)]}}function U3(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=VC(n,s);const o=function(p){if(p.length!==0)return jC(Cs.create(p,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const l=function(p){if(p.length!==0)return p.map(g=>function(w){return{field:za(w.field),direction:z3(w.dir)}}(g))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=Dg(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{Vt:t,parent:s}}function B3(n){let e=V3(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){it(r===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=function(y){const w=LC(y);return w instanceof Cs&&fC(w)?w.getFilters():[w]}(t.where));let l=[];t.orderBy&&(l=function(y){return y.map(w=>function(C){return new Mh(Ha(C.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(w))}(t.orderBy));let c=null;t.limit&&(c=function(y){let w;return w=typeof y=="object"?y.value:y,cf(w)?null:w}(t.limit));let h=null;t.startAt&&(h=function(y){const w=!!y.before,T=y.values||[];return new Vh(T,w)}(t.startAt));let p=null;return t.endAt&&(p=function(y){const w=!y.before,T=y.values||[];return new Vh(T,w)}(t.endAt)),i3(e,s,l,o,c,"F",h,p)}function $3(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function LC(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ha(t.unaryFilter.field);return qt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ha(t.unaryFilter.field);return qt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ha(t.unaryFilter.field);return qt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ha(t.unaryFilter.field);return qt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Oe(61313);default:return Oe(60726)}}(n):n.fieldFilter!==void 0?function(t){return qt.create(Ha(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Oe(58110);default:return Oe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Cs.create(t.compositeFilter.filters.map(r=>LC(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Oe(1026)}}(t.compositeFilter.op))}(n):Oe(30097,{filter:n})}function z3(n){return P3[n]}function H3(n){return k3[n]}function W3(n){return D3[n]}function za(n){return{fieldPath:n.canonicalString()}}function Ha(n){return cn.fromServerFormat(n.fieldPath)}function jC(n){return n instanceof qt?function(t){if(t.op==="=="){if($T(t.value))return{unaryFilter:{field:za(t.field),op:"IS_NAN"}};if(BT(t.value))return{unaryFilter:{field:za(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if($T(t.value))return{unaryFilter:{field:za(t.field),op:"IS_NOT_NAN"}};if(BT(t.value))return{unaryFilter:{field:za(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:za(t.field),op:H3(t.op),value:t.value}}}(n):n instanceof Cs?function(t){const r=t.getFilters().map(s=>jC(s));return r.length===1?r[0]:{compositeFilter:{op:W3(t.op),filters:r}}}(n):Oe(54877,{filter:n})}function q3(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function FC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,t,r,s,o=je.min(),l=je.min(),c=dn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new Ui(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e){this.gt=e}}function K3(n){const e=B3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?kg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(){this.Dn=new Y3}addToCollectionParentIndex(e,t){return this.Dn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(Zi.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(Zi.min())}updateCollectionGroup(e,t,r){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class Y3{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Gt(xt.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Gt(xt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UC=41943040;class Yn{static withCacheSize(e){return new Yn(e,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn.DEFAULT_COLLECTION_PERCENTILE=10,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yn.DEFAULT=new Yn(UC,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yn.DISABLED=new Yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ul(0)}static ur(){return new ul(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="LruGarbageCollector",X3=1048576;function sS([n,e],[t,r]){const s=ze(n,t);return s===0?ze(e,r):s}class Z3{constructor(e){this.Tr=e,this.buffer=new Gt(sS),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();sS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class J3{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ge(rS,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Tl(t)?ge(rS,"Ignoring IndexedDB error during garbage collection: ",t):await El(t)}await this.Rr(3e5)})}}class e6{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(uf.ue);const r=new Z3(t);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(nS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nS):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,s,o,l,c,h,p;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,l=Date.now(),this.nthSequenceNumber(e,s))).next(y=>(r=y,c=Date.now(),this.removeTargets(e,r,t))).next(y=>(o=y,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(p=Date.now(),Ba()<=qe.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(c-l)+`ms
	Removed ${o} targets in `+(h-c)+`ms
	Removed ${y} documents in `+(p-h)+`ms
Total Duration: ${p-g}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:y})))}}function t6(n,e){return new e6(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(){this.changes=new ea(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ee.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&ku(r.mutation,s,Zr.empty(),pt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ge()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ge()){const s=Lo();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(o=>{let l=yu();return o.forEach((c,h)=>{l=l.insert(c,h.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Lo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ge()))}populateOverlays(e,t,r){const s=[];return r.forEach(o=>{t.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,c)=>{t.set(l,c)})})}computeViews(e,t,r,s){let o=ri();const l=Pu(),c=function(){return Pu()}();return t.forEach((h,p)=>{const g=r.get(p.key);s.has(p.key)&&(g===void 0||g.mutation instanceof ta)?o=o.insert(p.key,p):g!==void 0?(l.set(p.key,g.mutation.getFieldMask()),ku(g.mutation,p,g.mutation.getFieldMask(),pt.now())):l.set(p.key,Zr.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((p,g)=>l.set(p,g)),t.forEach((p,g)=>{var y;return c.set(p,new r6(g,(y=l.get(p))!==null&&y!==void 0?y:null))}),c))}recalculateAndSaveOverlays(e,t){const r=Pu();let s=new At((l,c)=>l-c),o=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const c of l)c.keys().forEach(h=>{const p=t.get(h);if(p===null)return;let g=r.get(h)||Zr.empty();g=c.applyToLocalView(p,g),r.set(h,g);const y=(s.get(c.batchId)||Ge()).add(h);s=s.insert(c.batchId,y)})}).next(()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),p=h.key,g=h.value,y=EC();g.forEach(w=>{if(!o.has(w)){const T=bC(t.get(w),r.get(w));T!==null&&y.set(w,T),o=o.add(w)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,y))}return ee.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(l){return ke.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):o3(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):ee.resolve(Lo());let c=Qu,h=o;return l.next(p=>ee.forEach(p,(g,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),o.get(g)?ee.resolve():this.remoteDocumentCache.getEntry(e,g).next(w=>{h=h.insert(g,w)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,h,p,Ge())).next(g=>({batchId:c,changes:wC(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ke(t)).next(r=>{let s=yu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let l=yu();return this.indexManager.getCollectionParents(e,o).next(c=>ee.forEach(c,h=>{const p=function(y,w){return new hf(w,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next(g=>{g.forEach((y,w)=>{l=l.insert(y,w)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s))).next(l=>{o.forEach((h,p)=>{const g=p.getKey();l.get(g)===null&&(l=l.insert(g,vn.newInvalidDocument(g)))});let c=yu();return l.forEach((h,p)=>{const g=o.get(h);g!==void 0&&ku(g.mutation,p,Zr.empty(),pt.now()),pf(t,p)&&(c=c.insert(h,p))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ee.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(s){return{id:s.id,version:s.version,createTime:ws(s.createTime)}}(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(s){return{name:s.name,query:K3(s.bundledQuery),readTime:ws(s.readTime)}}(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(){this.overlays=new At(ke.comparator),this.kr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Lo();return ee.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,o)=>{this.wt(e,t,o)}),ee.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),ee.resolve()}getOverlaysForCollection(e,t,r){const s=Lo(),o=t.length+1,l=new ke(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,p=h.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&h.largestBatchId>r&&s.set(h.getKey(),h)}return ee.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new At((p,g)=>p-g);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let g=o.get(p.largestBatchId);g===null&&(g=Lo(),o=o.insert(p.largestBatchId,g)),g.set(p.getKey(),p)}}const c=Lo(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((p,g)=>c.set(p,g)),!(c.size()>=s)););return ee.resolve(c)}wt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new I3(t,r));let o=this.kr.get(t);o===void 0&&(o=Ge(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(){this.qr=new Gt(tn.Qr),this.$r=new Gt(tn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new tn(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new tn(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){const t=new ke(new xt([])),r=new tn(t,e),s=new tn(t,e+1),o=[];return this.$r.forEachInRange([r,s],l=>{this.Wr(l),o.push(l.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new ke(new xt([])),r=new tn(t,e),s=new tn(t,e+1);let o=Ge();return this.$r.forEachInRange([r,s],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new tn(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class tn{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ke.comparator(e.key,t.key)||ze(e.Hr,t.Hr)}static Ur(e,t){return ze(e.Hr,t.Hr)||ke.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Gt(tn.Qr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new x3(o,t,r,s);this.mutationQueue.push(l);for(const c of s)this.Yr=this.Yr.add(new tn(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ee.resolve(l)}lookupMutationBatch(e,t){return ee.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),o=s<0?0:s;return ee.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?tv:this.er-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new tn(t,0),s=new tn(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,s],l=>{const c=this.Zr(l.Hr);o.push(c)}),ee.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Gt(ze);return t.forEach(s=>{const o=new tn(s,0),l=new tn(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,l],c=>{r=r.add(c.Hr)})}),ee.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;ke.isDocumentKey(o)||(o=o.child(""));const l=new tn(new ke(o),0);let c=new Gt(ze);return this.Yr.forEachWhile(h=>{const p=h.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(c=c.add(h.Hr)),!0)},l),ee.resolve(this.ei(c))}ei(e){const t=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){it(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return ee.forEach(t.mutations,s=>{const o=new tn(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){const r=new tn(t,0),s=this.Yr.firstAfterOrEqual(r);return ee.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e){this.ni=e,this.docs=function(){return new At(ke.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,l=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ee.resolve(r?r.document.mutableCopy():vn.newInvalidDocument(t))}getEntries(e,t){let r=ri();return t.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():vn.newInvalidDocument(s))}),ee.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=ri();const l=t.path,c=new ke(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:p,value:{document:g}}=h.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||L5(M5(g),r)<=0||(s.has(g.key)||pf(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return ee.resolve(o)}getAllFromCollectionGroup(e,t,r,s){Oe(9500)}ri(e,t){return ee.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new c6(this)}getSize(e){return ee.resolve(this.size)}}class c6 extends n6{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),ee.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e){this.persistence=e,this.ii=new ea(t=>sv(t),iv),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.si=0,this.oi=new dv,this.targetCount=0,this._i=ul.ar()}forEachTarget(e,t){return this.ii.forEach((r,s)=>t(s)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),ee.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new ul(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.hr(t),ee.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.ii.forEach((l,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.ii.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),ee.waitFor(o).next(()=>s)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return ee.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),ee.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),ee.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return ee.resolve(r)}containsKey(e,t){return ee.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,t){this.ai={},this.overlays={},this.ui=new uf(0),this.ci=!1,this.ci=!0,this.li=new a6,this.referenceDelegate=e(this),this.hi=new d6(this),this.indexManager=new Q3,this.remoteDocumentCache=function(s){return new u6(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new G3(t),this.Ti=new i6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new o6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new l6(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){ge("MemoryPersistence","Starting transaction:",e);const s=new h6(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(o=>this.referenceDelegate.di(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ei(e,t){return ee.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}}class h6 extends F5{constructor(e){super(),this.currentSequenceNumber=e}}class hv{constructor(e){this.persistence=e,this.Ai=new dv,this.Ri=null}static Vi(e){return new hv(e)}get mi(){if(this.Ri)return this.Ri;throw Oe(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),ee.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.mi,r=>{const s=ke.fromPath(r);return this.fi(e,s).next(o=>{o||t.removeEntry(s,je.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return ee.or([()=>ee.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Fh{constructor(e,t){this.persistence=e,this.gi=new ea(r=>$5(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=t6(this,t)}static Vi(e,t){return new Fh(e,t)}Ii(){}di(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return ee.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(o=>o?ee.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ri(e,l=>this.Sr(e,l,t).next(c=>{c||(r++,o.removeEntry(l,je.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),ee.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=lh(e.data.value)),t}Sr(e,t,r){return ee.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.gi.get(t);return ee.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=s}static Es(e,t){let r=Ge(),s=Ge();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new fv(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return FL()?8:U5(En())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.ps(e,t).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ys(e,t,s,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new f6;return this.ws(e,t,l).next(c=>{if(o.result=c,this.Rs)return this.Ss(e,t,l,c.size)})}).next(()=>o.result)}Ss(e,t,r,s){return r.documentReadCount<this.Vs?(Ba()<=qe.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",$a(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ee.resolve()):(Ba()<=qe.DEBUG&&ge("QueryEngine","Query:",$a(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Ba()<=qe.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",$a(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_s(t))):ee.resolve())}ps(e,t){if(qT(t))return ee.resolve(null);let r=_s(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=kg(t,null,"F"),r=_s(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Ge(...o);return this.gs.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,r).next(h=>{const p=this.bs(t,c);return this.Ds(t,p,l,h.readTime)?this.ps(e,kg(t,null,"F")):this.vs(e,p,t,h)}))})))}ys(e,t,r,s){return qT(t)||s.isEqual(je.min())?ee.resolve(null):this.gs.getDocuments(e,r).next(o=>{const l=this.bs(t,o);return this.Ds(t,l,r,s)?ee.resolve(null):(Ba()<=qe.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),$a(t)),this.vs(e,l,t,V5(s,Qu)).next(c=>c))})}bs(e,t){let r=new Gt(vC(e));return t.forEach((s,o)=>{pf(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}ws(e,t,r){return Ba()<=qe.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",$a(t)),this.gs.getDocumentsMatchingQuery(e,t,Zi.min(),r)}vs(e,t,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="LocalStore",m6=3e8;class g6{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.Fs=new At(ze),this.Ms=new ea(o=>sv(o),iv),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new s6(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function y6(n,e,t,r){return new g6(n,e,t,r)}async function $C(n,e){const t=Be(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],c=[];let h=Ge();for(const p of s){l.push(p.batchId);for(const g of p.mutations)h=h.add(g.key)}for(const p of o){c.push(p.batchId);for(const g of p.mutations)h=h.add(g.key)}return t.localDocuments.getDocuments(r,h).next(p=>({Bs:p,removedBatchIds:l,addedBatchIds:c}))})})}function v6(n,e){const t=Be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return function(c,h,p,g){const y=p.batch,w=y.keys();let T=ee.resolve();return w.forEach(C=>{T=T.next(()=>g.getEntry(h,C)).next(R=>{const A=p.docVersions.get(C);it(A!==null,48541),R.version.compareTo(A)<0&&(y.applyToRemoteDocument(R,p),R.isValidDocument()&&(R.setReadTime(p.commitVersion),g.addEntry(R)))})}),T.next(()=>c.mutationQueue.removeMutationBatch(h,y))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=Ge();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(h=h.add(c.batch.mutations[p].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function zC(n){const e=Be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function _6(n,e){const t=Be(n),r=e.snapshotVersion;let s=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.Os.newChangeBuffer({trackRemovals:!0});s=t.Fs;const c=[];e.targetChanges.forEach((g,y)=>{const w=s.get(y);if(!w)return;c.push(t.hi.removeMatchingKeys(o,g.removedDocuments,y).next(()=>t.hi.addMatchingKeys(o,g.addedDocuments,y)));let T=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?T=T.withResumeToken(dn.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):g.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(g.resumeToken,r)),s=s.insert(y,T),function(R,A,O){return R.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=m6?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(w,T,g)&&c.push(t.hi.updateTargetData(o,T))});let h=ri(),p=Ge();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))}),c.push(w6(o,l,e.documentUpdates).next(g=>{h=g.Ls,p=g.ks})),!r.isEqual(je.min())){const g=t.hi.getLastRemoteSnapshotVersion(o).next(y=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(g)}return ee.waitFor(c).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,h,p)).next(()=>h)}).then(o=>(t.Fs=s,o))}function w6(n,e,t){let r=Ge(),s=Ge();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=ri();return t.forEach((c,h)=>{const p=o.get(c);h.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(c)),h.isNoDocument()&&h.version.isEqual(je.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||h.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):ge(pv,"Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",h.version)}),{Ls:l,ks:s}})}function E6(n,e){const t=Be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=tv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function T6(n,e){const t=Be(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.hi.getTargetData(r,e).next(o=>o?(s=o,ee.resolve(s)):t.hi.allocateTargetId(r).next(l=>(s=new Ui(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function Mg(n,e,t){const r=Be(n),s=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!Tl(l))throw l;ge(pv,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function iS(n,e,t){const r=Be(n);let s=je.min(),o=Ge();return r.persistence.runTransaction("Execute query","readwrite",l=>function(h,p,g){const y=Be(h),w=y.Ms.get(g);return w!==void 0?ee.resolve(y.Fs.get(w)):y.hi.getTargetData(p,g)}(r,l,_s(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(l,c.targetId).next(h=>{o=h})}).next(()=>r.Cs.getDocumentsMatchingQuery(l,e,t?s:je.min(),t?o:Ge())).next(c=>(S6(r,l3(e),c),{documents:c,qs:o})))}function S6(n,e,t){let r=n.xs.get(e)||je.min();t.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}class oS{constructor(){this.activeTargetIds=p3()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class x6{constructor(){this.Fo=new oS,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new oS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="ConnectivityMonitor";class lS{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ge(aS,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ge(aS,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kd=null;function Lg(){return Kd===null?Kd=function(){return 268435456+Math.round(2147483648*Math.random())}():Kd++,"0x"+Kd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="RestConnection",C6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class b6{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Nh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,o){const l=Lg(),c=this.Go(e,t.toUriEncodedString());ge(Am,`Sending RPC '${e}' ${l}:`,c,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(h,s,o);const{host:p}=new URL(c),g=yl(p);return this.jo(e,c,h,r,g).then(y=>(ge(Am,`Received RPC '${e}' ${l}: `,y),y),y=>{throw Xi(Am,`RPC '${e}' ${l} failed with error: `,y,"url: ",c,"request:",r),y})}Jo(e,t,r,s,o,l){return this.Wo(e,t,r,s,o)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}Go(e,t){const r=C6[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn="WebChannelConnection";class R6 extends b6{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,s,o){const l=Lg();return new Promise((c,h)=>{const p=new q1;p.setWithCredentials(!0),p.listenOnce(G1.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case ah.NO_ERROR:const y=p.getResponseJson();ge(gn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),c(y);break;case ah.TIMEOUT:ge(gn,`RPC '${e}' ${l} timed out`),h(new Ce(re.DEADLINE_EXCEEDED,"Request time out"));break;case ah.HTTP_ERROR:const w=p.getStatus();if(ge(gn,`RPC '${e}' ${l} failed with status:`,w,"response text:",p.getResponseText()),w>0){let T=p.getResponseJson();Array.isArray(T)&&(T=T[0]);const C=T==null?void 0:T.error;if(C&&C.status&&C.message){const R=function(O){const B=O.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(B)>=0?B:re.UNKNOWN}(C.status);h(new Ce(R,C.message))}else h(new Ce(re.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new Ce(re.UNAVAILABLE,"Connection failed."));break;default:Oe(9055,{c_:e,streamId:l,l_:p.getLastErrorCode(),h_:p.getLastError()})}}finally{ge(gn,`RPC '${e}' ${l} completed.`)}});const g=JSON.stringify(s);ge(gn,`RPC '${e}' ${l} sending request:`,s),p.send(t,"POST",g,r,15)})}P_(e,t,r){const s=Lg(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Y1(),c=Q1(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(h.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(h.useFetchStreams=!0),this.zo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const g=o.join("");ge(gn,`Creating RPC '${e}' stream ${s}: ${g}`,h);const y=l.createWebChannel(g,h);this.T_(y);let w=!1,T=!1;const C=new A6({Ho:A=>{T?ge(gn,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(w||(ge(gn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),w=!0),ge(gn,`RPC '${e}' stream ${s} sending:`,A),y.send(A))},Yo:()=>y.close()}),R=(A,O,B)=>{A.listen(O,z=>{try{B(z)}catch(Q){setTimeout(()=>{throw Q},0)}})};return R(y,gu.EventType.OPEN,()=>{T||(ge(gn,`RPC '${e}' stream ${s} transport opened.`),C.s_())}),R(y,gu.EventType.CLOSE,()=>{T||(T=!0,ge(gn,`RPC '${e}' stream ${s} transport closed`),C.__(),this.I_(y))}),R(y,gu.EventType.ERROR,A=>{T||(T=!0,Xi(gn,`RPC '${e}' stream ${s} transport errored. Name:`,A.name,"Message:",A.message),C.__(new Ce(re.UNAVAILABLE,"The operation could not be completed")))}),R(y,gu.EventType.MESSAGE,A=>{var O;if(!T){const B=A.data[0];it(!!B,16349);const z=B,Q=(z==null?void 0:z.error)||((O=z[0])===null||O===void 0?void 0:O.error);if(Q){ge(gn,`RPC '${e}' stream ${s} received error:`,Q);const K=Q.status;let J=function(k){const M=Mt[k];if(M!==void 0)return PC(M)}(K),D=Q.message;J===void 0&&(J=re.INTERNAL,D="Unknown error status: "+K+" with message "+Q.message),T=!0,C.__(new Ce(J,D)),y.close()}else ge(gn,`RPC '${e}' stream ${s} received:`,B),C.a_(B)}}),R(c,K1.STAT_EVENT,A=>{A.stat===Ig.PROXY?ge(gn,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===Ig.NOPROXY&&ge(gn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.o_()},0),C}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Rm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(n){return new N3(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=s,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-r);s>0&&ge("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="PersistentStream";class WC{constructor(e,t,r,s,o,l,c,h){this.Fi=e,this.w_=r,this.S_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new HC(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(ni(t.toString()),ni("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===t&&this.W_(r,s)},r=>{e(()=>{const s=new Ce(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ge(uS,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(ge(uS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class P6 extends WC{constructor(e,t,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=M3(this.serializer,e),r=function(o){if(!("targetChange"in o))return je.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?je.min():l.readTime?ws(l.readTime):je.min()}(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=Vg(this.serializer),t.addTarget=function(o,l){let c;const h=l.target;if(c=Pg(h)?{documents:F3(o,h)}:{query:U3(o,h).Vt},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=NC(o,l.resumeToken);const p=Dg(o,l.expectedCount);p!==null&&(c.expectedCount=p)}else if(l.snapshotVersion.compareTo(je.min())>0){c.readTime=jh(o,l.snapshotVersion.toTimestamp());const p=Dg(o,l.expectedCount);p!==null&&(c.expectedCount=p)}return c}(this.serializer,e);const r=$3(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=Vg(this.serializer),t.removeTarget=e,this.k_(t)}}class k6 extends WC{constructor(e,t,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=j3(e.writeResults,e.commitTime),r=ws(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=Vg(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>L3(this.serializer,r))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{}class N6 extends D6{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Ce(re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Wo(e,Ng(t,r),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ce(re.UNKNOWN,o.toString())})}Jo(e,t,r,s,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Jo(e,Ng(t,r),s,l,c,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ce(re.UNKNOWN,l.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class O6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ni(t),this._a=!1):ge("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="RemoteStore";class V6{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(l=>{r.enqueueAndForget(async()=>{na(this)&&(ge(Go,"Restarting streams for network reachability change."),await async function(h){const p=Be(h);p.Ia.add(4),await _c(p),p.Aa.set("Unknown"),p.Ia.delete(4),await _f(p)}(this))})}),this.Aa=new O6(r,s)}}async function _f(n){if(na(n))for(const e of n.da)await e(!0)}async function _c(n){for(const e of n.da)await e(!1)}function qC(n,e){const t=Be(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),vv(t)?yv(t):Sl(t).x_()&&gv(t,e))}function mv(n,e){const t=Be(n),r=Sl(t);t.Ta.delete(e),r.x_()&&GC(t,e),t.Ta.size===0&&(r.x_()?r.B_():na(t)&&t.Aa.set("Unknown"))}function gv(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Sl(n).H_(e)}function GC(n,e){n.Ra.$e(e),Sl(n).Y_(e)}function yv(n){n.Ra=new R3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Sl(n).start(),n.Aa.aa()}function vv(n){return na(n)&&!Sl(n).M_()&&n.Ta.size>0}function na(n){return Be(n).Ia.size===0}function KC(n){n.Ra=void 0}async function M6(n){n.Aa.set("Online")}async function L6(n){n.Ta.forEach((e,t)=>{gv(n,e)})}async function j6(n,e){KC(n),vv(n)?(n.Aa.la(e),yv(n)):n.Aa.set("Unknown")}async function F6(n,e,t){if(n.Aa.set("Online"),e instanceof DC&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const c of o.targetIds)s.Ta.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.Ta.delete(c),s.Ra.removeTarget(c))}(n,e)}catch(r){ge(Go,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Uh(n,r)}else if(e instanceof dh?n.Ra.Ye(e):e instanceof kC?n.Ra.it(e):n.Ra.et(e),!t.isEqual(je.min()))try{const r=await zC(n.localStore);t.compareTo(r)>=0&&await function(o,l){const c=o.Ra.Pt(l);return c.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const g=o.Ta.get(p);g&&o.Ta.set(p,g.withResumeToken(h.resumeToken,l))}}),c.targetMismatches.forEach((h,p)=>{const g=o.Ta.get(h);if(!g)return;o.Ta.set(h,g.withResumeToken(dn.EMPTY_BYTE_STRING,g.snapshotVersion)),GC(o,h);const y=new Ui(g.target,h,p,g.sequenceNumber);gv(o,y)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t)}catch(r){ge(Go,"Failed to raise snapshot:",r),await Uh(n,r)}}async function Uh(n,e,t){if(!Tl(e))throw e;n.Ia.add(1),await _c(n),n.Aa.set("Offline"),t||(t=()=>zC(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ge(Go,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await _f(n)})}function QC(n,e){return e().catch(t=>Uh(n,t,e))}async function wf(n){const e=Be(n),t=no(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:tv;for(;U6(e);)try{const s=await E6(e.localStore,r);if(s===null){e.Pa.length===0&&t.B_();break}r=s.batchId,B6(e,s)}catch(s){await Uh(e,s)}YC(e)&&XC(e)}function U6(n){return na(n)&&n.Pa.length<10}function B6(n,e){n.Pa.push(e);const t=no(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function YC(n){return na(n)&&!no(n).M_()&&n.Pa.length>0}function XC(n){no(n).start()}async function $6(n){no(n).na()}async function z6(n){const e=no(n);for(const t of n.Pa)e.X_(t.mutations)}async function H6(n,e,t){const r=n.Pa.shift(),s=lv.from(r,e,t);await QC(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await wf(n)}async function W6(n,e){e&&no(n).Z_&&await async function(r,s){if(function(l){return b3(l)&&l!==re.ABORTED}(s.code)){const o=r.Pa.shift();no(r).N_(),await QC(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await wf(r)}}(n,e),YC(n)&&XC(n)}async function cS(n,e){const t=Be(n);t.asyncQueue.verifyOperationInProgress(),ge(Go,"RemoteStore received new credentials");const r=na(t);t.Ia.add(3),await _c(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await _f(t)}async function q6(n,e){const t=Be(n);e?(t.Ia.delete(2),await _f(t)):e||(t.Ia.add(2),await _c(t),t.Aa.set("Unknown"))}function Sl(n){return n.Va||(n.Va=function(t,r,s){const o=Be(t);return o.ia(),new P6(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Zo:M6.bind(null,n),e_:L6.bind(null,n),n_:j6.bind(null,n),J_:F6.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),vv(n)?yv(n):n.Aa.set("Unknown")):(await n.Va.stop(),KC(n))})),n.Va}function no(n){return n.ma||(n.ma=function(t,r,s){const o=Be(t);return o.ia(),new k6(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:$6.bind(null,n),n_:W6.bind(null,n),ea:z6.bind(null,n),ta:H6.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await wf(n)):(await n.ma.stop(),n.Pa.length>0&&(ge(Go,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Wi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const l=Date.now()+r,c=new _v(e,t,l,s,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ce(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wv(n,e){if(ni("AsyncQueue",`${e}: ${n}`),Tl(n))return new Ce(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{static emptySet(e){return new Ja(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ke.comparator(t.key,r.key):(t,r)=>ke.comparator(t.key,r.key),this.keyedMap=yu(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ja)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ja;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(){this.fa=new At(ke.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Oe(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}}class cl{constructor(e,t,r,s,o,l,c,h,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,s,o){const l=[];return t.forEach(c=>{l.push({type:0,doc:c})}),new cl(e,t,Ja.emptySet(t),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ff(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class K6{constructor(){this.queries=hS(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const s=Be(t),o=s.queries;s.queries=hS(),o.forEach((l,c)=>{for(const h of c.wa)h.onError(r)})})(this,new Ce(re.ABORTED,"Firestore shutting down"))}}function hS(){return new ea(n=>yC(n),ff)}async function Q6(n,e){const t=Be(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.Sa()&&e.ba()&&(r=2):(o=new G6,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await t.onListen(s,!0);break;case 1:o.ya=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const c=wv(l,`Initialization of query '${$a(e.query)}' failed`);return void e.onError(c)}t.queries.set(s,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&Ev(t)}async function Y6(n,e){const t=Be(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const l=o.wa.indexOf(e);l>=0&&(o.wa.splice(l,1),o.wa.length===0?s=e.ba()?0:1:!o.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function X6(n,e){const t=Be(n);let r=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const c of l.wa)c.Ca(s)&&(r=!0);l.ya=s}}r&&Ev(t)}function Z6(n,e,t){const r=Be(n),s=r.queries.get(e);if(s)for(const o of s.wa)o.onError(t);r.queries.delete(e)}function Ev(n){n.Da.forEach(e=>{e.next()})}var jg,fS;(fS=jg||(jg={})).Fa="default",fS.Cache="cache";class J6{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new cl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==jg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e){this.key=e}}class JC{constructor(e){this.key=e}}class eU{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ge(),this.mutatedKeys=Ge(),this.Xa=vC(e),this.eu=new Ja(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new dS,s=t?t.eu:this.eu;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,c=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((g,y)=>{const w=s.get(g),T=pf(this.query,y)?y:null,C=!!w&&this.mutatedKeys.has(w.key),R=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let A=!1;w&&T?w.data.isEqual(T.data)?C!==R&&(r.track({type:3,doc:T}),A=!0):this.iu(w,T)||(r.track({type:2,doc:T}),A=!0,(h&&this.Xa(T,h)>0||p&&this.Xa(T,p)<0)&&(c=!0)):!w&&T?(r.track({type:0,doc:T}),A=!0):w&&!T&&(r.track({type:1,doc:w}),A=!0,(h||p)&&(c=!0)),A&&(T?(l=l.add(T),o=R?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{eu:l,ru:r,Ds:c,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const l=e.ru.pa();l.sort((g,y)=>function(T,C){const R=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe(20277,{At:A})}};return R(T)-R(C)}(g.type,y.type)||this.Xa(g.doc,y.doc)),this.su(r),s=s!=null&&s;const c=t&&!s?this.ou():[],h=this.Za.size===0&&this.current&&!s?1:0,p=h!==this.Ya;return this.Ya=h,l.length!==0||p?{snapshot:new cl(this.query,e.eu,o,l,e.mutatedKeys,h===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new dS,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ge(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new JC(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new ZC(r))}),t}uu(e){this.Ha=e.qs,this.Za=Ge();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return cl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Tv="SyncEngine";class tU{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class nU{constructor(e){this.key=e,this.lu=!1}}class rU{constructor(e,t,r,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.hu={},this.Pu=new ea(c=>yC(c),ff),this.Tu=new Map,this.Iu=new Set,this.du=new At(ke.comparator),this.Eu=new Map,this.Au=new dv,this.Ru={},this.Vu=new Map,this.mu=ul.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function sU(n,e,t=!0){const r=ib(n);let s;const o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.cu()):s=await eb(r,e,t,!0),s}async function iU(n,e){const t=ib(n);await eb(t,e,!0,!1)}async function eb(n,e,t,r){const s=await T6(n.localStore,_s(e)),o=s.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let c;return r&&(c=await oU(n,e,o,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&qC(n.remoteStore,s),c}async function oU(n,e,t,r,s){n.gu=(y,w,T)=>async function(R,A,O,B){let z=A.view.nu(O);z.Ds&&(z=await iS(R.localStore,A.query,!1).then(({documents:D})=>A.view.nu(D,z)));const Q=B&&B.targetChanges.get(A.targetId),K=B&&B.targetMismatches.get(A.targetId)!=null,J=A.view.applyChanges(z,R.isPrimaryClient,Q,K);return mS(R,A.targetId,J._u),J.snapshot}(n,y,w,T);const o=await iS(n.localStore,e,!0),l=new eU(e,o.qs),c=l.nu(o.documents),h=vc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),p=l.applyChanges(c,n.isPrimaryClient,h);mS(n,t,p._u);const g=new tU(e,t,l);return n.Pu.set(e,g),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),p.snapshot}async function aU(n,e,t){const r=Be(n),s=r.Pu.get(e),o=r.Tu.get(s.targetId);if(o.length>1)return r.Tu.set(s.targetId,o.filter(l=>!ff(l,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Mg(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&mv(r.remoteStore,s.targetId),Fg(r,s.targetId)}).catch(El)):(Fg(r,s.targetId),await Mg(r.localStore,s.targetId,!0))}async function lU(n,e){const t=Be(n),r=t.Pu.get(e),s=t.Tu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),mv(t.remoteStore,r.targetId))}async function uU(n,e,t){const r=gU(n);try{const s=await function(l,c){const h=Be(l),p=pt.now(),g=c.reduce((T,C)=>T.add(C.key),Ge());let y,w;return h.persistence.runTransaction("Locally write mutations","readwrite",T=>{let C=ri(),R=Ge();return h.Os.getEntries(T,g).next(A=>{C=A,C.forEach((O,B)=>{B.isValidDocument()||(R=R.add(O))})}).next(()=>h.localDocuments.getOverlayedDocuments(T,C)).next(A=>{y=A;const O=[];for(const B of c){const z=T3(B,y.get(B.key).overlayedDocument);z!=null&&O.push(new ta(B.key,z,cC(z.value.mapValue),Qs.exists(!0)))}return h.mutationQueue.addMutationBatch(T,p,O,c)}).next(A=>{w=A;const O=A.applyToLocalDocumentSet(y,R);return h.documentOverlayCache.saveOverlays(T,A.batchId,O)})}).then(()=>({batchId:w.batchId,changes:wC(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,c,h){let p=l.Ru[l.currentUser.toKey()];p||(p=new At(ze)),p=p.insert(c,h),l.Ru[l.currentUser.toKey()]=p}(r,s.batchId,t),await wc(r,s.changes),await wf(r.remoteStore)}catch(s){const o=wv(s,"Failed to persist write");t.reject(o)}}async function tb(n,e){const t=Be(n);try{const r=await _6(t.localStore,e);e.targetChanges.forEach((s,o)=>{const l=t.Eu.get(o);l&&(it(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.lu=!0:s.modifiedDocuments.size>0?it(l.lu,14607):s.removedDocuments.size>0&&(it(l.lu,42227),l.lu=!1))}),await wc(t,r,e)}catch(r){await El(r)}}function pS(n,e,t){const r=Be(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Pu.forEach((o,l)=>{const c=l.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(l,c){const h=Be(l);h.onlineState=c;let p=!1;h.queries.forEach((g,y)=>{for(const w of y.wa)w.va(c)&&(p=!0)}),p&&Ev(h)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function cU(n,e,t){const r=Be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Eu.get(e),o=s&&s.key;if(o){let l=new At(ke.comparator);l=l.insert(o,vn.newNoDocument(o,je.min()));const c=Ge().add(o),h=new yf(je.min(),new Map,new At(ze),l,c);await tb(r,h),r.du=r.du.remove(o),r.Eu.delete(e),Sv(r)}else await Mg(r.localStore,e,!1).then(()=>Fg(r,e,t)).catch(El)}async function dU(n,e){const t=Be(n),r=e.batch.batchId;try{const s=await v6(t.localStore,e);rb(t,r,null),nb(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await wc(t,s)}catch(s){await El(s)}}async function hU(n,e,t){const r=Be(n);try{const s=await function(l,c){const h=Be(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let g;return h.mutationQueue.lookupMutationBatch(p,c).next(y=>(it(y!==null,37113),g=y.keys(),h.mutationQueue.removeMutationBatch(p,y))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,g,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,g)).next(()=>h.localDocuments.getDocuments(p,g))})}(r.localStore,e);rb(r,e,t),nb(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await wc(r,s)}catch(s){await El(s)}}function nb(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function rb(n,e,t){const r=Be(n);let s=r.Ru[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function Fg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||sb(n,r)})}function sb(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(mv(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Sv(n))}function mS(n,e,t){for(const r of t)r instanceof ZC?(n.Au.addReference(r.key,e),fU(n,r)):r instanceof JC?(ge(Tv,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||sb(n,r.key)):Oe(19791,{yu:r})}function fU(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(ge(Tv,"New document in limbo: "+t),n.Iu.add(r),Sv(n))}function Sv(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new ke(xt.fromString(e)),r=n.mu.next();n.Eu.set(r,new nU(t)),n.du=n.du.insert(t,r),qC(n.remoteStore,new Ui(_s(ov(t.path)),r,"TargetPurposeLimboResolution",uf.ue))}}async function wc(n,e,t){const r=Be(n),s=[],o=[],l=[];r.Pu.isEmpty()||(r.Pu.forEach((c,h)=>{l.push(r.gu(h,e,t).then(p=>{var g;if((p||t)&&r.isPrimaryClient){const y=p?!p.fromCache:(g=t==null?void 0:t.targetChanges.get(h.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(h.targetId,y?"current":"not-current")}if(p){s.push(p);const y=fv.Es(h.targetId,p);o.push(y)}}))}),await Promise.all(l),r.hu.J_(s),await async function(h,p){const g=Be(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>ee.forEach(p,w=>ee.forEach(w.Is,T=>g.persistence.referenceDelegate.addReference(y,w.targetId,T)).next(()=>ee.forEach(w.ds,T=>g.persistence.referenceDelegate.removeReference(y,w.targetId,T)))))}catch(y){if(!Tl(y))throw y;ge(pv,"Failed to update sequence numbers: "+y)}for(const y of p){const w=y.targetId;if(!y.fromCache){const T=g.Fs.get(w),C=T.snapshotVersion,R=T.withLastLimboFreeSnapshotVersion(C);g.Fs=g.Fs.insert(w,R)}}}(r.localStore,o))}async function pU(n,e){const t=Be(n);if(!t.currentUser.isEqual(e)){ge(Tv,"User change. New user:",e.toKey());const r=await $C(t.localStore,e);t.currentUser=e,function(o,l){o.Vu.forEach(c=>{c.forEach(h=>{h.reject(new Ce(re.CANCELLED,l))})}),o.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await wc(t,r.Bs)}}function mU(n,e){const t=Be(n),r=t.Eu.get(e);if(r&&r.lu)return Ge().add(r.key);{let s=Ge();const o=t.Tu.get(e);if(!o)return s;for(const l of o){const c=t.Pu.get(l);s=s.unionWith(c.view.tu)}return s}}function ib(n){const e=Be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cU.bind(null,e),e.hu.J_=X6.bind(null,e.eventManager),e.hu.pu=Z6.bind(null,e.eventManager),e}function gU(n){const e=Be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hU.bind(null,e),e}class Bh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return y6(this.persistence,new p6,e.initialUser,this.serializer)}Du(e){return new BC(hv.Vi,this.serializer)}bu(e){return new x6}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bh.provider={build:()=>new Bh};class yU extends Bh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){it(this.persistence.referenceDelegate instanceof Fh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new J3(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Yn.withCacheSize(this.cacheSizeBytes):Yn.DEFAULT;return new BC(r=>Fh.Vi(r,t),this.serializer)}}class Ug{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>pS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=pU.bind(null,this.syncEngine),await q6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new K6}()}createDatastore(e){const t=vf(e.databaseInfo.databaseId),r=function(o){return new R6(o)}(e.databaseInfo);return function(o,l,c,h){return new N6(o,l,c,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,o,l,c){return new V6(r,s,o,l,c)}(this.localStore,this.datastore,e.asyncQueue,t=>pS(this.syncEngine,t,0),function(){return lS.C()?new lS:new I6}())}createSyncEngine(e,t){return function(s,o,l,c,h,p,g){const y=new rU(s,o,l,c,h,p);return g&&(y.fu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const o=Be(s);ge(Go,"RemoteStore shutting down."),o.Ia.add(5),await _c(o),o.Ea.shutdown(),o.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Ug.provider={build:()=>new Ug};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ni("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro="FirestoreClient";class _U{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=yn.UNAUTHENTICATED,this.clientId=Jy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{ge(ro,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(ge(ro,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=wv(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Pm(n,e){n.asyncQueue.verifyOperationInProgress(),ge(ro,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await $C(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{Xi("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{ge("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{Xi("Terminating Firestore due to IndexedDb database deletion failed",s)})}),n._offlineComponents=e}async function gS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await wU(n);ge(ro,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>cS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>cS(e.remoteStore,s)),n._onlineComponents=e}async function wU(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge(ro,"Using user provided OfflineComponentProvider");try{await Pm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===re.FAILED_PRECONDITION||s.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Xi("Error using user provided cache. Falling back to memory cache: "+t),await Pm(n,new Bh)}}else ge(ro,"Using default OfflineComponentProvider"),await Pm(n,new yU(void 0));return n._offlineComponents}async function ob(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge(ro,"Using user provided OnlineComponentProvider"),await gS(n,n._uninitializedComponentsProvider._online)):(ge(ro,"Using default OnlineComponentProvider"),await gS(n,new Ug))),n._onlineComponents}function EU(n){return ob(n).then(e=>e.syncEngine)}async function TU(n){const e=await ob(n),t=e.eventManager;return t.onListen=sU.bind(null,e.syncEngine),t.onUnlisten=aU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=iU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=lU.bind(null,e.syncEngine),t}function SU(n,e,t={}){const r=new Wi;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,c,h,p){const g=new vU({next:w=>{g.Ou(),l.enqueueAndForget(()=>Y6(o,y));const T=w.docs.has(c);!T&&w.fromCache?p.reject(new Ce(re.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&w.fromCache&&h&&h.source==="server"?p.reject(new Ce(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(w)},error:w=>p.reject(w)}),y=new J6(ov(c.path),g,{includeMetadataChanges:!0,ka:!0});return Q6(o,y)}(await TU(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb="firestore.googleapis.com",vS=!0;class _S{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ce(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lb,this.ssl=vS}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:vS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=UC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<X3)throw new Ce(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}O5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ab((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Ce(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ce(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ce(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xv{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _S({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ce(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ce(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _S(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new x5;switch(r.type){case"firstParty":return new A5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ce(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=yS.get(t);r&&(ge("ComponentProvider","Removing Datastore"),yS.delete(t),r.terminate())}(this),Promise.resolve()}}function xU(n,e,t,r={}){var s;n=Ku(n,xv);const o=yl(e),l=n._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:n._getEmulatorOptions()}),h=`${e}:${t}`;o&&(e1(`https://${h}`),t1("Firestore",!0)),l.host!==lb&&l.host!==h&&Xi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},l),{host:h,ssl:o,emulatorOptions:r});if(!Yi(p,c)&&(n._setSettings(p),r.mockUserToken)){let g,y;if(typeof r.mockUserToken=="string")g=r.mockUserToken,y=yn.MOCK_USER;else{g=kL(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ce(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new yn(w)}n._authCredentials=new I5(new Z1(g,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Iv(this.firestore,e,this._query)}}class nn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nn(this.firestore,e,this._key)}toJSON(){return{type:nn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(gc(t,nn._jsonSchema))return new nn(e,r||null,new ke(xt.fromString(t.referencePath)))}}nn._jsonSchemaVersion="firestore/documentReference/1.0",nn._jsonSchema={type:Ft("string",nn._jsonSchemaVersion),referencePath:Ft("string")};class nc extends Iv{constructor(e,t,r){super(e,t,ov(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nn(this.firestore,null,new ke(e))}withConverter(e){return new nc(this.firestore,e,this._path)}}function xl(n,e,...t){if(n=Tn(n),arguments.length===1&&(e=Jy.newId()),N5("doc","path",e),n instanceof xv){const r=xt.fromString(e,...t);return NT(r),new nn(n,null,new ke(r))}{if(!(n instanceof nn||n instanceof nc))throw new Ce(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(xt.fromString(e,...t));return NT(r),new nn(n.firestore,n instanceof nc?n.converter:null,new ke(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="AsyncQueue";class ES{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new HC(this,"async_queue_retry"),this.oc=()=>{const r=Rm();r&&ge(wS,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=Rm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Rm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new Wi;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Tl(e))throw e;ge(wS,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ni("INTERNAL UNHANDLED ERROR: ",TS(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const s=_v.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(s),s}ac(){this.tc&&Oe(47125,{hc:TS(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function TS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Cv extends xv{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new ES,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ES(e),this._firestoreClient=void 0,await e}}}function IU(n,e){const t=typeof n=="object"?n:Uy(),r=typeof n=="string"?n:Nh,s=Zo(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=RL("firestore");o&&xU(s,...o)}return s}function ub(n){if(n._terminated)throw new Ce(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||CU(n),n._firestoreClient}function CU(n){var e,t,r;const s=n._freezeSettings(),o=function(c,h,p,g){return new W5(c,h,p,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,ab(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new _U(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(c){const h=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(h),_online:h}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cr(dn.fromBase64String(e))}catch(t){throw new Ce(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Cr(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Cr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(gc(e,Cr._jsonSchema))return Cr.fromBase64String(e.bytes)}}Cr._jsonSchemaVersion="firestore/bytes/1.0",Cr._jsonSchema={type:Ft("string",Cr._jsonSchemaVersion),bytes:Ft("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ce(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ce(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ce(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Es._jsonSchemaVersion}}static fromJSON(e){if(gc(e,Es._jsonSchema))return new Es(e.latitude,e.longitude)}}Es._jsonSchemaVersion="firestore/geoPoint/1.0",Es._jsonSchema={type:Ft("string",Es._jsonSchemaVersion),latitude:Ft("number"),longitude:Ft("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ts._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(gc(e,Ts._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Ts(e.vectorValues);throw new Ce(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ts._jsonSchemaVersion="firestore/vectorValue/1.0",Ts._jsonSchema={type:Ft("string",Ts._jsonSchemaVersion),vectorValues:Ft("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bU=/^__.*__$/;class AU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ta(e,this.data,this.fieldMask,t,this.fieldTransforms):new yc(e,this.data,t,this.fieldTransforms)}}function cb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe(40011,{Ec:n})}}class Rv{constructor(e,t,r,s,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Rv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return $h(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(cb(this.Ec)&&bU.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class RU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||vf(e)}Dc(e,t,r,s=!1){return new Rv({Ec:e,methodName:t,bc:r,path:cn.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function PU(n){const e=n._freezeSettings(),t=vf(n._databaseId);return new RU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function kU(n,e,t,r,s,o={}){const l=n.Dc(o.merge||o.mergeFields?2:0,e,t,s);pb("Data must be an object, but it was:",l,r);const c=hb(r,l);let h,p;if(o.merge)h=new Zr(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const y of o.mergeFields){const w=DU(e,y,t);if(!l.contains(w))throw new Ce(re.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);OU(g,w)||g.push(w)}h=new Zr(g),p=l.fieldTransforms.filter(y=>h.covers(y.field))}else h=null,p=l.fieldTransforms;return new AU(new Ir(c),h,p)}class Pv extends Av{_toFieldTransform(e){return new v3(e.path,new Ju)}isEqual(e){return e instanceof Pv}}function db(n,e){if(fb(n=Tn(n)))return pb("Unsupported field value:",e,n),hb(n,e);if(n instanceof Av)return function(r,s){if(!cb(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const o=[];let l=0;for(const c of r){let h=db(c,s.yc(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}}(n,e)}return function(r,s){if((r=Tn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return m3(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=pt.fromDate(r);return{timestampValue:jh(s.serializer,o)}}if(r instanceof pt){const o=new pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jh(s.serializer,o)}}if(r instanceof Es)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Cr)return{bytesValue:NC(s.serializer,r._byteString)};if(r instanceof nn){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.wc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:cv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ts)return function(l,c){return{mapValue:{fields:{[lC]:{stringValue:uC},[Oh]:{arrayValue:{values:l.toArray().map(p=>{if(typeof p!="number")throw c.wc("VectorValues must only contain numeric values.");return av(c.serializer,p)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${ev(r)}`)}(n,e)}function hb(n,e){const t={};return nC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jo(n,(r,s)=>{const o=db(s,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function fb(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof pt||n instanceof Es||n instanceof Cr||n instanceof nn||n instanceof Av||n instanceof Ts)}function pb(n,e,t){if(!fb(t)||!eC(t)){const r=ev(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function DU(n,e,t){if((e=Tn(e))instanceof bv)return e._internalPath;if(typeof e=="string")return mb(n,e);throw $h("Field path arguments must be of type string or ",n,!1,void 0,t)}const NU=new RegExp("[~\\*/\\[\\]]");function mb(n,e,t){if(e.search(NU)>=0)throw $h(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new bv(...e.split("."))._internalPath}catch{throw $h(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $h(n,e,t,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${r}`),l&&(h+=` in document ${s}`),h+=")"),new Ce(re.INVALID_ARGUMENT,c+n+h)}function OU(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new VU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(yb("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class VU extends gb{data(){return super.data()}}function yb(n,e){return typeof e=="string"?mb(n,e):e instanceof bv?e._internalPath:e._delegate._internalPath}class MU{convertValue(e,t="none"){switch(to(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(eo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Jo(e,(s,o)=>{r[s]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,s;const o=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[Oh].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(l=>Nt(l.doubleValue));return new Ts(o)}convertGeoPoint(e){return new Es(Nt(e.latitude),Nt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=df(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Yu(e));default:return null}}convertTimestamp(e){const t=Ji(e);return new pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=xt.fromString(e);it(FC(r),9688,{name:e});const s=new Xu(r.get(1),r.get(3)),o=new ke(r.popFirst(5));return s.isEqual(t)||ni(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LU(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class _u{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bo extends gb{constructor(e,t,r,s,o,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(yb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Bo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Bo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bo._jsonSchema={type:Ft("string",Bo._jsonSchemaVersion),bundleSource:Ft("string","DocumentSnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class hh extends Bo{data(e={}){return super.data(e)}}class Du{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new _u(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new hh(this._firestore,this._userDataWriter,r.key,r,new _u(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ce(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(c=>{const h=new hh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new _u(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const h=new hh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new _u(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,g=-1;return c.type!==0&&(p=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),g=l.indexOf(c.doc.key)),{type:jU(c.type),doc:h,oldIndex:p,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Du._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Jy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function jU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(n){n=Ku(n,nn);const e=Ku(n.firestore,Cv);return SU(ub(e),n._key).then(t=>BU(e,n,t))}Du._jsonSchemaVersion="firestore/querySnapshot/1.0",Du._jsonSchema={type:Ft("string",Du._jsonSchemaVersion),bundleSource:Ft("string","QuerySnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class FU extends MU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,t)}}function Dv(n,e,t){n=Ku(n,nn);const r=Ku(n.firestore,Cv),s=LU(n.converter,e,t);return UU(r,[kU(PU(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Qs.none())])}function UU(n,e){return function(r,s){const o=new Wi;return r.asyncQueue.enqueueAndForget(async()=>uU(await EU(r),s,o)),o.promise}(ub(n),e)}function BU(n,e,t){const r=t.docs.get(e._key),s=new FU(n);return new Bo(n,s,e._key,r,new _u(t.hasPendingWrites,t.fromCache),e.converter)}function zh(){return new Pv("serverTimestamp")}(function(e,t=!0){(function(s){wl=s})(vl),xs(new es("firestore",(r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new Cv(new C5(r.getProvider("auth-internal")),new R5(l,r.getProvider("app-check-internal")),function(p,g){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ce(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xu(p.options.projectId,g)}(l,s),l);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Ar(AT,RT,e),Ar(AT,RT,"esm2017")})();const vb="@firebase/installations",Nv="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b=1e4,wb=`w:${Nv}`,Eb="FIS_v2",$U="https://firebaseinstallations.googleapis.com/v1",zU=60*60*1e3,HU="installations",WU="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ko=new Xo(HU,WU,qU);function Tb(n){return n instanceof ts&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb({projectId:n}){return`${$U}/projects/${n}/installations`}function xb(n){return{token:n.token,requestStatus:2,expiresIn:KU(n.expiresIn),creationTime:Date.now()}}async function Ib(n,e){const r=(await e.json()).error;return Ko.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Cb({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function GU(n,{refreshToken:e}){const t=Cb(n);return t.append("Authorization",QU(e)),t}async function bb(n){const e=await n();return e.status>=500&&e.status<600?n():e}function KU(n){return Number(n.replace("s","000"))}function QU(n){return`${Eb} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YU({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=Sb(n),s=Cb(n),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const l={fid:t,authVersion:Eb,appId:n.appId,sdkVersion:wb},c={method:"POST",headers:s,body:JSON.stringify(l)},h=await bb(()=>fetch(r,c));if(h.ok){const p=await h.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:xb(p.authToken)}}else throw await Ib("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XU(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU=/^[cdef][\w-]{21}$/,Bg="";function JU(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=e9(n);return ZU.test(t)?t:Bg}catch{return Bg}}function e9(n){return XU(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb=new Map;function Pb(n,e){const t=Ef(n);kb(t,e),t9(t,e)}function kb(n,e){const t=Rb.get(n);if(t)for(const r of t)r(e)}function t9(n,e){const t=n9();t&&t.postMessage({key:n,fid:e}),r9()}let jo=null;function n9(){return!jo&&"BroadcastChannel"in self&&(jo=new BroadcastChannel("[Firebase] FID Change"),jo.onmessage=n=>{kb(n.data.key,n.data.fid)}),jo}function r9(){Rb.size===0&&jo&&(jo.close(),jo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s9="firebase-installations-database",i9=1,Qo="firebase-installations-store";let km=null;function Ov(){return km||(km=a1(s9,i9,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Qo)}}})),km}async function Hh(n,e){const t=Ef(n),s=(await Ov()).transaction(Qo,"readwrite"),o=s.objectStore(Qo),l=await o.get(t);return await o.put(e,t),await s.done,(!l||l.fid!==e.fid)&&Pb(n,e.fid),e}async function Db(n){const e=Ef(n),r=(await Ov()).transaction(Qo,"readwrite");await r.objectStore(Qo).delete(e),await r.done}async function Tf(n,e){const t=Ef(n),s=(await Ov()).transaction(Qo,"readwrite"),o=s.objectStore(Qo),l=await o.get(t),c=e(l);return c===void 0?await o.delete(t):await o.put(c,t),await s.done,c&&(!l||l.fid!==c.fid)&&Pb(n,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vv(n){let e;const t=await Tf(n.appConfig,r=>{const s=o9(r),o=a9(n,s);return e=o.registrationPromise,o.installationEntry});return t.fid===Bg?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function o9(n){const e=n||{fid:JU(),registrationStatus:0};return Nb(e)}function a9(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Ko.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=l9(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:u9(n)}:{installationEntry:e}}async function l9(n,e){try{const t=await YU(n,e);return Hh(n.appConfig,t)}catch(t){throw Tb(t)&&t.customData.serverCode===409?await Db(n.appConfig):await Hh(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function u9(n){let e=await SS(n.appConfig);for(;e.registrationStatus===1;)await Ab(100),e=await SS(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await Vv(n);return r||t}return e}function SS(n){return Tf(n,e=>{if(!e)throw Ko.create("installation-not-found");return Nb(e)})}function Nb(n){return c9(n)?{fid:n.fid,registrationStatus:0}:n}function c9(n){return n.registrationStatus===1&&n.registrationTime+_b<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d9({appConfig:n,heartbeatServiceProvider:e},t){const r=h9(n,t),s=GU(n,t),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const l={installation:{sdkVersion:wb,appId:n.appId}},c={method:"POST",headers:s,body:JSON.stringify(l)},h=await bb(()=>fetch(r,c));if(h.ok){const p=await h.json();return xb(p)}else throw await Ib("Generate Auth Token",h)}function h9(n,{fid:e}){return`${Sb(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mv(n,e=!1){let t;const r=await Tf(n.appConfig,o=>{if(!Ob(o))throw Ko.create("not-registered");const l=o.authToken;if(!e&&m9(l))return o;if(l.requestStatus===1)return t=f9(n,e),o;{if(!navigator.onLine)throw Ko.create("app-offline");const c=y9(o);return t=p9(n,c),c}});return t?await t:r.authToken}async function f9(n,e){let t=await xS(n.appConfig);for(;t.authToken.requestStatus===1;)await Ab(100),t=await xS(n.appConfig);const r=t.authToken;return r.requestStatus===0?Mv(n,e):r}function xS(n){return Tf(n,e=>{if(!Ob(e))throw Ko.create("not-registered");const t=e.authToken;return v9(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function p9(n,e){try{const t=await d9(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await Hh(n.appConfig,r),t}catch(t){if(Tb(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await Db(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Hh(n.appConfig,r)}throw t}}function Ob(n){return n!==void 0&&n.registrationStatus===2}function m9(n){return n.requestStatus===2&&!g9(n)}function g9(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+zU}function y9(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function v9(n){return n.requestStatus===1&&n.requestTime+_b<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _9(n){const e=n,{installationEntry:t,registrationPromise:r}=await Vv(e);return r?r.catch(console.error):Mv(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w9(n,e=!1){const t=n;return await E9(t),(await Mv(t,e)).token}async function E9(n){const{registrationPromise:e}=await Vv(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T9(n){if(!n||!n.options)throw Dm("App Configuration");if(!n.name)throw Dm("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Dm(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Dm(n){return Ko.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="installations",S9="installations-internal",x9=n=>{const e=n.getProvider("app").getImmediate(),t=T9(e),r=Zo(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},I9=n=>{const e=n.getProvider("app").getImmediate(),t=Zo(e,Vb).getImmediate();return{getId:()=>_9(t),getToken:s=>w9(t,s)}};function C9(){xs(new es(Vb,x9,"PUBLIC")),xs(new es(S9,I9,"PRIVATE"))}C9();Ar(vb,Nv);Ar(vb,Nv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh="analytics",b9="firebase_id",A9="origin",R9=60*1e3,P9="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Lv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn=new sf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},lr=new Xo("analytics","Analytics",k9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D9(n){if(!n.startsWith(Lv)){const e=lr.create("invalid-gtag-resource",{gtagURL:n});return Zn.warn(e.message),""}return n}function Mb(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function N9(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function O9(n,e){const t=N9("firebase-js-sdk-policy",{createScriptURL:D9}),r=document.createElement("script"),s=`${Lv}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function V9(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function M9(n,e,t,r,s,o){const l=r[s];try{if(l)await e[l];else{const h=(await Mb(t)).find(p=>p.measurementId===s);h&&await e[h.appId]}}catch(c){Zn.error(c)}n("config",s,o)}async function L9(n,e,t,r,s){try{let o=[];if(s&&s.send_to){let l=s.send_to;Array.isArray(l)||(l=[l]);const c=await Mb(t);for(const h of l){const p=c.find(y=>y.measurementId===h),g=p&&e[p.appId];if(g)o.push(g);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),n("event",r,s||{})}catch(o){Zn.error(o)}}function j9(n,e,t,r){async function s(o,...l){try{if(o==="event"){const[c,h]=l;await L9(n,e,t,c,h)}else if(o==="config"){const[c,h]=l;await M9(n,e,t,r,c,h)}else if(o==="consent"){const[c,h]=l;n("consent",c,h)}else if(o==="get"){const[c,h,p]=l;n("get",c,h,p)}else if(o==="set"){const[c]=l;n("set",c)}else n(o,...l)}catch(c){Zn.error(c)}}return s}function F9(n,e,t,r,s){let o=function(...l){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=j9(o,n,e,t),{gtagCore:o,wrappedGtag:window[s]}}function U9(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Lv)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9=30,$9=1e3;class z9{constructor(e={},t=$9){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Lb=new z9;function H9(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function W9(n){var e;const{appId:t,apiKey:r}=n,s={method:"GET",headers:H9(r)},o=P9.replace("{app-id}",t),l=await fetch(o,s);if(l.status!==200&&l.status!==304){let c="";try{const h=await l.json();!((e=h.error)===null||e===void 0)&&e.message&&(c=h.error.message)}catch{}throw lr.create("config-fetch-failed",{httpStatus:l.status,responseMessage:c})}return l.json()}async function q9(n,e=Lb,t){const{appId:r,apiKey:s,measurementId:o}=n.options;if(!r)throw lr.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw lr.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new Q9;return setTimeout(async()=>{c.abort()},R9),jb({appId:r,apiKey:s,measurementId:o},l,c,e)}async function jb(n,{throttleEndTimeMillis:e,backoffCount:t},r,s=Lb){var o;const{appId:l,measurementId:c}=n;try{await G9(r,e)}catch(h){if(c)return Zn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:l,measurementId:c};throw h}try{const h=await W9(n);return s.deleteThrottleMetadata(l),h}catch(h){const p=h;if(!K9(p)){if(s.deleteThrottleMetadata(l),c)return Zn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:l,measurementId:c};throw h}const g=Number((o=p==null?void 0:p.customData)===null||o===void 0?void 0:o.httpStatus)===503?ZE(t,s.intervalMillis,B9):ZE(t,s.intervalMillis),y={throttleEndTimeMillis:Date.now()+g,backoffCount:t+1};return s.setThrottleMetadata(l,y),Zn.debug(`Calling attemptFetch again in ${g} millis`),jb(n,y,r,s)}}function G9(n,e){return new Promise((t,r)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(t,s);n.addEventListener(()=>{clearTimeout(o),r(lr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function K9(n){if(!(n instanceof ts)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class Q9{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Y9(n,e,t,r,s){if(s&&s.global){n("event",t,r);return}else{const o=await e,l=Object.assign(Object.assign({},r),{send_to:o});n("event",t,l)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X9(){if(r1())try{await s1()}catch(n){return Zn.warn(lr.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Zn.warn(lr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Z9(n,e,t,r,s,o,l){var c;const h=q9(n);h.then(T=>{t[T.measurementId]=T.appId,n.options.measurementId&&T.measurementId!==n.options.measurementId&&Zn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${T.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(T=>Zn.error(T)),e.push(h);const p=X9().then(T=>{if(T)return r.getId()}),[g,y]=await Promise.all([h,p]);U9(o)||O9(o,g.measurementId),s("js",new Date);const w=(c=l==null?void 0:l.config)!==null&&c!==void 0?c:{};return w[A9]="firebase",w.update=!0,y!=null&&(w[b9]=y),s("config",g.measurementId,w),g.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(e){this.app=e}_delete(){return delete Nu[this.app.options.appId],Promise.resolve()}}let Nu={},IS=[];const CS={};let Nm="dataLayer",eB="gtag",bS,Fb,AS=!1;function tB(){const n=[];if(n1()&&n.push("This is a browser extension environment."),UL()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,s)=>`(${s+1}) ${r}`).join(" "),t=lr.create("invalid-analytics-context",{errorInfo:e});Zn.warn(t.message)}}function nB(n,e,t){tB();const r=n.options.appId;if(!r)throw lr.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Zn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw lr.create("no-api-key");if(Nu[r]!=null)throw lr.create("already-exists",{id:r});if(!AS){V9(Nm);const{wrappedGtag:o,gtagCore:l}=F9(Nu,IS,CS,Nm,eB);Fb=o,bS=l,AS=!0}return Nu[r]=Z9(n,IS,CS,e,bS,Nm,t),new J9(n)}function rB(n=Uy()){n=Tn(n);const e=Zo(n,Wh);return e.isInitialized()?e.getImmediate():sB(n)}function sB(n,e={}){const t=Zo(n,Wh);if(t.isInitialized()){const s=t.getImmediate();if(Yi(e,t.getOptions()))return s;throw lr.create("already-initialized")}return t.initialize({options:e})}function iB(n,e,t,r){n=Tn(n),Y9(Fb,Nu[n.app.options.appId],e,t,r).catch(s=>Zn.error(s))}const RS="@firebase/analytics",PS="0.10.17";function oB(){xs(new es(Wh,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return nB(r,s,t)},"PUBLIC")),xs(new es("analytics-internal",n,"PRIVATE")),Ar(RS,PS),Ar(RS,PS,"esm2017");function n(e){try{const t=e.getProvider(Wh).getImmediate();return{logEvent:(r,s,o)=>iB(t,r,s,o)}}catch(t){throw lr.create("interop-component-reg-failed",{reason:t})}}}oB();const aB={apiKey:"AIzaSyAgRdBtg_I5NMAC5x3gh-7_CvQ058n25go",authDomain:"jiang-ai-web.firebaseapp.com",projectId:"jiang-ai-web",storageBucket:"jiang-ai-web.firebasestorage.app",messagingSenderId:"923755523160",appId:"1:923755523160:web:043dca5d76b6ded7ecee2d",measurementId:"G-8FXGZWC0M4"},jv=l1(aB),du=w5(jv),Il=IU(jv);typeof window<"u"&&rB(jv);const Ub=P.createContext(void 0);function As(){const n=P.useContext(Ub);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}function lB({children:n}){const[e,t]=P.useState(null),[r,s]=P.useState(!0),o=async(w,T)=>{await iF(du,w,T)},l=async(w,T)=>{const C=await sF(du,w,T);C.user&&await yT(C.user)},c=async()=>{e&&!e.emailVerified&&await yT(e)},h=async()=>{e&&await g1(e)},p=async()=>{const w=new Hs;await RF(du,w)},g=async()=>{await uF(du)};P.useEffect(()=>lF(du,T=>{t(T),s(!1)}),[]);const y={currentUser:e,login:o,register:l,loginWithGoogle:p,logout:g,sendVerificationEmail:c,reloadUser:h,loading:r};return S.jsx(Ub.Provider,{value:y,children:!r&&n})}const uB=async(n,e,t)=>{var r,s;try{(r=t==null?void 0:t.onSyncStart)==null||r.call(t);const o=xl(Il,"userSettings",n.uid);return await Dv(o,{...e,lastSync:zh()},{merge:!0}),console.log("用户设置已同步到云端"),(s=t==null?void 0:t.onSyncSuccess)==null||s.call(t,"设置已同步到云端"),!0}catch(o){return console.error("保存用户设置失败:",o),!1}},cB=async n=>{try{const e=xl(Il,"userSettings",n.uid),t=await kv(e);if(t.exists()){const r=t.data();return console.log("从云端获取用户设置成功"),r}else return console.log("用户设置不存在，将使用默认设置"),null}catch(e){return console.error("获取用户设置失败:",e),null}},$g=async(n,e,t)=>{var r,s;try{(r=t==null?void 0:t.onSyncStart)==null||r.call(t);const o=xl(Il,"userWebsites",n.uid);return await Dv(o,{websites:e,lastSync:zh()}),console.log("网站数据已同步到云端"),(s=t==null?void 0:t.onSyncSuccess)==null||s.call(t,"网站数据已同步到云端"),!0}catch(o){return console.error("保存网站数据失败:",o),!1}},dB=async n=>{try{const e=xl(Il,"userWebsites",n.uid),t=await kv(e);if(t.exists()){const r=t.data();return console.log("从云端获取网站数据成功"),r.websites}else return console.log("用户网站数据不存在"),null}catch(e){return console.error("获取网站数据失败:",e),null}},hB=(n,e)=>{const t={};return n.forEach(r=>{t[r.id]=r}),e.forEach(r=>{const s=t[r.id];(!s||r.visitCount>s.visitCount)&&(t[r.id]=r)}),Object.values(t)};let Om=null;const fB=(n,e,t,r)=>{Om&&clearTimeout(Om),Om=setTimeout(async()=>{var s,o,l,c;(s=r==null?void 0:r.onSyncStart)==null||s.call(r);try{const p=(await Promise.allSettled([$g(n,e),uB(n,t)])).filter(g=>g.status==="rejected");p.length===0?(o=r==null?void 0:r.onSyncSuccess)==null||o.call(r,"数据已静默同步到云端"):(l=r==null?void 0:r.onSyncError)==null||l.call(r,`${p.length} 个数据同步失败`)}catch(h){(c=r==null?void 0:r.onSyncError)==null||c.call(r,"同步过程中发生错误: "+h.message)}},3e3)},kS=async(n,e,t)=>{var r,s;try{(r=t==null?void 0:t.onSyncStart)==null||r.call(t);const o=xl(Il,"userProfiles",n.uid),l={uid:n.uid,email:n.email||"",displayName:e,createdAt:zh(),updatedAt:zh()};return await Dv(o,l,{merge:!0}),console.log("用户资料已同步到云端"),(s=t==null?void 0:t.onSyncSuccess)==null||s.call(t,"用户资料已保存"),!0}catch(o){return console.error("保存用户资料失败:",o),!1}},Vm=async n=>{try{const e=xl(Il,"userProfiles",n.uid),t=await kv(e);if(t.exists()){const r=t.data();return console.log("从云端获取用户资料成功"),r}else return console.log("用户资料不存在"),null}catch(e){return console.error("获取用户资料失败:",e),null}},Bb=P.createContext(void 0);function $b(){const n=P.useContext(Bb);if(n===void 0)throw new Error("useUserProfile must be used within a UserProfileProvider");return n}function pB({children:n}){var p;const{currentUser:e}=As(),[t,r]=P.useState(null),[s,o]=P.useState(!1),l=(t==null?void 0:t.displayName)||((p=e==null?void 0:e.email)==null?void 0:p.split("@")[0])||"用户",c=async g=>{if(!e||!e.emailVerified)return!1;o(!0);try{return await kS(e,g)?(r(w=>w?{...w,displayName:g,updatedAt:new Date}:null),setTimeout(async()=>{const w=await Vm(e);w&&r(w)},1e3),!0):!1}catch(y){return console.error("更新用户名失败:",y),!1}finally{o(!1)}};P.useEffect(()=>{(async()=>{var y;if(e&&e.emailVerified){o(!0);try{const w=await Vm(e);if(w)r(w);else{const T=((y=e.email)==null?void 0:y.split("@")[0])||"用户";await kS(e,T);const C=await Vm(e);r(C)}}catch(w){console.error("加载用户资料失败:",w)}finally{o(!1)}}else r(null)})()},[e]);const h={userProfile:t,displayName:l,updateDisplayName:c,loading:s};return S.jsx(Bb.Provider,{value:h,children:n})}const DS={isOnline:navigator.onLine,lastSyncTime:null,syncInProgress:!1,syncError:null,pendingChanges:0},zb=P.createContext(void 0);function Hb(){const n=P.useContext(zb);if(n===void 0)throw new Error("useSyncStatus must be used within a SyncProvider");return n}function mB({children:n}){const[e,t]=P.useState(DS),r=l=>{t(c=>({...c,...l}))},s=()=>{t(DS)};window.addEventListener("online",()=>{r({isOnline:!0})}),window.addEventListener("offline",()=>{r({isOnline:!1})});const o={syncStatus:e,updateSyncStatus:r,resetSyncStatus:s};return S.jsx(zb.Provider,{value:o,children:n})}function gB(n){const{currentUser:e}=As(),{updateSyncStatus:t}=Hb(),{cardOpacity:r,searchBarOpacity:s,parallaxEnabled:o}=cc(),l=P.useRef(""),c=P.useRef(null),h=P.useRef(null),p=P.useRef(0),g=P.useCallback((y=!1)=>{if(!e||!e.emailVerified){e&&!e.emailVerified&&t({syncInProgress:!1,syncError:"请先验证邮箱才能同步数据到云端",pendingChanges:1});return}const w={cardOpacity:r,searchBarOpacity:s,parallaxEnabled:o,theme:localStorage.getItem("theme")||"light",lastSync:null};console.log(y?"⏰ 强制执行数据同步...":"🚀 开始执行数据同步..."),fB(e,n,w,{onSyncStart:()=>{t({syncInProgress:!0,syncError:null,pendingChanges:0})},onSyncSuccess:T=>{const C=JSON.stringify({websites:n.map(R=>({id:R.id,name:R.name,url:R.url,visitCount:R.visitCount})),settings:{cardOpacity:r,searchBarOpacity:s,parallaxEnabled:o,theme:w.theme}});l.current=C,p.current=0,t({syncInProgress:!1,lastSyncTime:new Date,syncError:null,pendingChanges:0}),console.log("✅ 同步成功:",T)},onSyncError:T=>{t({syncInProgress:!1,syncError:T,pendingChanges:1}),console.error("❌ 同步失败:",T)}})},[e,n,r,s,o,t]);P.useEffect(()=>{if(JSON.stringify({websites:n.map(A=>({id:A.id,name:A.name,url:A.url,visitCount:A.visitCount})),settings:{cardOpacity:r,searchBarOpacity:s,parallaxEnabled:o,theme:localStorage.getItem("theme")||"light"}})===l.current){console.log("📊 数据未变化，保持现有同步计时器");return}console.log("🔄 检测到数据变化，更新同步策略");const w=Date.now();p.current===0&&(p.current=w,console.log("📝 记录首次数据变化时间")),c.current&&clearTimeout(c.current);const T=w-p.current,C=3e4,R=3e3;if(T>=C){console.log("⏰ 达到最大等待时间，立即强制同步"),h.current&&(clearTimeout(h.current),h.current=null),g(!0);return}if(c.current=setTimeout(()=>{g(!1)},R),!h.current){const A=C-T;console.log(`⏲️ 设置强制同步计时器，${Math.round(A/1e3)}秒后强制同步`),h.current=setTimeout(()=>{console.log("⏰ 强制同步计时器触发"),c.current&&(clearTimeout(c.current),c.current=null),g(!0)},A)}return()=>{c.current&&clearTimeout(c.current)}},[e,n,r,s,o,g]),P.useEffect(()=>()=>{c.current&&clearTimeout(c.current),h.current&&clearTimeout(h.current)},[])}function yB(){const{syncStatus:n}=Hb(),{currentUser:e}=As(),[,t]=P.useState(0);if(P.useEffect(()=>{const c=()=>{if(!n.lastSyncTime)return 6e4;const y=Math.floor((new Date().getTime()-n.lastSyncTime.getTime())/1e3);return y<60?1e3:y<3600?6e4:3e5},h=()=>{const g=c();return setTimeout(()=>{t(y=>y+1),h()},g)},p=h();return()=>clearTimeout(p)},[n.lastSyncTime]),!e)return null;const r=c=>{if(!c)return"从未同步";const p=Math.floor((new Date().getTime()-c.getTime())/1e3);return p<60?`${p}秒前`:p<3600?`${Math.floor(p/60)}分钟前`:p<86400?`${Math.floor(p/3600)}小时前`:`${Math.floor(p/86400)}天前`},s=()=>n.syncInProgress?S.jsx("i",{className:"fa-solid fa-sync fa-spin text-blue-500"}):n.syncError?S.jsx("i",{className:"fa-solid fa-exclamation-triangle text-red-500"}):n.isOnline?n.pendingChanges>0?S.jsx("i",{className:"fa-solid fa-clock text-orange-500"}):S.jsx("i",{className:"fa-solid fa-check-circle text-green-500"}):S.jsx("i",{className:"fa-solid fa-wifi-slash text-gray-500"}),o=()=>n.syncInProgress?"同步中...":n.syncError?"同步失败":n.isOnline?n.pendingChanges>0?`${n.pendingChanges} 个更改待同步`:"已同步":"离线模式",l=()=>n.syncError?n.syncError:`上次同步: ${r(n.lastSyncTime)}`;return S.jsxs("div",{className:"space-y-3",children:[S.jsx("h4",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:"云端同步状态"}),S.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{className:"flex items-center space-x-2",children:[s(),S.jsx("span",{className:"text-sm font-medium text-gray-700",children:o()})]}),S.jsxs("div",{className:"flex items-center space-x-1",children:[S.jsx("div",{className:`w-2 h-2 rounded-full ${n.isOnline?"bg-green-500":"bg-red-500"}`}),S.jsx("span",{className:"text-xs text-gray-500",children:n.isOnline?"在线":"离线"})]})]}),S.jsx("p",{className:"text-xs text-gray-500",children:l()}),S.jsx(Rw,{children:n.syncError&&S.jsx(_n.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"bg-red-50 border border-red-200 rounded p-2",children:S.jsxs("p",{className:"text-xs text-red-600",children:[S.jsx("i",{className:"fa-solid fa-info-circle mr-1"}),n.syncError]})})}),S.jsx(Rw,{children:n.syncInProgress&&S.jsx(_n.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"w-full bg-gray-200 rounded-full h-1",children:S.jsx(_n.div,{className:"bg-blue-500 h-1 rounded-full",initial:{width:"0%"},animate:{width:"100%"},transition:{duration:2,ease:"easeInOut"}})})})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[S.jsxs("div",{className:"bg-blue-50 rounded p-2 text-center",children:[S.jsx("div",{className:"font-medium text-blue-700",children:"云端备份"}),S.jsx("div",{className:"text-blue-600",children:e?"已启用":"未启用"})]}),S.jsxs("div",{className:"bg-green-50 rounded p-2 text-center",children:[S.jsx("div",{className:"font-medium text-green-700",children:"智能同步"}),S.jsx("div",{className:"text-green-600",children:n.pendingChanges>0?"3秒防抖":"30秒强制"})]})]})]})}function vB({onSuccess:n}){const[e,t]=P.useState(!0),[r,s]=P.useState(""),[o,l]=P.useState(""),[c,h]=P.useState(""),[p,g]=P.useState(!1),[y,w]=P.useState(""),[T,C]=P.useState(!1),[R,A]=P.useState(""),{login:O,register:B,loginWithGoogle:z,sendVerificationEmail:Q}=As(),K=async I=>{if(I.preventDefault(),!r||!o){w("请填写完整信息");return}if(!e&&!c.trim()){w("请输入用户名");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)){w("请输入有效的邮箱地址");return}if(!e){if(c.length<2||c.length>20){w("用户名长度需在2-20个字符之间");return}if(!/^[a-zA-Z0-9\u4e00-\u9fa5_-]+$/.test(c)){w("用户名只能包含字母、数字、中文、下划线和短横线");return}}g(!0),w("");try{e?(await O(r,o),n()):(await B(r,o),C(!0),A(r),localStorage.setItem("pendingDisplayName",c))}catch(M){switch(console.error("认证失败:",M),M.code){case"auth/user-not-found":w("用户不存在，请检查邮箱或注册新账号");break;case"auth/wrong-password":w("密码错误，请重试");break;case"auth/email-already-in-use":w("邮箱已被注册，请登录或使用其他邮箱");break;case"auth/weak-password":w("密码强度不够，至少需要6位字符");break;case"auth/invalid-email":w("邮箱格式不正确");break;case"auth/too-many-requests":w("请求过于频繁，请稍后再试");break;case"auth/invalid-credential":w("登录凭据无效，请检查邮箱和密码");break;default:w(e?"登录失败，请重试":"注册失败，请重试")}}finally{g(!1)}},J=async()=>{g(!0),w("");try{await z(),n()}catch(I){console.error("Google登录失败:",I),w("Google登录失败，请重试")}finally{g(!1)}},D=async()=>{try{await Q(),alert("验证邮件已重新发送，请检查邮箱")}catch{alert("发送验证邮件失败，请稍后重试")}};return T?S.jsx(_n.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:S.jsxs("div",{className:"flex items-start space-x-2",children:[S.jsx("i",{className:"fa-solid fa-envelope-circle-check text-green-600 mt-0.5"}),S.jsxs("div",{children:[S.jsx("h4",{className:"text-sm font-medium text-green-800",children:"注册成功！请验证您的邮箱"}),S.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["我们已向 ",S.jsx("strong",{children:R})," 发送了验证邮件。 请点击邮件中的链接完成验证后即可使用完整功能。"]}),S.jsxs("div",{className:"mt-3 flex space-x-2",children:[S.jsx("button",{onClick:D,className:"text-xs bg-green-100 hover:bg-green-200 text-green-800 px-2 py-1 rounded",children:"重新发送验证邮件"}),S.jsx("button",{onClick:()=>{C(!1),t(!0),s(""),l(""),h("")},className:"text-xs bg-blue-100 hover:bg-blue-200 text-blue-800 px-2 py-1 rounded",children:"返回登录"})]})]})]})}):S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"text-center mb-4",children:[S.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e?"登录账号":"注册账号"}),S.jsx("p",{className:"text-sm text-gray-600",children:e?"使用邮箱登录您的账号":"创建新账号并设置用户名"})]}),y&&S.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:y}),S.jsxs("form",{onSubmit:K,className:"space-y-4",children:[!e&&S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"用户名 *"}),S.jsx("input",{type:"text",value:c,onChange:I=>h(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"请输入用户名（2-20个字符）",disabled:p,maxLength:20}),S.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"支持中文、英文、数字、下划线和短横线"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"邮箱 *"}),S.jsx("input",{type:"email",value:r,onChange:I=>s(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"请输入邮箱",disabled:p})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"密码 *"}),S.jsx("input",{type:"password",value:o,onChange:I=>l(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"请输入密码（至少6位）",disabled:p,minLength:6})]}),S.jsx("button",{type:"submit",disabled:p,className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white py-2 px-4 rounded-md transition-colors",children:p?"处理中...":e?"登录":"注册"})]}),S.jsxs("div",{className:"mt-4",children:[S.jsxs("div",{className:"relative",children:[S.jsx("div",{className:"absolute inset-0 flex items-center",children:S.jsx("div",{className:"w-full border-t border-gray-300"})}),S.jsx("div",{className:"relative flex justify-center text-sm",children:S.jsx("span",{className:"px-2 bg-white text-gray-500",children:"或"})})]}),S.jsxs("button",{onClick:J,disabled:p,className:"mt-4 w-full bg-red-500 hover:bg-red-600 disabled:bg-gray-400 text-white py-2 px-4 rounded-md transition-colors flex items-center justify-center",children:[S.jsx("i",{className:"fab fa-google mr-2"}),"使用 Google ",e?"登录":"注册"]})]}),S.jsx("div",{className:"mt-6 text-center",children:S.jsx("button",{onClick:()=>t(!e),className:"text-blue-500 hover:text-blue-600",disabled:p,children:e?"没有账号？点击注册":"已有账号？点击登录"})})]})}function _B(){const{currentUser:n}=As(),{displayName:e,updateDisplayName:t,loading:r}=$b(),[s,o]=P.useState(!1),[l,c]=P.useState(e),[h,p]=P.useState(!1),[g,y]=P.useState("");if(P.useEffect(()=>{c(e)},[e]),!n||!n.emailVerified)return null;const w=async()=>{if(!l.trim()){y("用户名不能为空");return}if(l.length<2||l.length>20){y("用户名长度需在2-20个字符之间");return}if(!/^[a-zA-Z0-9\u4e00-\u9fa5_-]+$/.test(l)){y("用户名只能包含字母、数字、中文、下划线和短横线");return}p(!0),y("");try{await t(l)?(o(!1),alert("用户名更新成功！")):y("更新失败，请重试")}catch(C){y("更新失败，请重试"),console.error("更新用户名失败:",C)}finally{p(!1)}},T=()=>{c(e),o(!1),y("")};return S.jsxs("div",{className:"space-y-3",children:[S.jsx("h4",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:"用户资料"}),S.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-3",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("span",{className:"text-sm text-gray-600",children:"用户名"}),!s&&S.jsxs("button",{onClick:()=>o(!0),className:"text-xs text-blue-500 hover:text-blue-600",disabled:r,children:[S.jsx("i",{className:"fa-solid fa-edit mr-1"}),"编辑"]})]}),s?S.jsxs("div",{className:"space-y-2",children:[S.jsx("input",{type:"text",value:l,onChange:C=>c(C.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"请输入用户名",maxLength:20,disabled:h}),g&&S.jsx("p",{className:"text-xs text-red-600",children:g}),S.jsxs("div",{className:"flex space-x-2",children:[S.jsx("button",{onClick:w,disabled:h||!l.trim(),className:"text-xs bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white px-2 py-1 rounded",children:h?S.jsxs(S.Fragment,{children:[S.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-1"}),"保存中..."]}):S.jsxs(S.Fragment,{children:[S.jsx("i",{className:"fa-solid fa-check mr-1"}),"保存"]})}),S.jsxs("button",{onClick:T,disabled:h,className:"text-xs bg-gray-500 hover:bg-gray-600 text-white px-2 py-1 rounded",children:[S.jsx("i",{className:"fa-solid fa-times mr-1"}),"取消"]})]}),S.jsx("p",{className:"text-xs text-gray-500",children:"支持中文、英文、数字、下划线和短横线，2-20个字符"})]}):S.jsxs("div",{className:"flex items-center space-x-2",children:[S.jsx("i",{className:"fa-solid fa-user text-gray-400"}),S.jsx("span",{className:"text-sm font-medium text-gray-800",children:r?"加载中...":e})]}),S.jsx("div",{className:"border-t border-gray-200 pt-2",children:S.jsxs("div",{className:"flex items-center space-x-2",children:[S.jsx("i",{className:"fa-solid fa-envelope text-gray-400"}),S.jsx("span",{className:"text-xs text-gray-600",children:n.email}),S.jsx("i",{className:"fa-solid fa-check-circle text-green-500 text-xs",title:"邮箱已验证"})]})})]})]})}function wB({onClose:n,websites:e,setWebsites:t}){const[r,s]=P.useState(!1),{cardOpacity:o,searchBarOpacity:l,parallaxEnabled:c,setCardOpacity:h,setSearchBarOpacity:p,setParallaxEnabled:g}=cc(),{currentUser:y,logout:w}=As(),T=P.useRef(null),C=O=>{const B={...O,visitCount:0,lastVisit:new Date().toISOString().split("T")[0]};t([...e,B]),s(!1)},R=()=>{try{const O={websites:e,settings:{cardOpacity:o,searchBarOpacity:l,parallaxEnabled:c,theme:localStorage.getItem("theme")||"light"},exportTime:new Date().toISOString(),version:"1.0"},B=JSON.stringify(O,null,2),z=new Blob([B],{type:"application/json"}),Q=URL.createObjectURL(z),K=document.createElement("a");K.href=Q,K.download=`炫酷收藏夹_导出数据_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(K),K.click(),document.body.removeChild(K),URL.revokeObjectURL(Q),alert("数据导出成功！")}catch(O){console.error("导出数据失败:",O),alert("导出数据失败，请重试！")}},A=O=>{var K;const B=(K=O.target.files)==null?void 0:K[0];if(!B)return;if(!confirm(`⚠️ 导入数据前请注意：

• 导入会完全覆盖当前所有数据
• 包括所有网站卡片、透明度设置、主题等
• 建议先导出当前数据作为备份

确定要继续导入吗？`)){T.current&&(T.current.value="");return}const Q=new FileReader;Q.onload=J=>{var D;try{const I=(D=J.target)==null?void 0:D.result,k=JSON.parse(I);if(!k.websites||!Array.isArray(k.websites))throw new Error("无效的数据格式：缺少网站数据");if(t(k.websites),k.settings){const{cardOpacity:M,searchBarOpacity:L,parallaxEnabled:H,theme:V}=k.settings;typeof M=="number"&&h(M),typeof L=="number"&&p(L),typeof H=="boolean"&&g(H),V&&localStorage.setItem("theme",V)}alert("数据导入成功！页面将刷新以应用新设置。"),window.location.reload()}catch(I){console.error("导入数据失败:",I),alert("导入数据失败：文件格式不正确或数据损坏！")}},Q.onerror=()=>{alert("读取文件失败！")},Q.readAsText(B),T.current&&(T.current.value="")};return S.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center select-none",children:[S.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:n}),S.jsxs(_n.div,{className:"w-96 bg-white rounded-xl shadow-2xl z-50 max-h-[80vh] flex flex-col select-none",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20,stiffness:300},children:[S.jsx("div",{className:"p-6 pb-0 select-none",children:S.jsxs("div",{className:"flex justify-between items-center mb-4",children:[S.jsx("h2",{className:"text-xl font-medium text-gray-800 select-none",children:"设置"}),S.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 select-none",children:S.jsx("i",{className:"fa-solid fa-xmark text-lg select-none"})})]})}),S.jsxs("div",{className:"flex-1 px-6 py-2 pb-6 space-y-6 overflow-y-auto select-none",children:[S.jsxs("div",{className:"space-y-4 select-none",children:[S.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:"透明度设置"}),S.jsxs("div",{className:"space-y-2 select-none",children:[S.jsxs("label",{className:"text-sm font-medium text-gray-700 select-none",children:["卡片透明度 (",Math.round(o*100),"%)"]}),S.jsx("input",{type:"range",min:"0.05",max:"0.3",step:"0.01",value:o,onChange:O=>h(parseFloat(O.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"})]}),S.jsxs("div",{className:"space-y-2 select-none",children:[S.jsxs("label",{className:"text-sm font-medium text-gray-700 select-none",children:["搜索框透明度 (",Math.round(l*100),"%)"]}),S.jsx("input",{type:"range",min:"0.05",max:"0.3",step:"0.01",value:l,onChange:O=>p(parseFloat(O.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"})]}),S.jsxs("div",{className:"space-y-2 select-none",children:[S.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center justify-between select-none",children:[S.jsx("span",{className:"select-none",children:"视差背景效果"}),S.jsx("button",{onClick:()=>g(!c),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors select-none ${c?"bg-blue-500":"bg-gray-300"}`,children:S.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform select-none ${c?"translate-x-6":"translate-x-1"}`})})]}),S.jsx("p",{className:"text-xs text-gray-500 select-none",children:c?"背景会跟随鼠标轻微移动":"背景固定不动"})]})]}),S.jsxs("div",{className:"space-y-4 select-none",children:[S.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:"卡片管理"}),S.jsxs("button",{onClick:()=>s(!0),className:"w-full px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors select-none",children:[S.jsx("i",{className:"fa-solid fa-plus mr-2 select-none"}),"添加新卡片"]})]}),S.jsxs("div",{className:"space-y-4 select-none",children:[S.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:"账号管理"}),y?S.jsxs("div",{className:"space-y-3",children:[S.jsx(_B,{}),S.jsxs("button",{onClick:async()=>{try{await w(),n()}catch(O){console.error("登出失败:",O)}},className:"w-full px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-md transition-colors select-none",children:[S.jsx("i",{className:"fa-solid fa-sign-out-alt mr-2 select-none"}),"登出"]})]}):S.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:S.jsx(vB,{onSuccess:n})})]}),S.jsxs("div",{className:"space-y-4 select-none",children:[S.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:"云端同步"}),S.jsx(yB,{})]}),S.jsxs("div",{className:"space-y-4 select-none",children:[S.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:"数据管理"}),S.jsxs("button",{onClick:R,className:"w-full px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-md transition-colors select-none",children:[S.jsx("i",{className:"fa-solid fa-download mr-2 select-none"}),"导出数据"]}),S.jsxs("div",{className:"space-y-2 select-none",children:[S.jsxs("button",{onClick:()=>{var O;return(O=T.current)==null?void 0:O.click()},className:"w-full px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-md transition-colors select-none",children:[S.jsx("i",{className:"fa-solid fa-upload mr-2 select-none"}),"导入数据"]}),S.jsx("input",{ref:T,type:"file",accept:".json",onChange:A,className:"hidden"}),S.jsx("p",{className:"text-xs text-gray-500 select-none",children:"⚠️ 导入会覆盖所有当前数据，建议先导出备份"})]})]})]})]}),r&&S.jsx(VI,{id:`new-${Date.now()}`,name:"",url:"",favicon:"",tags:[],note:"",onClose:()=>s(!1),onSave:C})]})}function EB(){const{currentUser:n,sendVerificationEmail:e,reloadUser:t,logout:r}=As(),[s,o]=P.useState(!1),[l,c]=P.useState(!1);if(!n||n.emailVerified)return null;const h=async()=>{o(!0);try{await e(),alert("✅ 验证邮件已发送！请检查您的邮箱（包括垃圾邮件文件夹）")}catch(y){alert("❌ 发送失败，请稍后重试"),console.error("发送验证邮件失败:",y)}finally{o(!1)}},p=async()=>{c(!0);try{await t(),window.location.reload()}catch(y){console.error("检查验证状态失败:",y)}finally{c(!1)}},g=async()=>{confirm("确定要登出吗？您可以稍后验证邮箱后重新登录。")&&await r()};return S.jsx(_n.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},className:"fixed top-0 left-0 right-0 z-50 bg-orange-500 text-white shadow-lg",children:S.jsx("div",{className:"container mx-auto px-4 py-3",children:S.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[S.jsxs("div",{className:"flex items-center space-x-2",children:[S.jsx("i",{className:"fa-solid fa-envelope-open-text text-xl"}),S.jsxs("div",{children:[S.jsx("p",{className:"font-medium",children:"请验证您的邮箱地址"}),S.jsxs("p",{className:"text-sm text-orange-100",children:["我们已向 ",S.jsx("strong",{children:n.email})," 发送了验证链接"]})]})]}),S.jsxs("div",{className:"flex items-center space-x-2",children:[S.jsx("button",{onClick:h,disabled:s,className:"bg-orange-600 hover:bg-orange-700 disabled:bg-orange-400 px-3 py-1 rounded text-sm transition-colors",children:s?S.jsxs(S.Fragment,{children:[S.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-1"}),"发送中..."]}):S.jsxs(S.Fragment,{children:[S.jsx("i",{className:"fa-solid fa-paper-plane mr-1"}),"重新发送"]})}),S.jsx("button",{onClick:p,disabled:l,className:"bg-green-500 hover:bg-green-600 disabled:bg-green-400 px-3 py-1 rounded text-sm transition-colors",children:l?S.jsxs(S.Fragment,{children:[S.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-1"}),"检查中..."]}):S.jsxs(S.Fragment,{children:[S.jsx("i",{className:"fa-solid fa-check-circle mr-1"}),"已验证"]})}),S.jsxs("button",{onClick:g,className:"bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-sm transition-colors",children:[S.jsx("i",{className:"fa-solid fa-sign-out-alt mr-1"}),"登出"]})]})]})})})}function TB({websites:n,setWebsites:e}){wL();const{parallaxEnabled:t}=cc(),{currentUser:r}=As(),{displayName:s}=$b();gB(n);const{drag:o,drop:l,isDragging:c}=_L(n,e),[h,p]=P.useState("https://bing.img.run/uhd.php"),[g,y]=P.useState(!1),[w,T]=P.useState(!1),[C,R]=P.useState({x:0,y:0}),A=[...n].sort((z,Q)=>{const K=(Q.visitCount||0)-(z.visitCount||0);if(K!==0)return K;const J=new Date(z.lastVisit||"2000-01-01").getTime();return new Date(Q.lastVisit||"2000-01-01").getTime()-J}),O=z=>{e(n.map(Q=>Q.id===z.id?{...Q,...z}:Q))},B=()=>{if(!t||!C.x||!C.y)return"translate(0px, 0px)";const z=window.innerWidth,Q=window.innerHeight,K=20,J=(L,H)=>(L/H*K-K/2).toFixed(1),D=parseFloat(J(C.x,z)),I=parseFloat(J(C.y,Q)),k=D*.3,M=-I*.3;return`translate(${k}px, ${M}px)`};return P.useEffect(()=>{const z=["https://bing.img.run/uhd.php","https://bing.img.run/1920x1080.php","https://bing.img.run/1366x768.php","https://bing.img.run/m.php"],Q=(K=0)=>{if(K>=z.length){p("https://source.unsplash.com/random/1920x1080/?nature");return}const J=new Image;J.src=z[K],J.onload=()=>{y(!0),p(J.src)},J.onerror=()=>{Q(K+1)}};Q()},[]),P.useEffect(()=>{if(!t){R({x:0,y:0});return}const z=Q=>{R({x:Q.clientX,y:Q.clientY})};return window.addEventListener("mousemove",z,{passive:!0}),()=>{window.removeEventListener("mousemove",z)}},[t]),S.jsxs(S.Fragment,{children:[S.jsx(EB,{}),S.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-cover bg-center bg-no-repeat -z-10",style:{backgroundImage:`linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1)), url(${h})`,backgroundSize:"105% 105%",backgroundPosition:"center center",backgroundAttachment:"fixed",transform:B(),transition:"transform 0.1s ease-out"},children:S.jsxs("div",{className:"relative min-h-screen pt-[33vh]",children:[S.jsx(EV,{}),S.jsx("div",{className:"pt-16 pb-8 px-4 max-w-6xl mx-auto",children:S.jsx(_n.div,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-x-3 gap-y-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:A.map(z=>S.jsx(_n.div,{ref:Q=>o(l(Q)),style:{opacity:c?.5:1},layout:!0,transition:{type:"spring",stiffness:350,damping:25},children:S.jsx(wV,{...z,onSave:O,onDelete:Q=>{e(n.filter(K=>K.id!==Q))}})},z.id))})}),w&&S.jsx(wB,{onClose:()=>T(!1),websites:n,setWebsites:e}),r&&r.emailVerified&&S.jsx("div",{className:"fixed top-4 right-4 z-40",children:S.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-3 py-2 flex items-center space-x-2",children:[S.jsx("i",{className:"fa-solid fa-user text-white/80"}),S.jsx("span",{className:"text-white/90 text-sm font-medium",children:s})]})}),S.jsx("div",{className:"fixed bottom-4 right-4 z-[9999]",children:S.jsx("button",{onClick:()=>T(!0),className:"p-2 text-white/70 hover:text-white transition-colors","aria-label":"设置",children:S.jsx("i",{className:"fa-solid fa-sliders text-lg"})})}),S.jsx(TV,{})]})})]})}function Wb(n){let e=null;return()=>(e==null&&(e=n()),e)}function SB(n,e){return n.filter(t=>t!==e)}function xB(n,e){const t=new Set,r=o=>t.add(o);n.forEach(r),e.forEach(r);const s=[];return t.forEach(o=>s.push(o)),s}class IB{enter(e){const t=this.entered.length,r=s=>this.isNodeInDocument(s)&&(!s.contains||s.contains(e));return this.entered=xB(this.entered.filter(r),[e]),t===0&&this.entered.length>0}leave(e){const t=this.entered.length;return this.entered=SB(this.entered.filter(this.isNodeInDocument),e),t>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class CB{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const t={};Object.keys(this.config.exposeProperties).forEach(r=>{const s=this.config.exposeProperties[r];s!=null&&(t[r]={value:s(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const qb="__NATIVE_FILE__",Gb="__NATIVE_URL__",Kb="__NATIVE_TEXT__",Qb="__NATIVE_HTML__",NS=Object.freeze(Object.defineProperty({__proto__:null,FILE:qb,HTML:Qb,TEXT:Kb,URL:Gb},Symbol.toStringTag,{value:"Module"}));function Mm(n,e,t){const r=e.reduce((s,o)=>s||n.getData(o),"");return r??t}const zg={[qb]:{exposeProperties:{files:n=>Array.prototype.slice.call(n.files),items:n=>n.items,dataTransfer:n=>n},matchesTypes:["Files"]},[Qb]:{exposeProperties:{html:(n,e)=>Mm(n,e,""),dataTransfer:n=>n},matchesTypes:["Html","text/html"]},[Gb]:{exposeProperties:{urls:(n,e)=>Mm(n,e,"").split(`
`),dataTransfer:n=>n},matchesTypes:["Url","text/uri-list"]},[Kb]:{exposeProperties:{text:(n,e)=>Mm(n,e,""),dataTransfer:n=>n},matchesTypes:["Text","text/plain"]}};function bB(n,e){const t=zg[n];if(!t)throw new Error(`native type ${n} has no configuration`);const r=new CB(t);return r.loadDataTransfer(e),r}function Lm(n){if(!n)return null;const e=Array.prototype.slice.call(n.types||[]);return Object.keys(zg).filter(t=>{const r=zg[t];return r!=null&&r.matchesTypes?r.matchesTypes.some(s=>e.indexOf(s)>-1):!1})[0]||null}const AB=Wb(()=>/firefox/i.test(navigator.userAgent)),Yb=Wb(()=>!!window.safari);class OS{interpolate(e){const{xs:t,ys:r,c1s:s,c2s:o,c3s:l}=this;let c=t.length-1;if(e===t[c])return r[c];let h=0,p=l.length-1,g;for(;h<=p;){g=Math.floor(.5*(h+p));const T=t[g];if(T<e)h=g+1;else if(T>e)p=g-1;else return r[g]}c=Math.max(0,p);const y=e-t[c],w=y*y;return r[c]+s[c]*y+o[c]*w+l[c]*y*w}constructor(e,t){const{length:r}=e,s=[];for(let T=0;T<r;T++)s.push(T);s.sort((T,C)=>e[T]<e[C]?-1:1);const o=[],l=[];let c,h;for(let T=0;T<r-1;T++)c=e[T+1]-e[T],h=t[T+1]-t[T],o.push(c),l.push(h/c);const p=[l[0]];for(let T=0;T<o.length-1;T++){const C=l[T],R=l[T+1];if(C*R<=0)p.push(0);else{c=o[T];const A=o[T+1],O=c+A;p.push(3*O/((O+A)/C+(O+c)/R))}}p.push(l[l.length-1]);const g=[],y=[];let w;for(let T=0;T<p.length-1;T++){w=l[T];const C=p[T],R=1/o[T],A=C+p[T+1]-w-w;g.push((w-C-A)*R),y.push(A*R*R)}this.xs=e,this.ys=t,this.c1s=p,this.c2s=g,this.c3s=y}}const RB=1;function Xb(n){const e=n.nodeType===RB?n:n.parentElement;if(!e)return null;const{top:t,left:r}=e.getBoundingClientRect();return{x:r,y:t}}function Qd(n){return{x:n.clientX,y:n.clientY}}function PB(n){var e;return n.nodeName==="IMG"&&(AB()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(n)))}function kB(n,e,t,r){let s=n?e.width:t,o=n?e.height:r;return Yb()&&n&&(o/=window.devicePixelRatio,s/=window.devicePixelRatio),{dragPreviewWidth:s,dragPreviewHeight:o}}function DB(n,e,t,r,s){const o=PB(e),c=Xb(o?n:e),h={x:t.x-c.x,y:t.y-c.y},{offsetWidth:p,offsetHeight:g}=n,{anchorX:y,anchorY:w}=r,{dragPreviewWidth:T,dragPreviewHeight:C}=kB(o,e,p,g),R=()=>{let J=new OS([0,.5,1],[h.y,h.y/g*C,h.y+C-g]).interpolate(w);return Yb()&&o&&(J+=(window.devicePixelRatio-1)*C),J},A=()=>new OS([0,.5,1],[h.x,h.x/p*T,h.x+T-p]).interpolate(y),{offsetX:O,offsetY:B}=s,z=O===0||O,Q=B===0||B;return{x:z?O:A(),y:Q?B:R()}}class NB{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}}function OB(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function VS(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),r.forEach(function(s){OB(n,s,t[s])})}return n}class VB{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((t=this.dragOverTargetIds)===null||t===void 0?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var t;(t=this.window)===null||t===void 0||t.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,t,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,r){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,r);const s=l=>this.handleDragStart(l,e),o=l=>this.handleSelectStart(l);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",s),t.addEventListener("selectstart",o),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",s),t.removeEventListener("selectstart",o),t.setAttribute("draggable","false")}}connectDropTarget(e,t){const r=l=>this.handleDragEnter(l,e),s=l=>this.handleDragOver(l,e),o=l=>this.handleDrop(l,e);return t.addEventListener("dragenter",r),t.addEventListener("dragover",s),t.addEventListener("drop",o),()=>{t.removeEventListener("dragenter",r),t.removeEventListener("dragover",s),t.removeEventListener("drop",o)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return VS({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions.get(e);return VS({anchorX:.5,anchorY:.5,captureDraggingState:!1},t||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(NS).some(t=>NS[t]===e)}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=bB(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const t=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var r;return(r=this.rootElement)===null||r===void 0?void 0:r.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},t)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,r){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=s=>{const o=this.sourceNodes.get(s);return o&&Xb(o)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=s=>!!(s&&this.document&&this.document.body&&this.document.body.contains(s)),this.endDragIfSourceWasRemovedFromDOM=()=>{const s=this.currentDragSourceNode;s==null||this.isNodeInDocument(s)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=s=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(s||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=s=>{if(s.defaultPrevented)return;const{dragStartSourceIds:o}=this;this.dragStartSourceIds=null;const l=Qd(s);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(o||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:l});const{dataTransfer:c}=s,h=Lm(c);if(this.monitor.isDragging()){if(c&&typeof c.setDragImage=="function"){const g=this.monitor.getSourceId(),y=this.sourceNodes.get(g),w=this.sourcePreviewNodes.get(g)||y;if(w){const{anchorX:T,anchorY:C,offsetX:R,offsetY:A}=this.getCurrentSourcePreviewNodeOptions(),z=DB(y,w,l,{anchorX:T,anchorY:C},{offsetX:R,offsetY:A});c.setDragImage(w,z.x,z.y)}}try{c==null||c.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(s.target);const{captureDraggingState:p}=this.getCurrentSourcePreviewNodeOptions();p?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(h)this.beginDragNativeItem(h);else{if(c&&!c.types&&(s.target&&!s.target.hasAttribute||!s.target.hasAttribute("draggable")))return;s.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=s=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(s.dataTransfer)}if(!this.enterLeaveCounter.enter(s.target)||this.monitor.isDragging())return;const{dataTransfer:c}=s,h=Lm(c);h&&this.beginDragNativeItem(h,c)},this.handleTopDragEnter=s=>{const{dragEnterTargetIds:o}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=s.altKey,o.length>0&&this.actions.hover(o,{clientOffset:Qd(s)}),o.some(c=>this.monitor.canDropOnTarget(c))&&(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=s=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(s.dataTransfer)}},this.handleTopDragOver=s=>{const{dragOverTargetIds:o}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="none");return}this.altKeyPressed=s.altKey,this.lastClientOffset=Qd(s),this.scheduleHover(o),(o||[]).some(c=>this.monitor.canDropOnTarget(c))?(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?s.preventDefault():(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=s=>{this.isDraggingNativeItem()&&s.preventDefault(),this.enterLeaveCounter.leave(s.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=s=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var o;s.preventDefault(),(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(s.dataTransfer)}else Lm(s.dataTransfer)&&s.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=s=>{const{dropTargetIds:o}=this;this.dropTargetIds=[],this.actions.hover(o,{clientOffset:Qd(s)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=s=>{const o=s.target;typeof o.dragDrop=="function"&&(o.tagName==="INPUT"||o.tagName==="SELECT"||o.tagName==="TEXTAREA"||o.isContentEditable||(s.preventDefault(),o.dragDrop()))},this.options=new NB(t,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new IB(this.isNodeInDocument)}}const MB=function(e,t,r){return new VB(e,t,r)},MS=[{id:"1",name:"GitHub",url:"https://github.com",favicon:"https://github.githubassets.com/favicons/favicon.png",tags:["开发","代码"],visitCount:42,lastVisit:"2023-05-15",note:"看代码的平台"},{id:"2",name:"Dribbble",url:"https://dribbble.com",favicon:"https://cdn.dribbble.com/assets/favicon-b38525134603b9513174e916967b4baaaaaa5ee0297c4f53d6fb3ab8ad26c3a4.ico",tags:["设计","灵感"],visitCount:28,lastVisit:"2023-05-10",note:"设计灵感来源"},{id:"3",name:"Medium",url:"https://medium.com",favicon:"https://miro.medium.com/v2/resize:fill:32:32/1*sHhtYhaCe2Uc3IU0IgKwIQ.png",tags:["文章","学习"],visitCount:15,lastVisit:"2023-05-05",note:"阅读技术文章"}];function LB({isOpen:n,onClose:e,localWebsites:t,cloudWebsites:r,onChoice:s}){const[o,l]=P.useState(!1);if(!n)return null;const c=async h=>{l(!0);try{await s(h),e()}catch(p){console.error("处理数据同步失败:",p)}finally{l(!1)}};return S.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[S.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:e}),S.jsxs(_n.div,{className:"w-96 bg-white rounded-xl shadow-2xl z-50 max-h-[80vh] flex flex-col",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20,stiffness:300},children:[S.jsx("div",{className:"p-6 pb-0",children:S.jsxs("div",{className:"flex justify-between items-center mb-4",children:[S.jsx("h2",{className:"text-xl font-medium text-gray-800",children:"数据同步选择"}),S.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",disabled:o,children:S.jsx("i",{className:"fa-solid fa-xmark text-lg"})})]})}),S.jsxs("div",{className:"flex-1 px-6 py-2 pb-6 space-y-4 overflow-y-auto",children:[S.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:S.jsxs("p",{className:"text-sm text-blue-800 mb-2",children:[S.jsx("i",{className:"fa-solid fa-info-circle mr-2"}),"检测到您有本地数据和云端数据，请选择如何处理："]})}),S.jsxs("div",{className:"space-y-3",children:[S.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[S.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:[S.jsx("i",{className:"fa-solid fa-computer mr-2"}),"本地数据"]}),S.jsxs("p",{className:"text-xs text-gray-600",children:[t.length," 个网站卡片"]})]}),S.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[S.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:[S.jsx("i",{className:"fa-solid fa-cloud mr-2"}),"云端数据"]}),S.jsxs("p",{className:"text-xs text-gray-600",children:[r.length," 个网站卡片"]})]})]}),S.jsxs("div",{className:"space-y-3 pt-4",children:[S.jsx("button",{onClick:()=>c("cloud"),disabled:o,className:"w-full p-4 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded-lg transition-colors text-left",children:S.jsxs("div",{className:"flex items-start space-x-3",children:[S.jsx("i",{className:"fa-solid fa-cloud-arrow-down text-lg mt-1"}),S.jsxs("div",{children:[S.jsx("div",{className:"font-medium",children:"使用云端数据"}),S.jsx("div",{className:"text-xs text-blue-100",children:"本地数据将被云端数据覆盖"})]})]})}),S.jsx("button",{onClick:()=>c("local"),disabled:o,className:"w-full p-4 bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white rounded-lg transition-colors text-left",children:S.jsxs("div",{className:"flex items-start space-x-3",children:[S.jsx("i",{className:"fa-solid fa-cloud-arrow-up text-lg mt-1"}),S.jsxs("div",{children:[S.jsx("div",{className:"font-medium",children:"使用本地数据"}),S.jsx("div",{className:"text-xs text-green-100",children:"本地数据将同步到云端，覆盖云端数据"})]})]})}),S.jsx("button",{onClick:()=>c("merge"),disabled:o,className:"w-full p-4 bg-purple-500 hover:bg-purple-600 disabled:bg-gray-400 text-white rounded-lg transition-colors text-left",children:S.jsxs("div",{className:"flex items-start space-x-3",children:[S.jsx("i",{className:"fa-solid fa-code-merge text-lg mt-1"}),S.jsxs("div",{children:[S.jsx("div",{className:"font-medium",children:"智能合并"}),S.jsx("div",{className:"text-xs text-purple-100",children:"保留访问次数更高的网站卡片，去除重复项"})]})]})})]}),o&&S.jsxs("div",{className:"flex items-center justify-center py-4",children:[S.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-2"}),S.jsx("span",{className:"text-sm text-gray-600",children:"处理中..."})]})]})]})]})}function jB(){const{currentUser:n}=As(),[e,t]=P.useState({cloudWebsites:null,cloudSettings:null,loading:!1,error:null}),r=async()=>{if(!n||!n.emailVerified){t(o=>({...o,error:"需要登录且验证邮箱才能加载云端数据",loading:!1}));return}t(o=>({...o,loading:!0,error:null}));try{const[o,l]=await Promise.all([dB(n),cB(n)]);t({cloudWebsites:o,cloudSettings:l,loading:!1,error:null}),console.log("✅ 云端数据加载完成:",{websites:(o==null?void 0:o.length)||0,hasSettings:!!l})}catch(o){t(l=>({...l,loading:!1,error:"加载云端数据失败: "+o.message})),console.error("❌ 加载云端数据失败:",o)}},s=o=>e.cloudWebsites?hB(o,e.cloudWebsites):o;return P.useEffect(()=>{n&&n.emailVerified?r():t({cloudWebsites:null,cloudSettings:null,loading:!1,error:null})},[n]),{...e,loadCloudData:r,mergeWithLocalData:s,hasCloudData:!!e.cloudWebsites||!!e.cloudSettings}}const FB=()=>{P.useEffect(()=>{document.title="jiang_ai_web";const n=()=>{document.hidden?document.title="😭你就要离开我了吗":document.title="jiang_ai_web"};return document.addEventListener("visibilitychange",n),()=>{document.removeEventListener("visibilitychange",n)}},[])};function UB(){FB();const{currentUser:n}=As(),{cloudWebsites:e,hasCloudData:t,mergeWithLocalData:r}=jB(),[s,o]=P.useState(()=>{const y=localStorage.getItem("websites");if(y)try{return JSON.parse(y)}catch{return MS}return MS}),[l,c]=P.useState(!1),[h,p]=P.useState(!1);P.useEffect(()=>{localStorage.setItem("websites",JSON.stringify(s))},[s]),P.useEffect(()=>{if(n&&n.emailVerified&&t&&e&&!h){const y=s.length,w=e.length;y>0&&w>0&&y!==w?c(!0):(w>0&&y===0&&o(e),p(!0))}},[n,t,e,s.length,h]);const g=async y=>{if(!(!n||!e))try{let w=[];switch(y){case"cloud":w=e,o(w);break;case"local":w=s,await $g(n,w);break;case"merge":w=r(s),o(w),await $g(n,w);break}p(!0),console.log(`✅ 数据同步完成 (${y}):`,w.length,"个网站")}catch(w){console.error("❌ 数据同步失败:",w)}};return S.jsxs(S.Fragment,{children:[S.jsx(eP,{children:S.jsx(QS,{path:"/",element:S.jsx(TB,{websites:s,setWebsites:o})})}),l&&e&&S.jsx(LB,{isOpen:l,onClose:()=>{c(!1),p(!0)},localWebsites:s,cloudWebsites:e,onChoice:g})]})}function BB(){return S.jsx(lB,{children:S.jsx(pB,{children:S.jsx(mB,{children:S.jsx(_V,{children:S.jsx(FM,{backend:MB,children:S.jsx(UB,{})})})})})})}const $B=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",zB=$B?void 0:"/jiang_ai_web";lR.createRoot(document.getElementById("root")).render(S.jsx(P.StrictMode,{children:S.jsxs(xP,{basename:zB,children:[S.jsx(BB,{}),S.jsx(lk,{})]})}));
