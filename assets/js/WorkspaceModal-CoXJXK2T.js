var $=(s,n,m)=>new Promise((h,d)=>{var l=c=>{try{x(m.next(c))}catch(f){d(f)}},w=c=>{try{x(m.throw(c))}catch(f){d(f)}},x=c=>c.done?h(c.value):Promise.resolve(c.value).then(l,w);x((m=m.apply(s,n)).next())});import{j as e,m as v,A,L as V}from"./ui-vendor-ZFeOVBt2.js";import{r as j}from"./router-vendor-C8QFrNcQ.js";import{j as R,k as L}from"./index-CiAu4rh6.js";import"./react-vendor-DKqf9w2B.js";function M({isEnabled:s=!0,onEscape:n}={}){const{filteredItems:m,focusedItemIndex:h,setFocusedItemIndex:d,openItem:l,selectedCategory:w,setSelectedCategory:x,categories:c,searchQuery:f,setSearchQuery:r,clearFilters:g}=R(),i={CATEGORIES:"categories",SEARCH:"search",VIEW_SWITCHER:"view-switcher",ITEMS:"items"},p=()=>{const t=document.activeElement;return t!=null&&t.closest(".category-tabs")?i.CATEGORIES:t!=null&&t.closest(".view-switcher")?i.VIEW_SWITCHER:t!=null&&t.closest(".search-bar")||(t==null?void 0:t.tagName)==="INPUT"?i.SEARCH:h>=0?i.ITEMS:null},y=t=>{const o=document.querySelectorAll(".category-tab-button");o[t]&&o[t].focus()},I=()=>{const t=document.querySelector(".search-bar input");t==null||t.focus()},T=()=>{const t=window.innerWidth;let o=2;t>=1536?o=6:t>=1280?o=5:t>=1024?o=4:t>=768?o=3:o=2;const N=Math.ceil(m.length/o);return{cols:o,rows:N}},C=()=>document.querySelector(".list-view")?"list":"card",S=(t,o)=>{switch(o){case"up":return Math.max(0,t-1);case"down":return Math.min(m.length-1,t+1);default:return t}},E=(t,o)=>{const{cols:N}=T(),b=Math.floor(t/N),u=t%N;switch(o){case"up":return b>0?(b-1)*N+u:-1;case"down":const D=(b+1)*N+u;return D<m.length?D:t;case"left":return u>0?t-1:t;case"right":return u<N-1&&t+1<m.length?t+1:t;default:return t}},k=j.useCallback(t=>{if(!s)return;const o=p(),N=document.activeElement;if(t.key==="ArrowLeft"||t.key==="ArrowRight"){if(o===i.SEARCH||o===i.CATEGORIES||o===i.VIEW_SWITCHER)return;if(o===i.ITEMS&&(t.preventDefault(),C()==="card")){if(t.key==="ArrowLeft"){const u=E(h,"left");d(u)}else if(t.key==="ArrowRight"){const u=E(h,"right");d(u)}}return}switch(t.key){case"ArrowDown":if(o===i.CATEGORIES)t.preventDefault(),I();else if(o===i.SEARCH||o===i.VIEW_SWITCHER){if(t.preventDefault(),o===i.SEARCH){const b=document.querySelector(".search-bar input");b==null||b.blur()}m.length>0&&d(0)}else if(o===i.ITEMS)if(t.preventDefault(),C()==="list"){const u=S(h,"down");d(u)}else{const u=E(h,"down");d(u)}break;case"ArrowUp":if(o===i.SEARCH){t.preventDefault();const b=c.findIndex(u=>u.name===w);y(b>=0?b:0)}else if(o===i.ITEMS)if(t.preventDefault(),C()==="list"){const u=S(h,"up");h===0?(I(),d(-1)):d(u)}else{const u=E(h,"up");u===-1?(I(),d(-1)):d(u)}break;case"Enter":o===i.ITEMS&&h>=0&&(t.preventDefault(),l(m[h]));break;case" ":o!==i.SEARCH&&!(N!=null&&N.tagName.match(/INPUT|TEXTAREA|BUTTON/))&&(t.preventDefault(),I());break;case"Escape":t.preventDefault(),f?r(""):h>=0?d(-1):n&&n();break;default:if(/^[0-9]$/.test(t.key)&&!(N!=null&&N.tagName.match(/INPUT|TEXTAREA/))){t.preventDefault();const b=parseInt(t.key),u=b===0?0:b;if(u<c.length){x(c[u].name);const D=document.querySelectorAll(".category-tab-button")[u];D&&D.focus()}}break}},[s,m,h,d,l,w,x,c,f,r,n]);return j.useEffect(()=>{if(s)return document.addEventListener("keydown",k),()=>{document.removeEventListener("keydown",k)}},[k,s]),{shortcuts:{navigation:[{key:"‚Üê‚Üí",description:"ÂØºËà™ÂàáÊç¢"},{key:"‚Üë‚Üì",description:"‰∏ä‰∏ãÂØºËà™"},{key:"Enter",description:"ÊâìÂºÄ/Á°ÆËÆ§"},{key:"Space",description:"ËÅöÁÑ¶ÊêúÁ¥¢"},{key:"Esc",description:"Ê∏ÖÈô§/ËøîÂõû"}],categories:c.map((t,o)=>({key:o.toString(),description:t.name==="all"?"ÂÖ®ÈÉ®":t.name}))},focusedItem:h>=0?m[h]:null}}function H({className:s=""}){const{categories:n,selectedCategory:m,setSelectedCategory:h,setFocusedItemIndex:d}=R(),[l,w]=j.useState(0),x=j.useRef([]);j.useEffect(()=>{const r=n.findIndex(g=>g.name===m);r>=0&&w(r)},[m,n]);const c=(r,g)=>{h(r),w(g),d(-1)},f=(r,g)=>{switch(r.key){case"Enter":case" ":r.preventDefault(),c(n[g].name,g);break;case"ArrowLeft":if(r.preventDefault(),r.stopPropagation(),l>0){const p=l-1;h(n[p].name),w(p),d(-1),setTimeout(()=>{var y;(y=x.current[p])==null||y.focus()},0)}break;case"ArrowRight":if(r.preventDefault(),r.stopPropagation(),l<n.length-1){const p=l+1;h(n[p].name),w(p),d(-1),setTimeout(()=>{var y;(y=x.current[p])==null||y.focus()},0)}break;case"ArrowDown":r.preventDefault(),r.stopPropagation();const i=document.querySelector(".search-bar input");i&&i.focus();break}};return e.jsx("div",{className:`category-tabs ${s}`,children:e.jsx("div",{className:"flex flex-wrap gap-2 p-4 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 select-none",style:{userSelect:"none"},children:n.map((r,g)=>{const i=l===g,p=r.name==="all"?"ÂÖ®ÈÉ®":r.name;return e.jsxs(v.button,{ref:y=>x.current[g]=y,onClick:()=>c(r.name,g),onKeyDown:y=>f(y,g),className:`category-tab-button relative flex items-center gap-2 px-3 py-2 rounded-xl font-medium transition-all duration-200 focus:outline-none overflow-hidden
                ${i?"ring-2 ring-blue-300 ring-offset-1":""}
              `,whileHover:{scale:1.02},whileTap:{scale:.98},tabIndex:0,children:[i&&e.jsx(v.div,{className:"absolute inset-0 bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl",layoutId:"activeTab",initial:!1,transition:{type:"spring",stiffness:150,damping:25,mass:1}}),e.jsxs("div",{className:`relative z-10 flex items-center gap-2 ${i?"text-white":"text-gray-600"}`,children:[e.jsx("span",{className:"text-base",children:r.icon}),e.jsx("span",{className:"text-sm font-medium",children:p}),e.jsx("span",{className:`
                    inline-flex items-center justify-center min-w-[20px] h-5 px-1.5 text-xs font-bold rounded-full
                    ${i?"bg-white/20 text-white":"bg-gradient-to-r from-gray-100 to-gray-50 text-gray-600"}
                  `,children:r.count})]}),!i&&e.jsx("div",{className:"absolute inset-0 bg-white border border-gray-200 rounded-xl hover:bg-gray-50 hover:border-gray-300 transition-colors"})]},r.name)})})})}function F({className:s="",placeholder:n="ÊêúÁ¥¢Â∑•‰ΩúÁ©∫Èó¥ÈìæÊé•..."}){const{searchQuery:m,setSearchQuery:h,setFocusedItemIndex:d,searchSuggestions:l,openItem:w,workspaceItems:x}=R(),[c,f]=j.useState(!1),[r,g]=j.useState(!1),[i,p]=j.useState(-1),y=j.useRef(null),I=j.useRef(null);j.useEffect(()=>{const t=setTimeout(()=>{document.querySelector("[data-workspace-modal]")&&y.current&&y.current.focus()},500);return()=>clearTimeout(t)},[]),j.useEffect(()=>{const t=o=>{var N;if(o.code==="Space"&&o.target!==y.current){const b=document.activeElement;b&&(b.tagName==="INPUT"||b.tagName==="TEXTAREA"||b.isContentEditable)||(o.preventDefault(),(N=y.current)==null||N.focus())}};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[]),j.useEffect(()=>{g(c&&l.length>0&&m.trim().length>0),p(-1)},[l,c,m]),j.useEffect(()=>{const t=o=>{I.current&&!I.current.contains(o.target)&&y.current&&!y.current.contains(o.target)&&g(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const T=t=>{h(t),d(-1)},C=t=>{var o;switch(t.key){case"Escape":t.preventDefault(),r?(g(!1),p(-1)):m?h(""):(o=y.current)==null||o.blur();break;case"ArrowDown":r&&(t.preventDefault(),p(b=>b<l.length-1?b+1:b));break;case"ArrowUp":r&&(t.preventDefault(),p(b=>b>0?b-1:-1));break;case"Enter":r&&i>=0&&(t.preventDefault(),S(l[i]));break;case"ArrowRight":const N=y.current;if(N&&N.selectionStart===N.value.length){t.preventDefault();const b=document.querySelector(".view-switcher-button");b&&b.focus()}break}},S=t=>{const o=x.find(N=>N.id===t.id);o&&(w(o),g(!1),h(""))},E=()=>{var t;h(""),d(-1),(t=y.current)==null||t.focus()},k=(t,o)=>{if(!o.trim())return t;const N=new RegExp(`(${o})`,"gi");return t.split(N).map((u,D)=>N.test(u)?e.jsx("mark",{className:"bg-blue-100 text-blue-900 px-0.5 rounded font-semibold",children:u},D):u)},a=t=>{switch(t){case"Â∑•‰ΩúÈìæÊé•":return"üè¢";case"Â∑•ÂÖ∑ÈìæÊé•":return"üõ†Ô∏è";default:return"üìÅ"}};return e.jsxs("div",{className:`search-bar relative ${s}`,children:[e.jsxs(v.div,{className:"relative",animate:{scale:c?1.02:1},transition:{type:"spring",stiffness:200,damping:20},children:[e.jsx(v.div,{className:"absolute inset-0 border-2 border-blue-500 rounded-xl pointer-events-none",initial:{opacity:0},animate:{opacity:c?1:0,boxShadow:c?"0 0 20px rgba(59, 130, 246, 0.3)":"0 0 0 rgba(59, 130, 246, 0)"},transition:{type:"spring",stiffness:300,damping:30},style:{zIndex:1}}),e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:e.jsx("i",{className:"fa-solid fa-search text-sm"})}),e.jsx("input",{ref:y,type:"text",value:m,onChange:t=>T(t.target.value),onKeyDown:C,onFocus:()=>f(!0),onBlur:()=>f(!1),placeholder:n,className:`
            w-full pl-10 pr-12 py-3 border rounded-xl text-sm transition-colors duration-200
            focus:outline-none
            ${c?"border-transparent bg-white":"border-gray-200 bg-gray-50 hover:bg-white hover:border-gray-300"}
          `}),m&&e.jsx(v.button,{onClick:E,className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors",title:"Ê∏ÖÈô§ÊêúÁ¥¢ (Esc)",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},children:e.jsx("i",{className:"fa-solid fa-times text-xs leading-none"})})]}),e.jsx(A,{children:r&&e.jsxs(v.div,{ref:I,className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-xl border border-gray-200 overflow-hidden",style:{zIndex:9999},initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[e.jsx("div",{className:"px-4 py-2 bg-gradient-to-r from-blue-50 to-purple-50 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs font-semibold text-gray-600 flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-briefcase text-blue-500"}),"Â∑•‰ΩúÁ©∫Èó¥ÊêúÁ¥¢ÁªìÊûú"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[l.length," ‰∏™ÂåπÈÖçÈ°π"]})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:l.map((t,o)=>e.jsxs(v.div,{className:`
                    px-4 py-3 hover:bg-blue-50 cursor-pointer border-b border-gray-50 last:border-0
                    transition-colors duration-150
                    ${i===o?"bg-blue-50":""}
                  `,onClick:()=>S(t),onMouseEnter:()=>p(o),whileHover:{x:2},transition:{type:"spring",stiffness:300,damping:30},children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:k(t.title,m)}),t.hasCredentials&&e.jsxs("span",{className:"px-1.5 py-0.5 bg-green-100 text-green-700 text-xs rounded-full flex items-center gap-0.5",children:[e.jsx("i",{className:"fa-solid fa-key text-xs"}),e.jsx("span",{children:"ÁôªÂΩï"})]})]}),t.description&&e.jsx("p",{className:"text-xs text-gray-600 line-clamp-1 mb-1",children:k(t.description,m)}),e.jsx("p",{className:"text-xs text-gray-400 truncate",children:k(t.url,m)})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("span",{className:`
                        inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium
                        ${t.category==="Â∑•‰ΩúÈìæÊé•"?"bg-blue-100 text-blue-700":"bg-orange-100 text-orange-700"}
                      `,children:[e.jsx("span",{className:"mr-1",children:a(t.category)}),t.category]})})]}),i===o&&e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs",children:"Enter"}),"ÊâìÂºÄÈìæÊé•"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs",children:"Esc"}),"ÂÖ≥Èó≠Âª∫ËÆÆ"]})]})]},t.id))}),e.jsx("div",{className:"px-4 py-2 bg-gray-50 border-t border-gray-100",children:e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["‰ΩøÁî® ",e.jsx("kbd",{className:"px-1 py-0.5 bg-gray-100 rounded text-xs",children:"‚Üë‚Üì"})," ÂØºËà™Ôºå",e.jsx("kbd",{className:"px-1 py-0.5 bg-gray-100 rounded text-xs",children:"Enter"})," ÊâìÂºÄ"]})})]})})]})}function K({className:s=""}){const{viewType:n,setViewType:m,filteredItems:h}=R(),d=[{type:"list",icon:"fa-list",label:"ÂàóË°®ËßÜÂõæ",description:"ËØ¶ÁªÜ‰ø°ÊÅØÔºåÊòì‰∫éÊâ´Êèè"},{type:"card",icon:"fa-grid",label:"Âç°ÁâáËßÜÂõæ",description:"ËßÜËßâÂåñÊµèËßà"}],l=x=>{m(x)},w=(x,c,f)=>{switch(x.key){case"Enter":case" ":x.preventDefault(),c();break;case"ArrowLeft":if(x.preventDefault(),f===0){const r=document.querySelector(".search-bar input");r&&r.focus()}else{const r=document.querySelectorAll(".view-switcher-button");r[f-1]&&r[f-1].focus()}break;case"ArrowRight":if(x.preventDefault(),f<d.length-1){const r=document.querySelectorAll(".view-switcher-button");r[f+1]&&r[f+1].focus()}break}};return e.jsxs("div",{className:`view-switcher flex items-center space-x-4 select-none ${s}`,style:{userSelect:"none"},children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:h.length})," ‰∏™È°πÁõÆ"]}),e.jsx("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:d.map((x,c)=>e.jsxs(v.button,{onClick:()=>l(x.type),onKeyDown:f=>w(f,()=>l(x.type),c),className:`
              view-switcher-button relative flex items-center space-x-2 px-3 py-1.5 rounded-md text-sm font-medium transition-all
              focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1
              ${n===x.type?"text-blue-700 bg-white shadow-sm border border-blue-100":"text-gray-600 hover:text-gray-900"}
            `,whileHover:{scale:1.02},whileTap:{scale:.98},title:`${x.label} - ${x.description}`,children:[e.jsx("i",{className:`fa-solid ${x.icon} text-xs`}),e.jsx("span",{className:"hidden sm:inline",children:x.label})]},x.type))})]})}function U({item:s,index:n,isFocused:m,searchQuery:h=""}){const{openItem:d,copyItemUrl:l,copyItemCredentials:w,setFocusedItemIndex:x}=R(),[c,f]=j.useState(!1),[r,g]=j.useState(null),i=j.useRef(null);j.useEffect(()=>{m&&i.current&&i.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[m]);const p=()=>{const a=["bg-blue-500","bg-green-500","bg-purple-500","bg-red-500","bg-yellow-500","bg-indigo-500","bg-pink-500","bg-teal-500"];return a[s.title.charCodeAt(0)%a.length]},y=(a,t)=>{if(!t.trim())return a;const o=new RegExp(`(${t})`,"gi");return a.split(o).map((b,u)=>o.test(b)?e.jsx("mark",{className:"bg-yellow-200 text-yellow-900 px-0.5 rounded",children:b},u):b)},I=s.username||s.password,T=()=>{x(n),d(s)},C=a=>{switch(a.key){case"Enter":a.preventDefault(),d(s);break;case"c":case"C":!a.ctrlKey&&!a.metaKey&&(a.preventDefault(),S());break;case"d":case"D":a.preventDefault(),f(!c);break;case" ":a.preventDefault(),f(!c);break}},S=()=>$(null,null,function*(){yield l(s),k("ÈìæÊé•Â∑≤Â§çÂà∂")}),E=a=>$(null,null,function*(){yield w(s,a),k(`${a==="username"?"Ë¥¶Âè∑":"ÂØÜÁ†Å"}Â∑≤Â§çÂà∂`)}),k=a=>{g(a),setTimeout(()=>g(null),2e3)};return e.jsxs(v.div,{ref:i,className:`
        relative group cursor-pointer select-none
        bg-white rounded-xl p-4
        transition-all duration-200
        border border-gray-200 hover:border-gray-300
      `,style:{userSelect:"none"},onClick:T,onKeyDown:C,tabIndex:0,initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{duration:.3,delay:n*.05,ease:[.4,0,.2,1]}},children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`w-12 h-12 rounded-xl ${p()} flex items-center justify-center shadow-lg transform transition-transform group-hover:scale-105`,children:e.jsx("span",{className:"text-white font-bold text-lg",children:s.title.charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 truncate",children:y(s.title,h)}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsxs("span",{className:`
                  inline-flex items-center px-2 py-1 rounded-full text-xs font-medium
                  ${s.category==="Â∑•‰ΩúÈìæÊé•"?"bg-blue-100 text-blue-700":"bg-orange-100 text-orange-700"}
                `,children:[s.category==="Â∑•‰ΩúÈìæÊé•"?"üè¢":"üõ†Ô∏è"," ",s.category]}),I&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:"üîê ÊúâÁôªÂΩï‰ø°ÊÅØ"})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:a=>{a.stopPropagation(),S()},className:"p-1.5 text-gray-400 hover:text-gray-600 rounded-lg transition-colors",title:"Â§çÂà∂ÈìæÊé• (C)",children:e.jsx("i",{className:"fa-solid fa-copy text-xs"})}),I&&e.jsx("button",{onClick:a=>{a.stopPropagation(),f(!c)},className:"p-1.5 text-gray-400 hover:text-gray-600 rounded-lg transition-colors",title:"ÊòæÁ§∫ÁôªÂΩï‰ø°ÊÅØ (D)",children:e.jsx("i",{className:`fa-solid ${c?"fa-eye-slash":"fa-eye"} text-xs`})}),e.jsx("button",{onClick:a=>{a.stopPropagation(),d(s)},className:"p-1.5 text-blue-500 hover:text-blue-600 rounded-lg transition-colors",title:"ÊâìÂºÄÈìæÊé• (Enter)",children:e.jsx("i",{className:"fa-solid fa-external-link-alt text-xs"})})]})]}),e.jsx("div",{className:"mb-2",children:e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",onClick:a=>a.stopPropagation(),className:"text-sm text-blue-600 hover:text-blue-700 hover:underline truncate block select-text",style:{userSelect:"text"},children:y(s.url,h)})}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 leading-relaxed",children:y(s.description,h)}),c&&I&&e.jsx(v.div,{className:"mt-3 p-3 bg-gray-50 rounded-lg border border-gray-200",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:e.jsxs("div",{className:"space-y-2",children:[s.username&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"fa-solid fa-user text-blue-600 text-sm"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ë¥¶Âè∑:"}),e.jsx("code",{className:"text-sm text-gray-900 bg-white px-2 py-1 rounded border select-text",style:{userSelect:"text"},children:s.username})]}),e.jsx("button",{onClick:a=>{a.stopPropagation(),E("username")},className:"p-1 text-gray-400 hover:text-gray-600 rounded transition-colors",title:"Â§çÂà∂Ë¥¶Âè∑",children:e.jsx("i",{className:"fa-solid fa-copy text-xs"})})]}),s.password&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"fa-solid fa-key text-amber-600 text-sm"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"ÂØÜÁ†Å:"}),e.jsx("code",{className:"text-sm text-gray-900 bg-white px-2 py-1 rounded border select-text",style:{userSelect:"text"},children:"‚óè".repeat(Math.min(s.password.length,12))})]}),e.jsx("button",{onClick:a=>{a.stopPropagation(),E("password")},className:"p-1 text-gray-400 hover:text-gray-600 rounded transition-colors",title:"Â§çÂà∂ÂØÜÁ†Å",children:e.jsx("i",{className:"fa-solid fa-copy text-xs"})})]})]})})]})]}),r&&e.jsx(v.div,{className:"absolute top-2 right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-lg shadow-lg",initial:{opacity:0,scale:.8,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-10},children:r})]})}function P({message:s="Ê≠£Âú®Âä†ËΩΩ..."}){return e.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[e.jsxs("div",{className:"relative",children:[e.jsx(v.div,{className:"absolute inset-0 rounded-full border-4 border-blue-200",animate:{rotate:360},transition:{duration:3,repeat:1/0,ease:"linear"},children:e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-2 h-2 bg-blue-500 rounded-full"})}),e.jsx(v.div,{className:"w-16 h-16 rounded-full border-4 border-purple-200",animate:{rotate:-360},transition:{duration:2,repeat:1/0,ease:"linear"},children:e.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-2 h-2 bg-purple-500 rounded-full"})}),e.jsx(v.div,{className:"absolute inset-0 flex items-center justify-center",animate:{scale:[1,1.2,1]},transition:{duration:1.5,repeat:1/0},children:e.jsx("div",{className:"w-4 h-4 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full"})})]}),e.jsx(v.p,{className:"text-gray-600 text-sm mt-6 font-medium",animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},children:s})]})}function B({className:s=""}){const{filteredItems:n,isLoading:m,error:h,focusedItemIndex:d,searchQuery:l,setSearchQuery:w}=R(),[x,c]=j.useState({y:0,height:0}),f=j.useRef([]);return j.useEffect(()=>{if(d>=0&&f.current[d]){const r=f.current[d];if(r){const g=r.closest(".list-items-container");if(g){const i=r.getBoundingClientRect(),p=g.getBoundingClientRect();c({y:i.top-p.top,height:r.offsetHeight})}}}},[d,n,l]),m?e.jsx("div",{className:`list-view ${s}`,children:e.jsx(P,{message:"Ê≠£Âú®Âä†ËΩΩÂ∑•‰ΩúÁ©∫Èó¥Êï∞ÊçÆ..."})}):h?e.jsx("div",{className:`list-view ${s}`,children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:e.jsx("i",{className:"fa-solid fa-exclamation-triangle text-red-500 text-xl"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Âä†ËΩΩÂ§±Ë¥•"}),e.jsx("p",{className:"text-gray-500 text-sm text-center max-w-md",children:h})]})}):n.length===0?e.jsx("div",{className:`list-view ${s}`,children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:l?e.jsx("i",{className:"fa-solid fa-search text-gray-400 text-xl"}):e.jsx("i",{className:"fa-solid fa-folder-open text-gray-400 text-xl"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:l?"Ê≤°ÊúâÊâæÂà∞ÂåπÈÖçÁöÑÈ°πÁõÆ":"Â∑•‰ΩúÁ©∫Èó¥‰∏∫Á©∫"}),e.jsx("p",{className:"text-gray-500 text-sm text-center max-w-md",children:l?`Ê≤°ÊúâÊâæÂà∞ÂåÖÂê´ "${l}" ÁöÑÈ°πÁõÆÔºåÂ∞ùËØï‰ΩøÁî®ÂÖ∂‰ªñÂÖ≥ÈîÆËØçÊêúÁ¥¢`:"ËøòÊ≤°Êúâ‰ªª‰ΩïÂ∑•‰ΩúÁ©∫Èó¥È°πÁõÆÔºåËØ∑ÂÖà‰ªé Notion ÂêåÊ≠•Êï∞ÊçÆ"}),l&&e.jsx("button",{onClick:()=>{w("")},className:"mt-4 px-4 py-2 text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Ê∏ÖÈô§ÊêúÁ¥¢Êù°‰ª∂"})]})}):e.jsx("div",{className:`list-view h-full select-none ${s}`,style:{userSelect:"none"},children:e.jsx("div",{className:"h-full overflow-y-auto overflow-x-hidden scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent hover:scrollbar-thumb-gray-400 list-container",style:{scrollBehavior:"smooth",WebkitOverflowScrolling:"touch"},children:e.jsxs("div",{className:"relative space-y-1 p-4 min-h-full",children:[n.length>0&&l&&e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"text-sm text-gray-600",children:['ÊêúÁ¥¢ "',e.jsx("span",{className:"font-medium text-gray-900",children:l}),'" ÁöÑÁªìÊûú']})}),e.jsxs("div",{className:"relative list-items-container",children:[d>=0&&e.jsx(v.div,{className:"absolute left-0 right-0 border-2 border-blue-500 rounded-xl pointer-events-none shadow-lg shadow-blue-500/20 bg-blue-50/10",animate:{y:x.y,height:x.height},initial:!1,transition:{type:"spring",stiffness:150,damping:25,mass:1},style:{zIndex:1}}),e.jsx(V,{children:e.jsx("div",{className:"space-y-2",children:n.map((r,g)=>e.jsx("div",{ref:i=>f.current[g]=i,className:"relative",children:e.jsx(U,{item:r,index:g,isFocused:d===g,searchQuery:l})},r.id))})})]}),n.length>0&&e.jsx("div",{className:"mt-8 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"text-center text-sm text-gray-500",children:["ÂÖ± ",n.length," ‰∏™È°πÁõÆ"]})})]})})})}function W({item:s,index:n,isFocused:m,searchQuery:h=""}){const{openItem:d,copyItemUrl:l,copyItemCredentials:w,setFocusedItemIndex:x}=R(),[c,f]=j.useState(!1),[r,g]=j.useState(null),i=j.useRef(null);j.useEffect(()=>{m&&i.current&&i.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[m]);const p=()=>{const a=["bg-blue-500","bg-green-500","bg-purple-500","bg-red-500","bg-yellow-500","bg-indigo-500","bg-pink-500","bg-teal-500"];return a[s.title.charCodeAt(0)%a.length]},y=(a,t)=>{if(!t.trim())return a;const o=new RegExp(`(${t})`,"gi");return a.split(o).map((b,u)=>o.test(b)?e.jsx("mark",{className:"bg-yellow-200 text-yellow-900 px-0.5 rounded",children:b},u):b)},I=s.username||s.password,T=()=>{x(n),d(s)},C=a=>{switch(a.key){case"Enter":a.preventDefault(),d(s);break;case"c":case"C":!a.ctrlKey&&!a.metaKey&&(a.preventDefault(),S());break;case"d":case"D":a.preventDefault(),f(!c);break;case" ":a.preventDefault(),f(!c);break}},S=()=>$(null,null,function*(){yield l(s),k("ÈìæÊé•Â∑≤Â§çÂà∂")}),E=a=>$(null,null,function*(){yield w(s,a),k(`${a==="username"?"Ë¥¶Âè∑":"ÂØÜÁ†Å"}Â∑≤Â§çÂà∂`)}),k=a=>{g(a),setTimeout(()=>g(null),2e3)};return e.jsxs(v.div,{ref:i,className:"workspace-card group cursor-pointer select-none relative",style:{userSelect:"none"},onClick:T,onKeyDown:C,tabIndex:0,whileHover:{y:-2},whileTap:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:Math.min(n*.05,.3)},children:[e.jsx("div",{className:"relative h-48 [perspective:1000px]",children:e.jsxs("div",{className:`
            absolute inset-0 w-full h-full transition-transform duration-700 [transform-style:preserve-3d]
            ${c&&I?"[transform:rotateY(180deg)]":""}
          `,children:[e.jsxs("div",{className:`
            absolute inset-0 w-full h-full [backface-visibility:hidden] 
            bg-white rounded-2xl border border-gray-200 overflow-hidden shadow-sm hover:shadow-lg
            transition-all duration-200 
            ${m?"border-blue-300 shadow-blue-100":"border-gray-200"}
          `,children:[e.jsxs("div",{className:"p-4 flex flex-col h-full",children:[e.jsx("div",{className:"flex justify-center mb-3",children:e.jsx("div",{className:`w-16 h-16 rounded-2xl ${p()} flex items-center justify-center shadow-lg transform transition-transform group-hover:scale-105`,children:e.jsx("span",{className:"text-white font-bold text-2xl",children:s.title.charAt(0).toUpperCase()})})}),e.jsx("h3",{className:"text-sm font-semibold text-gray-900 text-center mb-2 line-clamp-2 leading-tight",children:y(s.title,h)}),s.description&&e.jsx("p",{className:"text-xs text-gray-600 text-center line-clamp-2 leading-relaxed flex-1",children:y(s.description,h)})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gray-50/95 backdrop-blur-sm border-t border-gray-100 p-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`
                    inline-flex items-center px-2 py-1 rounded-full text-xs font-medium
                    ${s.category==="Â∑•‰ΩúÈìæÊé•"?"bg-blue-100 text-blue-700":"bg-orange-100 text-orange-700"}
                  `,children:s.category==="Â∑•‰ΩúÈìæÊé•"?"üè¢":"üõ†Ô∏è"}),I&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 shadow-sm",title:"ÊúâÁôªÂΩï‰ø°ÊÅØ"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[I&&e.jsx("button",{onClick:a=>{a.stopPropagation(),f(!c)},className:"p-1.5 text-gray-400 hover:text-gray-600 rounded-lg transition-colors",title:"ÊòæÁ§∫ÁôªÂΩï‰ø°ÊÅØ",children:e.jsx("i",{className:`fa-solid ${c?"fa-eye-slash":"fa-eye"} text-xs`})}),e.jsx("button",{onClick:a=>{a.stopPropagation(),d(s)},className:`
                      p-1.5 text-blue-500 hover:text-blue-600 rounded-lg transition-all
                      ${m?"opacity-100":"opacity-0 group-hover:opacity-100"}
                    `,title:"ÊâìÂºÄÈìæÊé•",children:e.jsx("i",{className:"fa-solid fa-external-link-alt text-xs"})})]})]})}),m&&e.jsx(v.div,{className:"absolute top-2 left-2 w-3 h-3 bg-blue-500 rounded-full shadow-lg",layoutId:"cardFocusIndicator",initial:!1})]}),I&&e.jsx("div",{className:"absolute inset-0 w-full h-full [backface-visibility:hidden] [transform:rotateY(180deg)] bg-white rounded-2xl border border-gray-200 flex flex-col justify-center shadow-sm",children:e.jsxs("div",{className:"px-6 py-4 space-y-6",children:[s.username&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:"fa-solid fa-user text-blue-600 text-sm"})}),e.jsx("code",{className:"text-sm text-gray-900 truncate font-mono select-text",style:{userSelect:"text"},children:s.username})]}),e.jsx("button",{onClick:a=>{a.stopPropagation(),E("username")},className:"p-2 text-gray-400 hover:text-blue-600 rounded-lg transition-colors flex-shrink-0",title:"Â§çÂà∂Ë¥¶Âè∑",children:e.jsx("i",{className:"fa-solid fa-copy text-sm"})})]}),s.password&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:"fa-solid fa-key text-amber-600 text-sm"})}),e.jsx("code",{className:"text-sm text-gray-900 font-mono select-text",style:{userSelect:"text"},children:"‚óè".repeat(Math.min(s.password.length,12))})]}),e.jsx("button",{onClick:a=>{a.stopPropagation(),E("password")},className:"p-2 text-gray-400 hover:text-amber-600 rounded-lg transition-colors flex-shrink-0",title:"Â§çÂà∂ÂØÜÁ†Å",children:e.jsx("i",{className:"fa-solid fa-copy text-sm"})})]}),e.jsx("div",{className:"text-center pt-2 border-t border-gray-100",children:e.jsx("span",{className:"text-xs text-gray-500",children:"ÁÇπÂáªËøîÂõû"})})]})}),!I&&c&&e.jsxs("div",{className:"absolute inset-0 w-full h-full [backface-visibility:hidden] [transform:rotateY(180deg)] bg-white rounded-2xl border border-gray-200 flex flex-col justify-center items-center shadow-sm",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center mb-4",children:e.jsx("i",{className:"fa-solid fa-lock text-gray-400 text-2xl"})}),e.jsx("p",{className:"text-sm text-gray-500 text-center mb-4",children:"ËØ•ÁΩëÁ´ôÊó†ÈúÄÁôªÂΩï‰ø°ÊÅØ"}),e.jsx("button",{onClick:a=>{a.stopPropagation(),f(!1)},className:"text-sm text-blue-600 hover:text-blue-700 transition-colors",children:"ÁÇπÂáªËøîÂõû"})]})]})}),r&&e.jsx(v.div,{className:"absolute top-2 right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-lg shadow-lg z-10",initial:{opacity:0,scale:.8,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-10},children:r})]})}function z({className:s=""}){const{filteredItems:n,isLoading:m,error:h,focusedItemIndex:d,searchQuery:l,setSearchQuery:w}=R(),[x,c]=j.useState({x:0,y:0,width:0,height:0}),f=j.useRef([]);if(j.useEffect(()=>{if(d>=0&&f.current[d]){const g=f.current[d];if(g){const i=g.closest(".grid-container");if(i){const p=g.getBoundingClientRect(),y=i.getBoundingClientRect();c({x:p.left-y.left,y:p.top-y.top,width:p.width,height:p.height})}}}},[d,n]),m)return e.jsx("div",{className:`card-view ${s}`,children:e.jsx(P,{message:"Ê≠£Âú®Âä†ËΩΩÂ∑•‰ΩúÁ©∫Èó¥Êï∞ÊçÆ..."})});if(h)return e.jsx("div",{className:`card-view ${s}`,children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:e.jsx("i",{className:"fa-solid fa-exclamation-triangle text-red-500 text-xl"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Âä†ËΩΩÂ§±Ë¥•"}),e.jsx("p",{className:"text-gray-500 text-sm text-center max-w-md",children:h})]})});if(n.length===0)return e.jsx("div",{className:`card-view ${s}`,children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:l?e.jsx("i",{className:"fa-solid fa-search text-gray-400 text-xl"}):e.jsx("i",{className:"fa-solid fa-folder-open text-gray-400 text-xl"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:l?"Ê≤°ÊúâÊâæÂà∞ÂåπÈÖçÁöÑÈ°πÁõÆ":"Â∑•‰ΩúÁ©∫Èó¥‰∏∫Á©∫"}),e.jsx("p",{className:"text-gray-500 text-sm text-center max-w-md",children:l?`Ê≤°ÊúâÊâæÂà∞ÂåÖÂê´ "${l}" ÁöÑÈ°πÁõÆÔºåÂ∞ùËØï‰ΩøÁî®ÂÖ∂‰ªñÂÖ≥ÈîÆËØçÊêúÁ¥¢`:"ËøòÊ≤°Êúâ‰ªª‰ΩïÂ∑•‰ΩúÁ©∫Èó¥È°πÁõÆÔºåËØ∑ÂÖà‰ªé Notion ÂêåÊ≠•Êï∞ÊçÆ"}),l&&e.jsx("button",{onClick:()=>{w("")},className:"mt-4 px-4 py-2 text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Ê∏ÖÈô§ÊêúÁ¥¢Êù°‰ª∂"})]})});const r=()=>"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4";return e.jsx("div",{style:{height:"100%",display:"flex",flexDirection:"column"},className:"select-none",children:e.jsx("div",{className:"scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent hover:scrollbar-thumb-gray-400",style:{flex:"1 1 0",minHeight:"0",overflowY:"auto",overflowX:"hidden",scrollBehavior:"smooth",WebkitOverflowScrolling:"touch"},children:e.jsxs("div",{style:{padding:"16px",minHeight:"100%"},children:[n.length>0&&l&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"text-sm text-gray-600",children:['ÊêúÁ¥¢ "',e.jsx("span",{className:"font-medium text-gray-900",children:l}),'" ÁöÑÁªìÊûú']})}),e.jsxs("div",{className:"relative grid-container",children:[d>=0&&e.jsx(v.div,{className:"absolute border-2 border-blue-500 rounded-2xl pointer-events-none shadow-lg shadow-blue-500/20 bg-blue-50/10",animate:{x:x.x,y:x.y,width:x.width,height:x.height},initial:!1,transition:{type:"spring",stiffness:150,damping:25,mass:1},style:{zIndex:10}}),e.jsx(V,{children:e.jsx("div",{className:r(),style:{paddingBottom:"80px"},children:n.map((g,i)=>e.jsx("div",{ref:p=>f.current[i]=p,className:"relative",children:e.jsx(W,{item:g,index:i,isFocused:d===i,searchQuery:l})},g.id))})})]}),n.length>0&&e.jsx("div",{className:"mt-8 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"text-center text-sm text-gray-500",children:["ÂÖ± ",n.length," ‰∏™È°πÁõÆ"]})})]})})})}function _(s){const n=s.trim();if(!n)return{databaseId:null,isValid:!1,originalUrl:n,error:"ËæìÂÖ•‰∏çËÉΩ‰∏∫Á©∫"};try{if(n.match(/^[a-f0-9]{32}$/i))return{databaseId:n.toLowerCase(),isValid:!0,originalUrl:n};if(n.includes("notion.so"))try{const l=new URL(n),w=l.pathname.split("/").filter(c=>c.length>0);for(const c of w){const f=c.replace(/-/g,"");if(/^[a-f0-9]{32}$/i.test(f))return{databaseId:f.toLowerCase(),isValid:!0,originalUrl:n}}const x=l.searchParams.get("v");return x&&/^[a-f0-9]{32}$/i.test(x)?{databaseId:x.toLowerCase(),isValid:!0,originalUrl:n}:{databaseId:null,isValid:!1,originalUrl:n,error:"Êó†Ê≥ï‰ªé Notion URL ‰∏≠ÊèêÂèñÊúâÊïàÁöÑÊï∞ÊçÆÂ∫ì ID"}}catch(l){return{databaseId:null,isValid:!1,originalUrl:n,error:"URL Ê†ºÂºèÊó†Êïà"}}const h=n.match(/([a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})/i);if(h)return{databaseId:h[1].replace(/-/g,"").toLowerCase(),isValid:!0,originalUrl:n};const d=n.match(/[a-f0-9]{32}/i);return d?{databaseId:d[0].toLowerCase(),isValid:!0,originalUrl:n}:{databaseId:null,isValid:!1,originalUrl:n,error:"ËæìÂÖ•‰∏çÊòØÊúâÊïàÁöÑ Notion Êï∞ÊçÆÂ∫ì URL Êàñ ID"}}catch(m){return{databaseId:null,isValid:!1,originalUrl:n,error:m instanceof Error?m.message:"Ëß£ÊûêÂ§±Ë¥•"}}}function G(s){return/^[a-f0-9]{32}$/i.test(s.trim())}function q({onClose:s,onConfigured:n}){const{configureNotion:m,testConnection:h,clearConfiguration:d,isConfigured:l,getConfiguration:w}=R(),[x,c]=j.useState(""),[f,r]=j.useState(""),[g,i]=j.useState(""),[p,y]=j.useState(null),[I,T]=j.useState(!1),[C,S]=j.useState("idle"),[E,k]=j.useState("");j.useEffect(()=>{const u=w();if(u){c(u.apiKey||"");const D=u.databaseId||"";r(D),i(D),D&&y({isValid:!0}),console.log("‚úÖ Â∑≤Âä†ËΩΩ‰øùÂ≠òÁöÑÂ∑•‰ΩúÁ©∫Èó¥ÈÖçÁΩÆ")}},[w]);const a=u=>{if(i(u),!u.trim()){r(""),y(null);return}const D=_(u);y({isValid:D.isValid,error:D.error}),D.isValid&&D.databaseId?r(D.databaseId):r("")},t=x.trim().length>0&&f.length>0&&G(f),o=()=>$(null,null,function*(){if(!t){k("ËØ∑Â°´ÂÜôÂøÖË¶ÅÁöÑÈÖçÁΩÆ‰ø°ÊÅØ");return}T(!0),S("idle"),k("");try{m(x.trim(),f,void 0),(yield h())?S("success"):(S("error"),k("ËøûÊé•Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü• API ÂØÜÈí•ÂíåÊï∞ÊçÆÂ∫ì ID ÊòØÂê¶Ê≠£Á°Æ"))}catch(u){S("error"),k(u instanceof Error?u.message:"ËøûÊé•ÊµãËØïÂ§±Ë¥•")}finally{T(!1)}}),N=()=>$(null,null,function*(){if(!t){k("ËØ∑Â°´ÂÜôÂøÖË¶ÅÁöÑÈÖçÁΩÆ‰ø°ÊÅØ");return}try{m(x.trim(),f,void 0),n()}catch(u){k(u instanceof Error?u.message:"‰øùÂ≠òÈÖçÁΩÆÂ§±Ë¥•")}}),b=()=>{confirm("Á°ÆÂÆöË¶ÅÊ∏ÖÈô§ÊâÄÊúâÂ∑•‰ΩúÁ©∫Èó¥ÈÖçÁΩÆÂêóÔºüËøôÂ∞ÜÂà†Èô§ÁºìÂ≠òÁöÑÊï∞ÊçÆ„ÄÇ")&&(d(),c(""),r(""),i(""),y(null),S("idle"),k(""))};return e.jsxs("div",{className:"h-full flex flex-col select-none",style:{userSelect:"none"},children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:s,className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx("i",{className:"fa-solid fa-arrow-left text-sm"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Â∑•‰ΩúÁ©∫Èó¥ËÆæÁΩÆ"}),e.jsx("p",{className:"text-sm text-gray-500",children:"ÈÖçÁΩÆ Notion Êï∞ÊçÆÂ∫ìËøûÊé•"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("a",{href:"/help",target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors text-sm font-medium flex items-center space-x-1",children:[e.jsx("i",{className:"fa-solid fa-book text-xs"}),e.jsx("span",{children:"ËÆæÁΩÆÊåáÂçó"})]}),l&&e.jsx("button",{onClick:b,className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors text-sm font-medium",children:"Ê∏ÖÈô§ÈÖçÁΩÆ"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[!l&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("i",{className:"fa-solid fa-rocket text-blue-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"È¶ñÊ¨°ÈÖçÁΩÆ Notion Â∑•‰ΩúÁ©∫Èó¥"}),e.jsx("p",{className:"text-sm text-blue-800 mb-3",children:"ÈúÄË¶ÅÂàõÂª∫ Notion Integration Âπ∂Ëé∑Âèñ API ÂØÜÈí•„ÄÇÊàë‰ª¨‰∏∫ÊÇ®ÂáÜÂ§á‰∫ÜËØ¶ÁªÜÁöÑËÆæÁΩÆÊåáÂçó„ÄÇ"}),e.jsxs("a",{href:"/help",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[e.jsx("i",{className:"fa-solid fa-book text-xs"}),e.jsx("span",{children:"Êü•ÁúãÂÆåÊï¥ËÆæÁΩÆÊåáÂçó"})]})]})]})}),l&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("i",{className:"fa-solid fa-check-circle text-green-500"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-900",children:"Â∑•‰ΩúÁ©∫Èó¥Â∑≤ÈÖçÁΩÆ"}),e.jsx("p",{className:"text-sm text-green-800 mt-1",children:"ÊÇ®ÂèØ‰ª•‰øÆÊîπ‰∏ãÊñπÁöÑÈÖçÁΩÆ‰ø°ÊÅØÊàñÈáçÊñ∞ÊµãËØïËøûÊé•„ÄÇ"})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Âü∫Á°ÄÈÖçÁΩÆ"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notion API ÂØÜÈí• *"}),e.jsx("input",{type:"password",value:x,onChange:u=>c(u.target.value),placeholder:"secret_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm font-mono"}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["‰ªé"," ",e.jsx("a",{href:"https://www.notion.so/my-integrations",target:"_blank",rel:"noopener",className:"text-blue-500 hover:underline",children:"Notion Integrations"})," ","Ëé∑Âèñ"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Êï∞ÊçÆÂ∫ì ID *"}),e.jsx("input",{type:"text",value:g,onChange:u=>a(u.target.value),placeholder:"Á≤òË¥¥ Notion ÂàÜ‰∫´ÈìæÊé•ÊàñÊï∞ÊçÆÂ∫ì ID",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:border-transparent text-sm ${p===null?"border-gray-300 focus:ring-blue-500":p.isValid?"border-green-300 focus:ring-green-500 bg-green-50":"border-red-300 focus:ring-red-500 bg-red-50"}`}),p&&e.jsx("div",{className:`mt-2 p-2 rounded-lg text-xs ${p.isValid?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"}`,children:p.isValid?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"fa-solid fa-check-circle"}),e.jsxs("span",{children:["‚úÖ Â∑≤ÊàêÂäüÊèêÂèñÊï∞ÊçÆÂ∫ì ID: ",f]})]}):e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"fa-solid fa-exclamation-triangle"}),e.jsxs("span",{children:["‚ùå ",p.error]})]})}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"ÊîØÊåÅÁ≤òË¥¥ÂÆåÊï¥ÁöÑ Notion ÂàÜ‰∫´ÈìæÊé•ÔºåÁ≥ªÁªü‰ºöËá™Âä®ÊèêÂèñÊï∞ÊçÆÂ∫ì ID"})]})]}),E&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("i",{className:"fa-solid fa-exclamation-triangle text-red-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-700 text-sm font-medium",children:"ÈÖçÁΩÆÈîôËØØ"}),e.jsx("p",{className:"text-red-600 text-sm mt-1",children:E})]})]})}),C!=="idle"&&e.jsxs("div",{className:`p-4 rounded-lg border ${C==="success"?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:`fa-solid ${C==="success"?"fa-check-circle text-green-500":"fa-times-circle text-red-500"}`}),e.jsx("span",{className:`text-sm font-medium ${C==="success"?"text-green-700":"text-red-700"}`,children:C==="success"?"ËøûÊé•ÊàêÂäüÔºÅ":"ËøûÊé•Â§±Ë¥•"})]}),C==="success"&&e.jsx("p",{className:"text-green-600 text-sm mt-1",children:"Notion API ËøûÊé•Ê≠£Â∏∏ÔºåÂèØ‰ª•ÂºÄÂßãÂêåÊ≠•Â∑•‰ΩúÁ©∫Èó¥Êï∞ÊçÆ"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-6",children:[e.jsx("button",{onClick:o,disabled:!t||I,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-3 border border-blue-500 text-blue-500 rounded-lg hover:bg-blue-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:I?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),e.jsx("span",{children:"ÊµãËØï‰∏≠..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-plug"}),e.jsx("span",{children:"ÊµãËØïËøûÊé•"})]})}),e.jsxs("button",{onClick:N,disabled:!t,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("i",{className:"fa-solid fa-save"}),e.jsx("span",{children:"‰øùÂ≠òÈÖçÁΩÆ"})]})]})]})})]})}function O({isOpen:s,onClose:n}){const{workspaceItems:m,isLoading:h,error:d,isConfigured:l,lastSync:w,viewType:x,selectedCategory:c,filteredItems:f,refreshItems:r}=R(),{isMobile:g}=L(),[i,p]=j.useState(!1);M({isEnabled:s&&!i,onEscape:n}),j.useEffect(()=>{s&&!l&&p(!0)},[s,l]);const y=T=>{if(!T)return"‰ªéÊú™ÂêåÊ≠•";const C=new Date(T),E=new Date().getTime()-C.getTime(),k=Math.floor(E/(1e3*60));return k<1?"ÂàöÂàöÂêåÊ≠•":k<60?`${k}ÂàÜÈíüÂâç`:k<1440?`${Math.floor(k/60)}Â∞èÊó∂Ââç`:C.toLocaleDateString()},I=g?"fixed inset-4 max-h-[95vh]":"w-full max-w-7xl max-h-[90vh]";return e.jsx(A,{mode:"wait",children:s&&e.jsxs(e.Fragment,{children:[e.jsx(v.div,{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3,ease:"easeOut"},onClick:n}),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none select-none",children:e.jsxs(v.div,{"data-workspace-modal":!0,className:`${I} bg-white/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-gray-200 select-none`,style:{display:"flex",flexDirection:"column",height:g?"calc(100vh - 32px)":"90vh",maxHeight:g?"calc(100vh - 32px)":"90vh",pointerEvents:"auto",position:"relative"},initial:{scale:.8,opacity:0,y:40},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:40},transition:{type:"spring",damping:25,stiffness:300,duration:.5},children:[e.jsxs("div",{className:"flex-shrink-0 border-b border-gray-200/80 bg-white/90 backdrop-blur-sm rounded-t-2xl overflow-visible",style:{position:"relative",zIndex:100},children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("i",{className:"fa-solid fa-briefcase text-blue-600 text-lg"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Â∑•‰ΩúÁ©∫Èó¥"}),e.jsx("p",{className:"text-sm text-gray-600",children:l?e.jsxs(e.Fragment,{children:[m.length," ‰∏™È°πÁõÆ ‚Ä¢ ",y(w)]}):"ËØ∑ÂÖàÈÖçÁΩÆ Notion Êï∞ÊçÆÂ∫ìËøûÊé•"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[l&&e.jsxs(e.Fragment,{children:[e.jsx(v.button,{onClick:r,disabled:h,className:"p-2.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-xl transition-colors disabled:opacity-50",title:"Âà∑Êñ∞Êï∞ÊçÆ",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx("i",{className:`fa-solid fa-refresh text-sm ${h?"animate-spin":""}`})}),e.jsx(v.button,{onClick:()=>p(!0),className:"p-2.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-xl transition-colors",title:"ËÆæÁΩÆ",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx("i",{className:"fa-solid fa-cog text-sm"})})]}),e.jsx(v.button,{onClick:n,className:"p-2.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-xl transition-colors",title:"ÂÖ≥Èó≠ (Esc)",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx("i",{className:"fa-solid fa-times text-sm"})})]})]}),l&&!i&&e.jsxs("div",{className:"border-t border-gray-100 overflow-visible",style:{position:"relative",zIndex:50},children:[e.jsx(H,{}),e.jsx("div",{className:"px-6 py-4 bg-gray-50/50 border-t border-gray-100 overflow-visible",style:{position:"relative"},children:e.jsxs("div",{className:`flex ${g?"flex-col space-y-3":"items-center justify-between"}`,children:[e.jsx("div",{className:g?"w-full":"flex-1 max-w-md",children:e.jsx(F,{placeholder:"ÊêúÁ¥¢Â∑•‰ΩúÁ©∫Èó¥..."})}),e.jsx("div",{className:g?"w-full":"flex-shrink-0",children:e.jsx(K,{})})]})})]})]}),e.jsx("div",{style:{flex:"1 1 0",minHeight:"0",display:"flex",flexDirection:"column",overflow:"hidden",borderBottomLeftRadius:"1rem",borderBottomRightRadius:"1rem"},children:e.jsx(A,{mode:"wait",children:i?e.jsx(v.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},style:{flex:"1 1 0",overflow:"hidden"},children:e.jsx(q,{onClose:()=>p(!1),onConfigured:()=>{p(!1),r()}})},"settings"):l?e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},style:{flex:"1 1 0",minHeight:"0",display:"flex",flexDirection:"column",overflow:"hidden"},children:[d&&e.jsx("div",{className:"flex-shrink-0 mx-6 mt-4 mb-2 p-4 bg-red-50 border border-red-200 rounded-xl",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("i",{className:"fa-solid fa-exclamation-triangle text-red-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"ÂêåÊ≠•Â§±Ë¥•"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:d})]})]})}),e.jsx("div",{style:{flex:"1 1 0",minHeight:"0",overflow:"hidden"},children:e.jsx(A,{mode:"wait",children:x==="list"?e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},style:{height:"100%"},children:e.jsx(B,{})},"list-view"):e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},style:{height:"100%"},children:e.jsx(z,{})},"card-view")})})]},"workspace"):e.jsxs(v.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"h-full flex flex-col items-center justify-center p-8",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-purple-100 rounded-2xl flex items-center justify-center mb-6",children:e.jsx("i",{className:"fa-brands fa-notion text-3xl text-blue-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Ê¨¢Ëøé‰ΩøÁî®Â∑•‰ΩúÁ©∫Èó¥"}),e.jsx("p",{className:"text-gray-600 text-center mb-8 max-w-md",children:"ËøûÊé•ÊÇ®ÁöÑ Notion Êï∞ÊçÆÂ∫ìÔºåËÆ©Â∑•‰ΩúÈìæÊé•Ëß¶ÊâãÂèØÂèä„ÄÇÊîØÊåÅÊô∫ËÉΩÊêúÁ¥¢„ÄÅÂàÜÁ±ªÁÆ°ÁêÜÂíåÈîÆÁõòÂø´Êç∑Êìç‰Ωú„ÄÇ"}),e.jsx(v.button,{onClick:()=>p(!0),className:"px-8 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl hover:from-blue-600 hover:to-purple-700 transition-all font-medium shadow-lg shadow-blue-500/25",whileHover:{scale:1.02},whileTap:{scale:.98},children:"ÂºÄÂßãÈÖçÁΩÆ"})]},"unconfigured")})}),l&&!i&&e.jsx("div",{className:"flex-shrink-0 px-6 py-3 bg-gray-50/80 border-t border-gray-200 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("span",{children:"üí° Âø´Êç∑ÈîÆ: Space-ÊêúÁ¥¢ ‚Ä¢ ‚Üë‚Üì-ÂØºËà™ ‚Ä¢ Enter-ÊâìÂºÄ ‚Ä¢ C-Â§çÂà∂"}),!g&&e.jsx("span",{children:"1-9-ÂàÜÁ±ªÂàáÊç¢ ‚Ä¢ V-ÂàáÊç¢ËßÜÂõæ"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{children:["ÂΩìÂâç: ",c==="all"?"ÂÖ®ÈÉ®":c]}),e.jsxs("span",{children:["ËßÜÂõæ: ",x==="list"?"ÂàóË°®":"Âç°Áâá"]}),f.length!==m.length&&e.jsxs("span",{children:["Á≠õÈÄâ: ",f.length,"/",m.length]})]})]})})]})})]})})}const ee=j.memo(O);export{ee as default};
