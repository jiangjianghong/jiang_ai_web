var Ln=Object.defineProperty;var Fn=(s,e,t)=>e in s?Ln(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var Ne=(s,e,t)=>Fn(s,typeof e!="symbol"?e+"":e,t);import{j as r,m as X,u as Bn,a as zn,A as kt,D as Vn,H as Zn}from"./ui-vendor-NkcesyV5.js";import{R as g,a as Un,r as m,b as Wn,c as Hn,B as qn}from"./router-vendor-ojeZ8ZvP.js";import{a as Kn}from"./react-vendor-BtP0CW_r.js";import{r as Ct,_ as It,C as Et,a as Lt,E as Qs,o as Qn,F as Gs,L as Gn,g as Ys,i as Yn,b as Jn,v as Xn,c as ys,d as ea,e as ta,f as sa,h as na,j as aa,k as ra,l as ia,m as oa,s as vs,n as la,G as ca,p as da,q as ua,t as fa,u as st,w as as,x as Tt,y as rs}from"./firebase-vendor-DV2vFSYp.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();var wt={},bs;function ha(){if(bs)return wt;bs=1;var s=Kn();return wt.createRoot=s.createRoot,wt.hydrateRoot=s.hydrateRoot,wt}var ma=ha();function pa(s){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}const ga=s=>{switch(s){case"success":return va;case"info":return wa;case"warning":return ba;case"error":return ja;default:return null}},xa=Array(12).fill(0),ya=({visible:s,className:e})=>g.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":s},g.createElement("div",{className:"sonner-spinner"},xa.map((t,n)=>g.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),va=g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},g.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),ba=g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},g.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),wa=g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},g.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ja=g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},g.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),_a=g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},g.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),g.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Na=()=>{const[s,e]=g.useState(document.hidden);return g.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),s};let Qt=1;class Sa{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:n,...a}=e,i=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Qt++,o=this.toasts.find(u=>u.id===i),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(u=>u.id===i?(this.publish({...u,...e,id:i,title:n}),{...u,...e,id:i,dismissible:l,title:n}):u):this.addToast({title:n,...a,dismissible:l,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const a=Promise.resolve(e instanceof Function?e():e);let i=n!==void 0,o;const l=a.then(async d=>{if(o=["resolve",d],g.isValidElement(d))i=!1,this.create({id:n,type:"default",message:d});else if(Ca(d)&&!d.ok){i=!1;const c=typeof t.error=="function"?await t.error(`HTTP error! status: ${d.status}`):t.error,h=typeof t.description=="function"?await t.description(`HTTP error! status: ${d.status}`):t.description,N=typeof c=="object"&&!g.isValidElement(c)?c:{message:c};this.create({id:n,type:"error",description:h,...N})}else if(d instanceof Error){i=!1;const c=typeof t.error=="function"?await t.error(d):t.error,h=typeof t.description=="function"?await t.description(d):t.description,N=typeof c=="object"&&!g.isValidElement(c)?c:{message:c};this.create({id:n,type:"error",description:h,...N})}else if(t.success!==void 0){i=!1;const c=typeof t.success=="function"?await t.success(d):t.success,h=typeof t.description=="function"?await t.description(d):t.description,N=typeof c=="object"&&!g.isValidElement(c)?c:{message:c};this.create({id:n,type:"success",description:h,...N})}}).catch(async d=>{if(o=["reject",d],t.error!==void 0){i=!1;const f=typeof t.error=="function"?await t.error(d):t.error,c=typeof t.description=="function"?await t.description(d):t.description,_=typeof f=="object"&&!g.isValidElement(f)?f:{message:f};this.create({id:n,type:"error",description:c,..._})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),t.finally==null||t.finally.call(t)}),u=()=>new Promise((d,f)=>l.then(()=>o[0]==="reject"?f(o[1]):d(o[1])).catch(f));return typeof n!="string"&&typeof n!="number"?{unwrap:u}:Object.assign(n,{unwrap:u})},this.custom=(e,t)=>{const n=(t==null?void 0:t.id)||Qt++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ce=new Sa,ka=(s,e)=>{const t=(e==null?void 0:e.id)||Qt++;return ce.addToast({title:s,...e,id:t}),t},Ca=s=>s&&typeof s=="object"&&"ok"in s&&typeof s.ok=="boolean"&&"status"in s&&typeof s.status=="number",Ia=ka,Ea=()=>ce.toasts,Ta=()=>ce.getActiveToasts();Object.assign(Ia,{success:ce.success,info:ce.info,warning:ce.warning,error:ce.error,custom:ce.custom,message:ce.message,promise:ce.promise,dismiss:ce.dismiss,loading:ce.loading},{getHistory:Ea,getToasts:Ta});pa("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function jt(s){return s.label!==void 0}const Aa=3,Ra="24px",Oa="16px",ws=4e3,Da=356,Pa=14,Ma=45,$a=200;function Se(...s){return s.filter(Boolean).join(" ")}function La(s){const[e,t]=s.split("-"),n=[];return e&&n.push(e),t&&n.push(t),n}const Fa=s=>{var e,t,n,a,i,o,l,u,d;const{invert:f,toast:c,unstyled:h,interacting:_,setHeights:N,visibleToasts:$,heights:C,index:U,toasts:G,expanded:S,removeToast:w,defaultRichColors:I,closeButton:L,style:k,cancelButtonStyle:R,actionButtonStyle:W,className:F="",descriptionClassName:z="",duration:oe,position:je,gap:Ie,expandByDefault:ee,classNames:D,icons:se,closeButtonAriaLabel:le="Close toast"}=s,[K,ye]=g.useState(null),[H,x]=g.useState(null),[y,E]=g.useState(!1),[q,P]=g.useState(!1),[Q,V]=g.useState(!1),[J,ue]=g.useState(!1),[rt,it]=g.useState(!1),[ot,Fe]=g.useState(0),[pt,lt]=g.useState(0),Te=g.useRef(c.duration||oe||ws),qe=g.useRef(null),ve=g.useRef(null),gt=U===0,xt=U+1<=$,ne=c.type,Ae=c.dismissible!==!1,yt=c.className||"",zt=c.descriptionClassName||"",Be=g.useMemo(()=>C.findIndex(O=>O.toastId===c.id)||0,[C,c.id]),Ke=g.useMemo(()=>{var O;return(O=c.closeButton)!=null?O:L},[c.closeButton,L]),Re=g.useMemo(()=>c.duration||oe||ws,[c.duration,oe]),pe=g.useRef(0),_e=g.useRef(0),Qe=g.useRef(0),Ge=g.useRef(null),[On,Dn]=je.split("-"),hs=g.useMemo(()=>C.reduce((O,te,ie)=>ie>=Be?O:O+te.height,0),[C,Be]),ms=Na(),Pn=c.invert||f,Vt=ne==="loading";_e.current=g.useMemo(()=>Be*Ie+hs,[Be,hs]),g.useEffect(()=>{Te.current=Re},[Re]),g.useEffect(()=>{E(!0)},[]),g.useEffect(()=>{const O=ve.current;if(O){const te=O.getBoundingClientRect().height;return lt(te),N(ie=>[{toastId:c.id,height:te,position:c.position},...ie]),()=>N(ie=>ie.filter(fe=>fe.toastId!==c.id))}},[N,c.id]),g.useLayoutEffect(()=>{if(!y)return;const O=ve.current,te=O.style.height;O.style.height="auto";const ie=O.getBoundingClientRect().height;O.style.height=te,lt(ie),N(fe=>fe.find(ae=>ae.toastId===c.id)?fe.map(ae=>ae.toastId===c.id?{...ae,height:ie}:ae):[{toastId:c.id,height:ie,position:c.position},...fe])},[y,c.title,c.description,N,c.id,c.jsx,c.action,c.cancel]);const Oe=g.useCallback(()=>{P(!0),Fe(_e.current),N(O=>O.filter(te=>te.toastId!==c.id)),setTimeout(()=>{w(c)},$a)},[c,w,N,_e]);g.useEffect(()=>{if(c.promise&&ne==="loading"||c.duration===1/0||c.type==="loading")return;let O;return S||_||ms?(()=>{if(Qe.current<pe.current){const fe=new Date().getTime()-pe.current;Te.current=Te.current-fe}Qe.current=new Date().getTime()})():(()=>{Te.current!==1/0&&(pe.current=new Date().getTime(),O=setTimeout(()=>{c.onAutoClose==null||c.onAutoClose.call(c,c),Oe()},Te.current))})(),()=>clearTimeout(O)},[S,_,c,ne,ms,Oe]),g.useEffect(()=>{c.delete&&(Oe(),c.onDismiss==null||c.onDismiss.call(c,c))},[Oe,c.delete]);function Mn(){var O;if(se!=null&&se.loading){var te;return g.createElement("div",{className:Se(D==null?void 0:D.loader,c==null||(te=c.classNames)==null?void 0:te.loader,"sonner-loader"),"data-visible":ne==="loading"},se.loading)}return g.createElement(ya,{className:Se(D==null?void 0:D.loader,c==null||(O=c.classNames)==null?void 0:O.loader),visible:ne==="loading"})}const $n=c.icon||(se==null?void 0:se[ne])||ga(ne);var ps,gs;return g.createElement("li",{tabIndex:0,ref:ve,className:Se(F,yt,D==null?void 0:D.toast,c==null||(e=c.classNames)==null?void 0:e.toast,D==null?void 0:D.default,D==null?void 0:D[ne],c==null||(t=c.classNames)==null?void 0:t[ne]),"data-sonner-toast":"","data-rich-colors":(ps=c.richColors)!=null?ps:I,"data-styled":!(c.jsx||c.unstyled||h),"data-mounted":y,"data-promise":!!c.promise,"data-swiped":rt,"data-removed":q,"data-visible":xt,"data-y-position":On,"data-x-position":Dn,"data-index":U,"data-front":gt,"data-swiping":Q,"data-dismissible":Ae,"data-type":ne,"data-invert":Pn,"data-swipe-out":J,"data-swipe-direction":H,"data-expanded":!!(S||ee&&y),style:{"--index":U,"--toasts-before":U,"--z-index":G.length-U,"--offset":`${q?ot:_e.current}px`,"--initial-height":ee?"auto":`${pt}px`,...k,...c.style},onDragEnd:()=>{V(!1),ye(null),Ge.current=null},onPointerDown:O=>{Vt||!Ae||(qe.current=new Date,Fe(_e.current),O.target.setPointerCapture(O.pointerId),O.target.tagName!=="BUTTON"&&(V(!0),Ge.current={x:O.clientX,y:O.clientY}))},onPointerUp:()=>{var O,te,ie;if(J||!Ae)return;Ge.current=null;const fe=Number(((O=ve.current)==null?void 0:O.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),vt=Number(((te=ve.current)==null?void 0:te.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ae=new Date().getTime()-((ie=qe.current)==null?void 0:ie.getTime()),ge=K==="x"?fe:vt,bt=Math.abs(ge)/ae;if(Math.abs(ge)>=Ma||bt>.11){Fe(_e.current),c.onDismiss==null||c.onDismiss.call(c,c),x(K==="x"?fe>0?"right":"left":vt>0?"down":"up"),Oe(),ue(!0);return}else{var be,we;(be=ve.current)==null||be.style.setProperty("--swipe-amount-x","0px"),(we=ve.current)==null||we.style.setProperty("--swipe-amount-y","0px")}it(!1),V(!1),ye(null)},onPointerMove:O=>{var te,ie,fe;if(!Ge.current||!Ae||((te=window.getSelection())==null?void 0:te.toString().length)>0)return;const ae=O.clientY-Ge.current.y,ge=O.clientX-Ge.current.x;var bt;const be=(bt=s.swipeDirections)!=null?bt:La(je);!K&&(Math.abs(ge)>1||Math.abs(ae)>1)&&ye(Math.abs(ge)>Math.abs(ae)?"x":"y");let we={x:0,y:0};const xs=ze=>1/(1.5+Math.abs(ze)/20);if(K==="y"){if(be.includes("top")||be.includes("bottom"))if(be.includes("top")&&ae<0||be.includes("bottom")&&ae>0)we.y=ae;else{const ze=ae*xs(ae);we.y=Math.abs(ze)<Math.abs(ae)?ze:ae}}else if(K==="x"&&(be.includes("left")||be.includes("right")))if(be.includes("left")&&ge<0||be.includes("right")&&ge>0)we.x=ge;else{const ze=ge*xs(ge);we.x=Math.abs(ze)<Math.abs(ge)?ze:ge}(Math.abs(we.x)>0||Math.abs(we.y)>0)&&it(!0),(ie=ve.current)==null||ie.style.setProperty("--swipe-amount-x",`${we.x}px`),(fe=ve.current)==null||fe.style.setProperty("--swipe-amount-y",`${we.y}px`)}},Ke&&!c.jsx&&ne!=="loading"?g.createElement("button",{"aria-label":le,"data-disabled":Vt,"data-close-button":!0,onClick:Vt||!Ae?()=>{}:()=>{Oe(),c.onDismiss==null||c.onDismiss.call(c,c)},className:Se(D==null?void 0:D.closeButton,c==null||(n=c.classNames)==null?void 0:n.closeButton)},(gs=se==null?void 0:se.close)!=null?gs:_a):null,(ne||c.icon||c.promise)&&c.icon!==null&&((se==null?void 0:se[ne])!==null||c.icon)?g.createElement("div",{"data-icon":"",className:Se(D==null?void 0:D.icon,c==null||(a=c.classNames)==null?void 0:a.icon)},c.promise||c.type==="loading"&&!c.icon?c.icon||Mn():null,c.type!=="loading"?$n:null):null,g.createElement("div",{"data-content":"",className:Se(D==null?void 0:D.content,c==null||(i=c.classNames)==null?void 0:i.content)},g.createElement("div",{"data-title":"",className:Se(D==null?void 0:D.title,c==null||(o=c.classNames)==null?void 0:o.title)},c.jsx?c.jsx:typeof c.title=="function"?c.title():c.title),c.description?g.createElement("div",{"data-description":"",className:Se(z,zt,D==null?void 0:D.description,c==null||(l=c.classNames)==null?void 0:l.description)},typeof c.description=="function"?c.description():c.description):null),g.isValidElement(c.cancel)?c.cancel:c.cancel&&jt(c.cancel)?g.createElement("button",{"data-button":!0,"data-cancel":!0,style:c.cancelButtonStyle||R,onClick:O=>{jt(c.cancel)&&Ae&&(c.cancel.onClick==null||c.cancel.onClick.call(c.cancel,O),Oe())},className:Se(D==null?void 0:D.cancelButton,c==null||(u=c.classNames)==null?void 0:u.cancelButton)},c.cancel.label):null,g.isValidElement(c.action)?c.action:c.action&&jt(c.action)?g.createElement("button",{"data-button":!0,"data-action":!0,style:c.actionButtonStyle||W,onClick:O=>{jt(c.action)&&(c.action.onClick==null||c.action.onClick.call(c.action,O),!O.defaultPrevented&&Oe())},className:Se(D==null?void 0:D.actionButton,c==null||(d=c.classNames)==null?void 0:d.actionButton)},c.action.label):null)};function js(){if(typeof window>"u"||typeof document>"u")return"ltr";const s=document.documentElement.getAttribute("dir");return s==="auto"||!s?window.getComputedStyle(document.documentElement).direction:s}function Ba(s,e){const t={};return[s,e].forEach((n,a)=>{const i=a===1,o=i?"--mobile-offset":"--offset",l=i?Oa:Ra;function u(d){["top","right","bottom","left"].forEach(f=>{t[`${o}-${f}`]=typeof d=="number"?`${d}px`:d})}typeof n=="number"||typeof n=="string"?u(n):typeof n=="object"?["top","right","bottom","left"].forEach(d=>{n[d]===void 0?t[`${o}-${d}`]=l:t[`${o}-${d}`]=typeof n[d]=="number"?`${n[d]}px`:n[d]}):u(l)}),t}const za=g.forwardRef(function(e,t){const{invert:n,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:l,className:u,offset:d,mobileOffset:f,theme:c="light",richColors:h,duration:_,style:N,visibleToasts:$=Aa,toastOptions:C,dir:U=js(),gap:G=Pa,icons:S,containerAriaLabel:w="Notifications"}=e,[I,L]=g.useState([]),k=g.useMemo(()=>Array.from(new Set([a].concat(I.filter(H=>H.position).map(H=>H.position)))),[I,a]),[R,W]=g.useState([]),[F,z]=g.useState(!1),[oe,je]=g.useState(!1),[Ie,ee]=g.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),D=g.useRef(null),se=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),le=g.useRef(null),K=g.useRef(!1),ye=g.useCallback(H=>{L(x=>{var y;return(y=x.find(E=>E.id===H.id))!=null&&y.delete||ce.dismiss(H.id),x.filter(({id:E})=>E!==H.id)})},[]);return g.useEffect(()=>ce.subscribe(H=>{if(H.dismiss){requestAnimationFrame(()=>{L(x=>x.map(y=>y.id===H.id?{...y,delete:!0}:y))});return}setTimeout(()=>{Un.flushSync(()=>{L(x=>{const y=x.findIndex(E=>E.id===H.id);return y!==-1?[...x.slice(0,y),{...x[y],...H},...x.slice(y+1)]:[H,...x]})})})}),[I]),g.useEffect(()=>{if(c!=="system"){ee(c);return}if(c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ee("dark"):ee("light")),typeof window>"u")return;const H=window.matchMedia("(prefers-color-scheme: dark)");try{H.addEventListener("change",({matches:x})=>{ee(x?"dark":"light")})}catch{H.addListener(({matches:y})=>{try{ee(y?"dark":"light")}catch(E){console.error(E)}})}},[c]),g.useEffect(()=>{I.length<=1&&z(!1)},[I]),g.useEffect(()=>{const H=x=>{var y;if(i.every(P=>x[P]||x.code===P)){var q;z(!0),(q=D.current)==null||q.focus()}x.code==="Escape"&&(document.activeElement===D.current||(y=D.current)!=null&&y.contains(document.activeElement))&&z(!1)};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[i]),g.useEffect(()=>{if(D.current)return()=>{le.current&&(le.current.focus({preventScroll:!0}),le.current=null,K.current=!1)}},[D.current]),g.createElement("section",{ref:t,"aria-label":`${w} ${se}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((H,x)=>{var y;const[E,q]=H.split("-");return I.length?g.createElement("ol",{key:H,dir:U==="auto"?js():U,tabIndex:-1,ref:D,className:u,"data-sonner-toaster":!0,"data-sonner-theme":Ie,"data-y-position":E,"data-x-position":q,style:{"--front-toast-height":`${((y=R[0])==null?void 0:y.height)||0}px`,"--width":`${Da}px`,"--gap":`${G}px`,...N,...Ba(d,f)},onBlur:P=>{K.current&&!P.currentTarget.contains(P.relatedTarget)&&(K.current=!1,le.current&&(le.current.focus({preventScroll:!0}),le.current=null))},onFocus:P=>{P.target instanceof HTMLElement&&P.target.dataset.dismissible==="false"||K.current||(K.current=!0,le.current=P.relatedTarget)},onMouseEnter:()=>z(!0),onMouseMove:()=>z(!0),onMouseLeave:()=>{oe||z(!1)},onDragEnd:()=>z(!1),onPointerDown:P=>{P.target instanceof HTMLElement&&P.target.dataset.dismissible==="false"||je(!0)},onPointerUp:()=>je(!1)},I.filter(P=>!P.position&&x===0||P.position===H).map((P,Q)=>{var V,J;return g.createElement(Fa,{key:P.id,icons:S,index:Q,toast:P,defaultRichColors:h,duration:(V=C==null?void 0:C.duration)!=null?V:_,className:C==null?void 0:C.className,descriptionClassName:C==null?void 0:C.descriptionClassName,invert:n,visibleToasts:$,closeButton:(J=C==null?void 0:C.closeButton)!=null?J:l,interacting:oe,position:H,style:C==null?void 0:C.style,unstyled:C==null?void 0:C.unstyled,classNames:C==null?void 0:C.classNames,cancelButtonStyle:C==null?void 0:C.cancelButtonStyle,actionButtonStyle:C==null?void 0:C.actionButtonStyle,closeButtonAriaLabel:C==null?void 0:C.closeButtonAriaLabel,removeToast:ye,toasts:I.filter(ue=>ue.position==P.position),heights:R.filter(ue=>ue.position==P.position),setHeights:W,expandByDefault:o,gap:G,expanded:F,swipeDirections:e.swipeDirections})})):null}))});var Z;(function(s){s.assertEqual=a=>{};function e(a){}s.assertIs=e;function t(a){throw new Error}s.assertNever=t,s.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},s.getValidEnumValues=a=>{const i=s.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of i)o[l]=a[l];return s.objectValues(o)},s.objectValues=a=>s.objectKeys(a).map(function(i){return a[i]}),s.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},s.find=(a,i)=>{for(const o of a)if(i(o))return o},s.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}s.joinValues=n,s.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(Z||(Z={}));var _s;(function(s){s.mergeShapes=(e,t)=>({...e,...t})})(_s||(_s={}));const b=Z.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),De=s=>{switch(typeof s){case"undefined":return b.undefined;case"string":return b.string;case"number":return Number.isNaN(s)?b.nan:b.number;case"boolean":return b.boolean;case"function":return b.function;case"bigint":return b.bigint;case"symbol":return b.symbol;case"object":return Array.isArray(s)?b.array:s===null?b.null:s.then&&typeof s.then=="function"&&s.catch&&typeof s.catch=="function"?b.promise:typeof Map<"u"&&s instanceof Map?b.map:typeof Set<"u"&&s instanceof Set?b.set:typeof Date<"u"&&s instanceof Date?b.date:b.object;default:return b.unknown}},p=Z.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ee extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(i){return i.message},n={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)n._errors.push(t(o));else{let l=n,u=0;for(;u<o.path.length;){const d=o.path[u];u===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(t(o))):l[d]=l[d]||{_errors:[]},l=l[d],u++}}};return a(this),n}static assert(e){if(!(e instanceof Ee))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Z.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const a of this.issues)a.path.length>0?(t[a.path[0]]=t[a.path[0]]||[],t[a.path[0]].push(e(a))):n.push(e(a));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}Ee.create=s=>new Ee(s);const Gt=(s,e)=>{let t;switch(s.code){case p.invalid_type:s.received===b.undefined?t="Required":t=`Expected ${s.expected}, received ${s.received}`;break;case p.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(s.expected,Z.jsonStringifyReplacer)}`;break;case p.unrecognized_keys:t=`Unrecognized key(s) in object: ${Z.joinValues(s.keys,", ")}`;break;case p.invalid_union:t="Invalid input";break;case p.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Z.joinValues(s.options)}`;break;case p.invalid_enum_value:t=`Invalid enum value. Expected ${Z.joinValues(s.options)}, received '${s.received}'`;break;case p.invalid_arguments:t="Invalid function arguments";break;case p.invalid_return_type:t="Invalid function return type";break;case p.invalid_date:t="Invalid date";break;case p.invalid_string:typeof s.validation=="object"?"includes"in s.validation?(t=`Invalid input: must include "${s.validation.includes}"`,typeof s.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${s.validation.position}`)):"startsWith"in s.validation?t=`Invalid input: must start with "${s.validation.startsWith}"`:"endsWith"in s.validation?t=`Invalid input: must end with "${s.validation.endsWith}"`:Z.assertNever(s.validation):s.validation!=="regex"?t=`Invalid ${s.validation}`:t="Invalid";break;case p.too_small:s.type==="array"?t=`Array must contain ${s.exact?"exactly":s.inclusive?"at least":"more than"} ${s.minimum} element(s)`:s.type==="string"?t=`String must contain ${s.exact?"exactly":s.inclusive?"at least":"over"} ${s.minimum} character(s)`:s.type==="number"?t=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="date"?t=`Date must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(s.minimum))}`:t="Invalid input";break;case p.too_big:s.type==="array"?t=`Array must contain ${s.exact?"exactly":s.inclusive?"at most":"less than"} ${s.maximum} element(s)`:s.type==="string"?t=`String must contain ${s.exact?"exactly":s.inclusive?"at most":"under"} ${s.maximum} character(s)`:s.type==="number"?t=`Number must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="bigint"?t=`BigInt must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="date"?t=`Date must be ${s.exact?"exactly":s.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(s.maximum))}`:t="Invalid input";break;case p.custom:t="Invalid input";break;case p.invalid_intersection_types:t="Intersection results could not be merged";break;case p.not_multiple_of:t=`Number must be a multiple of ${s.multipleOf}`;break;case p.not_finite:t="Number must be finite";break;default:t=e.defaultError,Z.assertNever(s)}return{message:t}};let Va=Gt;function Za(){return Va}const Ua=s=>{const{data:e,path:t,errorMaps:n,issueData:a}=s,i=[...t,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let l="";const u=n.filter(d=>!!d).slice().reverse();for(const d of u)l=d(o,{data:e,defaultError:l}).message;return{...a,path:i,message:l}};function v(s,e){const t=Za(),n=Ua({issueData:e,data:s.data,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,t,t===Gt?void 0:Gt].filter(a=>!!a)});s.common.issues.push(n)}class me{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const a of t){if(a.status==="aborted")return T;a.status==="dirty"&&e.dirty(),n.push(a.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const a of t){const i=await a.key,o=await a.value;n.push({key:i,value:o})}return me.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const a of t){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return T;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}}const T=Object.freeze({status:"aborted"}),dt=s=>({status:"dirty",value:s}),xe=s=>({status:"valid",value:s}),Ns=s=>s.status==="aborted",Ss=s=>s.status==="dirty",Je=s=>s.status==="valid",At=s=>typeof Promise<"u"&&s instanceof Promise;var j;(function(s){s.errToObj=e=>typeof e=="string"?{message:e}:e||{},s.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(j||(j={}));class $e{constructor(e,t,n,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const ks=(s,e)=>{if(Je(e))return{success:!0,data:e.value};if(!s.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Ee(s.common.issues);return this._error=t,this._error}}};function M(s){if(!s)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:a}=s;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(o,l)=>{const{message:u}=s;return o.code==="invalid_enum_value"?{message:u??l.defaultError}:typeof l.data>"u"?{message:u??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:u??t??l.defaultError}},description:a}}class B{get description(){return this._def.description}_getType(e){return De(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:De(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new me,ctx:{common:e.parent.common,data:e.data,parsedType:De(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(At(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){const n={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:De(e)},a=this._parseSync({data:e,path:n.path,parent:n});return ks(n,a)}"~validate"(e){var n,a;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:De(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:t});return Je(i)?{value:i.value}:{issues:t.common.issues}}catch(i){(a=(n=i==null?void 0:i.message)==null?void 0:n.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(i=>Je(i)?{value:i.value}:{issues:t.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:De(e)},a=this._parse({data:e,path:n.path,parent:n}),i=await(At(a)?a:Promise.resolve(a));return ks(n,i)}refine(e,t){const n=a=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(a):t;return this._refinement((a,i)=>{const o=e(a),l=()=>i.addIssue({code:p.custom,...n(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,t){return this._refinement((n,a)=>e(n)?!0:(a.addIssue(typeof t=="function"?t(n,a):t),!1))}_refinement(e){return new et({schema:this,typeName:A.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Me.create(this,this._def)}nullable(){return tt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ke.create(this)}promise(){return Pt.create(this,this._def)}or(e){return Ot.create([this,e],this._def)}and(e){return Dt.create(this,e,this._def)}transform(e){return new et({...M(this._def),schema:this,typeName:A.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Jt({...M(this._def),innerType:this,defaultValue:t,typeName:A.ZodDefault})}brand(){return new hr({typeName:A.ZodBranded,type:this,...M(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Xt({...M(this._def),innerType:this,catchValue:t,typeName:A.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return is.create(this,e)}readonly(){return es.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Wa=/^c[^\s-]{8,}$/i,Ha=/^[0-9a-z]+$/,qa=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Ka=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Qa=/^[a-z0-9_-]{21}$/i,Ga=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Ya=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Ja=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Xa="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Zt;const er=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,tr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,sr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,nr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ar=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,rr=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Js="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ir=new RegExp(`^${Js}$`);function Xs(s){let e="[0-5]\\d";s.precision?e=`${e}\\.\\d{${s.precision}}`:s.precision==null&&(e=`${e}(\\.\\d+)?`);const t=s.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function or(s){return new RegExp(`^${Xs(s)}$`)}function lr(s){let e=`${Js}T${Xs(s)}`;const t=[];return t.push(s.local?"Z?":"Z"),s.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function cr(s,e){return!!((e==="v4"||!e)&&er.test(s)||(e==="v6"||!e)&&sr.test(s))}function dr(s,e){if(!Ga.test(s))return!1;try{const[t]=s.split("."),n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||e&&a.alg!==e)}catch{return!1}}function ur(s,e){return!!((e==="v4"||!e)&&tr.test(s)||(e==="v6"||!e)&&nr.test(s))}class Pe extends B{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==b.string){const i=this._getOrReturnCtx(e);return v(i,{code:p.invalid_type,expected:b.string,received:i.parsedType}),T}const n=new me;let a;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(a=this._getOrReturnCtx(e,a),v(a,{code:p.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(a=this._getOrReturnCtx(e,a),v(a,{code:p.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,l=e.data.length<i.value;(o||l)&&(a=this._getOrReturnCtx(e,a),o?v(a,{code:p.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&v(a,{code:p.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")Ja.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"email",code:p.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Zt||(Zt=new RegExp(Xa,"u")),Zt.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"emoji",code:p.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")Ka.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"uuid",code:p.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")Qa.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"nanoid",code:p.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")Wa.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"cuid",code:p.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")Ha.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"cuid2",code:p.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")qa.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"ulid",code:p.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),v(a,{validation:"url",code:p.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"regex",code:p.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(e,a),v(a,{code:p.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(a=this._getOrReturnCtx(e,a),v(a,{code:p.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(a=this._getOrReturnCtx(e,a),v(a,{code:p.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?lr(i).test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{code:p.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?ir.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{code:p.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?or(i).test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{code:p.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?Ya.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"duration",code:p.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?cr(e.data,i.version)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"ip",code:p.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?dr(e.data,i.alg)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"jwt",code:p.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?ur(e.data,i.version)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"cidr",code:p.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?ar.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"base64",code:p.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?rr.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"base64url",code:p.invalid_string,message:i.message}),n.dirty()):Z.assertNever(i);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(a=>e.test(a),{validation:t,code:p.invalid_string,...j.errToObj(n)})}_addCheck(e){return new Pe({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...j.errToObj(e)})}url(e){return this._addCheck({kind:"url",...j.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...j.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...j.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...j.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...j.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...j.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...j.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...j.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...j.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...j.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...j.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...j.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...j.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...j.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...j.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...j.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...j.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...j.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...j.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...j.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...j.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...j.errToObj(t)})}nonempty(e){return this.min(1,j.errToObj(e))}trim(){return new Pe({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Pe({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Pe({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Pe.create=s=>new Pe({checks:[],typeName:A.ZodString,coerce:(s==null?void 0:s.coerce)??!1,...M(s)});function fr(s,e){const t=(s.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,a=t>n?t:n,i=Number.parseInt(s.toFixed(a).replace(".","")),o=Number.parseInt(e.toFixed(a).replace(".",""));return i%o/10**a}class ft extends B{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==b.number){const i=this._getOrReturnCtx(e);return v(i,{code:p.invalid_type,expected:b.number,received:i.parsedType}),T}let n;const a=new me;for(const i of this._def.checks)i.kind==="int"?Z.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{code:p.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),v(n,{code:p.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),v(n,{code:p.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?fr(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),v(n,{code:p.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{code:p.not_finite,message:i.message}),a.dirty()):Z.assertNever(i);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,j.toString(t))}gt(e,t){return this.setLimit("min",e,!1,j.toString(t))}lte(e,t){return this.setLimit("max",e,!0,j.toString(t))}lt(e,t){return this.setLimit("max",e,!1,j.toString(t))}setLimit(e,t,n,a){return new ft({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:j.toString(a)}]})}_addCheck(e){return new ft({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:j.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:j.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:j.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:j.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:j.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:j.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:j.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:j.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:j.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Z.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}ft.create=s=>new ft({checks:[],typeName:A.ZodNumber,coerce:(s==null?void 0:s.coerce)||!1,...M(s)});class ht extends B{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==b.bigint)return this._getInvalidInput(e);let n;const a=new me;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),v(n,{code:p.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),v(n,{code:p.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),v(n,{code:p.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):Z.assertNever(i);return{status:a.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return v(t,{code:p.invalid_type,expected:b.bigint,received:t.parsedType}),T}gte(e,t){return this.setLimit("min",e,!0,j.toString(t))}gt(e,t){return this.setLimit("min",e,!1,j.toString(t))}lte(e,t){return this.setLimit("max",e,!0,j.toString(t))}lt(e,t){return this.setLimit("max",e,!1,j.toString(t))}setLimit(e,t,n,a){return new ht({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:j.toString(a)}]})}_addCheck(e){return new ht({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:j.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:j.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:j.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:j.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:j.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ht.create=s=>new ht({checks:[],typeName:A.ZodBigInt,coerce:(s==null?void 0:s.coerce)??!1,...M(s)});class Cs extends B{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==b.boolean){const n=this._getOrReturnCtx(e);return v(n,{code:p.invalid_type,expected:b.boolean,received:n.parsedType}),T}return xe(e.data)}}Cs.create=s=>new Cs({typeName:A.ZodBoolean,coerce:(s==null?void 0:s.coerce)||!1,...M(s)});class Rt extends B{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==b.date){const i=this._getOrReturnCtx(e);return v(i,{code:p.invalid_type,expected:b.date,received:i.parsedType}),T}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return v(i,{code:p.invalid_date}),T}const n=new me;let a;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(a=this._getOrReturnCtx(e,a),v(a,{code:p.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(a=this._getOrReturnCtx(e,a),v(a,{code:p.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):Z.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Rt({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:j.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:j.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Rt.create=s=>new Rt({checks:[],coerce:(s==null?void 0:s.coerce)||!1,typeName:A.ZodDate,...M(s)});class Is extends B{_parse(e){if(this._getType(e)!==b.symbol){const n=this._getOrReturnCtx(e);return v(n,{code:p.invalid_type,expected:b.symbol,received:n.parsedType}),T}return xe(e.data)}}Is.create=s=>new Is({typeName:A.ZodSymbol,...M(s)});class Es extends B{_parse(e){if(this._getType(e)!==b.undefined){const n=this._getOrReturnCtx(e);return v(n,{code:p.invalid_type,expected:b.undefined,received:n.parsedType}),T}return xe(e.data)}}Es.create=s=>new Es({typeName:A.ZodUndefined,...M(s)});class Ts extends B{_parse(e){if(this._getType(e)!==b.null){const n=this._getOrReturnCtx(e);return v(n,{code:p.invalid_type,expected:b.null,received:n.parsedType}),T}return xe(e.data)}}Ts.create=s=>new Ts({typeName:A.ZodNull,...M(s)});class As extends B{constructor(){super(...arguments),this._any=!0}_parse(e){return xe(e.data)}}As.create=s=>new As({typeName:A.ZodAny,...M(s)});class Rs extends B{constructor(){super(...arguments),this._unknown=!0}_parse(e){return xe(e.data)}}Rs.create=s=>new Rs({typeName:A.ZodUnknown,...M(s)});class Le extends B{_parse(e){const t=this._getOrReturnCtx(e);return v(t,{code:p.invalid_type,expected:b.never,received:t.parsedType}),T}}Le.create=s=>new Le({typeName:A.ZodNever,...M(s)});class Os extends B{_parse(e){if(this._getType(e)!==b.undefined){const n=this._getOrReturnCtx(e);return v(n,{code:p.invalid_type,expected:b.void,received:n.parsedType}),T}return xe(e.data)}}Os.create=s=>new Os({typeName:A.ZodVoid,...M(s)});class ke extends B{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),a=this._def;if(t.parsedType!==b.array)return v(t,{code:p.invalid_type,expected:b.array,received:t.parsedType}),T;if(a.exactLength!==null){const o=t.data.length>a.exactLength.value,l=t.data.length<a.exactLength.value;(o||l)&&(v(t,{code:o?p.too_big:p.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&t.data.length<a.minLength.value&&(v(t,{code:p.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&t.data.length>a.maxLength.value&&(v(t,{code:p.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((o,l)=>a.type._parseAsync(new $e(t,o,t.path,l)))).then(o=>me.mergeArray(n,o));const i=[...t.data].map((o,l)=>a.type._parseSync(new $e(t,o,t.path,l)));return me.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new ke({...this._def,minLength:{value:e,message:j.toString(t)}})}max(e,t){return new ke({...this._def,maxLength:{value:e,message:j.toString(t)}})}length(e,t){return new ke({...this._def,exactLength:{value:e,message:j.toString(t)}})}nonempty(e){return this.min(1,e)}}ke.create=(s,e)=>new ke({type:s,minLength:null,maxLength:null,exactLength:null,typeName:A.ZodArray,...M(e)});function Ye(s){if(s instanceof Y){const e={};for(const t in s.shape){const n=s.shape[t];e[t]=Me.create(Ye(n))}return new Y({...s._def,shape:()=>e})}else return s instanceof ke?new ke({...s._def,type:Ye(s.element)}):s instanceof Me?Me.create(Ye(s.unwrap())):s instanceof tt?tt.create(Ye(s.unwrap())):s instanceof Ue?Ue.create(s.items.map(e=>Ye(e))):s}class Y extends B{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Z.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==b.object){const d=this._getOrReturnCtx(e);return v(d,{code:p.invalid_type,expected:b.object,received:d.parsedType}),T}const{status:n,ctx:a}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Le&&this._def.unknownKeys==="strip"))for(const d in a.data)o.includes(d)||l.push(d);const u=[];for(const d of o){const f=i[d],c=a.data[d];u.push({key:{status:"valid",value:d},value:f._parse(new $e(a,c,a.path,d)),alwaysSet:d in a.data})}if(this._def.catchall instanceof Le){const d=this._def.unknownKeys;if(d==="passthrough")for(const f of l)u.push({key:{status:"valid",value:f},value:{status:"valid",value:a.data[f]}});else if(d==="strict")l.length>0&&(v(a,{code:p.unrecognized_keys,keys:l}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const f of l){const c=a.data[f];u.push({key:{status:"valid",value:f},value:d._parse(new $e(a,c,a.path,f)),alwaysSet:f in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const d=[];for(const f of u){const c=await f.key,h=await f.value;d.push({key:c,value:h,alwaysSet:f.alwaysSet})}return d}).then(d=>me.mergeObjectSync(n,d)):me.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return j.errToObj,new Y({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var i,o;const a=((o=(i=this._def).errorMap)==null?void 0:o.call(i,t,n).message)??n.defaultError;return t.code==="unrecognized_keys"?{message:j.errToObj(e).message??a}:{message:a}}}:{}})}strip(){return new Y({...this._def,unknownKeys:"strip"})}passthrough(){return new Y({...this._def,unknownKeys:"passthrough"})}extend(e){return new Y({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Y({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:A.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Y({...this._def,catchall:e})}pick(e){const t={};for(const n of Z.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new Y({...this._def,shape:()=>t})}omit(e){const t={};for(const n of Z.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new Y({...this._def,shape:()=>t})}deepPartial(){return Ye(this)}partial(e){const t={};for(const n of Z.objectKeys(this.shape)){const a=this.shape[n];e&&!e[n]?t[n]=a:t[n]=a.optional()}return new Y({...this._def,shape:()=>t})}required(e){const t={};for(const n of Z.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Me;)i=i._def.innerType;t[n]=i}return new Y({...this._def,shape:()=>t})}keyof(){return en(Z.objectKeys(this.shape))}}Y.create=(s,e)=>new Y({shape:()=>s,unknownKeys:"strip",catchall:Le.create(),typeName:A.ZodObject,...M(e)});Y.strictCreate=(s,e)=>new Y({shape:()=>s,unknownKeys:"strict",catchall:Le.create(),typeName:A.ZodObject,...M(e)});Y.lazycreate=(s,e)=>new Y({shape:s,unknownKeys:"strip",catchall:Le.create(),typeName:A.ZodObject,...M(e)});class Ot extends B{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function a(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return t.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new Ee(l.ctx.common.issues));return v(t,{code:p.invalid_union,unionErrors:o}),T}if(t.common.async)return Promise.all(n.map(async i=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const u of n){const d={...t,common:{...t.common,issues:[]},parent:null},f=u._parseSync({data:t.data,path:t.path,parent:d});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(u=>new Ee(u));return v(t,{code:p.invalid_union,unionErrors:l}),T}}get options(){return this._def.options}}Ot.create=(s,e)=>new Ot({options:s,typeName:A.ZodUnion,...M(e)});function Yt(s,e){const t=De(s),n=De(e);if(s===e)return{valid:!0,data:s};if(t===b.object&&n===b.object){const a=Z.objectKeys(e),i=Z.objectKeys(s).filter(l=>a.indexOf(l)!==-1),o={...s,...e};for(const l of i){const u=Yt(s[l],e[l]);if(!u.valid)return{valid:!1};o[l]=u.data}return{valid:!0,data:o}}else if(t===b.array&&n===b.array){if(s.length!==e.length)return{valid:!1};const a=[];for(let i=0;i<s.length;i++){const o=s[i],l=e[i],u=Yt(o,l);if(!u.valid)return{valid:!1};a.push(u.data)}return{valid:!0,data:a}}else return t===b.date&&n===b.date&&+s==+e?{valid:!0,data:s}:{valid:!1}}class Dt extends B{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=(i,o)=>{if(Ns(i)||Ns(o))return T;const l=Yt(i.value,o.value);return l.valid?((Ss(i)||Ss(o))&&t.dirty(),{status:t.value,value:l.data}):(v(n,{code:p.invalid_intersection_types}),T)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Dt.create=(s,e,t)=>new Dt({left:s,right:e,typeName:A.ZodIntersection,...M(t)});class Ue extends B{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==b.array)return v(n,{code:p.invalid_type,expected:b.array,received:n.parsedType}),T;if(n.data.length<this._def.items.length)return v(n,{code:p.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),T;!this._def.rest&&n.data.length>this._def.items.length&&(v(n,{code:p.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...n.data].map((o,l)=>{const u=this._def.items[l]||this._def.rest;return u?u._parse(new $e(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>me.mergeArray(t,o)):me.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new Ue({...this._def,rest:e})}}Ue.create=(s,e)=>{if(!Array.isArray(s))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ue({items:s,typeName:A.ZodTuple,rest:null,...M(e)})};class Ds extends B{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==b.map)return v(n,{code:p.invalid_type,expected:b.map,received:n.parsedType}),T;const a=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([l,u],d)=>({key:a._parse(new $e(n,l,n.path,[d,"key"])),value:i._parse(new $e(n,u,n.path,[d,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const u of o){const d=await u.key,f=await u.value;if(d.status==="aborted"||f.status==="aborted")return T;(d.status==="dirty"||f.status==="dirty")&&t.dirty(),l.set(d.value,f.value)}return{status:t.value,value:l}})}else{const l=new Map;for(const u of o){const d=u.key,f=u.value;if(d.status==="aborted"||f.status==="aborted")return T;(d.status==="dirty"||f.status==="dirty")&&t.dirty(),l.set(d.value,f.value)}return{status:t.value,value:l}}}}Ds.create=(s,e,t)=>new Ds({valueType:e,keyType:s,typeName:A.ZodMap,...M(t)});class mt extends B{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==b.set)return v(n,{code:p.invalid_type,expected:b.set,received:n.parsedType}),T;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(v(n,{code:p.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(v(n,{code:p.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const i=this._def.valueType;function o(u){const d=new Set;for(const f of u){if(f.status==="aborted")return T;f.status==="dirty"&&t.dirty(),d.add(f.value)}return{status:t.value,value:d}}const l=[...n.data.values()].map((u,d)=>i._parse(new $e(n,u,n.path,d)));return n.common.async?Promise.all(l).then(u=>o(u)):o(l)}min(e,t){return new mt({...this._def,minSize:{value:e,message:j.toString(t)}})}max(e,t){return new mt({...this._def,maxSize:{value:e,message:j.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}mt.create=(s,e)=>new mt({valueType:s,minSize:null,maxSize:null,typeName:A.ZodSet,...M(e)});class Ps extends B{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Ps.create=(s,e)=>new Ps({getter:s,typeName:A.ZodLazy,...M(e)});class Ms extends B{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return v(t,{received:t.data,code:p.invalid_literal,expected:this._def.value}),T}return{status:"valid",value:e.data}}get value(){return this._def.value}}Ms.create=(s,e)=>new Ms({value:s,typeName:A.ZodLiteral,...M(e)});function en(s,e){return new Xe({values:s,typeName:A.ZodEnum,...M(e)})}class Xe extends B{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return v(t,{expected:Z.joinValues(n),received:t.parsedType,code:p.invalid_type}),T}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return v(t,{received:t.data,code:p.invalid_enum_value,options:n}),T}return xe(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Xe.create(e,{...this._def,...t})}exclude(e,t=this._def){return Xe.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}Xe.create=en;class $s extends B{_parse(e){const t=Z.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==b.string&&n.parsedType!==b.number){const a=Z.objectValues(t);return v(n,{expected:Z.joinValues(a),received:n.parsedType,code:p.invalid_type}),T}if(this._cache||(this._cache=new Set(Z.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const a=Z.objectValues(t);return v(n,{received:n.data,code:p.invalid_enum_value,options:a}),T}return xe(e.data)}get enum(){return this._def.values}}$s.create=(s,e)=>new $s({values:s,typeName:A.ZodNativeEnum,...M(e)});class Pt extends B{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==b.promise&&t.common.async===!1)return v(t,{code:p.invalid_type,expected:b.promise,received:t.parsedType}),T;const n=t.parsedType===b.promise?t.data:Promise.resolve(t.data);return xe(n.then(a=>this._def.type.parseAsync(a,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Pt.create=(s,e)=>new Pt({type:s,typeName:A.ZodPromise,...M(e)});class et extends B{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===A.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=this._def.effect||null,i={addIssue:o=>{v(n,o),o.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async l=>{if(t.value==="aborted")return T;const u=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return u.status==="aborted"?T:u.status==="dirty"||t.value==="dirty"?dt(u.value):u});{if(t.value==="aborted")return T;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?T:l.status==="dirty"||t.value==="dirty"?dt(l.value):l}}if(a.type==="refinement"){const o=l=>{const u=a.refinement(l,i);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?T:(l.status==="dirty"&&t.dirty(),o(l.value),{status:t.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?T:(l.status==="dirty"&&t.dirty(),o(l.value).then(()=>({status:t.value,value:l.value}))))}if(a.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Je(o))return T;const l=a.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Je(o)?Promise.resolve(a.transform(o.value,i)).then(l=>({status:t.value,value:l})):T);Z.assertNever(a)}}et.create=(s,e,t)=>new et({schema:s,typeName:A.ZodEffects,effect:e,...M(t)});et.createWithPreprocess=(s,e,t)=>new et({schema:e,effect:{type:"preprocess",transform:s},typeName:A.ZodEffects,...M(t)});class Me extends B{_parse(e){return this._getType(e)===b.undefined?xe(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Me.create=(s,e)=>new Me({innerType:s,typeName:A.ZodOptional,...M(e)});class tt extends B{_parse(e){return this._getType(e)===b.null?xe(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}tt.create=(s,e)=>new tt({innerType:s,typeName:A.ZodNullable,...M(e)});class Jt extends B{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===b.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Jt.create=(s,e)=>new Jt({innerType:s,typeName:A.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...M(e)});class Xt extends B{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return At(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ee(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ee(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Xt.create=(s,e)=>new Xt({innerType:s,typeName:A.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...M(e)});class Ls extends B{_parse(e){if(this._getType(e)!==b.nan){const n=this._getOrReturnCtx(e);return v(n,{code:p.invalid_type,expected:b.nan,received:n.parsedType}),T}return{status:"valid",value:e.data}}}Ls.create=s=>new Ls({typeName:A.ZodNaN,...M(s)});class hr extends B{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class is extends B{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?T:i.status==="dirty"?(t.dirty(),dt(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?T:a.status==="dirty"?(t.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(e,t){return new is({in:e,out:t,typeName:A.ZodPipeline})}}class es extends B{_parse(e){const t=this._def.innerType._parse(e),n=a=>(Je(a)&&(a.value=Object.freeze(a.value)),a);return At(t)?t.then(a=>n(a)):n(t)}unwrap(){return this._def.innerType}}es.create=(s,e)=>new es({innerType:s,typeName:A.ZodReadonly,...M(e)});var A;(function(s){s.ZodString="ZodString",s.ZodNumber="ZodNumber",s.ZodNaN="ZodNaN",s.ZodBigInt="ZodBigInt",s.ZodBoolean="ZodBoolean",s.ZodDate="ZodDate",s.ZodSymbol="ZodSymbol",s.ZodUndefined="ZodUndefined",s.ZodNull="ZodNull",s.ZodAny="ZodAny",s.ZodUnknown="ZodUnknown",s.ZodNever="ZodNever",s.ZodVoid="ZodVoid",s.ZodArray="ZodArray",s.ZodObject="ZodObject",s.ZodUnion="ZodUnion",s.ZodDiscriminatedUnion="ZodDiscriminatedUnion",s.ZodIntersection="ZodIntersection",s.ZodTuple="ZodTuple",s.ZodRecord="ZodRecord",s.ZodMap="ZodMap",s.ZodSet="ZodSet",s.ZodFunction="ZodFunction",s.ZodLazy="ZodLazy",s.ZodLiteral="ZodLiteral",s.ZodEnum="ZodEnum",s.ZodEffects="ZodEffects",s.ZodNativeEnum="ZodNativeEnum",s.ZodOptional="ZodOptional",s.ZodNullable="ZodNullable",s.ZodDefault="ZodDefault",s.ZodCatch="ZodCatch",s.ZodPromise="ZodPromise",s.ZodBranded="ZodBranded",s.ZodPipeline="ZodPipeline",s.ZodReadonly="ZodReadonly"})(A||(A={}));const _t=Pe.create;Le.create;ke.create;const mr=Y.create;Ot.create;Dt.create;Ue.create;Xe.create;Pt.create;Me.create;tt.create;const pr=mr({name:_t().min(1,""),url:_t().url(""),favicon:_t().url("URL"),note:_t().optional()});function tn({id:s,name:e,url:t,favicon:n,tags:a,note:i,onClose:o,onSave:l,onDelete:u}){const[d,f]=m.useState({name:e,url:t,favicon:n,note:i||""}),[c,h]=m.useState({}),[_,N]=m.useState(!1),$=w=>{const I=/\{([^}]+)\}/g;return(w.match(I)||[]).map(k=>k.replace(/\{|\}/g,"").trim())},C=w=>w.replace(/\{[^}]+\}/g,"").trim(),U=async()=>{if(!d.url||!d.url.startsWith("http")){h({url:"(http://https://)"});return}try{N(!0);const w=new URL(d.url).hostname;f(I=>({...I,favicon:`https://www.google.com/s2/favicons?domain=${d.url}`})),f(I=>({...I,name:w.replace("www.","").split(".")[0]})),h(I=>{const L={...I};return delete L.url,L})}catch(w){console.error(":",w),h({url:""})}finally{N(!1)}},G=w=>{w.preventDefault();try{const I=pr.safeParse(d);if(!I.success){const R={};I.error.errors.forEach(W=>{R[W.path[0]]=W.message}),h(R);return}const L=$(d.note||""),k=C(d.note||"");l({id:s,name:d.name,url:d.url,favicon:d.favicon,tags:L,note:k}),o()}catch(I){console.error(":",I)}},S=w=>{const{name:I,value:L}=w.target;f(k=>({...k,[I]:L})),c[I]&&h(k=>{const R={...k};return delete R[I],R})};return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 select-none",children:r.jsxs(X.div,{className:"w-full max-w-md bg-white rounded-xl shadow-xl p-6 select-none",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{type:"spring",damping:25},children:[r.jsxs("div",{className:"flex justify-between items-center mb-4 select-none",children:[r.jsx("h2",{className:"text-xl font-semibold select-none",children:""}),r.jsx("button",{onClick:o,className:"text-gray-500 hover:text-gray-700 select-none",children:r.jsx("i",{className:"fa-solid fa-xmark select-none"})})]}),r.jsxs("form",{onSubmit:G,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 select-none",children:""}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"url",name:"url",value:d.url,onChange:S,className:"flex-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com"}),r.jsx("button",{type:"button",onClick:U,disabled:_||!d.url,className:"px-3 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-blue-300 select-none",children:_?"...":""})]}),c.url&&r.jsx("p",{className:"mt-1 text-sm text-red-500 select-none",children:c.url})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 select-none",children:""}),r.jsx("input",{type:"text",name:"name",value:d.name,onChange:S,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:""}),c.name&&r.jsx("p",{className:"mt-1 text-sm text-red-500 select-none",children:c.name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 select-none",children:""}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex-1",children:r.jsx("input",{type:"url",name:"favicon",value:d.favicon,onChange:S,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/favicon.ico"})}),r.jsx("span",{className:"text-gray-400 select-none",children:""}),r.jsxs("label",{className:"cursor-pointer select-none",children:[r.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:w=>{var L;const I=(L=w.target.files)==null?void 0:L[0];if(I){const k=new FileReader;k.onload=R=>{var W;(W=R.target)!=null&&W.result&&f(F=>{var z;return{...F,favicon:(z=R.target)==null?void 0:z.result}})},k.readAsDataURL(I)}}}),r.jsxs("div",{className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm text-gray-700 transition-colors select-none",children:[r.jsx("i",{className:"fa-solid fa-upload mr-1 select-none"}),""]})]})]}),d.favicon&&r.jsxs("div",{className:"mt-2 flex items-center select-none",children:[r.jsx("img",{src:d.favicon,alt:"",className:"w-8 h-8 rounded mr-2 select-none"}),r.jsx("span",{className:"text-xs text-gray-500 truncate max-w-xs select-none",children:d.favicon.startsWith("data:image")?"":d.favicon})]}),c.favicon&&r.jsx("p",{className:"mt-1 text-sm text-red-500 select-none",children:c.favicon})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 select-none",children:[" (",":  ",""," ","",")"]}),r.jsxs("div",{className:"text-xs text-gray-500 mb-1 select-none",children:["",""]}),r.jsx("textarea",{name:"note",value:d.note,onChange:S,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"..."})]}),r.jsxs("div",{className:"flex flex-col gap-4 pt-4 select-none",children:[r.jsxs("div",{className:"flex gap-2 select-none",children:[r.jsx("button",{type:"button",onClick:o,className:"flex-1 px-4 py-2 text-gray-700 border rounded-md hover:bg-gray-50 select-none",children:""}),r.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 select-none",children:""})]}),u&&r.jsxs("button",{type:"button",onClick:()=>{confirm("")&&(u(s),o())},className:"w-full px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 shadow-md select-none",children:[r.jsx("i",{className:"fa-solid fa-trash mr-2 select-none"}),""]})]})]})]})})}const sn=m.createContext(void 0);function gr({children:s}){const[e,t]=m.useState(()=>{const h=localStorage.getItem("cardOpacity");return h?parseFloat(h):.1}),[n,a]=m.useState(()=>{const h=localStorage.getItem("searchBarOpacity");return h?parseFloat(h):.1}),[i,o]=m.useState(()=>{const h=localStorage.getItem("parallaxEnabled");return h?JSON.parse(h):!0}),l=()=>window.innerHeight>window.innerWidth?"mobile":"1080p",[u,d]=m.useState(()=>localStorage.getItem("wallpaperResolution")||l()),[f,c]=m.useState(!1);return m.useEffect(()=>{localStorage.setItem("cardOpacity",e.toString())},[e]),m.useEffect(()=>{localStorage.setItem("searchBarOpacity",n.toString())},[n]),m.useEffect(()=>{localStorage.setItem("parallaxEnabled",JSON.stringify(i))},[i]),m.useEffect(()=>{localStorage.setItem("wallpaperResolution",u)},[u]),r.jsx(sn.Provider,{value:{cardOpacity:e,searchBarOpacity:n,parallaxEnabled:i,wallpaperResolution:u,isSettingsOpen:f,setCardOpacity:t,setSearchBarOpacity:a,setParallaxEnabled:o,setWallpaperResolution:d,setIsSettingsOpen:c},children:s})}function nt(){const s=m.useContext(sn);if(s===void 0)throw new Error("useTransparency must be used within a TransparencyProvider");return s}class xr{constructor(){Ne(this,"cacheKey","favicon-cache-v1");Ne(this,"defaultExpiry",7*24*60*60*1e3);Ne(this,"cache",{});Ne(this,"loadingPromises",new Map);this.loadCache()}loadCache(){try{const e=localStorage.getItem(this.cacheKey);e&&(this.cache=JSON.parse(e),this.cleanExpiredCache())}catch(e){console.warn(" favicon :",e),this.cache={}}}saveCache(){try{localStorage.setItem(this.cacheKey,JSON.stringify(this.cache))}catch(e){console.warn(" favicon :",e)}}cleanExpiredCache(){const e=Date.now(),t=[];for(const[n,a]of Object.entries(this.cache))e>a.expiry&&t.push(n);t.forEach(n=>{delete this.cache[n]}),t.length>0&&this.saveCache()}extractDomain(e){try{return new URL(e).hostname.replace(/^www\./,"")}catch{return e.replace(/^(https?:\/\/)?(www\.)?/,"").split("/")[0]}}getFaviconUrls(e,t){return[e,`https://www.google.com/s2/favicons?domain=${t}&sz=128`,`https://favicon.yandex.net/favicon/v2/${t}?size=120`,`https://${t}/apple-touch-icon.png`,`https://icons.duckduckgo.com/ip3/${t}.ico`,`https://${t}/favicon.ico`]}async tryLoadFavicon(e){for(const t of e)try{return await new Promise((n,a)=>{const i=new Image;i.onload=()=>n(),i.onerror=()=>a(),i.src=t}),t}catch{continue}return e[e.length-1]}getCachedFavicon(e){const t=this.extractDomain(e),n=this.cache[t];return n&&Date.now()<n.expiry?n.cachedUrl:null}async getFavicon(e,t){const n=this.extractDomain(e),a=this.getCachedFavicon(e);if(a)return a;if(this.loadingPromises.has(n))return this.loadingPromises.get(n);const i=this.loadFavicon(e,t,n);this.loadingPromises.set(n,i);try{return await i}finally{this.loadingPromises.delete(n)}}async loadFavicon(e,t,n){const a=this.getFaviconUrls(t,n);try{const i=await this.tryLoadFavicon(a);return this.cache[n]={url:e,cachedUrl:i,timestamp:Date.now(),expiry:Date.now()+this.defaultExpiry},this.saveCache(),i}catch(i){return console.warn(` favicon : ${n}`,i),a[0]}}async preloadFavicons(e){const t=e.filter(a=>!this.getCachedFavicon(a.url));if(t.length===0)return;const n=5;for(let a=0;a<t.length;a+=n){const i=t.slice(a,a+n);await Promise.allSettled(i.map(o=>this.getFavicon(o.url,o.favicon)))}}clearCache(){this.cache={},this.loadingPromises.clear();try{localStorage.removeItem(this.cacheKey)}catch(e){console.warn(" favicon :",e)}}getCacheStats(){const e=Date.now(),t=Object.keys(this.cache).length,n=Object.values(this.cache).filter(i=>e>i.expiry).length;let a="0 KB";try{a=`${(new Blob([JSON.stringify(this.cache)]).size/1024).toFixed(1)} KB`}catch{}return{total:t,expired:n,size:a}}}const St=new xr;function yr(s,e){const[t,n]=m.useState(()=>St.getCachedFavicon(s)||e),[a,i]=m.useState(!1),[o,l]=m.useState(!1);return m.useEffect(()=>{const u=St.getCachedFavicon(s);if(u){n(u);return}i(!0),l(!1),St.getFavicon(s,e).then(d=>{n(d),l(!1)}).catch(d=>{console.warn("Favicon :",d),l(!0),n(e)}).finally(()=>{i(!1)})},[s,e]),{faviconUrl:t,isLoading:a,error:o}}function vr({id:s,name:e,url:t,favicon:n,tags:a,visitCount:i,note:o,onSave:l,onDelete:u}){const[d,f]=m.useState(!1),c=m.useRef(null),{cardOpacity:h}=nt(),{faviconUrl:_}=yr(t,n),N=()=>{l({id:s,name:e,url:t,favicon:n,tags:a,note:o,visitCount:(i||0)+1,lastVisit:new Date().toISOString().split("T")[0]}),window.open(t,"_blank")};return r.jsxs(r.Fragment,{children:[r.jsxs(X.div,{ref:c,className:"w-32 h-32 rounded-xl cursor-pointer shadow-lg backdrop-blur-md border border-white/20 overflow-hidden relative group select-none",style:{backgroundColor:`rgba(255, 255, 255, ${h})`},whileHover:{scale:1.05},whileTap:{scale:.98},transition:{type:"spring",stiffness:300,damping:15},onClick:N,children:[r.jsx("div",{className:"absolute bottom-0.5 right-0.5 z-11",children:r.jsx("button",{onClick:$=>{$.stopPropagation(),f(!0)},className:"p-1 text-white/50 hover:text-white select-none",children:r.jsx("i",{className:"fa-solid fa-gear text-xs select-none"})})}),r.jsxs("div",{className:"h-full flex flex-col pt-3",children:[r.jsxs("div",{className:"flex flex-col items-center px-2 select-none",children:[r.jsxs("div",{className:"w-11 h-11 mb-1 rounded-md overflow-hidden select-none",children:[" ",r.jsx("img",{src:_,alt:`${e} favicon`,className:"w-full h-full object-contain select-none",loading:"lazy"})]}),r.jsx("h3",{className:"text-xs font-medium text-white text-center line-clamp-2 px-2 mt-1 select-none",children:e})," "]}),r.jsx("div",{className:"px-2 mb-1 select-none",children:r.jsx("p",{className:"text-white/60 text-[0.65rem] text-center line-clamp-2 select-none",children:o||new URL(t).hostname})}),r.jsx("div",{className:"mt-0 px-3 pb-2 select-none",children:r.jsx("div",{className:"flex flex-wrap gap-1 justify-center select-none",children:a.slice(0,6).map($=>r.jsx("span",{className:"px-1.5 py-0.5 bg-white/20 rounded-full text-[0.65rem] text-white max-w-[60px] truncate select-none",children:$},$))})})]})]}),d&&r.jsx(tn,{id:s,name:e,url:t,favicon:n,tags:a,note:o,onClose:()=>f(!1),onSave:$=>{l($),f(!1)},onDelete:u})]})}function br(s={}){var ye,H;const[e,t]=m.useState(""),[n,a]=m.useState(!1),[i,o]=m.useState("bing"),[l,u]=m.useState(!1),[d,f]=m.useState([]),[c,h]=m.useState(!1),[_,N]=m.useState(-1),$=m.useRef(null),[C,U]=m.useState(null),[G,S]=m.useState(null),[w,I]=m.useState(!1),L=m.useRef(null),{searchBarOpacity:k}=nt(),R=[{key:"bing",label:"Bing",icon:r.jsx("i",{className:"fa-brands fa-microsoft text-blue-400"})},{key:"google",label:"Google",icon:r.jsx("i",{className:"fa-brands fa-google text-blue-500"})}],W=(x,y)=>{const E=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FECA57","#FF9FF3","#54A0FF","#5F27CD","#00D2D3","#FF9F43","#EE5A24","#FD79A8","#0FB9B1","#A55EEA","#26D0CE","#FDCB6E","#6C5CE7","#74B9FF","#E17055","#F39C12","#E74C3C","#3498DB","#9B59B6","#1ABC9C"],q=["M2,5 Q12,2 22,5 Q32,8 42,5 L42,8 Q32,11 22,8 Q12,5 2,8 Z","M20,2 L38,2 L29,12 Z","M20,7 A6,6 0,1,1 20,7.1 Z","M20,2 L30,7 L20,12 L10,7 Z","M20,2 L22,8 L28,8 L23,11 L25,17 L20,14 L15,17 L17,11 L12,8 L18,8 Z","M2,6 Q15,2 28,6 Q41,10 54,6 L54,9 Q41,13 28,9 Q15,5 2,9 Z","M5,5 L10,2 L15,5 L20,2 L25,5 L30,2 L35,5 L35,8 L30,11 L25,8 L20,11 L15,8 L10,11 L5,8 Z","M20,2 Q25,7 20,12 Q15,7 20,2 M20,2 Q25,7 30,2 Q25,7 30,12 Q25,7 20,12","M20,4 C18,2 15,2 15,5 C15,8 20,12 20,12 C20,12 25,8 25,5 C25,2 22,2 20,4 Z","M15,4 Q10,7 15,10 Q20,7 25,10 Q30,7 25,4 Q20,7 15,4","M5,4 Q20,2 35,4 Q40,7 35,10 Q20,8 5,10 Q0,7 5,4","M2,7 Q10,3 18,7 Q26,11 34,7 Q38,5 42,7 L42,10 Q38,8 34,10 Q26,14 18,10 Q10,6 2,10 Z"];for(let Q=0;Q<50;Q++){const V=document.createElementNS("http://www.w3.org/2000/svg","svg"),J=document.createElementNS("http://www.w3.org/2000/svg","path"),ue=E[Math.floor(Math.random()*E.length)],rt=q[Math.floor(Math.random()*q.length)],it=Math.random()*.6+.5,ot=44*it,Fe=16*it;if(V.setAttribute("width",ot.toString()),V.setAttribute("height",Fe.toString()),V.setAttribute("viewBox","0 0 44 16"),V.style.cssText=`
        position: fixed;
        pointer-events: none;
        z-index: 10000;
        left: ${x-ot/2}px;
        top: ${y-Fe/2}px;
        transform-origin: center;
      `,J.setAttribute("d",rt),J.setAttribute("fill",ue),Math.random()>.5&&(J.setAttribute("stroke",ue),J.setAttribute("stroke-width","1"),J.setAttribute("fill-opacity","0.8")),Math.random()>.7){const Ke=`gradient-${Date.now()}-${Q}`,Re=document.createElementNS("http://www.w3.org/2000/svg","defs"),pe=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),_e=document.createElementNS("http://www.w3.org/2000/svg","stop"),Qe=document.createElementNS("http://www.w3.org/2000/svg","stop");pe.setAttribute("id",Ke),pe.setAttribute("x1","0%"),pe.setAttribute("y1","0%"),pe.setAttribute("x2","100%"),pe.setAttribute("y2","100%"),_e.setAttribute("offset","0%"),_e.setAttribute("stop-color",ue),Qe.setAttribute("offset","100%"),Qe.setAttribute("stop-color",E[Math.floor(Math.random()*E.length)]),pe.appendChild(_e),pe.appendChild(Qe),Re.appendChild(pe),V.appendChild(Re),J.setAttribute("fill",`url(#${Ke})`)}V.appendChild(J),document.body.appendChild(V);const pt=Math.random()*360*(Math.PI/180),lt=Math.random()*4+2;let Te=Math.cos(pt)*lt,qe=Math.sin(pt)*lt;const ve=(Math.random()-.5)*80;let gt=Math.random()*360,xt=x-ot/2,ne=y-Fe/2;const Ae=.2,yt=.998,zt=Date.now(),Be=()=>{const Ke=(Date.now()-zt)/1e3;qe+=Ae,Te*=yt,qe*=yt,xt+=Te,ne+=qe,gt+=ve*(1/60),V.style.left=xt+"px",V.style.top=ne+"px",V.style.transform=`rotate(${gt}deg)`;const Re=Math.max(0,1-Ke/7);V.style.opacity=Re.toString(),Re>0&&ne<window.innerHeight+100?requestAnimationFrame(Be):document.body.contains(V)&&document.body.removeChild(V)};setTimeout(()=>{requestAnimationFrame(Be)},Math.random()*150)}},F=()=>{const x=R.findIndex(E=>E.key===i),y=R[(x+1)%R.length].key;if(o(y),L.current){const E=L.current.getBoundingClientRect(),q=E.left+60,P=E.top+E.height/2;W(q,P)}},z=["chatGPT","Gemini","Deepseek","Kimi"],oe=["https://chatgpt.com/","https://gemini.google.com/","https://chat.deepseek.com/","https://www.kimi.com/"],je=[r.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,verticalAlign:"middle",position:"relative",top:"1px",userSelect:"none"},children:r.jsx("img",{src:"/jiang_ai_web/icon/chatgpt.svg",alt:"chatGPT",style:{width:20,height:20,display:"block",userSelect:"none"}})}),r.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,verticalAlign:"middle",position:"relative",top:"1px",userSelect:"none"},children:r.jsx("img",{src:"/jiang_ai_web/icon/gemini.svg",alt:"Gemini",style:{width:20,height:20,display:"block",userSelect:"none"}})}),r.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,verticalAlign:"middle",position:"relative",top:"1px",userSelect:"none"},children:r.jsx("img",{src:"/jiang_ai_web/icon/deepseek.svg",alt:"Deepseek",style:{width:20,height:20,display:"block",userSelect:"none"}})}),r.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,verticalAlign:"middle",position:"relative",top:"1px",userSelect:"none"},children:r.jsx("img",{src:"/jiang_ai_web/icon/kimi.svg",alt:"Kimi",style:{width:20,height:20,display:"block",userSelect:"none"}})})],Ie=(x,y)=>{switch(x){case"google":return`https://www.google.com/search?q=${encodeURIComponent(y)}`;default:return`https://www.bing.com/search?q=${encodeURIComponent(y)}`}},ee=async x=>{if(!x.trim())return[];try{const y=document.createElement("script"),E=`baiduCallback_${Date.now()}`;return new Promise(q=>{window[E]=P=>{if(P&&P.s&&Array.isArray(P.s)){const Q=P.s.slice(0,5).map((V,J)=>({id:`baidu-${J}`,text:V,query:V}));q(Q)}else{const Q=D(x);q(Q.slice(0,5).map((V,J)=>({id:`local-${J}`,text:V,query:V})))}document.head.removeChild(y),delete window[E]},setTimeout(()=>{if(window[E]){const P=D(x);q(P.slice(0,5).map((Q,V)=>({id:`local-${V}`,text:Q,query:Q}))),document.head.contains(y)&&document.head.removeChild(y),delete window[E]}},2e3),y.src=`https://suggestion.baidu.com/su?wd=${encodeURIComponent(x)}&cb=${E}`,y.onerror=()=>{const P=D(x);q(P.slice(0,5).map((Q,V)=>({id:`local-${V}`,text:Q,query:Q}))),document.head.contains(y)&&document.head.removeChild(y),delete window[E]},document.head.appendChild(y)})}catch(y){return console.warn("Failed to fetch Baidu suggestions:",y),D(x).slice(0,5).map((q,P)=>({id:`local-${P}`,text:q,query:q}))}},D=x=>{const y=[],E=x.toLowerCase(),q=[x,`${x} `,`${x} `,`${x} `,` ${x}`,`${x} `,`${x} `,`${x} `];return E.includes("")||E.includes("how")?y.push(`${x}`,`${x} `,`${x} `):E.includes("")||E.includes("")?y.push(`${x}`,`${x} `,`${x} `):y.push(...q),[...new Set(y)]};m.useEffect(()=>{const x=setTimeout(()=>{e.trim()?ee(e).then(y=>{f(y),h(y.length>0),N(-1)}):(f([]),h(!1),N(-1))},500);return()=>clearTimeout(x)},[e]);const se=(x,y)=>{x.preventDefault();const E=y||(_>=0&&d[_]?d[_].query:e);E.trim()&&(window.open(Ie(i,E),"_blank"),t(""),h(!1))},le=x=>{switch(x.key){case"ArrowDown":if(!c)return;x.preventDefault(),N(y=>y<d.length-1?y+1:y);break;case"ArrowUp":if(!c)return;x.preventDefault(),N(y=>y>-1?y-1:-1);break;case"Escape":h(!1),N(-1);break;case"Tab":x.shiftKey||(x.preventDefault(),F());break}},K=m.useRef(null);return m.useLayoutEffect(()=>{if(l&&$.current){const x=$.current.getBoundingClientRect();U({left:x.left+x.width/2,top:x.top})}else U(null)},[l,i]),r.jsx("div",{className:"relative left-0 right-0 z-50 flex justify-center px-4 select-none",children:r.jsx(X.div,{className:"w-full flex justify-center",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},children:r.jsx("form",{ref:L,onSubmit:se,className:"relative flex items-center justify-center",onMouseEnter:()=>{K.current&&(clearTimeout(K.current),K.current=null),a(!0)},onMouseLeave:()=>{K.current&&clearTimeout(K.current),K.current=setTimeout(()=>{a(!1),u(!1),setTimeout(()=>{h(!1)},100)},200)},children:r.jsxs(X.div,{animate:{width:n?520:340},initial:{width:340},transition:{type:"tween",duration:.28,ease:"easeInOut"},style:{display:"flex",alignItems:"center",position:"relative"},onAnimationComplete:()=>{n&&u(!0)},children:[r.jsxs("div",{className:"relative flex items-center",children:[r.jsxs("button",{type:"button",className:"flex items-center gap-2 px-1.5 py-1 text-white/80 hover:text-white bg-transparent border-none outline-none text-lg select-none relative z-20",style:{pointerEvents:"auto",height:36,minWidth:36,minHeight:36,justifyContent:"center",alignItems:"center",display:"flex"},tabIndex:-1,onClick:()=>{F()},onMouseEnter:()=>I(!0),onMouseLeave:()=>I(!1),children:[(ye=R.find(x=>x.key===i))==null?void 0:ye.icon,r.jsx("span",{className:"hidden sm:inline text-base font-semibold select-none",children:(H=R.find(x=>x.key===i))==null?void 0:H.label})]}),w&&r.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800/90 text-white text-sm rounded-lg shadow-lg backdrop-blur-sm border border-white/10 whitespace-nowrap z-30",children:[" ",i==="bing"?"Google":"Bing",r.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-800/90"})]})]}),r.jsx("span",{className:"mx-2 text-white/30 select-none font-normal text-base z-10",children:"|"}),r.jsx("span",{className:"text-white/60 select-none font-normal text-base z-10"}),r.jsx("input",{type:"text",value:e,onChange:x=>t(x.target.value),onKeyDown:le,placeholder:"...",className:"backdrop-blur-md border border-white/20 rounded-full pl-4 py-2 text-white placeholder-white/60 focus:outline-none focus:ring-1 focus:ring-white/30 text-base transition-all duration-200 pr-12 w-full ml-3",style:{backgroundColor:`rgba(255, 255, 255, ${k})`,minWidth:"4rem",maxWidth:"100%"}}),r.jsx("button",{ref:$,type:"submit",className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-white/70 hover:text-white transition-colors bg-transparent border-none outline-none group select-none",style:{pointerEvents:"auto"},children:r.jsx(X.i,{className:"fa-solid fa-magnifying-glass text-sm",whileHover:{scale:1.22,rotate:18,color:"#fff"},whileTap:{scale:.95,rotate:0},animate:{color:n?"#fff":void 0},transition:{type:"spring",stiffness:350,damping:18},style:{display:"inline-block"}})}),c&&d.length>0&&r.jsx(X.div,{className:"absolute top-full left-0 right-0 mt-2 backdrop-blur-md rounded-lg shadow-lg border border-white/20 z-50 overflow-hidden max-h-60 overflow-y-auto",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.2},style:{pointerEvents:"auto",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:d.map((x,y)=>r.jsx("div",{className:`px-4 py-3 cursor-pointer transition-colors border-b border-white/10 last:border-b-0 select-none ${y===_?"bg-blue-500/20 text-gray-800":"hover:bg-white/50 text-gray-700"}`,onClick:E=>{E.stopPropagation(),t(x.text),se(E,x.query)},onMouseEnter:()=>N(y),onMouseDown:E=>E.preventDefault(),children:r.jsxs("div",{className:"flex items-center gap-3 select-none",children:[r.jsx("i",{className:"fa-solid fa-magnifying-glass text-gray-400 text-sm w-4 select-none"}),r.jsx("div",{className:"flex-1 min-w-0 select-none",children:r.jsx("div",{className:"font-medium text-sm truncate select-none",children:x.text})})]})},x.id))}),n&&l&&C&&r.jsx("div",{className:"fixed z-30",style:{left:C.left,top:C.top,width:0,height:0,pointerEvents:"auto",transform:"translate(-50%, -50%)"},children:r.jsx("div",{style:{position:"absolute",left:0,top:0},children:je.map((x,y,E)=>{const P=(-60+120/(E.length-1)*y)*(Math.PI/180),Q=44,V=Q*Math.cos(P),J=Q*Math.sin(P),ue=19,rt=ue*3.6;return r.jsxs(X.span,{role:"img","aria-label":z[y],initial:{x:0,y:0,scale:.3,opacity:0,filter:"none"},animate:{x:V,y:J,scale:1.18,opacity:1,filter:"none"},whileHover:{scale:1.38,filter:"drop-shadow(0 0 4px #fff) drop-shadow(0 0 8px #fff)"},transition:{type:"spring",stiffness:400,damping:22,delay:.08*y},style:{position:"absolute",left:0,top:0,fontSize:22,cursor:"pointer",userSelect:"none",zIndex:2,willChange:"filter, transform"},onClick:()=>window.open(oe[y],"_blank"),onMouseEnter:()=>S(y),onMouseLeave:()=>S(null),children:[x,G===y&&r.jsx("div",{style:{position:"absolute",left:28,top:"50%",transform:"translateY(-50%)",height:ue,width:rt,background:"rgba(255,255,255,0.98)",color:"#222",borderRadius:ue/2,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 12px #0003",fontSize:14,fontWeight:500,pointerEvents:"auto",zIndex:10,padding:"0 10px",whiteSpace:"nowrap"},children:r.jsx("span",{style:{userSelect:"none"},children:z[y]})})]},y)})})})]})})})})}function wr(){const s=()=>{window.open("https://github.com/jiangjianghong","_blank")};return r.jsx("div",{className:"cat-container",children:r.jsxs("div",{className:"cat",onClick:s,style:{cursor:"pointer"},children:[r.jsx("div",{className:"paw"}),r.jsx("div",{className:"paw"}),r.jsxs("div",{className:"shake",children:[r.jsx("div",{className:"tail"}),r.jsxs("div",{className:"main",children:[r.jsx("div",{className:"head"}),r.jsx("div",{className:"body",children:r.jsx("div",{className:"leg"})}),r.jsxs("div",{className:"face",children:[r.jsxs("div",{className:"mustache_cont",children:[r.jsx("div",{className:"mustache"}),r.jsx("div",{className:"mustache"})]}),r.jsxs("div",{className:"mustache_cont",children:[r.jsx("div",{className:"mustache"}),r.jsx("div",{className:"mustache"})]}),r.jsx("div",{className:"nose"}),r.jsx("div",{className:"eye"}),r.jsx("div",{className:"eye"}),r.jsxs("div",{className:"brow_cont",children:[r.jsx("div",{className:"brow"}),r.jsx("div",{className:"brow"})]}),r.jsxs("div",{className:"brow_cont",children:[r.jsx("div",{className:"brow"}),r.jsx("div",{className:"brow"})]}),r.jsx("div",{className:"ear_l",children:r.jsx("div",{className:"inner"})}),r.jsxs("div",{className:"ear_r",children:[r.jsx("div",{className:"outer"}),r.jsx("div",{className:"inner"})]})]})]})]})]})})}function jr(s,e){const t=(o,l)=>{const u=s[o],d=[...s];d.splice(o,1),d.splice(l,0,u),e(d)},[,n]=Bn({accept:"WEBSITE_CARD",hover(o,l){if(!l.isOver({shallow:!0}))return;const u=o.index,d=s.findIndex(f=>f.id===o.id);u!==d&&(t(u,d),o.index=d)},drop:()=>({name:"WEBSITE_CARD"})}),[{isDragging:a},i]=zn({type:"WEBSITE_CARD",item:o=>{const l=s[o];return{id:(l==null?void 0:l.id)||"",index:o}},collect:o=>({isDragging:o.isDragging()})});return{drag:i,drop:n,isDragging:a}}const nn="@firebase/installations",os="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an=1e4,rn=`w:${os}`,on="FIS_v2",_r="https://firebaseinstallations.googleapis.com/v1",Nr=60*60*1e3,Sr="installations",kr="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},We=new Qs(Sr,kr,Cr);function ln(s){return s instanceof Gs&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn({projectId:s}){return`${_r}/projects/${s}/installations`}function dn(s){return{token:s.token,requestStatus:2,expiresIn:Er(s.expiresIn),creationTime:Date.now()}}async function un(s,e){const n=(await e.json()).error;return We.create("request-failed",{requestName:s,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function fn({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function Ir(s,{refreshToken:e}){const t=fn(s);return t.append("Authorization",Tr(e)),t}async function hn(s){const e=await s();return e.status>=500&&e.status<600?s():e}function Er(s){return Number(s.replace("s","000"))}function Tr(s){return`${on} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ar({appConfig:s,heartbeatServiceProvider:e},{fid:t}){const n=cn(s),a=fn(s),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&a.append("x-firebase-client",d)}const o={fid:t,authVersion:on,appId:s.appId,sdkVersion:rn},l={method:"POST",headers:a,body:JSON.stringify(o)},u=await hn(()=>fetch(n,l));if(u.ok){const d=await u.json();return{fid:d.fid||t,registrationStatus:2,refreshToken:d.refreshToken,authToken:dn(d.authToken)}}else throw await un("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(s){return new Promise(e=>{setTimeout(e,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or=/^[cdef][\w-]{21}$/,ts="";function Dr(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const t=Pr(s);return Or.test(t)?t:ts}catch{return ts}}function Pr(s){return Rr(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn=new Map;function gn(s,e){const t=Ft(s);xn(t,e),Mr(t,e)}function xn(s,e){const t=pn.get(s);if(t)for(const n of t)n(e)}function Mr(s,e){const t=$r();t&&t.postMessage({key:s,fid:e}),Lr()}let Ze=null;function $r(){return!Ze&&"BroadcastChannel"in self&&(Ze=new BroadcastChannel("[Firebase] FID Change"),Ze.onmessage=s=>{xn(s.data.key,s.data.fid)}),Ze}function Lr(){pn.size===0&&Ze&&(Ze.close(),Ze=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr="firebase-installations-database",Br=1,He="firebase-installations-store";let Ut=null;function ls(){return Ut||(Ut=Qn(Fr,Br,{upgrade:(s,e)=>{switch(e){case 0:s.createObjectStore(He)}}})),Ut}async function Mt(s,e){const t=Ft(s),a=(await ls()).transaction(He,"readwrite"),i=a.objectStore(He),o=await i.get(t);return await i.put(e,t),await a.done,(!o||o.fid!==e.fid)&&gn(s,e.fid),e}async function yn(s){const e=Ft(s),n=(await ls()).transaction(He,"readwrite");await n.objectStore(He).delete(e),await n.done}async function Bt(s,e){const t=Ft(s),a=(await ls()).transaction(He,"readwrite"),i=a.objectStore(He),o=await i.get(t),l=e(o);return l===void 0?await i.delete(t):await i.put(l,t),await a.done,l&&(!o||o.fid!==l.fid)&&gn(s,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cs(s){let e;const t=await Bt(s.appConfig,n=>{const a=zr(n),i=Vr(s,a);return e=i.registrationPromise,i.installationEntry});return t.fid===ts?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function zr(s){const e=s||{fid:Dr(),registrationStatus:0};return vn(e)}function Vr(s,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(We.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=Zr(s,t);return{installationEntry:t,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Ur(s)}:{installationEntry:e}}async function Zr(s,e){try{const t=await Ar(s,e);return Mt(s.appConfig,t)}catch(t){throw ln(t)&&t.customData.serverCode===409?await yn(s.appConfig):await Mt(s.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function Ur(s){let e=await Fs(s.appConfig);for(;e.registrationStatus===1;)await mn(100),e=await Fs(s.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:n}=await cs(s);return n||t}return e}function Fs(s){return Bt(s,e=>{if(!e)throw We.create("installation-not-found");return vn(e)})}function vn(s){return Wr(s)?{fid:s.fid,registrationStatus:0}:s}function Wr(s){return s.registrationStatus===1&&s.registrationTime+an<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hr({appConfig:s,heartbeatServiceProvider:e},t){const n=qr(s,t),a=Ir(s,t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&a.append("x-firebase-client",d)}const o={installation:{sdkVersion:rn,appId:s.appId}},l={method:"POST",headers:a,body:JSON.stringify(o)},u=await hn(()=>fetch(n,l));if(u.ok){const d=await u.json();return dn(d)}else throw await un("Generate Auth Token",u)}function qr(s,{fid:e}){return`${cn(s)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ds(s,e=!1){let t;const n=await Bt(s.appConfig,i=>{if(!bn(i))throw We.create("not-registered");const o=i.authToken;if(!e&&Gr(o))return i;if(o.requestStatus===1)return t=Kr(s,e),i;{if(!navigator.onLine)throw We.create("app-offline");const l=Jr(i);return t=Qr(s,l),l}});return t?await t:n.authToken}async function Kr(s,e){let t=await Bs(s.appConfig);for(;t.authToken.requestStatus===1;)await mn(100),t=await Bs(s.appConfig);const n=t.authToken;return n.requestStatus===0?ds(s,e):n}function Bs(s){return Bt(s,e=>{if(!bn(e))throw We.create("not-registered");const t=e.authToken;return Xr(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Qr(s,e){try{const t=await Hr(s,e),n=Object.assign(Object.assign({},e),{authToken:t});return await Mt(s.appConfig,n),t}catch(t){if(ln(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await yn(s.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Mt(s.appConfig,n)}throw t}}function bn(s){return s!==void 0&&s.registrationStatus===2}function Gr(s){return s.requestStatus===2&&!Yr(s)}function Yr(s){const e=Date.now();return e<s.creationTime||s.creationTime+s.expiresIn<e+Nr}function Jr(s){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},s),{authToken:e})}function Xr(s){return s.requestStatus===1&&s.requestTime+an<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ei(s){const e=s,{installationEntry:t,registrationPromise:n}=await cs(e);return n?n.catch(console.error):ds(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ti(s,e=!1){const t=s;return await si(t),(await ds(t,e)).token}async function si(s){const{registrationPromise:e}=await cs(s);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(s){if(!s||!s.options)throw Wt("App Configuration");if(!s.name)throw Wt("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!s.options[t])throw Wt(t);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function Wt(s){return We.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="installations",ai="installations-internal",ri=s=>{const e=s.getProvider("app").getImmediate(),t=ni(e),n=Lt(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},ii=s=>{const e=s.getProvider("app").getImmediate(),t=Lt(e,wn).getImmediate();return{getId:()=>ei(t),getToken:a=>ti(t,a)}};function oi(){It(new Et(wn,ri,"PUBLIC")),It(new Et(ai,ii,"PRIVATE"))}oi();Ct(nn,os);Ct(nn,os,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="analytics",li="firebase_id",ci="origin",di=60*1e3,ui="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",us="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const de=new Gn("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},he=new Qs("analytics","Analytics",fi);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(s){if(!s.startsWith(us)){const e=he.create("invalid-gtag-resource",{gtagURL:s});return de.warn(e.message),""}return s}function jn(s){return Promise.all(s.map(e=>e.catch(t=>t)))}function mi(s,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(s,e)),t}function pi(s,e){const t=mi("firebase-js-sdk-policy",{createScriptURL:hi}),n=document.createElement("script"),a=`${us}?l=${s}&id=${e}`;n.src=t?t==null?void 0:t.createScriptURL(a):a,n.async=!0,document.head.appendChild(n)}function gi(s){let e=[];return Array.isArray(window[s])?e=window[s]:window[s]=e,e}async function xi(s,e,t,n,a,i){const o=n[a];try{if(o)await e[o];else{const u=(await jn(t)).find(d=>d.measurementId===a);u&&await e[u.appId]}}catch(l){de.error(l)}s("config",a,i)}async function yi(s,e,t,n,a){try{let i=[];if(a&&a.send_to){let o=a.send_to;Array.isArray(o)||(o=[o]);const l=await jn(t);for(const u of o){const d=l.find(c=>c.measurementId===u),f=d&&e[d.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),s("event",n,a||{})}catch(i){de.error(i)}}function vi(s,e,t,n){async function a(i,...o){try{if(i==="event"){const[l,u]=o;await yi(s,e,t,l,u)}else if(i==="config"){const[l,u]=o;await xi(s,e,t,n,l,u)}else if(i==="consent"){const[l,u]=o;s("consent",l,u)}else if(i==="get"){const[l,u,d]=o;s("get",l,u,d)}else if(i==="set"){const[l]=o;s("set",l)}else s(i,...o)}catch(l){de.error(l)}}return a}function bi(s,e,t,n,a){let i=function(...o){window[n].push(arguments)};return window[a]&&typeof window[a]=="function"&&(i=window[a]),window[a]=vi(i,s,e,t),{gtagCore:i,wrappedGtag:window[a]}}function wi(s){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(us)&&t.src.includes(s))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji=30,_i=1e3;class Ni{constructor(e={},t=_i){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const _n=new Ni;function Si(s){return new Headers({Accept:"application/json","x-goog-api-key":s})}async function ki(s){var e;const{appId:t,apiKey:n}=s,a={method:"GET",headers:Si(n)},i=ui.replace("{app-id}",t),o=await fetch(i,a);if(o.status!==200&&o.status!==304){let l="";try{const u=await o.json();!((e=u.error)===null||e===void 0)&&e.message&&(l=u.error.message)}catch{}throw he.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function Ci(s,e=_n,t){const{appId:n,apiKey:a,measurementId:i}=s.options;if(!n)throw he.create("no-app-id");if(!a){if(i)return{measurementId:i,appId:n};throw he.create("no-api-key")}const o=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new Ti;return setTimeout(async()=>{l.abort()},di),Nn({appId:n,apiKey:a,measurementId:i},o,l,e)}async function Nn(s,{throttleEndTimeMillis:e,backoffCount:t},n,a=_n){var i;const{appId:o,measurementId:l}=s;try{await Ii(n,e)}catch(u){if(l)return de.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:l};throw u}try{const u=await ki(s);return a.deleteThrottleMetadata(o),u}catch(u){const d=u;if(!Ei(d)){if(a.deleteThrottleMetadata(o),l)return de.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:l};throw u}const f=Number((i=d==null?void 0:d.customData)===null||i===void 0?void 0:i.httpStatus)===503?ys(t,a.intervalMillis,ji):ys(t,a.intervalMillis),c={throttleEndTimeMillis:Date.now()+f,backoffCount:t+1};return a.setThrottleMetadata(o,c),de.debug(`Calling attemptFetch again in ${f} millis`),Nn(s,c,n,a)}}function Ii(s,e){return new Promise((t,n)=>{const a=Math.max(e-Date.now(),0),i=setTimeout(t,a);s.addEventListener(()=>{clearTimeout(i),n(he.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Ei(s){if(!(s instanceof Gs)||!s.customData)return!1;const e=Number(s.customData.httpStatus);return e===429||e===500||e===503||e===504}class Ti{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Ai(s,e,t,n,a){if(a&&a.global){s("event",t,n);return}else{const i=await e,o=Object.assign(Object.assign({},n),{send_to:i});s("event",t,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ri(){if(Jn())try{await Xn()}catch(s){return de.warn(he.create("indexeddb-unavailable",{errorInfo:s==null?void 0:s.toString()}).message),!1}else return de.warn(he.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Oi(s,e,t,n,a,i,o){var l;const u=Ci(s);u.then(_=>{t[_.measurementId]=_.appId,s.options.measurementId&&_.measurementId!==s.options.measurementId&&de.warn(`The measurement ID in the local Firebase config (${s.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>de.error(_)),e.push(u);const d=Ri().then(_=>{if(_)return n.getId()}),[f,c]=await Promise.all([u,d]);wi(i)||pi(i,f.measurementId),a("js",new Date);const h=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return h[ci]="firebase",h.update=!0,c!=null&&(h[li]=c),a("config",f.measurementId,h),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this.app=e}_delete(){return delete ut[this.app.options.appId],Promise.resolve()}}let ut={},zs=[];const Vs={};let Ht="dataLayer",Pi="gtag",Zs,Sn,Us=!1;function Mi(){const s=[];if(Yn()&&s.push("This is a browser extension environment."),sa()||s.push("Cookies are not available."),s.length>0){const e=s.map((n,a)=>`(${a+1}) ${n}`).join(" "),t=he.create("invalid-analytics-context",{errorInfo:e});de.warn(t.message)}}function $i(s,e,t){Mi();const n=s.options.appId;if(!n)throw he.create("no-app-id");if(!s.options.apiKey)if(s.options.measurementId)de.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${s.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw he.create("no-api-key");if(ut[n]!=null)throw he.create("already-exists",{id:n});if(!Us){gi(Ht);const{wrappedGtag:i,gtagCore:o}=bi(ut,zs,Vs,Ht,Pi);Sn=i,Zs=o,Us=!0}return ut[n]=Oi(s,zs,Vs,e,Zs,Ht,t),new Di(s)}function Li(s=ea()){s=Ys(s);const e=Lt(s,$t);return e.isInitialized()?e.getImmediate():Fi(s)}function Fi(s,e={}){const t=Lt(s,$t);if(t.isInitialized()){const a=t.getImmediate();if(ta(e,t.getOptions()))return a;throw he.create("already-initialized")}return t.initialize({options:e})}function Bi(s,e,t,n){s=Ys(s),Ai(Sn,ut[s.app.options.appId],e,t,n).catch(a=>de.error(a))}const Ws="@firebase/analytics",Hs="0.10.17";function zi(){It(new Et($t,(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return $i(n,a,t)},"PUBLIC")),It(new Et("analytics-internal",s,"PRIVATE")),Ct(Ws,Hs),Ct(Ws,Hs,"esm2017");function s(e){try{const t=e.getProvider($t).getImmediate();return{logEvent:(n,a,i)=>Bi(t,n,a,i)}}catch(t){throw he.create("interop-component-reg-failed",{reason:t})}}}zi();const Vi={apiKey:"AIzaSyAgRdBtg_I5NMAC5x3gh-7_CvQ058n25go",authDomain:"jiang-ai-web.firebaseapp.com",projectId:"jiang-ai-web",storageBucket:"jiang-ai-web.firebasestorage.app",messagingSenderId:"923755523160",appId:"1:923755523160:web:043dca5d76b6ded7ecee2d",measurementId:"G-8FXGZWC0M4"},fs=na(Vi),ct=aa(fs),at=ra(fs);typeof window<"u"&&Li(fs);const kn=m.createContext(void 0);function Ce(){const s=m.useContext(kn);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s}function Zi({children:s}){const[e,t]=m.useState(null),[n,a]=m.useState(!0),i=async(h,_)=>{await fa(ct,h,_)},o=async(h,_)=>{const N=await ua(ct,h,_);N.user&&await vs(N.user)},l=async()=>{e&&!e.emailVerified&&await vs(e)},u=async()=>{e&&await oa(e)},d=async()=>{const h=new ca;await da(ct,h)},f=async()=>{await la(ct)};m.useEffect(()=>ia(ct,_=>{t(_),a(!1)}),[]);const c={currentUser:e,login:i,register:o,loginWithGoogle:d,logout:f,sendVerificationEmail:l,reloadUser:u,loading:n};return r.jsx(kn.Provider,{value:c,children:!n&&s})}const Ui=async(s,e,t)=>{var n,a;try{(n=t==null?void 0:t.onSyncStart)==null||n.call(t);const i=st(at,"userSettings",s.uid);return await rs(i,{...e,lastSync:Tt()},{merge:!0}),console.log(""),(a=t==null?void 0:t.onSyncSuccess)==null||a.call(t,""),!0}catch(i){return console.error(":",i),!1}},Wi=async s=>{try{const e=st(at,"userSettings",s.uid),t=await as(e);if(t.exists()){const n=t.data();return console.log(""),n}else return console.log(""),null}catch(e){return console.error(":",e),null}},ss=async(s,e,t)=>{var n,a;try{(n=t==null?void 0:t.onSyncStart)==null||n.call(t);const i=st(at,"userWebsites",s.uid);return await rs(i,{websites:e,lastSync:Tt()}),console.log(""),(a=t==null?void 0:t.onSyncSuccess)==null||a.call(t,""),!0}catch(i){return console.error(":",i),!1}},Hi=async s=>{try{const e=st(at,"userWebsites",s.uid),t=await as(e);if(t.exists()){const n=t.data();return console.log(""),n.websites}else return console.log(""),null}catch(e){return console.error(":",e),null}},qi=(s,e)=>{const t={};return s.forEach(n=>{t[n.id]=n}),e.forEach(n=>{const a=t[n.id];(!a||n.visitCount>a.visitCount)&&(t[n.id]=n)}),Object.values(t)};let qt=null;const Ki=(s,e,t,n)=>{qt&&clearTimeout(qt),qt=setTimeout(async()=>{var a,i,o,l;(a=n==null?void 0:n.onSyncStart)==null||a.call(n);try{const d=(await Promise.allSettled([ss(s,e),Ui(s,t)])).filter(f=>f.status==="rejected");d.length===0?(i=n==null?void 0:n.onSyncSuccess)==null||i.call(n,""):(o=n==null?void 0:n.onSyncError)==null||o.call(n,`${d.length} `)}catch(u){(l=n==null?void 0:n.onSyncError)==null||l.call(n,": "+u.message)}},3e3)},qs=async(s,e,t)=>{var n,a;try{(n=t==null?void 0:t.onSyncStart)==null||n.call(t);const i=st(at,"userProfiles",s.uid),o={uid:s.uid,email:s.email||"",displayName:e,createdAt:Tt(),updatedAt:Tt()};return await rs(i,o,{merge:!0}),console.log(""),(a=t==null?void 0:t.onSyncSuccess)==null||a.call(t,""),!0}catch(i){return console.error(":",i),!1}},Kt=async s=>{try{const e=st(at,"userProfiles",s.uid),t=await as(e);if(t.exists()){const n=t.data();return console.log(""),n}else return console.log(""),null}catch(e){return console.error(":",e),null}},Cn=m.createContext(void 0);function In(){const s=m.useContext(Cn);if(s===void 0)throw new Error("useUserProfile must be used within a UserProfileProvider");return s}function Qi({children:s}){var d;const{currentUser:e}=Ce(),[t,n]=m.useState(null),[a,i]=m.useState(!1),o=(t==null?void 0:t.displayName)||((d=e==null?void 0:e.email)==null?void 0:d.split("@")[0])||"",l=async f=>{if(!e||!e.emailVerified)return!1;i(!0);try{return await qs(e,f)?(n(h=>h?{...h,displayName:f,updatedAt:new Date}:null),setTimeout(async()=>{const h=await Kt(e);h&&n(h)},1e3),!0):!1}catch(c){return console.error(":",c),!1}finally{i(!1)}};m.useEffect(()=>{(async()=>{var c;if(e&&e.emailVerified){i(!0);try{const h=await Kt(e);if(h)n(h);else{const _=((c=e.email)==null?void 0:c.split("@")[0])||"";await qs(e,_);const N=await Kt(e);n(N)}}catch(h){console.error(":",h)}finally{i(!1)}}else n(null)})()},[e]);const u={userProfile:t,displayName:o,updateDisplayName:l,loading:a};return r.jsx(Cn.Provider,{value:u,children:s})}const Ks={isOnline:navigator.onLine,lastSyncTime:null,syncInProgress:!1,syncError:null,pendingChanges:0},En=m.createContext(void 0);function Tn(){const s=m.useContext(En);if(s===void 0)throw new Error("useSyncStatus must be used within a SyncProvider");return s}function Gi({children:s}){const[e,t]=m.useState(Ks),n=o=>{t(l=>({...l,...o}))},a=()=>{t(Ks)};window.addEventListener("online",()=>{n({isOnline:!0})}),window.addEventListener("offline",()=>{n({isOnline:!1})});const i={syncStatus:e,updateSyncStatus:n,resetSyncStatus:a};return r.jsx(En.Provider,{value:i,children:s})}function Yi(s){const{currentUser:e}=Ce(),{updateSyncStatus:t}=Tn(),{cardOpacity:n,searchBarOpacity:a,parallaxEnabled:i,wallpaperResolution:o}=nt(),l=m.useRef(""),u=m.useRef(null),d=m.useRef(null),f=m.useRef(0),c=m.useCallback((h=!1)=>{if(!e||!e.emailVerified){e&&!e.emailVerified&&t({syncInProgress:!1,syncError:"",pendingChanges:1});return}const _={cardOpacity:n,searchBarOpacity:a,parallaxEnabled:i,wallpaperResolution:o,theme:localStorage.getItem("theme")||"light",lastSync:null};console.log(h?" ...":" ..."),Ki(e,s,_,{onSyncStart:()=>{t({syncInProgress:!0,syncError:null,pendingChanges:0})},onSyncSuccess:N=>{const $=JSON.stringify({websites:s.map(C=>({id:C.id,name:C.name,url:C.url,visitCount:C.visitCount})),settings:{cardOpacity:n,searchBarOpacity:a,parallaxEnabled:i,wallpaperResolution:o,theme:_.theme}});l.current=$,f.current=0,t({syncInProgress:!1,lastSyncTime:new Date,syncError:null,pendingChanges:0}),console.log(" :",N)},onSyncError:N=>{t({syncInProgress:!1,syncError:N,pendingChanges:1}),console.error(" :",N)}})},[e,s,n,a,i,o,t]);m.useEffect(()=>{if(JSON.stringify({websites:s.map(U=>({id:U.id,name:U.name,url:U.url,visitCount:U.visitCount})),settings:{cardOpacity:n,searchBarOpacity:a,parallaxEnabled:i,wallpaperResolution:o,theme:localStorage.getItem("theme")||"light"}})===l.current){console.log(" ");return}console.log(" ");const _=Date.now();f.current===0&&(f.current=_,console.log(" ")),u.current&&clearTimeout(u.current);const N=_-f.current,$=3e4,C=3e3;if(N>=$){console.log(" "),d.current&&(clearTimeout(d.current),d.current=null),c(!0);return}if(u.current=setTimeout(()=>{c(!1)},C),!d.current){const U=$-N;console.log(` ${Math.round(U/1e3)}`),d.current=setTimeout(()=>{console.log(" "),u.current&&(clearTimeout(u.current),u.current=null),c(!0)},U)}return()=>{u.current&&clearTimeout(u.current)}},[e,s,n,a,i,o,c]),m.useEffect(()=>()=>{u.current&&clearTimeout(u.current),d.current&&clearTimeout(d.current)},[])}function Ji(){const{syncStatus:s}=Tn(),{currentUser:e}=Ce(),[,t]=m.useState(0);if(m.useEffect(()=>{const l=()=>{if(!s.lastSyncTime)return 6e4;const c=Math.floor((new Date().getTime()-s.lastSyncTime.getTime())/1e3);return c<60?1e3:c<3600?6e4:3e5},u=()=>{const f=l();return setTimeout(()=>{t(c=>c+1),u()},f)},d=u();return()=>clearTimeout(d)},[s.lastSyncTime]),!e)return null;const n=l=>{if(!l)return"";const d=Math.floor((new Date().getTime()-l.getTime())/1e3);return d<60?`${d}`:d<3600?`${Math.floor(d/60)}`:d<86400?`${Math.floor(d/3600)}`:`${Math.floor(d/86400)}`},a=()=>s.syncInProgress?r.jsx("i",{className:"fa-solid fa-sync fa-spin text-blue-500"}):s.syncError?r.jsx("i",{className:"fa-solid fa-exclamation-triangle text-red-500"}):s.isOnline?s.pendingChanges>0?r.jsx("i",{className:"fa-solid fa-clock text-orange-500"}):r.jsx("i",{className:"fa-solid fa-check-circle text-green-500"}):r.jsx("i",{className:"fa-solid fa-wifi-slash text-gray-500"}),i=()=>s.syncInProgress?"...":s.syncError?"":s.isOnline?s.pendingChanges>0?`${s.pendingChanges} `:"":"",o=()=>s.syncError?s.syncError:`: ${n(s.lastSyncTime)}`;return r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:""}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[a(),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:i()})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${s.isOnline?"bg-green-500":"bg-red-500"}`}),r.jsx("span",{className:"text-xs text-gray-500",children:s.isOnline?"":""})]})]}),r.jsx("p",{className:"text-xs text-gray-500",children:o()}),r.jsx(kt,{children:s.syncError&&r.jsx(X.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"bg-red-50 border border-red-200 rounded p-2",children:r.jsxs("p",{className:"text-xs text-red-600",children:[r.jsx("i",{className:"fa-solid fa-info-circle mr-1"}),s.syncError]})})}),r.jsx(kt,{children:s.syncInProgress&&r.jsx(X.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"w-full bg-gray-200 rounded-full h-1",children:r.jsx(X.div,{className:"bg-blue-500 h-1 rounded-full",initial:{width:"0%"},animate:{width:"100%"},transition:{duration:2,ease:"easeInOut"}})})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[r.jsxs("div",{className:"bg-blue-50 rounded p-2 text-center",children:[r.jsx("div",{className:"font-medium text-blue-700",children:""}),r.jsx("div",{className:"text-blue-600",children:e?"":""})]}),r.jsxs("div",{className:"bg-green-50 rounded p-2 text-center",children:[r.jsx("div",{className:"font-medium text-green-700",children:""}),r.jsx("div",{className:"text-green-600",children:s.pendingChanges>0?"3":"30"})]})]})]})}function Xi({onSuccess:s}){const[e,t]=m.useState(!0),[n,a]=m.useState(""),[i,o]=m.useState(""),[l,u]=m.useState(""),[d,f]=m.useState(!1),[c,h]=m.useState(""),[_,N]=m.useState(!1),[$,C]=m.useState(""),{login:U,register:G,loginWithGoogle:S,sendVerificationEmail:w}=Ce(),I=async R=>{if(R.preventDefault(),!n||!i){h("");return}if(!e&&!l.trim()){h("");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)){h("");return}if(!e){if(l.length<2||l.length>20){h("2-20");return}if(!/^[a-zA-Z0-9\u4e00-\u9fa5_-]+$/.test(l)){h("");return}}f(!0),h("");try{e?(await U(n,i),s()):(await G(n,i),N(!0),C(n),localStorage.setItem("pendingDisplayName",l))}catch(F){switch(console.error(":",F),F.code){case"auth/user-not-found":h("");break;case"auth/wrong-password":h("");break;case"auth/email-already-in-use":h("");break;case"auth/weak-password":h("6");break;case"auth/invalid-email":h("");break;case"auth/too-many-requests":h("");break;case"auth/invalid-credential":h("");break;default:h(e?"":"")}}finally{f(!1)}},L=async()=>{f(!0),h("");try{await S(),s()}catch(R){console.error("Google:",R),h("Google")}finally{f(!1)}},k=async()=>{try{await w(),alert("")}catch{alert("")}};return _?r.jsx(X.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx("i",{className:"fa-solid fa-envelope-circle-check text-green-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-green-800",children:""}),r.jsxs("p",{className:"text-sm text-green-700 mt-1",children:[" ",r.jsx("strong",{children:$}),"  "]}),r.jsxs("div",{className:"mt-3 flex space-x-2",children:[r.jsx("button",{onClick:k,className:"text-xs bg-green-100 hover:bg-green-200 text-green-800 px-2 py-1 rounded",children:""}),r.jsx("button",{onClick:()=>{N(!1),t(!0),a(""),o(""),u("")},className:"text-xs bg-blue-100 hover:bg-blue-200 text-blue-800 px-2 py-1 rounded",children:""})]})]})]})}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e?"":""}),r.jsx("p",{className:"text-sm text-gray-600",children:e?"":""})]}),c&&r.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:c}),r.jsxs("form",{onSubmit:I,className:"space-y-4",children:[!e&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),r.jsx("input",{type:"text",value:l,onChange:R=>u(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"2-20",disabled:d,maxLength:20}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:""})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),r.jsx("input",{type:"email",value:n,onChange:R=>a(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"",disabled:d})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),r.jsx("input",{type:"password",value:i,onChange:R=>o(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"6",disabled:d,minLength:6})]}),r.jsx("button",{type:"submit",disabled:d,className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white py-2 px-4 rounded-md transition-colors",children:d?"...":e?"":""})]}),r.jsxs("div",{className:"mt-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-gray-300"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-2 bg-white text-gray-500",children:""})})]}),r.jsxs("button",{onClick:L,disabled:d,className:"mt-4 w-full bg-red-500 hover:bg-red-600 disabled:bg-gray-400 text-white py-2 px-4 rounded-md transition-colors flex items-center justify-center",children:[r.jsx("i",{className:"fab fa-google mr-2"})," Google ",e?"":""]})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx("button",{onClick:()=>t(!e),className:"text-blue-500 hover:text-blue-600",disabled:d,children:e?"":""})})]})}function eo(){const{currentUser:s}=Ce(),{displayName:e,updateDisplayName:t,loading:n}=In(),[a,i]=m.useState(!1),[o,l]=m.useState(e),[u,d]=m.useState(!1),[f,c]=m.useState("");if(m.useEffect(()=>{l(e)},[e]),!s||!s.emailVerified)return null;const h=async()=>{if(!o.trim()){c("");return}if(o.length<2||o.length>20){c("2-20");return}if(!/^[a-zA-Z0-9\u4e00-\u9fa5_-]+$/.test(o)){c("");return}d(!0),c("");try{await t(o)?(i(!1),alert("")):c("")}catch(N){c(""),console.error(":",N)}finally{d(!1)}},_=()=>{l(e),i(!1),c("")};return r.jsxs("div",{className:"bg-gray-50 rounded-lg p-1 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:""}),!a&&r.jsxs("button",{onClick:()=>i(!0),className:"text-xs text-blue-500 hover:text-blue-600",disabled:n,children:[r.jsx("i",{className:"fa-solid fa-edit mr-1"}),""]})]}),a?r.jsxs("div",{className:"space-y-2",children:[r.jsx("input",{type:"text",value:o,onChange:N=>l(N.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"",maxLength:20,disabled:u}),f&&r.jsx("p",{className:"text-xs text-red-600",children:f}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:h,disabled:u||!o.trim(),className:"text-xs bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white px-2 py-1 rounded",children:u?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-1"}),"..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fa-solid fa-check mr-1"}),""]})}),r.jsxs("button",{onClick:_,disabled:u,className:"text-xs bg-gray-500 hover:bg-gray-600 text-white px-2 py-1 rounded",children:[r.jsx("i",{className:"fa-solid fa-times mr-1"}),""]})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"2-20"})]}):r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("i",{className:"fa-solid fa-user text-gray-400"}),r.jsx("span",{className:"text-sm font-medium text-gray-800",children:n?"...":e})]}),r.jsx("div",{className:"border-t border-gray-200 pt-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("i",{className:"fa-solid fa-envelope text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-600",children:s.email})]}),r.jsx("i",{className:"fa-solid fa-check-circle text-green-500 text-xs",title:""})]})})]})}const Ve=class Ve{static getInstance(){return Ve.instance||(Ve.instance=new Ve),Ve.instance}hasConsent(){try{return localStorage.getItem("cookie-consent")==="accepted"}catch{return!1}}getConsentStatus(){try{const e=localStorage.getItem("cookie-consent");return e==="accepted"?"accepted":e==="declined"?"declined":"pending"}catch{return"pending"}}setItem(e,t,n=!1){try{return n||this.hasConsent()?(localStorage.setItem(e,t),!0):(console.warn(` : ${e} (Cookie)`),!1)}catch(a){return console.error(":",a),!1}}getItem(e,t=!1){try{return t||this.hasConsent()?localStorage.getItem(e):(console.warn(` : ${e} (Cookie)`),null)}catch(n){return console.error(":",n),null}}removeItem(e,t=!1){try{return t||this.hasConsent()?(localStorage.removeItem(e),!0):(console.warn(` : ${e} (Cookie)`),!1)}catch(n){return console.error(":",n),!1}}getAllKeys(e=!0){try{if(!this.hasConsent()&&!e)return[];const t=[],n=["cookie-consent","cookie-consent-date"];for(let a=0;a<localStorage.length;a++){const i=localStorage.key(a);i&&(e||!n.includes(i))&&t.push(i)}return t}catch{return[]}}clearNonEssentialData(){const e=["cookie-consent","cookie-consent-date"];this.getAllKeys(!0).forEach(n=>{if(!e.includes(n))try{localStorage.removeItem(n)}catch(a){console.error(`: ${n}`,a)}}),console.log(" ")}getStorageStats(){const e=this.getAllKeys(!0),t=["cookie-consent","cookie-consent-date"],n=e.filter(i=>!t.includes(i)).length;let a=0;return e.forEach(i=>{try{const o=localStorage.getItem(i)||"";a+=i.length+o.length}catch{}}),{totalKeys:e.length,essentialKeys:t.filter(i=>e.includes(i)).length,nonEssentialKeys:n,consentRequired:!this.hasConsent()&&n>0,storageUsed:`${Math.round(a/1024*100)/100} KB`}}exportData(){if(!this.hasConsent())return console.warn("  (Cookie)"),null;const e={};return this.getAllKeys(!1).forEach(n=>{try{const a=localStorage.getItem(n);a&&(e[n]=JSON.parse(a))}catch{e[n]=localStorage.getItem(n)}}),{exportTime:new Date().toISOString(),consentStatus:this.getConsentStatus(),data:e}}};Ne(Ve,"instance");let ns=Ve;const re=ns.getInstance();function to(){return{setItem:(n,a,i=!1)=>{const o=typeof a=="string"?a:JSON.stringify(a);return re.setItem(n,o,i)},getItem:(n,a=!1)=>{const i=re.getItem(n,a);if(!i)return null;try{return JSON.parse(i)}catch{return i}},removeItem:(n,a=!1)=>re.removeItem(n,a),hasConsent:()=>re.hasConsent(),getConsentStatus:()=>re.getConsentStatus(),getStats:()=>re.getStorageStats(),clearNonEssential:()=>re.clearNonEssentialData(),exportData:()=>re.exportData()}}function An({isOpen:s,onClose:e}){const[t,n]=m.useState(re.getStorageStats()),[a,i]=m.useState(re.getConsentStatus());m.useEffect(()=>{s&&(n(re.getStorageStats()),i(re.getConsentStatus()))},[s]);const o=()=>{const d=a==="accepted"?"declined":"accepted";d==="accepted"?(localStorage.setItem("cookie-consent","accepted"),localStorage.setItem("cookie-consent-date",new Date().toISOString())):(localStorage.setItem("cookie-consent","declined"),localStorage.setItem("cookie-consent-date",new Date().toISOString()),re.clearNonEssentialData()),i(d),n(re.getStorageStats())},l=()=>{confirm(` 


`)&&(re.clearNonEssentialData(),n(re.getStorageStats()),alert(" "))},u=()=>{const d=re.exportData();if(!d){alert(" Cookie");return}const f=new Blob([JSON.stringify(d,null,2)],{type:"application/json"}),c=URL.createObjectURL(f),h=document.createElement("a");h.href=c,h.download=`_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(c),alert(" ")};return s?r.jsx(kt,{children:r.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:e}),r.jsxs(X.div,{className:"w-full max-w-2xl bg-white rounded-xl shadow-2xl z-50 max-h-[90vh] flex flex-col mx-4",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20,stiffness:300},children:[r.jsx("div",{className:"p-6 pb-0",children:r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("i",{className:"fa-solid fa-shield-halved text-blue-600 text-2xl"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:""})]}),r.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 text-xl",children:r.jsx("i",{className:"fa-solid fa-xmark"})})]})}),r.jsxs("div",{className:"flex-1 px-6 py-4 space-y-6 overflow-y-auto",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[r.jsx("i",{className:"fa-solid fa-cookie-bite text-amber-500"}),"Cookie"]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm text-gray-600",children:[":",r.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${a==="accepted"?"bg-green-100 text-green-800":a==="declined"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:a==="accepted"?" ":a==="declined"?" ":" "})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a==="accepted"?"Cookie":a==="declined"?"Cookie":""})]}),a!=="pending"&&r.jsx("button",{onClick:o,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${a==="accepted"?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:a==="accepted"?"":""})]})]}),r.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[r.jsx("i",{className:"fa-solid fa-chart-pie text-blue-600"}),""]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.totalKeys}),r.jsx("div",{className:"text-xs text-gray-600",children:""})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.essentialKeys}),r.jsx("div",{className:"text-xs text-gray-600",children:""})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t.nonEssentialKeys}),r.jsx("div",{className:"text-xs text-gray-600",children:""})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:t.storageUsed}),r.jsx("div",{className:"text-xs text-gray-600",children:""})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[r.jsx("i",{className:"fa-solid fa-info-circle text-blue-600"}),""]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 rounded-lg",children:[r.jsx("i",{className:"fa-solid fa-shield-check text-green-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-green-800",children:""}),r.jsx("div",{className:"text-green-700",children:"Cookie - "})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-50 rounded-lg",children:[r.jsx("i",{className:"fa-solid fa-bookmark text-blue-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-blue-800",children:""}),r.jsx("div",{className:"text-blue-700",children:""})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-purple-50 rounded-lg",children:[r.jsx("i",{className:"fa-solid fa-palette text-purple-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-purple-800",children:""}),r.jsx("div",{className:"text-purple-700",children:""})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-orange-50 rounded-lg",children:[r.jsx("i",{className:"fa-solid fa-chart-line text-orange-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-orange-800",children:""}),r.jsx("div",{className:"text-orange-700",children:""})]})]})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"fa-solid fa-wrench text-gray-600"}),""]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:u,disabled:a!=="accepted",className:"w-full p-3 bg-blue-100 hover:bg-blue-200 disabled:bg-gray-100 disabled:text-gray-400 text-blue-800 rounded-lg transition-colors text-left",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("i",{className:"fa-solid fa-download"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:""}),r.jsx("div",{className:"text-sm opacity-75",children:"JSON"})]})]})}),r.jsx("button",{onClick:l,className:"w-full p-3 bg-red-100 hover:bg-red-200 text-red-800 rounded-lg transition-colors text-left",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("i",{className:"fa-solid fa-trash"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:""}),r.jsx("div",{className:"text-sm opacity-75",children:""})]})]})})]})]})]}),r.jsx("div",{className:"p-6 pt-0 border-t",children:r.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[r.jsxs("span",{children:[": ",new Date().toLocaleDateString("zh-CN")]}),r.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg",children:""})]})})]})]})}):null}function so({onClose:s,websites:e,setWebsites:t}){const[n,a]=m.useState(!1),[i,o]=m.useState(!1),{cardOpacity:l,searchBarOpacity:u,parallaxEnabled:d,wallpaperResolution:f,setCardOpacity:c,setSearchBarOpacity:h,setParallaxEnabled:_,setWallpaperResolution:N,setIsSettingsOpen:$}=nt(),{currentUser:C,logout:U}=Ce(),G=m.useRef(null);m.useEffect(()=>($(!0),()=>$(!1)),[$]);const S=()=>{$(!1),s()},w=k=>{const R={...k,visitCount:0,lastVisit:new Date().toISOString().split("T")[0]};t([...e,R]),a(!1)},I=()=>{try{const k={websites:e,settings:{cardOpacity:l,searchBarOpacity:u,parallaxEnabled:d,wallpaperResolution:f,theme:localStorage.getItem("theme")||"light"},exportTime:new Date().toISOString(),version:"1.0"},R=JSON.stringify(k,null,2),W=new Blob([R],{type:"application/json"}),F=URL.createObjectURL(W),z=document.createElement("a");z.href=F,z.download=`__${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(F),alert("")}catch(k){console.error(":",k),alert("")}},L=k=>{var z;const R=(z=k.target.files)==null?void 0:z[0];if(!R)return;if(!confirm(` 

 
 
 

`)){G.current&&(G.current.value="");return}const F=new FileReader;F.onload=oe=>{var je;try{const Ie=(je=oe.target)==null?void 0:je.result,ee=JSON.parse(Ie);if(!ee.websites||!Array.isArray(ee.websites))throw new Error("");if(t(ee.websites),ee.settings){const{cardOpacity:D,searchBarOpacity:se,parallaxEnabled:le,wallpaperResolution:K,theme:ye}=ee.settings;typeof D=="number"&&c(D),typeof se=="number"&&h(se),typeof le=="boolean"&&_(le),K&&["4k","1080p","720p","mobile"].includes(K)&&N(K),ye&&localStorage.setItem("theme",ye)}alert(""),window.location.reload()}catch(Ie){console.error(":",Ie),alert("")}},F.onerror=()=>{alert("")},F.readAsText(R),G.current&&(G.current.value="")};return r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center select-none",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:S}),r.jsxs(X.div,{className:"w-96 bg-white rounded-xl shadow-2xl z-50 max-h-[80vh] flex flex-col select-none",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20,stiffness:300},children:[r.jsx("div",{className:"p-6 pb-0 select-none",children:r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-medium text-gray-800 select-none",children:""}),r.jsx("button",{onClick:S,className:"text-gray-500 hover:text-gray-700 select-none",children:r.jsx("i",{className:"fa-solid fa-xmark text-lg select-none"})})]})}),r.jsxs("div",{className:"flex-1 px-6 py-2 pb-6 space-y-6 overflow-y-auto select-none",children:[r.jsxs("div",{className:"space-y-4 select-none",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:""}),C?r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-4",children:[r.jsx(eo,{}),r.jsx("div",{className:"flex justify-center pt-1",children:r.jsxs("button",{onClick:async()=>{try{await U(),S()}catch(k){console.error(":",k)}},className:"text-red-500 hover:text-red-600 transition-colors flex items-center text-sm select-none",children:[r.jsx("i",{className:"fa-solid fa-sign-out-alt mr-1.5 text-xs select-none"}),""]})})]}):r.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:r.jsx(Xi,{onSuccess:S})})]}),r.jsxs("div",{className:"space-y-4 select-none",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:""}),r.jsx(Ji,{})]}),r.jsxs("div",{className:"space-y-4 select-none",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:""}),r.jsxs("div",{className:"space-y-2 select-none",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 select-none",children:[" (",Math.round(l*100),"%)"]}),r.jsx("input",{type:"range",min:"0.05",max:"0.3",step:"0.01",value:l,onChange:k=>c(parseFloat(k.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"})]}),r.jsxs("div",{className:"space-y-2 select-none",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 select-none",children:[" (",Math.round(u*100),"%)"]}),r.jsx("input",{type:"range",min:"0.05",max:"0.3",step:"0.01",value:u,onChange:k=>h(parseFloat(k.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"})]}),r.jsxs("div",{className:"space-y-2 select-none",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center justify-between select-none",children:[r.jsx("span",{className:"select-none",children:""}),r.jsx("button",{onClick:()=>_(!d),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors select-none ${d?"bg-blue-500":"bg-gray-300"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform select-none ${d?"translate-x-6":"translate-x-1"}`})})]}),r.jsx("p",{className:"text-xs text-gray-500 select-none",children:d?"":""})]}),r.jsxs("div",{className:"space-y-2 select-none",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 select-none",children:""}),r.jsx("div",{className:"grid grid-cols-2 gap-2 select-none",children:[{value:"4k",label:"4K ",desc:""},{value:"1080p",label:"1080p ",desc:""},{value:"720p",label:"720p ",desc:""},{value:"mobile",label:"",desc:""}].map(k=>r.jsxs("button",{onClick:()=>N(k.value),disabled:window.innerHeight>window.innerWidth&&k.value!=="mobile",className:`p-3 rounded-lg border-2 transition-all text-left select-none ${f===k.value?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-700 hover:border-gray-300"} ${window.innerHeight>window.innerWidth&&k.value!=="mobile"?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[r.jsx("div",{className:"font-medium text-sm",children:k.label}),r.jsx("div",{className:"text-xs text-gray-500",children:k.desc})]},k.value))}),r.jsx("p",{className:"text-xs text-gray-500 select-none",children:window.innerHeight>window.innerWidth?"":""})]})]}),r.jsxs("div",{className:"space-y-4 select-none",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:""}),r.jsxs("button",{onClick:()=>a(!0),className:"w-full px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors select-none",children:[r.jsx("i",{className:"fa-solid fa-plus mr-2 select-none"}),""]})]}),r.jsxs("div",{className:"space-y-4 select-none",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:""}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 select-none",children:[r.jsxs("button",{onClick:I,className:"px-3 py-2 bg-green-500 hover:bg-green-600 text-white rounded-md transition-colors text-sm select-none",children:[r.jsx("i",{className:"fa-solid fa-download mr-1 select-none"}),""]}),r.jsxs("button",{onClick:()=>{var k;return(k=G.current)==null?void 0:k.click()},className:"px-3 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-md transition-colors text-sm select-none",children:[r.jsx("i",{className:"fa-solid fa-upload mr-1 select-none"}),""]})]}),r.jsx("input",{ref:G,type:"file",accept:".json",onChange:L,className:"hidden"}),r.jsx("p",{className:"text-xs text-gray-500 select-none",children:" "})]}),r.jsxs("div",{className:"space-y-4 select-none",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:"Cookie"}),r.jsxs("button",{onClick:()=>o(!0),className:"w-full px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors select-none",children:[r.jsx("i",{className:"fa-solid fa-shield-halved mr-2 select-none"}),""]})]})]})]}),n&&r.jsx(tn,{id:`new-${Date.now()}`,name:"",url:"",favicon:"",tags:[],note:"",onClose:()=>a(!1),onSave:w}),i&&r.jsx(An,{isOpen:i,onClose:()=>o(!1)})]})}function no(){const{currentUser:s,sendVerificationEmail:e,reloadUser:t,logout:n}=Ce(),[a,i]=m.useState(!1),[o,l]=m.useState(!1);if(!s||s.emailVerified)return null;const u=async()=>{i(!0);try{await e(),alert(" ")}catch(c){alert(" "),console.error(":",c)}finally{i(!1)}},d=async()=>{l(!0);try{await t(),window.location.reload()}catch(c){console.error(":",c)}finally{l(!1)}},f=async()=>{confirm("")&&await n()};return r.jsx(X.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},className:"fixed top-0 left-0 right-0 z-50 bg-orange-500 text-white shadow-lg",children:r.jsx("div",{className:"container mx-auto px-4 py-3",children:r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("i",{className:"fa-solid fa-envelope-open-text text-xl"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:""}),r.jsxs("p",{className:"text-sm text-orange-100",children:[" ",r.jsx("strong",{children:s.email})," "]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:u,disabled:a,className:"bg-orange-600 hover:bg-orange-700 disabled:bg-orange-400 px-3 py-1 rounded text-sm transition-colors",children:a?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-1"}),"..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fa-solid fa-paper-plane mr-1"}),""]})}),r.jsx("button",{onClick:d,disabled:o,className:"bg-green-500 hover:bg-green-600 disabled:bg-green-400 px-3 py-1 rounded text-sm transition-colors",children:o?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-1"}),"..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fa-solid fa-check-circle mr-1"}),""]})}),r.jsxs("button",{onClick:f,className:"bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-sm transition-colors",children:[r.jsx("i",{className:"fa-solid fa-sign-out-alt mr-1"}),""]})]})]})})})}class ao{constructor(){Ne(this,"preloadedResources",new Set);Ne(this,"preloadQueue",[]);Ne(this,"isProcessing",!1);Ne(this,"maxConcurrent",3)}async preloadImage(e){return this.preloadedResources.has(e)?!0:new Promise(t=>{const n=new Image;n.onload=()=>{this.preloadedResources.add(e),t(!0)},n.onerror=()=>{t(!1)},n.src=e})}async preloadImages(e){const t=e.filter(n=>!this.preloadedResources.has(n));if(t.length!==0)for(let n=0;n<t.length;n+=this.maxConcurrent){const a=t.slice(n,n+this.maxConcurrent);await Promise.allSettled(a.map(i=>this.preloadImage(i)))}}queuePreload(e){!this.preloadedResources.has(e)&&!this.preloadQueue.includes(e)&&(this.preloadQueue.push(e),this.processQueue())}async processQueue(){if(!(this.isProcessing||this.preloadQueue.length===0)){this.isProcessing=!0;try{"requestIdleCallback"in window?await new Promise(e=>{requestIdleCallback(()=>{this.processBatch(),e()})}):await new Promise(e=>{setTimeout(()=>{this.processBatch(),e()},16)})}finally{this.isProcessing=!1,this.preloadQueue.length>0&&setTimeout(()=>this.processQueue(),100)}}}async processBatch(){const e=this.preloadQueue.splice(0,this.maxConcurrent);e.length!==0&&await Promise.allSettled(e.map(t=>this.preloadImage(t)))}preloadFont(e,t){const n=document.createElement("link");if(n.rel="preload",n.as="font",n.type="font/woff2",n.crossOrigin="anonymous",n.href=e,document.head.appendChild(n),"FontFace"in window){const a=new FontFace(t,`url(${e})`);a.load().then(()=>{document.fonts.add(a)}).catch(i=>{console.warn(":",i)})}}preloadCSS(e){const t=document.createElement("link");t.rel="preload",t.as="style",t.href=e,t.onload=()=>{t.rel="stylesheet"},document.head.appendChild(t)}getStats(){return{preloaded:this.preloadedResources.size,queued:this.preloadQueue.length}}clear(){this.preloadedResources.clear(),this.preloadQueue.length=0}}const Nt=new ao;function Rn(){return m.useEffect(()=>(["https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/webfonts/fa-solid-900.woff2","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/webfonts/fa-regular-400.woff2"].forEach(i=>{Nt.queuePreload(i)}),["https://bing.img.run","https://source.unsplash.com","https://www.google.com","https://favicon.yandex.net","https://icons.duckduckgo.com"].forEach(i=>{const o=document.createElement("link");o.rel="preconnect",o.href=i,document.head.querySelector(`link[href="${i}"]`)||document.head.appendChild(o)}),()=>{}),[]),{preloadFavicons:n=>{const a=n.map(i=>i.favicon);Nt.preloadImages(a)},preloadImage:n=>{Nt.queuePreload(n)},getPreloadStats:()=>Nt.getStats()}}function ro({websites:s,setWebsites:e}){const{parallaxEnabled:t,wallpaperResolution:n,isSettingsOpen:a}=nt(),{currentUser:i}=Ce(),{displayName:o}=In();Yi(s),Rn();const{drag:l,drop:u,isDragging:d}=jr(s,e),[f,c]=m.useState("https://bing.img.run/uhd.php"),[h,_]=m.useState(!1),[N,$]=m.useState({x:0,y:0}),C=[...s].sort((S,w)=>{const I=(w.visitCount||0)-(S.visitCount||0);if(I!==0)return I;const L=new Date(S.lastVisit||"2000-01-01").getTime();return new Date(w.lastVisit||"2000-01-01").getTime()-L}),U=S=>{e(s.map(w=>w.id===S.id?{...w,...S}:w))},G=()=>{if(!t||a||!N.x||!N.y)return"translate(0px, 0px)";const S=window.innerWidth,w=window.innerHeight,I=20,L=(z,oe)=>(z/oe*I-I/2).toFixed(1),k=parseFloat(L(N.x,S)),R=parseFloat(L(N.y,w)),W=-k*.4,F=-R*.4;return`translate(${W}px, ${F}px)`};return m.useEffect(()=>{const S=W=>({"4k":"https://bing.img.run/uhd.php","1080p":"https://bing.img.run/1920x1080.php","720p":"https://bing.img.run/1366x768.php",mobile:"https://bing.img.run/m.php"})[W],w=()=>new Date().toISOString().split("T")[0],I=()=>{try{const W=localStorage.getItem("bing-wallpaper-cache");if(W){const{date:F,url:z,resolution:oe}=JSON.parse(W);if(F===w()&&oe===n)return z}}catch(W){console.warn(":",W)}return null},L=W=>{try{const F={date:w(),url:W,resolution:n};localStorage.setItem("bing-wallpaper-cache",JSON.stringify(F))}catch(F){console.warn(":",F)}},k=W=>{const F=new Image;F.src=W,F.onload=()=>{c(F.src),L(F.src)},F.onerror=()=>{const z="https://source.unsplash.com/random/1920x1080/?nature";c(z),L(z)}},R=I();if(R)c(R);else{const W=S(n);k(W)}},[n]),m.useEffect(()=>{if(!t||a){$({x:0,y:0});return}const S=w=>{$({x:w.clientX,y:w.clientY})};return window.addEventListener("mousemove",S,{passive:!0}),()=>{window.removeEventListener("mousemove",S)}},[t,a]),m.useEffect(()=>{if(s.length>0){const S=setTimeout(()=>{St.preloadFavicons(s.map(w=>({url:w.url,favicon:w.favicon})))},1e3);return()=>clearTimeout(S)}},[s]),r.jsxs(r.Fragment,{children:[r.jsx(no,{}),r.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-cover bg-center bg-no-repeat -z-10",style:{backgroundImage:`linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1)), url(${f})`,backgroundSize:"105% 105%",backgroundPosition:"center center",backgroundAttachment:"fixed",transform:G(),transition:"transform 0.1s ease-out"},children:r.jsxs("div",{className:"relative min-h-screen pt-[33vh]",children:[r.jsx(br,{}),r.jsx("div",{className:"pt-16 pb-8 px-4 max-w-6xl mx-auto",children:r.jsx(X.div,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-x-3 gap-y-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:C.map(S=>r.jsx(X.div,{ref:w=>l(u(w)),style:{opacity:d?.5:1},layout:!0,transition:{type:"spring",stiffness:350,damping:25},children:r.jsx(vr,{...S,onSave:U,onDelete:w=>{e(s.filter(I=>I.id!==w))}})},S.id))})}),h&&r.jsx(so,{onClose:()=>_(!1),websites:s,setWebsites:e}),i&&i.emailVerified&&r.jsx("div",{className:"fixed top-4 right-4 z-40",children:r.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-3 py-2 flex items-center space-x-2",children:[r.jsx("i",{className:"fa-solid fa-user text-white/80"}),r.jsx("span",{className:"text-white/90 text-sm font-medium",children:o})]})}),r.jsx("div",{className:"fixed bottom-4 right-4 z-[9999]",children:r.jsx("button",{onClick:()=>_(!0),className:"p-2 text-white/70 hover:text-white transition-colors","aria-label":"",children:r.jsx("i",{className:"fa-solid fa-sliders text-lg"})})}),r.jsx(wr,{})]})})]})}const io=[{id:"1",name:"GitHub",url:"https://github.com",favicon:"https://github.githubassets.com/favicons/favicon.png",tags:["",""],visitCount:42,lastVisit:"2023-05-15",note:""},{id:"2",name:"Dribbble",url:"https://dribbble.com",favicon:"https://cdn.dribbble.com/assets/favicon-b38525134603b9513174e916967b4baaaaaa5ee0297c4f53d6fb3ab8ad26c3a4.ico",tags:["",""],visitCount:28,lastVisit:"2023-05-10",note:""},{id:"3",name:"Medium",url:"https://medium.com",favicon:"https://miro.medium.com/v2/resize:fill:32:32/1*sHhtYhaCe2Uc3IU0IgKwIQ.png",tags:["",""],visitCount:15,lastVisit:"2023-05-05",note:""}];function oo({isOpen:s,onClose:e,localWebsites:t,cloudWebsites:n,onChoice:a}){const[i,o]=m.useState(!1);if(!s)return null;const l=async u=>{o(!0);try{await a(u),e()}catch(d){console.error(":",d)}finally{o(!1)}};return r.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:e}),r.jsxs(X.div,{className:"w-96 bg-white rounded-xl shadow-2xl z-50 max-h-[80vh] flex flex-col",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20,stiffness:300},children:[r.jsx("div",{className:"p-6 pb-0",children:r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-medium text-gray-800",children:""}),r.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",disabled:i,children:r.jsx("i",{className:"fa-solid fa-xmark text-lg"})})]})}),r.jsxs("div",{className:"flex-1 px-6 py-2 pb-6 space-y-4 overflow-y-auto",children:[r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-sm text-blue-800 mb-2",children:[r.jsx("i",{className:"fa-solid fa-info-circle mr-2"}),""]})}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:[r.jsx("i",{className:"fa-solid fa-computer mr-2"}),""]}),r.jsxs("p",{className:"text-xs text-gray-600",children:[t.length," "]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:[r.jsx("i",{className:"fa-solid fa-cloud mr-2"}),""]}),r.jsxs("p",{className:"text-xs text-gray-600",children:[n.length," "]})]})]}),r.jsxs("div",{className:"space-y-3 pt-4",children:[r.jsx("button",{onClick:()=>l("cloud"),disabled:i,className:"w-full p-4 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded-lg transition-colors text-left",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("i",{className:"fa-solid fa-cloud-arrow-down text-lg mt-1"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:""}),r.jsx("div",{className:"text-xs text-blue-100",children:""})]})]})}),r.jsx("button",{onClick:()=>l("local"),disabled:i,className:"w-full p-4 bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white rounded-lg transition-colors text-left",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("i",{className:"fa-solid fa-cloud-arrow-up text-lg mt-1"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:""}),r.jsx("div",{className:"text-xs text-green-100",children:""})]})]})}),r.jsx("button",{onClick:()=>l("merge"),disabled:i,className:"w-full p-4 bg-purple-500 hover:bg-purple-600 disabled:bg-gray-400 text-white rounded-lg transition-colors text-left",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("i",{className:"fa-solid fa-code-merge text-lg mt-1"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:""}),r.jsx("div",{className:"text-xs text-purple-100",children:""})]})]})})]}),i&&r.jsxs("div",{className:"flex items-center justify-center py-4",children:[r.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-2"}),r.jsx("span",{className:"text-sm text-gray-600",children:"..."})]})]})]})]})}function lo(){const{currentUser:s}=Ce(),[e,t]=m.useState({cloudWebsites:null,cloudSettings:null,loading:!1,error:null}),n=async()=>{if(!s||!s.emailVerified){t(i=>({...i,error:"",loading:!1}));return}t(i=>({...i,loading:!0,error:null}));try{const[i,o]=await Promise.all([Hi(s),Wi(s)]);t({cloudWebsites:i,cloudSettings:o,loading:!1,error:null}),console.log(" :",{websites:(i==null?void 0:i.length)||0,hasSettings:!!o})}catch(i){t(o=>({...o,loading:!1,error:": "+i.message})),console.error(" :",i)}},a=i=>e.cloudWebsites?qi(i,e.cloudWebsites):i;return m.useEffect(()=>{s&&s.emailVerified?n():t({cloudWebsites:null,cloudSettings:null,loading:!1,error:null})},[s]),{...e,loadCloudData:n,mergeWithLocalData:a,hasCloudData:!!e.cloudWebsites||!!e.cloudSettings}}const co=()=>{m.useEffect(()=>{document.title="jiang_ai_web";const s=()=>{document.hidden?document.title="":document.title="jiang_ai_web"};return document.addEventListener("visibilitychange",s),()=>{document.removeEventListener("visibilitychange",s)}},[])};function uo({onAccept:s,onDecline:e,onCustomize:t}){const[n,a]=m.useState(!1),[i,o]=m.useState(!1);m.useEffect(()=>{if(!localStorage.getItem("cookie-consent")){const c=setTimeout(()=>{a(!0),o(!0)},2e3);return()=>clearTimeout(c)}},[]);const l=()=>{localStorage.setItem("cookie-consent","accepted"),localStorage.setItem("cookie-consent-date",new Date().toISOString()),o(!1),setTimeout(()=>{a(!1),s==null||s()},300),console.log(" Cookie")},u=()=>{localStorage.setItem("cookie-consent","declined"),localStorage.setItem("cookie-consent-date",new Date().toISOString()),o(!1);try{const f=["cookie-consent","cookie-consent-date"],c=[];for(let h=0;h<localStorage.length;h++){const _=localStorage.key(h);_&&!f.includes(_)&&c.push(_)}c.forEach(h=>localStorage.removeItem(h))}catch(f){console.error(":",f)}setTimeout(()=>{a(!1),e==null||e()},300),console.log(" Cookie")},d=()=>{t==null||t()};return n?r.jsx(kt,{children:i&&r.jsxs(r.Fragment,{children:[r.jsx(X.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/20 z-[9998] pointer-events-none"}),r.jsxs(X.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",damping:25,stiffness:200},className:"fixed bottom-0 left-0 right-0 z-[9999] bg-white border-t border-gray-200 shadow-2xl",children:[r.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0 mt-1",children:r.jsx("i",{className:"fa-solid fa-cookie-bite text-amber-500 text-xl"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:" Cookie"}),r.jsxs("p",{className:"text-sm text-gray-600 leading-relaxed",children:["Cookie",r.jsx("br",{}),r.jsxs("span",{className:"inline-flex items-center gap-4 mt-1 text-xs",children:[r.jsx("span",{children:" "}),r.jsx("span",{children:" "}),r.jsx("span",{children:" "}),r.jsx("span",{children:" "})]})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Cookie",r.jsx("button",{className:"text-blue-600 hover:text-blue-800 underline mx-1",onClick:()=>window.open("https://github.com/your-repo/privacy-policy","_blank"),children:""})]})]})]})}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[r.jsxs("button",{onClick:d,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("i",{className:"fa-solid fa-cog mr-2"}),""]}),r.jsxs("button",{onClick:u,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("i",{className:"fa-solid fa-times mr-2"}),""]}),r.jsxs("button",{onClick:l,className:"px-6 py-2 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:[r.jsx("i",{className:"fa-solid fa-check mr-2"}),""]})]})]})}),r.jsx("div",{className:"h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500"})]})]})}):null}function fo(){co(),Rn();const s=to(),{currentUser:e}=Ce(),{cloudWebsites:t,cloudSettings:n,hasCloudData:a,mergeWithLocalData:i}=lo(),{setCardOpacity:o,setSearchBarOpacity:l,setParallaxEnabled:u,setWallpaperResolution:d}=nt(),[f,c]=m.useState(()=>{const S=s.getItem("websites");return S||io}),[h,_]=m.useState(!1),[N,$]=m.useState(!1),[C,U]=m.useState(!1);m.useEffect(()=>{s.setItem("websites",f)},[f,s]),m.useEffect(()=>{if(e&&e.emailVerified&&a&&t&&!N){const S=f.length,w=t.length;S>0&&w>0&&S!==w?_(!0):(w>0&&S===0&&c(t),$(!0))}},[e,a,t,f.length,N]),m.useEffect(()=>{e&&e.emailVerified&&n&&(console.log(" :",n),typeof n.cardOpacity=="number"&&o(n.cardOpacity),typeof n.searchBarOpacity=="number"&&l(n.searchBarOpacity),typeof n.parallaxEnabled=="boolean"&&u(n.parallaxEnabled),n.wallpaperResolution&&d(n.wallpaperResolution),n.theme&&localStorage.setItem("theme",n.theme))},[e,n,o,l,u,d]);const G=async S=>{if(!(!e||!t))try{let w=[];switch(S){case"cloud":w=t,c(w);break;case"local":w=f,await ss(e,w);break;case"merge":w=i(f),c(w),await ss(e,w);break}$(!0),console.log(`  (${S}):`,w.length,"")}catch(w){console.error(" :",w)}};return r.jsxs(r.Fragment,{children:[r.jsx(Wn,{children:r.jsx(Hn,{path:"/",element:r.jsx(ro,{websites:f,setWebsites:c})})}),h&&t&&r.jsx(oo,{isOpen:h,onClose:()=>{_(!1),$(!0)},localWebsites:f,cloudWebsites:t,onChoice:G}),r.jsx(uo,{onAccept:()=>{console.log(" Cookie")},onDecline:()=>{console.log(" Cookie")},onCustomize:()=>{U(!0)}}),C&&r.jsx(An,{isOpen:C,onClose:()=>U(!1)})]})}function ho(){return r.jsx(Zi,{children:r.jsx(Qi,{children:r.jsx(Gi,{children:r.jsx(gr,{children:r.jsx(Vn,{backend:Zn,children:r.jsx(fo,{})})})})})})}const mo=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",po=mo?void 0:"/jiang_ai_web";ma.createRoot(document.getElementById("root")).render(r.jsx(m.StrictMode,{children:r.jsxs(qn,{basename:po,children:[r.jsx(ho,{}),r.jsx(za,{})]})}));
