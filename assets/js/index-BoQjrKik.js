var Mn=Object.defineProperty;var Pn=(s,e,t)=>e in s?Mn(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var ps=(s,e,t)=>Pn(s,typeof e!="symbol"?e+"":e,t);import{j as r,m as K,u as Ln,a as $n,A as _t,D as Bn,H as Fn}from"./ui-vendor-NkcesyV5.js";import{R as g,a as Vn,r as h,b as zn,c as Zn,B as Un}from"./router-vendor-ojeZ8ZvP.js";import{a as Wn}from"./react-vendor-BtP0CW_r.js";import{r as Nt,_ as St,C as kt,a as Mt,E as qs,o as Hn,F as Gs,L as qn,g as Ks,i as Gn,b as Kn,v as Yn,c as gs,d as Qn,e as Jn,f as Xn,h as ea,j as ta,k as sa,l as na,m as aa,s as xs,n as ra,G as ia,p as oa,q as la,t as ca,u as tt,w as ts,x as Ct,y as ss}from"./firebase-vendor-DV2vFSYp.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();var bt={},ys;function da(){if(ys)return bt;ys=1;var s=Wn();return bt.createRoot=s.createRoot,bt.hydrateRoot=s.hydrateRoot,bt}var ua=da();function fa(s){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}const ma=s=>{switch(s){case"success":return ga;case"info":return ya;case"warning":return xa;case"error":return va;default:return null}},ha=Array(12).fill(0),pa=({visible:s,className:e})=>g.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":s},g.createElement("div",{className:"sonner-spinner"},ha.map((t,n)=>g.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),ga=g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},g.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),xa=g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},g.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),ya=g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},g.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),va=g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},g.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),ba=g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},g.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),g.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),wa=()=>{const[s,e]=g.useState(document.hidden);return g.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),s};let Ht=1;class ja{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:n,...a}=e,i=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Ht++,o=this.toasts.find(u=>u.id===i),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(u=>u.id===i?(this.publish({...u,...e,id:i,title:n}),{...u,...e,id:i,dismissible:l,title:n}):u):this.addToast({title:n,...a,dismissible:l,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const a=Promise.resolve(e instanceof Function?e():e);let i=n!==void 0,o;const l=a.then(async d=>{if(o=["resolve",d],g.isValidElement(d))i=!1,this.create({id:n,type:"default",message:d});else if(Na(d)&&!d.ok){i=!1;const c=typeof t.error=="function"?await t.error(`HTTP error! status: ${d.status}`):t.error,m=typeof t.description=="function"?await t.description(`HTTP error! status: ${d.status}`):t.description,b=typeof c=="object"&&!g.isValidElement(c)?c:{message:c};this.create({id:n,type:"error",description:m,...b})}else if(d instanceof Error){i=!1;const c=typeof t.error=="function"?await t.error(d):t.error,m=typeof t.description=="function"?await t.description(d):t.description,b=typeof c=="object"&&!g.isValidElement(c)?c:{message:c};this.create({id:n,type:"error",description:m,...b})}else if(t.success!==void 0){i=!1;const c=typeof t.success=="function"?await t.success(d):t.success,m=typeof t.description=="function"?await t.description(d):t.description,b=typeof c=="object"&&!g.isValidElement(c)?c:{message:c};this.create({id:n,type:"success",description:m,...b})}}).catch(async d=>{if(o=["reject",d],t.error!==void 0){i=!1;const f=typeof t.error=="function"?await t.error(d):t.error,c=typeof t.description=="function"?await t.description(d):t.description,_=typeof f=="object"&&!g.isValidElement(f)?f:{message:f};this.create({id:n,type:"error",description:c,..._})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),t.finally==null||t.finally.call(t)}),u=()=>new Promise((d,f)=>l.then(()=>o[0]==="reject"?f(o[1]):d(o[1])).catch(f));return typeof n!="string"&&typeof n!="number"?{unwrap:u}:Object.assign(n,{unwrap:u})},this.custom=(e,t)=>{const n=(t==null?void 0:t.id)||Ht++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const oe=new ja,_a=(s,e)=>{const t=(e==null?void 0:e.id)||Ht++;return oe.addToast({title:s,...e,id:t}),t},Na=s=>s&&typeof s=="object"&&"ok"in s&&typeof s.ok=="boolean"&&"status"in s&&typeof s.status=="number",Sa=_a,ka=()=>oe.toasts,Ca=()=>oe.getActiveToasts();Object.assign(Sa,{success:oe.success,info:oe.info,warning:oe.warning,error:oe.error,custom:oe.custom,message:oe.message,promise:oe.promise,dismiss:oe.dismiss,loading:oe.loading},{getHistory:ka,getToasts:Ca});fa("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function wt(s){return s.label!==void 0}const Ia=3,Ta="24px",Ea="16px",vs=4e3,Aa=356,Ra=14,Oa=45,Da=200;function _e(...s){return s.filter(Boolean).join(" ")}function Ma(s){const[e,t]=s.split("-"),n=[];return e&&n.push(e),t&&n.push(t),n}const Pa=s=>{var e,t,n,a,i,o,l,u,d;const{invert:f,toast:c,unstyled:m,interacting:_,setHeights:b,visibleToasts:S,heights:N,index:Z,toasts:re,expanded:C,removeToast:I,defaultRichColors:k,closeButton:R,style:V,cancelButtonStyle:L,actionButtonStyle:J,className:X="",descriptionClassName:U="",duration:ce,position:we,gap:Ce,expandByDefault:ae,classNames:P,icons:ie,closeButtonAriaLabel:xe="Close toast"}=s,[Y,Ie]=g.useState(null),[z,x]=g.useState(null),[y,T]=g.useState(!1),[W,D]=g.useState(!1),[H,B]=g.useState(!1),[G,de]=g.useState(!1),[nt,at]=g.useState(!1),[rt,$e]=g.useState(0),[ht,it]=g.useState(0),Te=g.useRef(c.duration||ce||vs),He=g.useRef(null),ye=g.useRef(null),pt=Z===0,gt=Z+1<=S,ee=c.type,Ee=c.dismissible!==!1,xt=c.className||"",$t=c.descriptionClassName||"",Be=g.useMemo(()=>N.findIndex(O=>O.toastId===c.id)||0,[N,c.id]),qe=g.useMemo(()=>{var O;return(O=c.closeButton)!=null?O:R},[c.closeButton,R]),Ae=g.useMemo(()=>c.duration||ce||vs,[c.duration,ce]),he=g.useRef(0),je=g.useRef(0),Ge=g.useRef(0),Ke=g.useRef(null),[En,An]=we.split("-"),ds=g.useMemo(()=>N.reduce((O,Q,ne)=>ne>=Be?O:O+Q.height,0),[N,Be]),us=wa(),Rn=c.invert||f,Bt=ee==="loading";je.current=g.useMemo(()=>Be*Ce+ds,[Be,ds]),g.useEffect(()=>{Te.current=Ae},[Ae]),g.useEffect(()=>{T(!0)},[]),g.useEffect(()=>{const O=ye.current;if(O){const Q=O.getBoundingClientRect().height;return it(Q),b(ne=>[{toastId:c.id,height:Q,position:c.position},...ne]),()=>b(ne=>ne.filter(ue=>ue.toastId!==c.id))}},[b,c.id]),g.useLayoutEffect(()=>{if(!y)return;const O=ye.current,Q=O.style.height;O.style.height="auto";const ne=O.getBoundingClientRect().height;O.style.height=Q,it(ne),b(ue=>ue.find(te=>te.toastId===c.id)?ue.map(te=>te.toastId===c.id?{...te,height:ne}:te):[{toastId:c.id,height:ne,position:c.position},...ue])},[y,c.title,c.description,b,c.id,c.jsx,c.action,c.cancel]);const Re=g.useCallback(()=>{D(!0),$e(je.current),b(O=>O.filter(Q=>Q.toastId!==c.id)),setTimeout(()=>{I(c)},Da)},[c,I,b,je]);g.useEffect(()=>{if(c.promise&&ee==="loading"||c.duration===1/0||c.type==="loading")return;let O;return C||_||us?(()=>{if(Ge.current<he.current){const ue=new Date().getTime()-he.current;Te.current=Te.current-ue}Ge.current=new Date().getTime()})():(()=>{Te.current!==1/0&&(he.current=new Date().getTime(),O=setTimeout(()=>{c.onAutoClose==null||c.onAutoClose.call(c,c),Re()},Te.current))})(),()=>clearTimeout(O)},[C,_,c,ee,us,Re]),g.useEffect(()=>{c.delete&&(Re(),c.onDismiss==null||c.onDismiss.call(c,c))},[Re,c.delete]);function On(){var O;if(ie!=null&&ie.loading){var Q;return g.createElement("div",{className:_e(P==null?void 0:P.loader,c==null||(Q=c.classNames)==null?void 0:Q.loader,"sonner-loader"),"data-visible":ee==="loading"},ie.loading)}return g.createElement(pa,{className:_e(P==null?void 0:P.loader,c==null||(O=c.classNames)==null?void 0:O.loader),visible:ee==="loading"})}const Dn=c.icon||(ie==null?void 0:ie[ee])||ma(ee);var fs,ms;return g.createElement("li",{tabIndex:0,ref:ye,className:_e(X,xt,P==null?void 0:P.toast,c==null||(e=c.classNames)==null?void 0:e.toast,P==null?void 0:P.default,P==null?void 0:P[ee],c==null||(t=c.classNames)==null?void 0:t[ee]),"data-sonner-toast":"","data-rich-colors":(fs=c.richColors)!=null?fs:k,"data-styled":!(c.jsx||c.unstyled||m),"data-mounted":y,"data-promise":!!c.promise,"data-swiped":nt,"data-removed":W,"data-visible":gt,"data-y-position":En,"data-x-position":An,"data-index":Z,"data-front":pt,"data-swiping":H,"data-dismissible":Ee,"data-type":ee,"data-invert":Rn,"data-swipe-out":G,"data-swipe-direction":z,"data-expanded":!!(C||ae&&y),style:{"--index":Z,"--toasts-before":Z,"--z-index":re.length-Z,"--offset":`${W?rt:je.current}px`,"--initial-height":ae?"auto":`${ht}px`,...V,...c.style},onDragEnd:()=>{B(!1),Ie(null),Ke.current=null},onPointerDown:O=>{Bt||!Ee||(He.current=new Date,$e(je.current),O.target.setPointerCapture(O.pointerId),O.target.tagName!=="BUTTON"&&(B(!0),Ke.current={x:O.clientX,y:O.clientY}))},onPointerUp:()=>{var O,Q,ne;if(G||!Ee)return;Ke.current=null;const ue=Number(((O=ye.current)==null?void 0:O.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),yt=Number(((Q=ye.current)==null?void 0:Q.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),te=new Date().getTime()-((ne=He.current)==null?void 0:ne.getTime()),pe=Y==="x"?ue:yt,vt=Math.abs(pe)/te;if(Math.abs(pe)>=Oa||vt>.11){$e(je.current),c.onDismiss==null||c.onDismiss.call(c,c),x(Y==="x"?ue>0?"right":"left":yt>0?"down":"up"),Re(),de(!0);return}else{var ve,be;(ve=ye.current)==null||ve.style.setProperty("--swipe-amount-x","0px"),(be=ye.current)==null||be.style.setProperty("--swipe-amount-y","0px")}at(!1),B(!1),Ie(null)},onPointerMove:O=>{var Q,ne,ue;if(!Ke.current||!Ee||((Q=window.getSelection())==null?void 0:Q.toString().length)>0)return;const te=O.clientY-Ke.current.y,pe=O.clientX-Ke.current.x;var vt;const ve=(vt=s.swipeDirections)!=null?vt:Ma(we);!Y&&(Math.abs(pe)>1||Math.abs(te)>1)&&Ie(Math.abs(pe)>Math.abs(te)?"x":"y");let be={x:0,y:0};const hs=Fe=>1/(1.5+Math.abs(Fe)/20);if(Y==="y"){if(ve.includes("top")||ve.includes("bottom"))if(ve.includes("top")&&te<0||ve.includes("bottom")&&te>0)be.y=te;else{const Fe=te*hs(te);be.y=Math.abs(Fe)<Math.abs(te)?Fe:te}}else if(Y==="x"&&(ve.includes("left")||ve.includes("right")))if(ve.includes("left")&&pe<0||ve.includes("right")&&pe>0)be.x=pe;else{const Fe=pe*hs(pe);be.x=Math.abs(Fe)<Math.abs(pe)?Fe:pe}(Math.abs(be.x)>0||Math.abs(be.y)>0)&&at(!0),(ne=ye.current)==null||ne.style.setProperty("--swipe-amount-x",`${be.x}px`),(ue=ye.current)==null||ue.style.setProperty("--swipe-amount-y",`${be.y}px`)}},qe&&!c.jsx&&ee!=="loading"?g.createElement("button",{"aria-label":xe,"data-disabled":Bt,"data-close-button":!0,onClick:Bt||!Ee?()=>{}:()=>{Re(),c.onDismiss==null||c.onDismiss.call(c,c)},className:_e(P==null?void 0:P.closeButton,c==null||(n=c.classNames)==null?void 0:n.closeButton)},(ms=ie==null?void 0:ie.close)!=null?ms:ba):null,(ee||c.icon||c.promise)&&c.icon!==null&&((ie==null?void 0:ie[ee])!==null||c.icon)?g.createElement("div",{"data-icon":"",className:_e(P==null?void 0:P.icon,c==null||(a=c.classNames)==null?void 0:a.icon)},c.promise||c.type==="loading"&&!c.icon?c.icon||On():null,c.type!=="loading"?Dn:null):null,g.createElement("div",{"data-content":"",className:_e(P==null?void 0:P.content,c==null||(i=c.classNames)==null?void 0:i.content)},g.createElement("div",{"data-title":"",className:_e(P==null?void 0:P.title,c==null||(o=c.classNames)==null?void 0:o.title)},c.jsx?c.jsx:typeof c.title=="function"?c.title():c.title),c.description?g.createElement("div",{"data-description":"",className:_e(U,$t,P==null?void 0:P.description,c==null||(l=c.classNames)==null?void 0:l.description)},typeof c.description=="function"?c.description():c.description):null),g.isValidElement(c.cancel)?c.cancel:c.cancel&&wt(c.cancel)?g.createElement("button",{"data-button":!0,"data-cancel":!0,style:c.cancelButtonStyle||L,onClick:O=>{wt(c.cancel)&&Ee&&(c.cancel.onClick==null||c.cancel.onClick.call(c.cancel,O),Re())},className:_e(P==null?void 0:P.cancelButton,c==null||(u=c.classNames)==null?void 0:u.cancelButton)},c.cancel.label):null,g.isValidElement(c.action)?c.action:c.action&&wt(c.action)?g.createElement("button",{"data-button":!0,"data-action":!0,style:c.actionButtonStyle||J,onClick:O=>{wt(c.action)&&(c.action.onClick==null||c.action.onClick.call(c.action,O),!O.defaultPrevented&&Re())},className:_e(P==null?void 0:P.actionButton,c==null||(d=c.classNames)==null?void 0:d.actionButton)},c.action.label):null)};function bs(){if(typeof window>"u"||typeof document>"u")return"ltr";const s=document.documentElement.getAttribute("dir");return s==="auto"||!s?window.getComputedStyle(document.documentElement).direction:s}function La(s,e){const t={};return[s,e].forEach((n,a)=>{const i=a===1,o=i?"--mobile-offset":"--offset",l=i?Ea:Ta;function u(d){["top","right","bottom","left"].forEach(f=>{t[`${o}-${f}`]=typeof d=="number"?`${d}px`:d})}typeof n=="number"||typeof n=="string"?u(n):typeof n=="object"?["top","right","bottom","left"].forEach(d=>{n[d]===void 0?t[`${o}-${d}`]=l:t[`${o}-${d}`]=typeof n[d]=="number"?`${n[d]}px`:n[d]}):u(l)}),t}const $a=g.forwardRef(function(e,t){const{invert:n,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:l,className:u,offset:d,mobileOffset:f,theme:c="light",richColors:m,duration:_,style:b,visibleToasts:S=Ia,toastOptions:N,dir:Z=bs(),gap:re=Ra,icons:C,containerAriaLabel:I="Notifications"}=e,[k,R]=g.useState([]),V=g.useMemo(()=>Array.from(new Set([a].concat(k.filter(z=>z.position).map(z=>z.position)))),[k,a]),[L,J]=g.useState([]),[X,U]=g.useState(!1),[ce,we]=g.useState(!1),[Ce,ae]=g.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),P=g.useRef(null),ie=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),xe=g.useRef(null),Y=g.useRef(!1),Ie=g.useCallback(z=>{R(x=>{var y;return(y=x.find(T=>T.id===z.id))!=null&&y.delete||oe.dismiss(z.id),x.filter(({id:T})=>T!==z.id)})},[]);return g.useEffect(()=>oe.subscribe(z=>{if(z.dismiss){requestAnimationFrame(()=>{R(x=>x.map(y=>y.id===z.id?{...y,delete:!0}:y))});return}setTimeout(()=>{Vn.flushSync(()=>{R(x=>{const y=x.findIndex(T=>T.id===z.id);return y!==-1?[...x.slice(0,y),{...x[y],...z},...x.slice(y+1)]:[z,...x]})})})}),[k]),g.useEffect(()=>{if(c!=="system"){ae(c);return}if(c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ae("dark"):ae("light")),typeof window>"u")return;const z=window.matchMedia("(prefers-color-scheme: dark)");try{z.addEventListener("change",({matches:x})=>{ae(x?"dark":"light")})}catch{z.addListener(({matches:y})=>{try{ae(y?"dark":"light")}catch(T){console.error(T)}})}},[c]),g.useEffect(()=>{k.length<=1&&U(!1)},[k]),g.useEffect(()=>{const z=x=>{var y;if(i.every(D=>x[D]||x.code===D)){var W;U(!0),(W=P.current)==null||W.focus()}x.code==="Escape"&&(document.activeElement===P.current||(y=P.current)!=null&&y.contains(document.activeElement))&&U(!1)};return document.addEventListener("keydown",z),()=>document.removeEventListener("keydown",z)},[i]),g.useEffect(()=>{if(P.current)return()=>{xe.current&&(xe.current.focus({preventScroll:!0}),xe.current=null,Y.current=!1)}},[P.current]),g.createElement("section",{ref:t,"aria-label":`${I} ${ie}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},V.map((z,x)=>{var y;const[T,W]=z.split("-");return k.length?g.createElement("ol",{key:z,dir:Z==="auto"?bs():Z,tabIndex:-1,ref:P,className:u,"data-sonner-toaster":!0,"data-sonner-theme":Ce,"data-y-position":T,"data-x-position":W,style:{"--front-toast-height":`${((y=L[0])==null?void 0:y.height)||0}px`,"--width":`${Aa}px`,"--gap":`${re}px`,...b,...La(d,f)},onBlur:D=>{Y.current&&!D.currentTarget.contains(D.relatedTarget)&&(Y.current=!1,xe.current&&(xe.current.focus({preventScroll:!0}),xe.current=null))},onFocus:D=>{D.target instanceof HTMLElement&&D.target.dataset.dismissible==="false"||Y.current||(Y.current=!0,xe.current=D.relatedTarget)},onMouseEnter:()=>U(!0),onMouseMove:()=>U(!0),onMouseLeave:()=>{ce||U(!1)},onDragEnd:()=>U(!1),onPointerDown:D=>{D.target instanceof HTMLElement&&D.target.dataset.dismissible==="false"||we(!0)},onPointerUp:()=>we(!1)},k.filter(D=>!D.position&&x===0||D.position===z).map((D,H)=>{var B,G;return g.createElement(Pa,{key:D.id,icons:C,index:H,toast:D,defaultRichColors:m,duration:(B=N==null?void 0:N.duration)!=null?B:_,className:N==null?void 0:N.className,descriptionClassName:N==null?void 0:N.descriptionClassName,invert:n,visibleToasts:S,closeButton:(G=N==null?void 0:N.closeButton)!=null?G:l,interacting:ce,position:z,style:N==null?void 0:N.style,unstyled:N==null?void 0:N.unstyled,classNames:N==null?void 0:N.classNames,cancelButtonStyle:N==null?void 0:N.cancelButtonStyle,actionButtonStyle:N==null?void 0:N.actionButtonStyle,closeButtonAriaLabel:N==null?void 0:N.closeButtonAriaLabel,removeToast:Ie,toasts:k.filter(de=>de.position==D.position),heights:L.filter(de=>de.position==D.position),setHeights:J,expandByDefault:o,gap:re,expanded:X,swipeDirections:e.swipeDirections})})):null}))});var F;(function(s){s.assertEqual=a=>{};function e(a){}s.assertIs=e;function t(a){throw new Error}s.assertNever=t,s.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},s.getValidEnumValues=a=>{const i=s.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of i)o[l]=a[l];return s.objectValues(o)},s.objectValues=a=>s.objectKeys(a).map(function(i){return a[i]}),s.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},s.find=(a,i)=>{for(const o of a)if(i(o))return o},s.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}s.joinValues=n,s.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(F||(F={}));var ws;(function(s){s.mergeShapes=(e,t)=>({...e,...t})})(ws||(ws={}));const w=F.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Oe=s=>{switch(typeof s){case"undefined":return w.undefined;case"string":return w.string;case"number":return Number.isNaN(s)?w.nan:w.number;case"boolean":return w.boolean;case"function":return w.function;case"bigint":return w.bigint;case"symbol":return w.symbol;case"object":return Array.isArray(s)?w.array:s===null?w.null:s.then&&typeof s.then=="function"&&s.catch&&typeof s.catch=="function"?w.promise:typeof Map<"u"&&s instanceof Map?w.map:typeof Set<"u"&&s instanceof Set?w.set:typeof Date<"u"&&s instanceof Date?w.date:w.object;default:return w.unknown}},p=F.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ke extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(i){return i.message},n={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)n._errors.push(t(o));else{let l=n,u=0;for(;u<o.path.length;){const d=o.path[u];u===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(t(o))):l[d]=l[d]||{_errors:[]},l=l[d],u++}}};return a(this),n}static assert(e){if(!(e instanceof ke))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,F.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const a of this.issues)a.path.length>0?(t[a.path[0]]=t[a.path[0]]||[],t[a.path[0]].push(e(a))):n.push(e(a));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}ke.create=s=>new ke(s);const qt=(s,e)=>{let t;switch(s.code){case p.invalid_type:s.received===w.undefined?t="Required":t=`Expected ${s.expected}, received ${s.received}`;break;case p.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(s.expected,F.jsonStringifyReplacer)}`;break;case p.unrecognized_keys:t=`Unrecognized key(s) in object: ${F.joinValues(s.keys,", ")}`;break;case p.invalid_union:t="Invalid input";break;case p.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${F.joinValues(s.options)}`;break;case p.invalid_enum_value:t=`Invalid enum value. Expected ${F.joinValues(s.options)}, received '${s.received}'`;break;case p.invalid_arguments:t="Invalid function arguments";break;case p.invalid_return_type:t="Invalid function return type";break;case p.invalid_date:t="Invalid date";break;case p.invalid_string:typeof s.validation=="object"?"includes"in s.validation?(t=`Invalid input: must include "${s.validation.includes}"`,typeof s.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${s.validation.position}`)):"startsWith"in s.validation?t=`Invalid input: must start with "${s.validation.startsWith}"`:"endsWith"in s.validation?t=`Invalid input: must end with "${s.validation.endsWith}"`:F.assertNever(s.validation):s.validation!=="regex"?t=`Invalid ${s.validation}`:t="Invalid";break;case p.too_small:s.type==="array"?t=`Array must contain ${s.exact?"exactly":s.inclusive?"at least":"more than"} ${s.minimum} element(s)`:s.type==="string"?t=`String must contain ${s.exact?"exactly":s.inclusive?"at least":"over"} ${s.minimum} character(s)`:s.type==="number"?t=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="date"?t=`Date must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(s.minimum))}`:t="Invalid input";break;case p.too_big:s.type==="array"?t=`Array must contain ${s.exact?"exactly":s.inclusive?"at most":"less than"} ${s.maximum} element(s)`:s.type==="string"?t=`String must contain ${s.exact?"exactly":s.inclusive?"at most":"under"} ${s.maximum} character(s)`:s.type==="number"?t=`Number must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="bigint"?t=`BigInt must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="date"?t=`Date must be ${s.exact?"exactly":s.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(s.maximum))}`:t="Invalid input";break;case p.custom:t="Invalid input";break;case p.invalid_intersection_types:t="Intersection results could not be merged";break;case p.not_multiple_of:t=`Number must be a multiple of ${s.multipleOf}`;break;case p.not_finite:t="Number must be finite";break;default:t=e.defaultError,F.assertNever(s)}return{message:t}};let Ba=qt;function Fa(){return Ba}const Va=s=>{const{data:e,path:t,errorMaps:n,issueData:a}=s,i=[...t,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let l="";const u=n.filter(d=>!!d).slice().reverse();for(const d of u)l=d(o,{data:e,defaultError:l}).message;return{...a,path:i,message:l}};function v(s,e){const t=Fa(),n=Va({issueData:e,data:s.data,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,t,t===qt?void 0:qt].filter(a=>!!a)});s.common.issues.push(n)}class me{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const a of t){if(a.status==="aborted")return E;a.status==="dirty"&&e.dirty(),n.push(a.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const a of t){const i=await a.key,o=await a.value;n.push({key:i,value:o})}return me.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const a of t){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return E;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}}const E=Object.freeze({status:"aborted"}),lt=s=>({status:"dirty",value:s}),ge=s=>({status:"valid",value:s}),js=s=>s.status==="aborted",_s=s=>s.status==="dirty",Qe=s=>s.status==="valid",It=s=>typeof Promise<"u"&&s instanceof Promise;var j;(function(s){s.errToObj=e=>typeof e=="string"?{message:e}:e||{},s.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(j||(j={}));class Pe{constructor(e,t,n,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Ns=(s,e)=>{if(Qe(e))return{success:!0,data:e.value};if(!s.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ke(s.common.issues);return this._error=t,this._error}}};function M(s){if(!s)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:a}=s;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(o,l)=>{const{message:u}=s;return o.code==="invalid_enum_value"?{message:u??l.defaultError}:typeof l.data>"u"?{message:u??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:u??t??l.defaultError}},description:a}}class ${get description(){return this._def.description}_getType(e){return Oe(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Oe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new me,ctx:{common:e.parent.common,data:e.data,parsedType:Oe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(It(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){const n={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Oe(e)},a=this._parseSync({data:e,path:n.path,parent:n});return Ns(n,a)}"~validate"(e){var n,a;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Oe(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:t});return Qe(i)?{value:i.value}:{issues:t.common.issues}}catch(i){(a=(n=i==null?void 0:i.message)==null?void 0:n.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(i=>Qe(i)?{value:i.value}:{issues:t.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Oe(e)},a=this._parse({data:e,path:n.path,parent:n}),i=await(It(a)?a:Promise.resolve(a));return Ns(n,i)}refine(e,t){const n=a=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(a):t;return this._refinement((a,i)=>{const o=e(a),l=()=>i.addIssue({code:p.custom,...n(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,t){return this._refinement((n,a)=>e(n)?!0:(a.addIssue(typeof t=="function"?t(n,a):t),!1))}_refinement(e){return new Xe({schema:this,typeName:A.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Me.create(this,this._def)}nullable(){return et.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ne.create(this)}promise(){return Rt.create(this,this._def)}or(e){return Et.create([this,e],this._def)}and(e){return At.create(this,e,this._def)}transform(e){return new Xe({...M(this._def),schema:this,typeName:A.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Kt({...M(this._def),innerType:this,defaultValue:t,typeName:A.ZodDefault})}brand(){return new dr({typeName:A.ZodBranded,type:this,...M(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Yt({...M(this._def),innerType:this,catchValue:t,typeName:A.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return ns.create(this,e)}readonly(){return Qt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const za=/^c[^\s-]{8,}$/i,Za=/^[0-9a-z]+$/,Ua=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Wa=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Ha=/^[a-z0-9_-]{21}$/i,qa=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Ga=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Ka=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Ya="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ft;const Qa=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ja=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Xa=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,er=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,tr=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,sr=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Ys="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",nr=new RegExp(`^${Ys}$`);function Qs(s){let e="[0-5]\\d";s.precision?e=`${e}\\.\\d{${s.precision}}`:s.precision==null&&(e=`${e}(\\.\\d+)?`);const t=s.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function ar(s){return new RegExp(`^${Qs(s)}$`)}function rr(s){let e=`${Ys}T${Qs(s)}`;const t=[];return t.push(s.local?"Z?":"Z"),s.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function ir(s,e){return!!((e==="v4"||!e)&&Qa.test(s)||(e==="v6"||!e)&&Xa.test(s))}function or(s,e){if(!qa.test(s))return!1;try{const[t]=s.split("."),n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||e&&a.alg!==e)}catch{return!1}}function lr(s,e){return!!((e==="v4"||!e)&&Ja.test(s)||(e==="v6"||!e)&&er.test(s))}class De extends ${_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==w.string){const i=this._getOrReturnCtx(e);return v(i,{code:p.invalid_type,expected:w.string,received:i.parsedType}),E}const n=new me;let a;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(a=this._getOrReturnCtx(e,a),v(a,{code:p.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(a=this._getOrReturnCtx(e,a),v(a,{code:p.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,l=e.data.length<i.value;(o||l)&&(a=this._getOrReturnCtx(e,a),o?v(a,{code:p.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&v(a,{code:p.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")Ka.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"email",code:p.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Ft||(Ft=new RegExp(Ya,"u")),Ft.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"emoji",code:p.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")Wa.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"uuid",code:p.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")Ha.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"nanoid",code:p.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")za.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"cuid",code:p.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")Za.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"cuid2",code:p.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")Ua.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"ulid",code:p.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),v(a,{validation:"url",code:p.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"regex",code:p.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(e,a),v(a,{code:p.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(a=this._getOrReturnCtx(e,a),v(a,{code:p.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(a=this._getOrReturnCtx(e,a),v(a,{code:p.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?rr(i).test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{code:p.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?nr.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{code:p.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?ar(i).test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{code:p.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?Ga.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"duration",code:p.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?ir(e.data,i.version)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"ip",code:p.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?or(e.data,i.alg)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"jwt",code:p.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?lr(e.data,i.version)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"cidr",code:p.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?tr.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"base64",code:p.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?sr.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"base64url",code:p.invalid_string,message:i.message}),n.dirty()):F.assertNever(i);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(a=>e.test(a),{validation:t,code:p.invalid_string,...j.errToObj(n)})}_addCheck(e){return new De({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...j.errToObj(e)})}url(e){return this._addCheck({kind:"url",...j.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...j.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...j.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...j.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...j.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...j.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...j.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...j.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...j.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...j.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...j.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...j.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...j.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...j.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...j.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...j.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...j.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...j.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...j.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...j.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...j.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...j.errToObj(t)})}nonempty(e){return this.min(1,j.errToObj(e))}trim(){return new De({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new De({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new De({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}De.create=s=>new De({checks:[],typeName:A.ZodString,coerce:(s==null?void 0:s.coerce)??!1,...M(s)});function cr(s,e){const t=(s.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,a=t>n?t:n,i=Number.parseInt(s.toFixed(a).replace(".","")),o=Number.parseInt(e.toFixed(a).replace(".",""));return i%o/10**a}class dt extends ${constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==w.number){const i=this._getOrReturnCtx(e);return v(i,{code:p.invalid_type,expected:w.number,received:i.parsedType}),E}let n;const a=new me;for(const i of this._def.checks)i.kind==="int"?F.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{code:p.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),v(n,{code:p.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),v(n,{code:p.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?cr(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),v(n,{code:p.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{code:p.not_finite,message:i.message}),a.dirty()):F.assertNever(i);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,j.toString(t))}gt(e,t){return this.setLimit("min",e,!1,j.toString(t))}lte(e,t){return this.setLimit("max",e,!0,j.toString(t))}lt(e,t){return this.setLimit("max",e,!1,j.toString(t))}setLimit(e,t,n,a){return new dt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:j.toString(a)}]})}_addCheck(e){return new dt({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:j.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:j.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:j.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:j.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:j.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:j.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:j.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:j.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:j.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&F.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}dt.create=s=>new dt({checks:[],typeName:A.ZodNumber,coerce:(s==null?void 0:s.coerce)||!1,...M(s)});class ut extends ${constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==w.bigint)return this._getInvalidInput(e);let n;const a=new me;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),v(n,{code:p.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),v(n,{code:p.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),v(n,{code:p.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):F.assertNever(i);return{status:a.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return v(t,{code:p.invalid_type,expected:w.bigint,received:t.parsedType}),E}gte(e,t){return this.setLimit("min",e,!0,j.toString(t))}gt(e,t){return this.setLimit("min",e,!1,j.toString(t))}lte(e,t){return this.setLimit("max",e,!0,j.toString(t))}lt(e,t){return this.setLimit("max",e,!1,j.toString(t))}setLimit(e,t,n,a){return new ut({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:j.toString(a)}]})}_addCheck(e){return new ut({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:j.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:j.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:j.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:j.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:j.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ut.create=s=>new ut({checks:[],typeName:A.ZodBigInt,coerce:(s==null?void 0:s.coerce)??!1,...M(s)});class Ss extends ${_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==w.boolean){const n=this._getOrReturnCtx(e);return v(n,{code:p.invalid_type,expected:w.boolean,received:n.parsedType}),E}return ge(e.data)}}Ss.create=s=>new Ss({typeName:A.ZodBoolean,coerce:(s==null?void 0:s.coerce)||!1,...M(s)});class Tt extends ${_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==w.date){const i=this._getOrReturnCtx(e);return v(i,{code:p.invalid_type,expected:w.date,received:i.parsedType}),E}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return v(i,{code:p.invalid_date}),E}const n=new me;let a;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(a=this._getOrReturnCtx(e,a),v(a,{code:p.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(a=this._getOrReturnCtx(e,a),v(a,{code:p.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):F.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Tt({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:j.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:j.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Tt.create=s=>new Tt({checks:[],coerce:(s==null?void 0:s.coerce)||!1,typeName:A.ZodDate,...M(s)});class ks extends ${_parse(e){if(this._getType(e)!==w.symbol){const n=this._getOrReturnCtx(e);return v(n,{code:p.invalid_type,expected:w.symbol,received:n.parsedType}),E}return ge(e.data)}}ks.create=s=>new ks({typeName:A.ZodSymbol,...M(s)});class Cs extends ${_parse(e){if(this._getType(e)!==w.undefined){const n=this._getOrReturnCtx(e);return v(n,{code:p.invalid_type,expected:w.undefined,received:n.parsedType}),E}return ge(e.data)}}Cs.create=s=>new Cs({typeName:A.ZodUndefined,...M(s)});class Is extends ${_parse(e){if(this._getType(e)!==w.null){const n=this._getOrReturnCtx(e);return v(n,{code:p.invalid_type,expected:w.null,received:n.parsedType}),E}return ge(e.data)}}Is.create=s=>new Is({typeName:A.ZodNull,...M(s)});class Ts extends ${constructor(){super(...arguments),this._any=!0}_parse(e){return ge(e.data)}}Ts.create=s=>new Ts({typeName:A.ZodAny,...M(s)});class Es extends ${constructor(){super(...arguments),this._unknown=!0}_parse(e){return ge(e.data)}}Es.create=s=>new Es({typeName:A.ZodUnknown,...M(s)});class Le extends ${_parse(e){const t=this._getOrReturnCtx(e);return v(t,{code:p.invalid_type,expected:w.never,received:t.parsedType}),E}}Le.create=s=>new Le({typeName:A.ZodNever,...M(s)});class As extends ${_parse(e){if(this._getType(e)!==w.undefined){const n=this._getOrReturnCtx(e);return v(n,{code:p.invalid_type,expected:w.void,received:n.parsedType}),E}return ge(e.data)}}As.create=s=>new As({typeName:A.ZodVoid,...M(s)});class Ne extends ${_parse(e){const{ctx:t,status:n}=this._processInputParams(e),a=this._def;if(t.parsedType!==w.array)return v(t,{code:p.invalid_type,expected:w.array,received:t.parsedType}),E;if(a.exactLength!==null){const o=t.data.length>a.exactLength.value,l=t.data.length<a.exactLength.value;(o||l)&&(v(t,{code:o?p.too_big:p.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&t.data.length<a.minLength.value&&(v(t,{code:p.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&t.data.length>a.maxLength.value&&(v(t,{code:p.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((o,l)=>a.type._parseAsync(new Pe(t,o,t.path,l)))).then(o=>me.mergeArray(n,o));const i=[...t.data].map((o,l)=>a.type._parseSync(new Pe(t,o,t.path,l)));return me.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new Ne({...this._def,minLength:{value:e,message:j.toString(t)}})}max(e,t){return new Ne({...this._def,maxLength:{value:e,message:j.toString(t)}})}length(e,t){return new Ne({...this._def,exactLength:{value:e,message:j.toString(t)}})}nonempty(e){return this.min(1,e)}}Ne.create=(s,e)=>new Ne({type:s,minLength:null,maxLength:null,exactLength:null,typeName:A.ZodArray,...M(e)});function Ye(s){if(s instanceof q){const e={};for(const t in s.shape){const n=s.shape[t];e[t]=Me.create(Ye(n))}return new q({...s._def,shape:()=>e})}else return s instanceof Ne?new Ne({...s._def,type:Ye(s.element)}):s instanceof Me?Me.create(Ye(s.unwrap())):s instanceof et?et.create(Ye(s.unwrap())):s instanceof Ze?Ze.create(s.items.map(e=>Ye(e))):s}class q extends ${constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=F.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==w.object){const d=this._getOrReturnCtx(e);return v(d,{code:p.invalid_type,expected:w.object,received:d.parsedType}),E}const{status:n,ctx:a}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Le&&this._def.unknownKeys==="strip"))for(const d in a.data)o.includes(d)||l.push(d);const u=[];for(const d of o){const f=i[d],c=a.data[d];u.push({key:{status:"valid",value:d},value:f._parse(new Pe(a,c,a.path,d)),alwaysSet:d in a.data})}if(this._def.catchall instanceof Le){const d=this._def.unknownKeys;if(d==="passthrough")for(const f of l)u.push({key:{status:"valid",value:f},value:{status:"valid",value:a.data[f]}});else if(d==="strict")l.length>0&&(v(a,{code:p.unrecognized_keys,keys:l}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const f of l){const c=a.data[f];u.push({key:{status:"valid",value:f},value:d._parse(new Pe(a,c,a.path,f)),alwaysSet:f in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const d=[];for(const f of u){const c=await f.key,m=await f.value;d.push({key:c,value:m,alwaysSet:f.alwaysSet})}return d}).then(d=>me.mergeObjectSync(n,d)):me.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return j.errToObj,new q({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var i,o;const a=((o=(i=this._def).errorMap)==null?void 0:o.call(i,t,n).message)??n.defaultError;return t.code==="unrecognized_keys"?{message:j.errToObj(e).message??a}:{message:a}}}:{}})}strip(){return new q({...this._def,unknownKeys:"strip"})}passthrough(){return new q({...this._def,unknownKeys:"passthrough"})}extend(e){return new q({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new q({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:A.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new q({...this._def,catchall:e})}pick(e){const t={};for(const n of F.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new q({...this._def,shape:()=>t})}omit(e){const t={};for(const n of F.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new q({...this._def,shape:()=>t})}deepPartial(){return Ye(this)}partial(e){const t={};for(const n of F.objectKeys(this.shape)){const a=this.shape[n];e&&!e[n]?t[n]=a:t[n]=a.optional()}return new q({...this._def,shape:()=>t})}required(e){const t={};for(const n of F.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Me;)i=i._def.innerType;t[n]=i}return new q({...this._def,shape:()=>t})}keyof(){return Js(F.objectKeys(this.shape))}}q.create=(s,e)=>new q({shape:()=>s,unknownKeys:"strip",catchall:Le.create(),typeName:A.ZodObject,...M(e)});q.strictCreate=(s,e)=>new q({shape:()=>s,unknownKeys:"strict",catchall:Le.create(),typeName:A.ZodObject,...M(e)});q.lazycreate=(s,e)=>new q({shape:s,unknownKeys:"strip",catchall:Le.create(),typeName:A.ZodObject,...M(e)});class Et extends ${_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function a(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return t.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new ke(l.ctx.common.issues));return v(t,{code:p.invalid_union,unionErrors:o}),E}if(t.common.async)return Promise.all(n.map(async i=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const u of n){const d={...t,common:{...t.common,issues:[]},parent:null},f=u._parseSync({data:t.data,path:t.path,parent:d});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(u=>new ke(u));return v(t,{code:p.invalid_union,unionErrors:l}),E}}get options(){return this._def.options}}Et.create=(s,e)=>new Et({options:s,typeName:A.ZodUnion,...M(e)});function Gt(s,e){const t=Oe(s),n=Oe(e);if(s===e)return{valid:!0,data:s};if(t===w.object&&n===w.object){const a=F.objectKeys(e),i=F.objectKeys(s).filter(l=>a.indexOf(l)!==-1),o={...s,...e};for(const l of i){const u=Gt(s[l],e[l]);if(!u.valid)return{valid:!1};o[l]=u.data}return{valid:!0,data:o}}else if(t===w.array&&n===w.array){if(s.length!==e.length)return{valid:!1};const a=[];for(let i=0;i<s.length;i++){const o=s[i],l=e[i],u=Gt(o,l);if(!u.valid)return{valid:!1};a.push(u.data)}return{valid:!0,data:a}}else return t===w.date&&n===w.date&&+s==+e?{valid:!0,data:s}:{valid:!1}}class At extends ${_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=(i,o)=>{if(js(i)||js(o))return E;const l=Gt(i.value,o.value);return l.valid?((_s(i)||_s(o))&&t.dirty(),{status:t.value,value:l.data}):(v(n,{code:p.invalid_intersection_types}),E)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}At.create=(s,e,t)=>new At({left:s,right:e,typeName:A.ZodIntersection,...M(t)});class Ze extends ${_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==w.array)return v(n,{code:p.invalid_type,expected:w.array,received:n.parsedType}),E;if(n.data.length<this._def.items.length)return v(n,{code:p.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),E;!this._def.rest&&n.data.length>this._def.items.length&&(v(n,{code:p.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...n.data].map((o,l)=>{const u=this._def.items[l]||this._def.rest;return u?u._parse(new Pe(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>me.mergeArray(t,o)):me.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new Ze({...this._def,rest:e})}}Ze.create=(s,e)=>{if(!Array.isArray(s))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ze({items:s,typeName:A.ZodTuple,rest:null,...M(e)})};class Rs extends ${get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==w.map)return v(n,{code:p.invalid_type,expected:w.map,received:n.parsedType}),E;const a=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([l,u],d)=>({key:a._parse(new Pe(n,l,n.path,[d,"key"])),value:i._parse(new Pe(n,u,n.path,[d,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const u of o){const d=await u.key,f=await u.value;if(d.status==="aborted"||f.status==="aborted")return E;(d.status==="dirty"||f.status==="dirty")&&t.dirty(),l.set(d.value,f.value)}return{status:t.value,value:l}})}else{const l=new Map;for(const u of o){const d=u.key,f=u.value;if(d.status==="aborted"||f.status==="aborted")return E;(d.status==="dirty"||f.status==="dirty")&&t.dirty(),l.set(d.value,f.value)}return{status:t.value,value:l}}}}Rs.create=(s,e,t)=>new Rs({valueType:e,keyType:s,typeName:A.ZodMap,...M(t)});class ft extends ${_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==w.set)return v(n,{code:p.invalid_type,expected:w.set,received:n.parsedType}),E;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(v(n,{code:p.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(v(n,{code:p.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const i=this._def.valueType;function o(u){const d=new Set;for(const f of u){if(f.status==="aborted")return E;f.status==="dirty"&&t.dirty(),d.add(f.value)}return{status:t.value,value:d}}const l=[...n.data.values()].map((u,d)=>i._parse(new Pe(n,u,n.path,d)));return n.common.async?Promise.all(l).then(u=>o(u)):o(l)}min(e,t){return new ft({...this._def,minSize:{value:e,message:j.toString(t)}})}max(e,t){return new ft({...this._def,maxSize:{value:e,message:j.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ft.create=(s,e)=>new ft({valueType:s,minSize:null,maxSize:null,typeName:A.ZodSet,...M(e)});class Os extends ${get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Os.create=(s,e)=>new Os({getter:s,typeName:A.ZodLazy,...M(e)});class Ds extends ${_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return v(t,{received:t.data,code:p.invalid_literal,expected:this._def.value}),E}return{status:"valid",value:e.data}}get value(){return this._def.value}}Ds.create=(s,e)=>new Ds({value:s,typeName:A.ZodLiteral,...M(e)});function Js(s,e){return new Je({values:s,typeName:A.ZodEnum,...M(e)})}class Je extends ${_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return v(t,{expected:F.joinValues(n),received:t.parsedType,code:p.invalid_type}),E}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return v(t,{received:t.data,code:p.invalid_enum_value,options:n}),E}return ge(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Je.create(e,{...this._def,...t})}exclude(e,t=this._def){return Je.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}Je.create=Js;class Ms extends ${_parse(e){const t=F.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==w.string&&n.parsedType!==w.number){const a=F.objectValues(t);return v(n,{expected:F.joinValues(a),received:n.parsedType,code:p.invalid_type}),E}if(this._cache||(this._cache=new Set(F.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const a=F.objectValues(t);return v(n,{received:n.data,code:p.invalid_enum_value,options:a}),E}return ge(e.data)}get enum(){return this._def.values}}Ms.create=(s,e)=>new Ms({values:s,typeName:A.ZodNativeEnum,...M(e)});class Rt extends ${unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==w.promise&&t.common.async===!1)return v(t,{code:p.invalid_type,expected:w.promise,received:t.parsedType}),E;const n=t.parsedType===w.promise?t.data:Promise.resolve(t.data);return ge(n.then(a=>this._def.type.parseAsync(a,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Rt.create=(s,e)=>new Rt({type:s,typeName:A.ZodPromise,...M(e)});class Xe extends ${innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===A.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=this._def.effect||null,i={addIssue:o=>{v(n,o),o.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async l=>{if(t.value==="aborted")return E;const u=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return u.status==="aborted"?E:u.status==="dirty"||t.value==="dirty"?lt(u.value):u});{if(t.value==="aborted")return E;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?E:l.status==="dirty"||t.value==="dirty"?lt(l.value):l}}if(a.type==="refinement"){const o=l=>{const u=a.refinement(l,i);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?E:(l.status==="dirty"&&t.dirty(),o(l.value),{status:t.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?E:(l.status==="dirty"&&t.dirty(),o(l.value).then(()=>({status:t.value,value:l.value}))))}if(a.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Qe(o))return E;const l=a.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Qe(o)?Promise.resolve(a.transform(o.value,i)).then(l=>({status:t.value,value:l})):E);F.assertNever(a)}}Xe.create=(s,e,t)=>new Xe({schema:s,typeName:A.ZodEffects,effect:e,...M(t)});Xe.createWithPreprocess=(s,e,t)=>new Xe({schema:e,effect:{type:"preprocess",transform:s},typeName:A.ZodEffects,...M(t)});class Me extends ${_parse(e){return this._getType(e)===w.undefined?ge(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Me.create=(s,e)=>new Me({innerType:s,typeName:A.ZodOptional,...M(e)});class et extends ${_parse(e){return this._getType(e)===w.null?ge(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}et.create=(s,e)=>new et({innerType:s,typeName:A.ZodNullable,...M(e)});class Kt extends ${_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===w.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Kt.create=(s,e)=>new Kt({innerType:s,typeName:A.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...M(e)});class Yt extends ${_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return It(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ke(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ke(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Yt.create=(s,e)=>new Yt({innerType:s,typeName:A.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...M(e)});class Ps extends ${_parse(e){if(this._getType(e)!==w.nan){const n=this._getOrReturnCtx(e);return v(n,{code:p.invalid_type,expected:w.nan,received:n.parsedType}),E}return{status:"valid",value:e.data}}}Ps.create=s=>new Ps({typeName:A.ZodNaN,...M(s)});class dr extends ${_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class ns extends ${_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?E:i.status==="dirty"?(t.dirty(),lt(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?E:a.status==="dirty"?(t.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(e,t){return new ns({in:e,out:t,typeName:A.ZodPipeline})}}class Qt extends ${_parse(e){const t=this._def.innerType._parse(e),n=a=>(Qe(a)&&(a.value=Object.freeze(a.value)),a);return It(t)?t.then(a=>n(a)):n(t)}unwrap(){return this._def.innerType}}Qt.create=(s,e)=>new Qt({innerType:s,typeName:A.ZodReadonly,...M(e)});var A;(function(s){s.ZodString="ZodString",s.ZodNumber="ZodNumber",s.ZodNaN="ZodNaN",s.ZodBigInt="ZodBigInt",s.ZodBoolean="ZodBoolean",s.ZodDate="ZodDate",s.ZodSymbol="ZodSymbol",s.ZodUndefined="ZodUndefined",s.ZodNull="ZodNull",s.ZodAny="ZodAny",s.ZodUnknown="ZodUnknown",s.ZodNever="ZodNever",s.ZodVoid="ZodVoid",s.ZodArray="ZodArray",s.ZodObject="ZodObject",s.ZodUnion="ZodUnion",s.ZodDiscriminatedUnion="ZodDiscriminatedUnion",s.ZodIntersection="ZodIntersection",s.ZodTuple="ZodTuple",s.ZodRecord="ZodRecord",s.ZodMap="ZodMap",s.ZodSet="ZodSet",s.ZodFunction="ZodFunction",s.ZodLazy="ZodLazy",s.ZodLiteral="ZodLiteral",s.ZodEnum="ZodEnum",s.ZodEffects="ZodEffects",s.ZodNativeEnum="ZodNativeEnum",s.ZodOptional="ZodOptional",s.ZodNullable="ZodNullable",s.ZodDefault="ZodDefault",s.ZodCatch="ZodCatch",s.ZodPromise="ZodPromise",s.ZodBranded="ZodBranded",s.ZodPipeline="ZodPipeline",s.ZodReadonly="ZodReadonly"})(A||(A={}));const jt=De.create;Le.create;Ne.create;const ur=q.create;Et.create;At.create;Ze.create;Je.create;Rt.create;Me.create;et.create;const fr=ur({name:jt().min(1,"网站名不能为空"),url:jt().url("请输入有效的网址"),favicon:jt().url("请输入有效的图标URL"),note:jt().optional()});function Xs({id:s,name:e,url:t,favicon:n,tags:a,note:i,onClose:o,onSave:l,onDelete:u}){const[d,f]=h.useState({name:e,url:t,favicon:n,note:i||""}),[c,m]=h.useState({}),[_,b]=h.useState(!1),S=I=>{const k=/\{([^}]+)\}/g;return(I.match(k)||[]).map(V=>V.replace(/\{|\}/g,"").trim())},N=I=>I.replace(/\{[^}]+\}/g,"").trim(),Z=async()=>{if(!d.url||!d.url.startsWith("http")){m({url:"请输入有效的网址(以http://或https://开头)"});return}try{b(!0);const I=new URL(d.url).hostname;f(k=>({...k,favicon:`https://www.google.com/s2/favicons?domain=${d.url}`})),f(k=>({...k,name:I.replace("www.","").split(".")[0]})),m(k=>{const R={...k};return delete R.url,R})}catch(I){console.error("自动获取信息失败:",I),m({url:"无法解析该网址，请检查格式是否正确"})}finally{b(!1)}},re=I=>{I.preventDefault();try{const k=fr.safeParse(d);if(!k.success){const L={};k.error.errors.forEach(J=>{L[J.path[0]]=J.message}),m(L);return}const R=S(d.note||""),V=N(d.note||"");l({id:s,name:d.name,url:d.url,favicon:d.favicon,tags:R,note:V}),o()}catch(k){console.error("保存失败:",k)}},C=I=>{const{name:k,value:R}=I.target;f(V=>({...V,[k]:R})),c[k]&&m(V=>{const L={...V};return delete L[k],L})};return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 select-none",children:r.jsxs(K.div,{className:"w-full max-w-md bg-white rounded-xl shadow-xl p-6 select-none",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{type:"spring",damping:25},children:[r.jsxs("div",{className:"flex justify-between items-center mb-4 select-none",children:[r.jsx("h2",{className:"text-xl font-semibold select-none",children:"编辑卡片"}),r.jsx("button",{onClick:o,className:"text-gray-500 hover:text-gray-700 select-none",children:r.jsx("i",{className:"fa-solid fa-xmark select-none"})})]}),r.jsxs("form",{onSubmit:re,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 select-none",children:"网址"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"url",name:"url",value:d.url,onChange:C,className:"flex-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com"}),r.jsx("button",{type:"button",onClick:Z,disabled:_||!d.url,className:"px-3 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-blue-300 select-none",children:_?"获取中...":"自动获取"})]}),c.url&&r.jsx("p",{className:"mt-1 text-sm text-red-500 select-none",children:c.url})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 select-none",children:"网站名"}),r.jsx("input",{type:"text",name:"name",value:d.name,onChange:C,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"网站名称"}),c.name&&r.jsx("p",{className:"mt-1 text-sm text-red-500 select-none",children:c.name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 select-none",children:"图标"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex-1",children:r.jsx("input",{type:"url",name:"favicon",value:d.favicon,onChange:C,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/favicon.ico"})}),r.jsx("span",{className:"text-gray-400 select-none",children:"或"}),r.jsxs("label",{className:"cursor-pointer select-none",children:[r.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:I=>{var R;const k=(R=I.target.files)==null?void 0:R[0];if(k){const V=new FileReader;V.onload=L=>{var J;(J=L.target)!=null&&J.result&&f(X=>{var U;return{...X,favicon:(U=L.target)==null?void 0:U.result}})},V.readAsDataURL(k)}}}),r.jsxs("div",{className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm text-gray-700 transition-colors select-none",children:[r.jsx("i",{className:"fa-solid fa-upload mr-1 select-none"}),"上传"]})]})]}),d.favicon&&r.jsxs("div",{className:"mt-2 flex items-center select-none",children:[r.jsx("img",{src:d.favicon,alt:"图标预览",className:"w-8 h-8 rounded mr-2 select-none"}),r.jsx("span",{className:"text-xs text-gray-500 truncate max-w-xs select-none",children:d.favicon.startsWith("data:image")?"上传的图标":d.favicon})]}),c.favicon&&r.jsx("p",{className:"mt-1 text-sm text-red-500 select-none",children:c.favicon})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 select-none",children:["备注 (使用","标记标签，如: 备注内容 ","工作"," ","代码",")"]}),r.jsxs("div",{className:"text-xs text-gray-500 mb-1 select-none",children:["花括号","内的内容会被识别为标签"]}),r.jsx("textarea",{name:"note",value:d.note,onChange:C,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"网站用途说明..."})]}),r.jsxs("div",{className:"flex flex-col gap-4 pt-4 select-none",children:[r.jsxs("div",{className:"flex gap-2 select-none",children:[r.jsx("button",{type:"button",onClick:o,className:"flex-1 px-4 py-2 text-gray-700 border rounded-md hover:bg-gray-50 select-none",children:"取消"}),r.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 select-none",children:"保存"})]}),u&&r.jsxs("button",{type:"button",onClick:()=>{confirm("确定要删除这个卡片吗？")&&(u(s),o())},className:"w-full px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 shadow-md select-none",children:[r.jsx("i",{className:"fa-solid fa-trash mr-2 select-none"}),"删除卡片"]})]})]})]})})}const en=h.createContext(void 0);function mr({children:s}){const[e,t]=h.useState(()=>{const l=localStorage.getItem("cardOpacity");return l?parseFloat(l):.1}),[n,a]=h.useState(()=>{const l=localStorage.getItem("searchBarOpacity");return l?parseFloat(l):.1}),[i,o]=h.useState(()=>{const l=localStorage.getItem("parallaxEnabled");return l?JSON.parse(l):!0});return h.useEffect(()=>{localStorage.setItem("cardOpacity",e.toString())},[e]),h.useEffect(()=>{localStorage.setItem("searchBarOpacity",n.toString())},[n]),h.useEffect(()=>{localStorage.setItem("parallaxEnabled",JSON.stringify(i))},[i]),r.jsx(en.Provider,{value:{cardOpacity:e,searchBarOpacity:n,parallaxEnabled:i,setCardOpacity:t,setSearchBarOpacity:a,setParallaxEnabled:o},children:s})}function mt(){const s=h.useContext(en);if(s===void 0)throw new Error("useTransparency must be used within a TransparencyProvider");return s}function hr({id:s,name:e,url:t,favicon:n,tags:a,visitCount:i,lastVisit:o,note:l,onSave:u,onDelete:d}){const[f,c]=h.useState(!1),m=h.useRef(null),{cardOpacity:_}=mt(),b=()=>{u({id:s,name:e,url:t,favicon:n,tags:a,note:l,visitCount:(i||0)+1,lastVisit:new Date().toISOString().split("T")[0]}),window.open(t,"_blank")};return r.jsxs(r.Fragment,{children:[r.jsxs(K.div,{ref:m,className:"w-32 h-32 rounded-xl cursor-pointer shadow-lg backdrop-blur-md border border-white/20 overflow-hidden relative group select-none",style:{backgroundColor:`rgba(255, 255, 255, ${_})`},whileHover:{scale:1.05},whileTap:{scale:.98},transition:{type:"spring",stiffness:300,damping:15},onClick:b,children:[r.jsx("div",{className:"absolute bottom-0.5 right-0.5 z-11",children:r.jsx("button",{onClick:S=>{S.stopPropagation(),c(!0)},className:"p-1 text-white/50 hover:text-white select-none",children:r.jsx("i",{className:"fa-solid fa-gear text-xs select-none"})})}),r.jsxs("div",{className:"h-full flex flex-col pt-3",children:[r.jsxs("div",{className:"flex flex-col items-center px-2 select-none",children:[r.jsxs("div",{className:"w-11 h-11 mb-1 rounded-md overflow-hidden select-none",children:[" ",r.jsx("img",{src:n,alt:`${e} favicon`,className:"w-full h-full object-contain select-none",onError:S=>{const N=S.target;if(!N.dataset.triedGoogle)N.src=`https://www.google.com/s2/favicons?domain=${t}&sz=128`,N.dataset.triedGoogle="1";else if(N.dataset.triedYandex)if(N.dataset.triedApple)if(N.dataset.triedDuck)try{const Z=t.replace(/^(https?:\/\/)?(www\.)?/,"").split("/")[0];N.src=`https://${Z}/favicon.ico`}catch{}else{const Z=t.replace(/^(https?:\/\/)?(www\.)?/,"").split("/")[0];N.src=`https://icons.duckduckgo.com/ip3/${Z}.ico`,N.dataset.triedDuck="1"}else{const Z=t.replace(/^(https?:\/\/)?(www\.)?/,"").split("/")[0];N.src=`https://${Z}/apple-touch-icon.png`,N.dataset.triedApple="1"}else{const Z=t.replace(/^(https?:\/\/)?(www\.)?/,"").split("/")[0];N.src=`https://favicon.yandex.net/favicon/v2/${Z}?size=120`,N.dataset.triedYandex="1"}}})]}),r.jsx("h3",{className:"text-xs font-medium text-white text-center line-clamp-2 px-2 mt-1 select-none",children:e})," "]}),r.jsx("div",{className:"px-2 mb-1 select-none",children:r.jsx("p",{className:"text-white/60 text-[0.65rem] text-center line-clamp-2 select-none",children:l||new URL(t).hostname})}),r.jsx("div",{className:"mt-0 px-3 pb-2 select-none",children:r.jsx("div",{className:"flex flex-wrap gap-1 justify-center select-none",children:a.slice(0,6).map(S=>r.jsx("span",{className:"px-1.5 py-0.5 bg-white/20 rounded-full text-[0.65rem] text-white max-w-[60px] truncate select-none",children:S},S))})})]})]}),f&&r.jsx(Xs,{id:s,name:e,url:t,favicon:n,tags:a,note:l,onClose:()=>c(!1),onSave:S=>{u(S),c(!1)},onDelete:d})]})}function pr(s={}){var Ie,z;const[e,t]=h.useState(""),[n,a]=h.useState(!1),[i,o]=h.useState("bing"),[l,u]=h.useState(!1),[d,f]=h.useState([]),[c,m]=h.useState(!1),[_,b]=h.useState(-1),S=h.useRef(null),[N,Z]=h.useState(null),[re,C]=h.useState(null),[I,k]=h.useState(!1),R=h.useRef(null),{searchBarOpacity:V}=mt(),L=[{key:"bing",label:"Bing",icon:r.jsx("i",{className:"fa-brands fa-microsoft text-blue-400"})},{key:"google",label:"Google",icon:r.jsx("i",{className:"fa-brands fa-google text-blue-500"})}],J=(x,y)=>{const T=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FECA57","#FF9FF3","#54A0FF","#5F27CD","#00D2D3","#FF9F43","#EE5A24","#FD79A8","#0FB9B1","#A55EEA","#26D0CE","#FDCB6E","#6C5CE7","#74B9FF","#E17055","#F39C12","#E74C3C","#3498DB","#9B59B6","#1ABC9C"],W=["M2,5 Q12,2 22,5 Q32,8 42,5 L42,8 Q32,11 22,8 Q12,5 2,8 Z","M20,2 L38,2 L29,12 Z","M20,7 A6,6 0,1,1 20,7.1 Z","M20,2 L30,7 L20,12 L10,7 Z","M20,2 L22,8 L28,8 L23,11 L25,17 L20,14 L15,17 L17,11 L12,8 L18,8 Z","M2,6 Q15,2 28,6 Q41,10 54,6 L54,9 Q41,13 28,9 Q15,5 2,9 Z","M5,5 L10,2 L15,5 L20,2 L25,5 L30,2 L35,5 L35,8 L30,11 L25,8 L20,11 L15,8 L10,11 L5,8 Z","M20,2 Q25,7 20,12 Q15,7 20,2 M20,2 Q25,7 30,2 Q25,7 30,12 Q25,7 20,12","M20,4 C18,2 15,2 15,5 C15,8 20,12 20,12 C20,12 25,8 25,5 C25,2 22,2 20,4 Z","M15,4 Q10,7 15,10 Q20,7 25,10 Q30,7 25,4 Q20,7 15,4","M5,4 Q20,2 35,4 Q40,7 35,10 Q20,8 5,10 Q0,7 5,4","M2,7 Q10,3 18,7 Q26,11 34,7 Q38,5 42,7 L42,10 Q38,8 34,10 Q26,14 18,10 Q10,6 2,10 Z"];for(let H=0;H<50;H++){const B=document.createElementNS("http://www.w3.org/2000/svg","svg"),G=document.createElementNS("http://www.w3.org/2000/svg","path"),de=T[Math.floor(Math.random()*T.length)],nt=W[Math.floor(Math.random()*W.length)],at=Math.random()*.6+.5,rt=44*at,$e=16*at;if(B.setAttribute("width",rt.toString()),B.setAttribute("height",$e.toString()),B.setAttribute("viewBox","0 0 44 16"),B.style.cssText=`
        position: fixed;
        pointer-events: none;
        z-index: 10000;
        left: ${x-rt/2}px;
        top: ${y-$e/2}px;
        transform-origin: center;
      `,G.setAttribute("d",nt),G.setAttribute("fill",de),Math.random()>.5&&(G.setAttribute("stroke",de),G.setAttribute("stroke-width","1"),G.setAttribute("fill-opacity","0.8")),Math.random()>.7){const qe=`gradient-${Date.now()}-${H}`,Ae=document.createElementNS("http://www.w3.org/2000/svg","defs"),he=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),je=document.createElementNS("http://www.w3.org/2000/svg","stop"),Ge=document.createElementNS("http://www.w3.org/2000/svg","stop");he.setAttribute("id",qe),he.setAttribute("x1","0%"),he.setAttribute("y1","0%"),he.setAttribute("x2","100%"),he.setAttribute("y2","100%"),je.setAttribute("offset","0%"),je.setAttribute("stop-color",de),Ge.setAttribute("offset","100%"),Ge.setAttribute("stop-color",T[Math.floor(Math.random()*T.length)]),he.appendChild(je),he.appendChild(Ge),Ae.appendChild(he),B.appendChild(Ae),G.setAttribute("fill",`url(#${qe})`)}B.appendChild(G),document.body.appendChild(B);const ht=Math.random()*360*(Math.PI/180),it=Math.random()*4+2;let Te=Math.cos(ht)*it,He=Math.sin(ht)*it;const ye=(Math.random()-.5)*80;let pt=Math.random()*360,gt=x-rt/2,ee=y-$e/2;const Ee=.2,xt=.998,$t=Date.now(),Be=()=>{const qe=(Date.now()-$t)/1e3;He+=Ee,Te*=xt,He*=xt,gt+=Te,ee+=He,pt+=ye*(1/60),B.style.left=gt+"px",B.style.top=ee+"px",B.style.transform=`rotate(${pt}deg)`;const Ae=Math.max(0,1-qe/7);B.style.opacity=Ae.toString(),Ae>0&&ee<window.innerHeight+100?requestAnimationFrame(Be):document.body.contains(B)&&document.body.removeChild(B)};setTimeout(()=>{requestAnimationFrame(Be)},Math.random()*150)}},X=()=>{const x=L.findIndex(T=>T.key===i),y=L[(x+1)%L.length].key;if(o(y),R.current){const T=R.current.getBoundingClientRect(),W=T.left+60,D=T.top+T.height/2;J(W,D)}},U=["chatGPT","Gemini","Deepseek","Kimi"],ce=["https://chatgpt.com/","https://gemini.google.com/","https://chat.deepseek.com/","https://www.kimi.com/"],we=[r.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,verticalAlign:"middle",position:"relative",top:"1px",userSelect:"none"},children:r.jsx("img",{src:"/jiang_ai_web/icon/chatgpt.svg",alt:"chatGPT",style:{width:20,height:20,display:"block",userSelect:"none"}})}),r.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,verticalAlign:"middle",position:"relative",top:"1px",userSelect:"none"},children:r.jsx("img",{src:"/jiang_ai_web/icon/gemini.svg",alt:"Gemini",style:{width:20,height:20,display:"block",userSelect:"none"}})}),r.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,verticalAlign:"middle",position:"relative",top:"1px",userSelect:"none"},children:r.jsx("img",{src:"/jiang_ai_web/icon/deepseek.svg",alt:"Deepseek",style:{width:20,height:20,display:"block",userSelect:"none"}})}),r.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,verticalAlign:"middle",position:"relative",top:"1px",userSelect:"none"},children:r.jsx("img",{src:"/jiang_ai_web/icon/kimi.svg",alt:"Kimi",style:{width:20,height:20,display:"block",userSelect:"none"}})})],Ce=(x,y)=>{switch(x){case"google":return`https://www.google.com/search?q=${encodeURIComponent(y)}`;default:return`https://www.bing.com/search?q=${encodeURIComponent(y)}`}},ae=async x=>{if(!x.trim())return[];try{const y=document.createElement("script"),T=`baiduCallback_${Date.now()}`;return new Promise(W=>{window[T]=D=>{if(D&&D.s&&Array.isArray(D.s)){const H=D.s.slice(0,5).map((B,G)=>({id:`baidu-${G}`,text:B,query:B}));W(H)}else{const H=P(x);W(H.slice(0,5).map((B,G)=>({id:`local-${G}`,text:B,query:B})))}document.head.removeChild(y),delete window[T]},setTimeout(()=>{if(window[T]){const D=P(x);W(D.slice(0,5).map((H,B)=>({id:`local-${B}`,text:H,query:H}))),document.head.contains(y)&&document.head.removeChild(y),delete window[T]}},2e3),y.src=`https://suggestion.baidu.com/su?wd=${encodeURIComponent(x)}&cb=${T}`,y.onerror=()=>{const D=P(x);W(D.slice(0,5).map((H,B)=>({id:`local-${B}`,text:H,query:H}))),document.head.contains(y)&&document.head.removeChild(y),delete window[T]},document.head.appendChild(y)})}catch(y){return console.warn("Failed to fetch Baidu suggestions:",y),P(x).slice(0,5).map((W,D)=>({id:`local-${D}`,text:W,query:W}))}},P=x=>{const y=[],T=x.toLowerCase(),W=[x,`${x} 是什么`,`${x} 怎么用`,`${x} 教程`,`如何 ${x}`,`${x} 下载`,`${x} 官网`,`${x} 价格`];return T.includes("什么")||T.includes("how")?y.push(`${x}`,`${x} 详解`,`${x} 原理`):T.includes("怎么")||T.includes("如何")?y.push(`${x}`,`${x} 步骤`,`${x} 方法`):y.push(...W),[...new Set(y)]};h.useEffect(()=>{const x=setTimeout(()=>{e.trim()?ae(e).then(y=>{f(y),m(y.length>0),b(-1)}):(f([]),m(!1),b(-1))},500);return()=>clearTimeout(x)},[e]);const ie=(x,y)=>{x.preventDefault();const T=y||(_>=0&&d[_]?d[_].query:e);T.trim()&&(window.open(Ce(i,T),"_blank"),t(""),m(!1))},xe=x=>{switch(x.key){case"ArrowDown":if(!c)return;x.preventDefault(),b(y=>y<d.length-1?y+1:y);break;case"ArrowUp":if(!c)return;x.preventDefault(),b(y=>y>-1?y-1:-1);break;case"Escape":m(!1),b(-1);break;case"Tab":x.shiftKey||(x.preventDefault(),X());break}},Y=h.useRef(null);return h.useLayoutEffect(()=>{if(l&&S.current){const x=S.current.getBoundingClientRect();Z({left:x.left+x.width/2,top:x.top})}else Z(null)},[l,i]),r.jsx("div",{className:"relative left-0 right-0 z-50 flex justify-center px-4 select-none",children:r.jsx(K.div,{className:"w-full flex justify-center",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},children:r.jsx("form",{ref:R,onSubmit:ie,className:"relative flex items-center justify-center",onMouseEnter:()=>{Y.current&&(clearTimeout(Y.current),Y.current=null),a(!0)},onMouseLeave:()=>{Y.current&&clearTimeout(Y.current),Y.current=setTimeout(()=>{a(!1),u(!1),setTimeout(()=>{m(!1)},100)},200)},children:r.jsxs(K.div,{animate:{width:n?520:340},initial:{width:340},transition:{type:"tween",duration:.28,ease:"easeInOut"},style:{display:"flex",alignItems:"center",position:"relative"},onAnimationComplete:()=>{n&&u(!0)},children:[r.jsxs("div",{className:"relative flex items-center",children:[r.jsxs("button",{type:"button",className:"flex items-center gap-2 px-1.5 py-1 text-white/80 hover:text-white bg-transparent border-none outline-none text-lg select-none relative z-20",style:{pointerEvents:"auto",height:36,minWidth:36,minHeight:36,justifyContent:"center",alignItems:"center",display:"flex"},tabIndex:-1,onClick:()=>{X()},onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1),children:[(Ie=L.find(x=>x.key===i))==null?void 0:Ie.icon,r.jsx("span",{className:"hidden sm:inline text-base font-semibold select-none",children:(z=L.find(x=>x.key===i))==null?void 0:z.label})]}),I&&r.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800/90 text-white text-sm rounded-lg shadow-lg backdrop-blur-sm border border-white/10 whitespace-nowrap z-30",children:["切换至 ",i==="bing"?"Google":"Bing",r.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-800/90"})]})]}),r.jsx("span",{className:"mx-2 text-white/30 select-none font-normal text-base z-10",children:"|"}),r.jsx("span",{className:"text-white/60 select-none font-normal text-base z-10"}),r.jsx("input",{type:"text",value:e,onChange:x=>t(x.target.value),onKeyDown:xe,placeholder:"输入内容...",className:"backdrop-blur-md border border-white/20 rounded-full pl-4 py-2 text-white placeholder-white/60 focus:outline-none focus:ring-1 focus:ring-white/30 text-base transition-all duration-200 pr-12 w-full ml-3",style:{backgroundColor:`rgba(255, 255, 255, ${V})`,minWidth:"4rem",maxWidth:"100%"}}),r.jsx("button",{ref:S,type:"submit",className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-white/70 hover:text-white transition-colors bg-transparent border-none outline-none group select-none",style:{pointerEvents:"auto"},children:r.jsx(K.i,{className:"fa-solid fa-magnifying-glass text-sm",whileHover:{scale:1.22,rotate:18,color:"#fff"},whileTap:{scale:.95,rotate:0},animate:{color:n?"#fff":void 0},transition:{type:"spring",stiffness:350,damping:18},style:{display:"inline-block"}})}),c&&d.length>0&&r.jsx(K.div,{className:"absolute top-full left-0 right-0 mt-2 backdrop-blur-md rounded-lg shadow-lg border border-white/20 z-50 overflow-hidden max-h-60 overflow-y-auto",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.2},style:{pointerEvents:"auto",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:d.map((x,y)=>r.jsx("div",{className:`px-4 py-3 cursor-pointer transition-colors border-b border-white/10 last:border-b-0 select-none ${y===_?"bg-blue-500/20 text-gray-800":"hover:bg-white/50 text-gray-700"}`,onClick:T=>{T.stopPropagation(),t(x.text),ie(T,x.query)},onMouseEnter:()=>b(y),onMouseDown:T=>T.preventDefault(),children:r.jsxs("div",{className:"flex items-center gap-3 select-none",children:[r.jsx("i",{className:"fa-solid fa-magnifying-glass text-gray-400 text-sm w-4 select-none"}),r.jsx("div",{className:"flex-1 min-w-0 select-none",children:r.jsx("div",{className:"font-medium text-sm truncate select-none",children:x.text})})]})},x.id))}),n&&l&&N&&r.jsx("div",{className:"fixed z-30",style:{left:N.left,top:N.top,width:0,height:0,pointerEvents:"auto",transform:"translate(-50%, -50%)"},children:r.jsx("div",{style:{position:"absolute",left:0,top:0},children:we.map((x,y,T)=>{const D=(-60+120/(T.length-1)*y)*(Math.PI/180),H=44,B=H*Math.cos(D),G=H*Math.sin(D),de=19,nt=de*3.6;return r.jsxs(K.span,{role:"img","aria-label":U[y],initial:{x:0,y:0,scale:.3,opacity:0,filter:"none"},animate:{x:B,y:G,scale:1.18,opacity:1,filter:"none"},whileHover:{scale:1.38,filter:"drop-shadow(0 0 4px #fff) drop-shadow(0 0 8px #fff)"},transition:{type:"spring",stiffness:400,damping:22,delay:.08*y},style:{position:"absolute",left:0,top:0,fontSize:22,cursor:"pointer",userSelect:"none",zIndex:2,willChange:"filter, transform"},onClick:()=>window.open(ce[y],"_blank"),onMouseEnter:()=>C(y),onMouseLeave:()=>C(null),children:[x,re===y&&r.jsx("div",{style:{position:"absolute",left:28,top:"50%",transform:"translateY(-50%)",height:de,width:nt,background:"rgba(255,255,255,0.98)",color:"#222",borderRadius:de/2,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 12px #0003",fontSize:14,fontWeight:500,pointerEvents:"auto",zIndex:10,padding:"0 10px",whiteSpace:"nowrap"},children:r.jsx("span",{style:{userSelect:"none"},children:U[y]})})]},y)})})})]})})})})}function gr(){const s=()=>{window.open("https://github.com/jiangjianghong","_blank")};return r.jsx("div",{className:"cat-container",children:r.jsxs("div",{className:"cat",onClick:s,style:{cursor:"pointer"},children:[r.jsx("div",{className:"paw"}),r.jsx("div",{className:"paw"}),r.jsxs("div",{className:"shake",children:[r.jsx("div",{className:"tail"}),r.jsxs("div",{className:"main",children:[r.jsx("div",{className:"head"}),r.jsx("div",{className:"body",children:r.jsx("div",{className:"leg"})}),r.jsxs("div",{className:"face",children:[r.jsxs("div",{className:"mustache_cont",children:[r.jsx("div",{className:"mustache"}),r.jsx("div",{className:"mustache"})]}),r.jsxs("div",{className:"mustache_cont",children:[r.jsx("div",{className:"mustache"}),r.jsx("div",{className:"mustache"})]}),r.jsx("div",{className:"nose"}),r.jsx("div",{className:"eye"}),r.jsx("div",{className:"eye"}),r.jsxs("div",{className:"brow_cont",children:[r.jsx("div",{className:"brow"}),r.jsx("div",{className:"brow"})]}),r.jsxs("div",{className:"brow_cont",children:[r.jsx("div",{className:"brow"}),r.jsx("div",{className:"brow"})]}),r.jsx("div",{className:"ear_l",children:r.jsx("div",{className:"inner"})}),r.jsxs("div",{className:"ear_r",children:[r.jsx("div",{className:"outer"}),r.jsx("div",{className:"inner"})]})]})]})]})]})})}function xr(s,e){const t=(o,l)=>{const u=s[o],d=[...s];d.splice(o,1),d.splice(l,0,u),e(d)},[,n]=Ln({accept:"WEBSITE_CARD",hover(o,l){if(!l.isOver({shallow:!0}))return;const u=o.index,d=s.findIndex(f=>f.id===o.id);u!==d&&(t(u,d),o.index=d)},drop:()=>({name:"WEBSITE_CARD"})}),[{isDragging:a},i]=$n({type:"WEBSITE_CARD",item:o=>{const l=s[o];return{id:(l==null?void 0:l.id)||"",index:o}},collect:o=>({isDragging:o.isDragging()})});return{drag:i,drop:n,isDragging:a}}function yr(){const[s,e]=h.useState(()=>{const n=localStorage.getItem("theme");return n||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});return h.useEffect(()=>{document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(s),localStorage.setItem("theme",s)},[s]),{theme:s,toggleTheme:()=>{e(n=>n==="light"?"dark":"light")},isDark:s==="dark"}}const tn="@firebase/installations",as="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn=1e4,nn=`w:${as}`,an="FIS_v2",vr="https://firebaseinstallations.googleapis.com/v1",br=60*60*1e3,wr="installations",jr="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ue=new qs(wr,jr,_r);function rn(s){return s instanceof Gs&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on({projectId:s}){return`${vr}/projects/${s}/installations`}function ln(s){return{token:s.token,requestStatus:2,expiresIn:Sr(s.expiresIn),creationTime:Date.now()}}async function cn(s,e){const n=(await e.json()).error;return Ue.create("request-failed",{requestName:s,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function dn({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function Nr(s,{refreshToken:e}){const t=dn(s);return t.append("Authorization",kr(e)),t}async function un(s){const e=await s();return e.status>=500&&e.status<600?s():e}function Sr(s){return Number(s.replace("s","000"))}function kr(s){return`${an} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cr({appConfig:s,heartbeatServiceProvider:e},{fid:t}){const n=on(s),a=dn(s),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&a.append("x-firebase-client",d)}const o={fid:t,authVersion:an,appId:s.appId,sdkVersion:nn},l={method:"POST",headers:a,body:JSON.stringify(o)},u=await un(()=>fetch(n,l));if(u.ok){const d=await u.json();return{fid:d.fid||t,registrationStatus:2,refreshToken:d.refreshToken,authToken:ln(d.authToken)}}else throw await cn("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(s){return new Promise(e=>{setTimeout(e,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr=/^[cdef][\w-]{21}$/,Jt="";function Er(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const t=Ar(s);return Tr.test(t)?t:Jt}catch{return Jt}}function Ar(s){return Ir(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn=new Map;function hn(s,e){const t=Pt(s);pn(t,e),Rr(t,e)}function pn(s,e){const t=mn.get(s);if(t)for(const n of t)n(e)}function Rr(s,e){const t=Or();t&&t.postMessage({key:s,fid:e}),Dr()}let ze=null;function Or(){return!ze&&"BroadcastChannel"in self&&(ze=new BroadcastChannel("[Firebase] FID Change"),ze.onmessage=s=>{pn(s.data.key,s.data.fid)}),ze}function Dr(){mn.size===0&&ze&&(ze.close(),ze=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr="firebase-installations-database",Pr=1,We="firebase-installations-store";let Vt=null;function rs(){return Vt||(Vt=Hn(Mr,Pr,{upgrade:(s,e)=>{switch(e){case 0:s.createObjectStore(We)}}})),Vt}async function Ot(s,e){const t=Pt(s),a=(await rs()).transaction(We,"readwrite"),i=a.objectStore(We),o=await i.get(t);return await i.put(e,t),await a.done,(!o||o.fid!==e.fid)&&hn(s,e.fid),e}async function gn(s){const e=Pt(s),n=(await rs()).transaction(We,"readwrite");await n.objectStore(We).delete(e),await n.done}async function Lt(s,e){const t=Pt(s),a=(await rs()).transaction(We,"readwrite"),i=a.objectStore(We),o=await i.get(t),l=e(o);return l===void 0?await i.delete(t):await i.put(l,t),await a.done,l&&(!o||o.fid!==l.fid)&&hn(s,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function is(s){let e;const t=await Lt(s.appConfig,n=>{const a=Lr(n),i=$r(s,a);return e=i.registrationPromise,i.installationEntry});return t.fid===Jt?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function Lr(s){const e=s||{fid:Er(),registrationStatus:0};return xn(e)}function $r(s,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(Ue.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=Br(s,t);return{installationEntry:t,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Fr(s)}:{installationEntry:e}}async function Br(s,e){try{const t=await Cr(s,e);return Ot(s.appConfig,t)}catch(t){throw rn(t)&&t.customData.serverCode===409?await gn(s.appConfig):await Ot(s.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function Fr(s){let e=await Ls(s.appConfig);for(;e.registrationStatus===1;)await fn(100),e=await Ls(s.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:n}=await is(s);return n||t}return e}function Ls(s){return Lt(s,e=>{if(!e)throw Ue.create("installation-not-found");return xn(e)})}function xn(s){return Vr(s)?{fid:s.fid,registrationStatus:0}:s}function Vr(s){return s.registrationStatus===1&&s.registrationTime+sn<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zr({appConfig:s,heartbeatServiceProvider:e},t){const n=Zr(s,t),a=Nr(s,t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&a.append("x-firebase-client",d)}const o={installation:{sdkVersion:nn,appId:s.appId}},l={method:"POST",headers:a,body:JSON.stringify(o)},u=await un(()=>fetch(n,l));if(u.ok){const d=await u.json();return ln(d)}else throw await cn("Generate Auth Token",u)}function Zr(s,{fid:e}){return`${on(s)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function os(s,e=!1){let t;const n=await Lt(s.appConfig,i=>{if(!yn(i))throw Ue.create("not-registered");const o=i.authToken;if(!e&&Hr(o))return i;if(o.requestStatus===1)return t=Ur(s,e),i;{if(!navigator.onLine)throw Ue.create("app-offline");const l=Gr(i);return t=Wr(s,l),l}});return t?await t:n.authToken}async function Ur(s,e){let t=await $s(s.appConfig);for(;t.authToken.requestStatus===1;)await fn(100),t=await $s(s.appConfig);const n=t.authToken;return n.requestStatus===0?os(s,e):n}function $s(s){return Lt(s,e=>{if(!yn(e))throw Ue.create("not-registered");const t=e.authToken;return Kr(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Wr(s,e){try{const t=await zr(s,e),n=Object.assign(Object.assign({},e),{authToken:t});return await Ot(s.appConfig,n),t}catch(t){if(rn(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await gn(s.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Ot(s.appConfig,n)}throw t}}function yn(s){return s!==void 0&&s.registrationStatus===2}function Hr(s){return s.requestStatus===2&&!qr(s)}function qr(s){const e=Date.now();return e<s.creationTime||s.creationTime+s.expiresIn<e+br}function Gr(s){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},s),{authToken:e})}function Kr(s){return s.requestStatus===1&&s.requestTime+sn<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yr(s){const e=s,{installationEntry:t,registrationPromise:n}=await is(e);return n?n.catch(console.error):os(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qr(s,e=!1){const t=s;return await Jr(t),(await os(t,e)).token}async function Jr(s){const{registrationPromise:e}=await is(s);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(s){if(!s||!s.options)throw zt("App Configuration");if(!s.name)throw zt("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!s.options[t])throw zt(t);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function zt(s){return Ue.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn="installations",ei="installations-internal",ti=s=>{const e=s.getProvider("app").getImmediate(),t=Xr(e),n=Mt(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},si=s=>{const e=s.getProvider("app").getImmediate(),t=Mt(e,vn).getImmediate();return{getId:()=>Yr(t),getToken:a=>Qr(t,a)}};function ni(){St(new kt(vn,ti,"PUBLIC")),St(new kt(ei,si,"PRIVATE"))}ni();Nt(tn,as);Nt(tn,as,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt="analytics",ai="firebase_id",ri="origin",ii=60*1e3,oi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ls="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le=new qn("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},fe=new qs("analytics","Analytics",li);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(s){if(!s.startsWith(ls)){const e=fe.create("invalid-gtag-resource",{gtagURL:s});return le.warn(e.message),""}return s}function bn(s){return Promise.all(s.map(e=>e.catch(t=>t)))}function di(s,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(s,e)),t}function ui(s,e){const t=di("firebase-js-sdk-policy",{createScriptURL:ci}),n=document.createElement("script"),a=`${ls}?l=${s}&id=${e}`;n.src=t?t==null?void 0:t.createScriptURL(a):a,n.async=!0,document.head.appendChild(n)}function fi(s){let e=[];return Array.isArray(window[s])?e=window[s]:window[s]=e,e}async function mi(s,e,t,n,a,i){const o=n[a];try{if(o)await e[o];else{const u=(await bn(t)).find(d=>d.measurementId===a);u&&await e[u.appId]}}catch(l){le.error(l)}s("config",a,i)}async function hi(s,e,t,n,a){try{let i=[];if(a&&a.send_to){let o=a.send_to;Array.isArray(o)||(o=[o]);const l=await bn(t);for(const u of o){const d=l.find(c=>c.measurementId===u),f=d&&e[d.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),s("event",n,a||{})}catch(i){le.error(i)}}function pi(s,e,t,n){async function a(i,...o){try{if(i==="event"){const[l,u]=o;await hi(s,e,t,l,u)}else if(i==="config"){const[l,u]=o;await mi(s,e,t,n,l,u)}else if(i==="consent"){const[l,u]=o;s("consent",l,u)}else if(i==="get"){const[l,u,d]=o;s("get",l,u,d)}else if(i==="set"){const[l]=o;s("set",l)}else s(i,...o)}catch(l){le.error(l)}}return a}function gi(s,e,t,n,a){let i=function(...o){window[n].push(arguments)};return window[a]&&typeof window[a]=="function"&&(i=window[a]),window[a]=pi(i,s,e,t),{gtagCore:i,wrappedGtag:window[a]}}function xi(s){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(ls)&&t.src.includes(s))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=30,vi=1e3;class bi{constructor(e={},t=vi){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const wn=new bi;function wi(s){return new Headers({Accept:"application/json","x-goog-api-key":s})}async function ji(s){var e;const{appId:t,apiKey:n}=s,a={method:"GET",headers:wi(n)},i=oi.replace("{app-id}",t),o=await fetch(i,a);if(o.status!==200&&o.status!==304){let l="";try{const u=await o.json();!((e=u.error)===null||e===void 0)&&e.message&&(l=u.error.message)}catch{}throw fe.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function _i(s,e=wn,t){const{appId:n,apiKey:a,measurementId:i}=s.options;if(!n)throw fe.create("no-app-id");if(!a){if(i)return{measurementId:i,appId:n};throw fe.create("no-api-key")}const o=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new ki;return setTimeout(async()=>{l.abort()},ii),jn({appId:n,apiKey:a,measurementId:i},o,l,e)}async function jn(s,{throttleEndTimeMillis:e,backoffCount:t},n,a=wn){var i;const{appId:o,measurementId:l}=s;try{await Ni(n,e)}catch(u){if(l)return le.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:l};throw u}try{const u=await ji(s);return a.deleteThrottleMetadata(o),u}catch(u){const d=u;if(!Si(d)){if(a.deleteThrottleMetadata(o),l)return le.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:l};throw u}const f=Number((i=d==null?void 0:d.customData)===null||i===void 0?void 0:i.httpStatus)===503?gs(t,a.intervalMillis,yi):gs(t,a.intervalMillis),c={throttleEndTimeMillis:Date.now()+f,backoffCount:t+1};return a.setThrottleMetadata(o,c),le.debug(`Calling attemptFetch again in ${f} millis`),jn(s,c,n,a)}}function Ni(s,e){return new Promise((t,n)=>{const a=Math.max(e-Date.now(),0),i=setTimeout(t,a);s.addEventListener(()=>{clearTimeout(i),n(fe.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Si(s){if(!(s instanceof Gs)||!s.customData)return!1;const e=Number(s.customData.httpStatus);return e===429||e===500||e===503||e===504}class ki{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Ci(s,e,t,n,a){if(a&&a.global){s("event",t,n);return}else{const i=await e,o=Object.assign(Object.assign({},n),{send_to:i});s("event",t,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ii(){if(Kn())try{await Yn()}catch(s){return le.warn(fe.create("indexeddb-unavailable",{errorInfo:s==null?void 0:s.toString()}).message),!1}else return le.warn(fe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Ti(s,e,t,n,a,i,o){var l;const u=_i(s);u.then(_=>{t[_.measurementId]=_.appId,s.options.measurementId&&_.measurementId!==s.options.measurementId&&le.warn(`The measurement ID in the local Firebase config (${s.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>le.error(_)),e.push(u);const d=Ii().then(_=>{if(_)return n.getId()}),[f,c]=await Promise.all([u,d]);xi(i)||ui(i,f.measurementId),a("js",new Date);const m=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return m[ri]="firebase",m.update=!0,c!=null&&(m[ai]=c),a("config",f.measurementId,m),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this.app=e}_delete(){return delete ct[this.app.options.appId],Promise.resolve()}}let ct={},Bs=[];const Fs={};let Zt="dataLayer",Ai="gtag",Vs,_n,zs=!1;function Ri(){const s=[];if(Gn()&&s.push("This is a browser extension environment."),Xn()||s.push("Cookies are not available."),s.length>0){const e=s.map((n,a)=>`(${a+1}) ${n}`).join(" "),t=fe.create("invalid-analytics-context",{errorInfo:e});le.warn(t.message)}}function Oi(s,e,t){Ri();const n=s.options.appId;if(!n)throw fe.create("no-app-id");if(!s.options.apiKey)if(s.options.measurementId)le.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${s.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw fe.create("no-api-key");if(ct[n]!=null)throw fe.create("already-exists",{id:n});if(!zs){fi(Zt);const{wrappedGtag:i,gtagCore:o}=gi(ct,Bs,Fs,Zt,Ai);_n=i,Vs=o,zs=!0}return ct[n]=Ti(s,Bs,Fs,e,Vs,Zt,t),new Ei(s)}function Di(s=Qn()){s=Ks(s);const e=Mt(s,Dt);return e.isInitialized()?e.getImmediate():Mi(s)}function Mi(s,e={}){const t=Mt(s,Dt);if(t.isInitialized()){const a=t.getImmediate();if(Jn(e,t.getOptions()))return a;throw fe.create("already-initialized")}return t.initialize({options:e})}function Pi(s,e,t,n){s=Ks(s),Ci(_n,ct[s.app.options.appId],e,t,n).catch(a=>le.error(a))}const Zs="@firebase/analytics",Us="0.10.17";function Li(){St(new kt(Dt,(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return Oi(n,a,t)},"PUBLIC")),St(new kt("analytics-internal",s,"PRIVATE")),Nt(Zs,Us),Nt(Zs,Us,"esm2017");function s(e){try{const t=e.getProvider(Dt).getImmediate();return{logEvent:(n,a,i)=>Pi(t,n,a,i)}}catch(t){throw fe.create("interop-component-reg-failed",{reason:t})}}}Li();const $i={apiKey:"AIzaSyAgRdBtg_I5NMAC5x3gh-7_CvQ058n25go",authDomain:"jiang-ai-web.firebaseapp.com",projectId:"jiang-ai-web",storageBucket:"jiang-ai-web.firebasestorage.app",messagingSenderId:"923755523160",appId:"1:923755523160:web:043dca5d76b6ded7ecee2d",measurementId:"G-8FXGZWC0M4"},cs=ea($i),ot=ta(cs),st=sa(cs);typeof window<"u"&&Di(cs);const Nn=h.createContext(void 0);function Se(){const s=h.useContext(Nn);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s}function Bi({children:s}){const[e,t]=h.useState(null),[n,a]=h.useState(!0),i=async(m,_)=>{await ca(ot,m,_)},o=async(m,_)=>{const b=await la(ot,m,_);b.user&&await xs(b.user)},l=async()=>{e&&!e.emailVerified&&await xs(e)},u=async()=>{e&&await aa(e)},d=async()=>{const m=new ia;await oa(ot,m)},f=async()=>{await ra(ot)};h.useEffect(()=>na(ot,_=>{t(_),a(!1)}),[]);const c={currentUser:e,login:i,register:o,loginWithGoogle:d,logout:f,sendVerificationEmail:l,reloadUser:u,loading:n};return r.jsx(Nn.Provider,{value:c,children:!n&&s})}const Fi=async(s,e,t)=>{var n,a;try{(n=t==null?void 0:t.onSyncStart)==null||n.call(t);const i=tt(st,"userSettings",s.uid);return await ss(i,{...e,lastSync:Ct()},{merge:!0}),console.log("用户设置已同步到云端"),(a=t==null?void 0:t.onSyncSuccess)==null||a.call(t,"设置已同步到云端"),!0}catch(i){return console.error("保存用户设置失败:",i),!1}},Vi=async s=>{try{const e=tt(st,"userSettings",s.uid),t=await ts(e);if(t.exists()){const n=t.data();return console.log("从云端获取用户设置成功"),n}else return console.log("用户设置不存在，将使用默认设置"),null}catch(e){return console.error("获取用户设置失败:",e),null}},Xt=async(s,e,t)=>{var n,a;try{(n=t==null?void 0:t.onSyncStart)==null||n.call(t);const i=tt(st,"userWebsites",s.uid);return await ss(i,{websites:e,lastSync:Ct()}),console.log("网站数据已同步到云端"),(a=t==null?void 0:t.onSyncSuccess)==null||a.call(t,"网站数据已同步到云端"),!0}catch(i){return console.error("保存网站数据失败:",i),!1}},zi=async s=>{try{const e=tt(st,"userWebsites",s.uid),t=await ts(e);if(t.exists()){const n=t.data();return console.log("从云端获取网站数据成功"),n.websites}else return console.log("用户网站数据不存在"),null}catch(e){return console.error("获取网站数据失败:",e),null}},Zi=(s,e)=>{const t={};return s.forEach(n=>{t[n.id]=n}),e.forEach(n=>{const a=t[n.id];(!a||n.visitCount>a.visitCount)&&(t[n.id]=n)}),Object.values(t)};let Ut=null;const Ui=(s,e,t,n)=>{Ut&&clearTimeout(Ut),Ut=setTimeout(async()=>{var a,i,o,l;(a=n==null?void 0:n.onSyncStart)==null||a.call(n);try{const d=(await Promise.allSettled([Xt(s,e),Fi(s,t)])).filter(f=>f.status==="rejected");d.length===0?(i=n==null?void 0:n.onSyncSuccess)==null||i.call(n,"数据已静默同步到云端"):(o=n==null?void 0:n.onSyncError)==null||o.call(n,`${d.length} 个数据同步失败`)}catch(u){(l=n==null?void 0:n.onSyncError)==null||l.call(n,"同步过程中发生错误: "+u.message)}},3e3)},Ws=async(s,e,t)=>{var n,a;try{(n=t==null?void 0:t.onSyncStart)==null||n.call(t);const i=tt(st,"userProfiles",s.uid),o={uid:s.uid,email:s.email||"",displayName:e,createdAt:Ct(),updatedAt:Ct()};return await ss(i,o,{merge:!0}),console.log("用户资料已同步到云端"),(a=t==null?void 0:t.onSyncSuccess)==null||a.call(t,"用户资料已保存"),!0}catch(i){return console.error("保存用户资料失败:",i),!1}},Wt=async s=>{try{const e=tt(st,"userProfiles",s.uid),t=await ts(e);if(t.exists()){const n=t.data();return console.log("从云端获取用户资料成功"),n}else return console.log("用户资料不存在"),null}catch(e){return console.error("获取用户资料失败:",e),null}},Sn=h.createContext(void 0);function kn(){const s=h.useContext(Sn);if(s===void 0)throw new Error("useUserProfile must be used within a UserProfileProvider");return s}function Wi({children:s}){var d;const{currentUser:e}=Se(),[t,n]=h.useState(null),[a,i]=h.useState(!1),o=(t==null?void 0:t.displayName)||((d=e==null?void 0:e.email)==null?void 0:d.split("@")[0])||"用户",l=async f=>{if(!e||!e.emailVerified)return!1;i(!0);try{return await Ws(e,f)?(n(m=>m?{...m,displayName:f,updatedAt:new Date}:null),setTimeout(async()=>{const m=await Wt(e);m&&n(m)},1e3),!0):!1}catch(c){return console.error("更新用户名失败:",c),!1}finally{i(!1)}};h.useEffect(()=>{(async()=>{var c;if(e&&e.emailVerified){i(!0);try{const m=await Wt(e);if(m)n(m);else{const _=((c=e.email)==null?void 0:c.split("@")[0])||"用户";await Ws(e,_);const b=await Wt(e);n(b)}}catch(m){console.error("加载用户资料失败:",m)}finally{i(!1)}}else n(null)})()},[e]);const u={userProfile:t,displayName:o,updateDisplayName:l,loading:a};return r.jsx(Sn.Provider,{value:u,children:s})}const Hs={isOnline:navigator.onLine,lastSyncTime:null,syncInProgress:!1,syncError:null,pendingChanges:0},Cn=h.createContext(void 0);function In(){const s=h.useContext(Cn);if(s===void 0)throw new Error("useSyncStatus must be used within a SyncProvider");return s}function Hi({children:s}){const[e,t]=h.useState(Hs),n=o=>{t(l=>({...l,...o}))},a=()=>{t(Hs)};window.addEventListener("online",()=>{n({isOnline:!0})}),window.addEventListener("offline",()=>{n({isOnline:!1})});const i={syncStatus:e,updateSyncStatus:n,resetSyncStatus:a};return r.jsx(Cn.Provider,{value:i,children:s})}function qi(s){const{currentUser:e}=Se(),{updateSyncStatus:t}=In(),{cardOpacity:n,searchBarOpacity:a,parallaxEnabled:i}=mt(),o=h.useRef(""),l=h.useRef(null),u=h.useRef(null),d=h.useRef(0),f=h.useCallback((c=!1)=>{if(!e||!e.emailVerified){e&&!e.emailVerified&&t({syncInProgress:!1,syncError:"请先验证邮箱才能同步数据到云端",pendingChanges:1});return}const m={cardOpacity:n,searchBarOpacity:a,parallaxEnabled:i,theme:localStorage.getItem("theme")||"light",lastSync:null};console.log(c?"⏰ 强制执行数据同步...":"🚀 开始执行数据同步..."),Ui(e,s,m,{onSyncStart:()=>{t({syncInProgress:!0,syncError:null,pendingChanges:0})},onSyncSuccess:_=>{const b=JSON.stringify({websites:s.map(S=>({id:S.id,name:S.name,url:S.url,visitCount:S.visitCount})),settings:{cardOpacity:n,searchBarOpacity:a,parallaxEnabled:i,theme:m.theme}});o.current=b,d.current=0,t({syncInProgress:!1,lastSyncTime:new Date,syncError:null,pendingChanges:0}),console.log("✅ 同步成功:",_)},onSyncError:_=>{t({syncInProgress:!1,syncError:_,pendingChanges:1}),console.error("❌ 同步失败:",_)}})},[e,s,n,a,i,t]);h.useEffect(()=>{if(JSON.stringify({websites:s.map(N=>({id:N.id,name:N.name,url:N.url,visitCount:N.visitCount})),settings:{cardOpacity:n,searchBarOpacity:a,parallaxEnabled:i,theme:localStorage.getItem("theme")||"light"}})===o.current){console.log("📊 数据未变化，保持现有同步计时器");return}console.log("🔄 检测到数据变化，更新同步策略");const m=Date.now();d.current===0&&(d.current=m,console.log("📝 记录首次数据变化时间")),l.current&&clearTimeout(l.current);const _=m-d.current,b=3e4,S=3e3;if(_>=b){console.log("⏰ 达到最大等待时间，立即强制同步"),u.current&&(clearTimeout(u.current),u.current=null),f(!0);return}if(l.current=setTimeout(()=>{f(!1)},S),!u.current){const N=b-_;console.log(`⏲️ 设置强制同步计时器，${Math.round(N/1e3)}秒后强制同步`),u.current=setTimeout(()=>{console.log("⏰ 强制同步计时器触发"),l.current&&(clearTimeout(l.current),l.current=null),f(!0)},N)}return()=>{l.current&&clearTimeout(l.current)}},[e,s,n,a,i,f]),h.useEffect(()=>()=>{l.current&&clearTimeout(l.current),u.current&&clearTimeout(u.current)},[])}function Gi(){const{syncStatus:s}=In(),{currentUser:e}=Se(),[,t]=h.useState(0);if(h.useEffect(()=>{const l=()=>{if(!s.lastSyncTime)return 6e4;const c=Math.floor((new Date().getTime()-s.lastSyncTime.getTime())/1e3);return c<60?1e3:c<3600?6e4:3e5},u=()=>{const f=l();return setTimeout(()=>{t(c=>c+1),u()},f)},d=u();return()=>clearTimeout(d)},[s.lastSyncTime]),!e)return null;const n=l=>{if(!l)return"从未同步";const d=Math.floor((new Date().getTime()-l.getTime())/1e3);return d<60?`${d}秒前`:d<3600?`${Math.floor(d/60)}分钟前`:d<86400?`${Math.floor(d/3600)}小时前`:`${Math.floor(d/86400)}天前`},a=()=>s.syncInProgress?r.jsx("i",{className:"fa-solid fa-sync fa-spin text-blue-500"}):s.syncError?r.jsx("i",{className:"fa-solid fa-exclamation-triangle text-red-500"}):s.isOnline?s.pendingChanges>0?r.jsx("i",{className:"fa-solid fa-clock text-orange-500"}):r.jsx("i",{className:"fa-solid fa-check-circle text-green-500"}):r.jsx("i",{className:"fa-solid fa-wifi-slash text-gray-500"}),i=()=>s.syncInProgress?"同步中...":s.syncError?"同步失败":s.isOnline?s.pendingChanges>0?`${s.pendingChanges} 个更改待同步`:"已同步":"离线模式",o=()=>s.syncError?s.syncError:`上次同步: ${n(s.lastSyncTime)}`;return r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:"云端同步状态"}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[a(),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:i()})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${s.isOnline?"bg-green-500":"bg-red-500"}`}),r.jsx("span",{className:"text-xs text-gray-500",children:s.isOnline?"在线":"离线"})]})]}),r.jsx("p",{className:"text-xs text-gray-500",children:o()}),r.jsx(_t,{children:s.syncError&&r.jsx(K.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"bg-red-50 border border-red-200 rounded p-2",children:r.jsxs("p",{className:"text-xs text-red-600",children:[r.jsx("i",{className:"fa-solid fa-info-circle mr-1"}),s.syncError]})})}),r.jsx(_t,{children:s.syncInProgress&&r.jsx(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"w-full bg-gray-200 rounded-full h-1",children:r.jsx(K.div,{className:"bg-blue-500 h-1 rounded-full",initial:{width:"0%"},animate:{width:"100%"},transition:{duration:2,ease:"easeInOut"}})})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[r.jsxs("div",{className:"bg-blue-50 rounded p-2 text-center",children:[r.jsx("div",{className:"font-medium text-blue-700",children:"云端备份"}),r.jsx("div",{className:"text-blue-600",children:e?"已启用":"未启用"})]}),r.jsxs("div",{className:"bg-green-50 rounded p-2 text-center",children:[r.jsx("div",{className:"font-medium text-green-700",children:"智能同步"}),r.jsx("div",{className:"text-green-600",children:s.pendingChanges>0?"3秒防抖":"30秒强制"})]})]})]})}function Ki({onSuccess:s}){const[e,t]=h.useState(!0),[n,a]=h.useState(""),[i,o]=h.useState(""),[l,u]=h.useState(""),[d,f]=h.useState(!1),[c,m]=h.useState(""),[_,b]=h.useState(!1),[S,N]=h.useState(""),{login:Z,register:re,loginWithGoogle:C,sendVerificationEmail:I}=Se(),k=async L=>{if(L.preventDefault(),!n||!i){m("请填写完整信息");return}if(!e&&!l.trim()){m("请输入用户名");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)){m("请输入有效的邮箱地址");return}if(!e){if(l.length<2||l.length>20){m("用户名长度需在2-20个字符之间");return}if(!/^[a-zA-Z0-9\u4e00-\u9fa5_-]+$/.test(l)){m("用户名只能包含字母、数字、中文、下划线和短横线");return}}f(!0),m("");try{e?(await Z(n,i),s()):(await re(n,i),b(!0),N(n),localStorage.setItem("pendingDisplayName",l))}catch(X){switch(console.error("认证失败:",X),X.code){case"auth/user-not-found":m("用户不存在，请检查邮箱或注册新账号");break;case"auth/wrong-password":m("密码错误，请重试");break;case"auth/email-already-in-use":m("邮箱已被注册，请登录或使用其他邮箱");break;case"auth/weak-password":m("密码强度不够，至少需要6位字符");break;case"auth/invalid-email":m("邮箱格式不正确");break;case"auth/too-many-requests":m("请求过于频繁，请稍后再试");break;case"auth/invalid-credential":m("登录凭据无效，请检查邮箱和密码");break;default:m(e?"登录失败，请重试":"注册失败，请重试")}}finally{f(!1)}},R=async()=>{f(!0),m("");try{await C(),s()}catch(L){console.error("Google登录失败:",L),m("Google登录失败，请重试")}finally{f(!1)}},V=async()=>{try{await I(),alert("验证邮件已重新发送，请检查邮箱")}catch{alert("发送验证邮件失败，请稍后重试")}};return _?r.jsx(K.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx("i",{className:"fa-solid fa-envelope-circle-check text-green-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-green-800",children:"注册成功！请验证您的邮箱"}),r.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["我们已向 ",r.jsx("strong",{children:S})," 发送了验证邮件。 请点击邮件中的链接完成验证后即可使用完整功能。"]}),r.jsxs("div",{className:"mt-3 flex space-x-2",children:[r.jsx("button",{onClick:V,className:"text-xs bg-green-100 hover:bg-green-200 text-green-800 px-2 py-1 rounded",children:"重新发送验证邮件"}),r.jsx("button",{onClick:()=>{b(!1),t(!0),a(""),o(""),u("")},className:"text-xs bg-blue-100 hover:bg-blue-200 text-blue-800 px-2 py-1 rounded",children:"返回登录"})]})]})]})}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e?"登录账号":"注册账号"}),r.jsx("p",{className:"text-sm text-gray-600",children:e?"使用邮箱登录您的账号":"创建新账号并设置用户名"})]}),c&&r.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:c}),r.jsxs("form",{onSubmit:k,className:"space-y-4",children:[!e&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"用户名 *"}),r.jsx("input",{type:"text",value:l,onChange:L=>u(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"请输入用户名（2-20个字符）",disabled:d,maxLength:20}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"支持中文、英文、数字、下划线和短横线"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"邮箱 *"}),r.jsx("input",{type:"email",value:n,onChange:L=>a(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"请输入邮箱",disabled:d})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"密码 *"}),r.jsx("input",{type:"password",value:i,onChange:L=>o(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"请输入密码（至少6位）",disabled:d,minLength:6})]}),r.jsx("button",{type:"submit",disabled:d,className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white py-2 px-4 rounded-md transition-colors",children:d?"处理中...":e?"登录":"注册"})]}),r.jsxs("div",{className:"mt-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-gray-300"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-2 bg-white text-gray-500",children:"或"})})]}),r.jsxs("button",{onClick:R,disabled:d,className:"mt-4 w-full bg-red-500 hover:bg-red-600 disabled:bg-gray-400 text-white py-2 px-4 rounded-md transition-colors flex items-center justify-center",children:[r.jsx("i",{className:"fab fa-google mr-2"}),"使用 Google ",e?"登录":"注册"]})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx("button",{onClick:()=>t(!e),className:"text-blue-500 hover:text-blue-600",disabled:d,children:e?"没有账号？点击注册":"已有账号？点击登录"})})]})}function Yi(){const{currentUser:s}=Se(),{displayName:e,updateDisplayName:t,loading:n}=kn(),[a,i]=h.useState(!1),[o,l]=h.useState(e),[u,d]=h.useState(!1),[f,c]=h.useState("");if(h.useEffect(()=>{l(e)},[e]),!s||!s.emailVerified)return null;const m=async()=>{if(!o.trim()){c("用户名不能为空");return}if(o.length<2||o.length>20){c("用户名长度需在2-20个字符之间");return}if(!/^[a-zA-Z0-9\u4e00-\u9fa5_-]+$/.test(o)){c("用户名只能包含字母、数字、中文、下划线和短横线");return}d(!0),c("");try{await t(o)?(i(!1),alert("用户名更新成功！")):c("更新失败，请重试")}catch(b){c("更新失败，请重试"),console.error("更新用户名失败:",b)}finally{d(!1)}},_=()=>{l(e),i(!1),c("")};return r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:"用户资料"}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"用户名"}),!a&&r.jsxs("button",{onClick:()=>i(!0),className:"text-xs text-blue-500 hover:text-blue-600",disabled:n,children:[r.jsx("i",{className:"fa-solid fa-edit mr-1"}),"编辑"]})]}),a?r.jsxs("div",{className:"space-y-2",children:[r.jsx("input",{type:"text",value:o,onChange:b=>l(b.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"请输入用户名",maxLength:20,disabled:u}),f&&r.jsx("p",{className:"text-xs text-red-600",children:f}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:m,disabled:u||!o.trim(),className:"text-xs bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white px-2 py-1 rounded",children:u?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-1"}),"保存中..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fa-solid fa-check mr-1"}),"保存"]})}),r.jsxs("button",{onClick:_,disabled:u,className:"text-xs bg-gray-500 hover:bg-gray-600 text-white px-2 py-1 rounded",children:[r.jsx("i",{className:"fa-solid fa-times mr-1"}),"取消"]})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"支持中文、英文、数字、下划线和短横线，2-20个字符"})]}):r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("i",{className:"fa-solid fa-user text-gray-400"}),r.jsx("span",{className:"text-sm font-medium text-gray-800",children:n?"加载中...":e})]}),r.jsx("div",{className:"border-t border-gray-200 pt-2",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("i",{className:"fa-solid fa-envelope text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-600",children:s.email}),r.jsx("i",{className:"fa-solid fa-check-circle text-green-500 text-xs",title:"邮箱已验证"})]})})]})]})}const Ve=class Ve{static getInstance(){return Ve.instance||(Ve.instance=new Ve),Ve.instance}hasConsent(){try{return localStorage.getItem("cookie-consent")==="accepted"}catch{return!1}}getConsentStatus(){try{const e=localStorage.getItem("cookie-consent");return e==="accepted"?"accepted":e==="declined"?"declined":"pending"}catch{return"pending"}}setItem(e,t,n=!1){try{return n||this.hasConsent()?(localStorage.setItem(e,t),!0):(console.warn(`🚫 存储被阻止: ${e} (用户未同意Cookie使用)`),!1)}catch(a){return console.error("存储失败:",a),!1}}getItem(e,t=!1){try{return t||this.hasConsent()?localStorage.getItem(e):(console.warn(`🚫 读取被阻止: ${e} (用户未同意Cookie使用)`),null)}catch(n){return console.error("读取失败:",n),null}}removeItem(e,t=!1){try{return t||this.hasConsent()?(localStorage.removeItem(e),!0):(console.warn(`🚫 删除被阻止: ${e} (用户未同意Cookie使用)`),!1)}catch(n){return console.error("删除失败:",n),!1}}getAllKeys(e=!0){try{if(!this.hasConsent()&&!e)return[];const t=[],n=["cookie-consent","cookie-consent-date"];for(let a=0;a<localStorage.length;a++){const i=localStorage.key(a);i&&(e||!n.includes(i))&&t.push(i)}return t}catch{return[]}}clearNonEssentialData(){const e=["cookie-consent","cookie-consent-date"];this.getAllKeys(!0).forEach(n=>{if(!e.includes(n))try{localStorage.removeItem(n)}catch(a){console.error(`清除数据失败: ${n}`,a)}}),console.log("🧹 已清除所有非必要数据")}getStorageStats(){const e=this.getAllKeys(!0),t=["cookie-consent","cookie-consent-date"],n=e.filter(i=>!t.includes(i)).length;let a=0;return e.forEach(i=>{try{const o=localStorage.getItem(i)||"";a+=i.length+o.length}catch{}}),{totalKeys:e.length,essentialKeys:t.filter(i=>e.includes(i)).length,nonEssentialKeys:n,consentRequired:!this.hasConsent()&&n>0,storageUsed:`${Math.round(a/1024*100)/100} KB`}}exportData(){if(!this.hasConsent())return console.warn("🚫 数据导出被阻止 (用户未同意Cookie使用)"),null;const e={};return this.getAllKeys(!1).forEach(n=>{try{const a=localStorage.getItem(n);a&&(e[n]=JSON.parse(a))}catch{e[n]=localStorage.getItem(n)}}),{exportTime:new Date().toISOString(),consentStatus:this.getConsentStatus(),data:e}}};ps(Ve,"instance");let es=Ve;const se=es.getInstance();function Qi(){return{setItem:(n,a,i=!1)=>{const o=typeof a=="string"?a:JSON.stringify(a);return se.setItem(n,o,i)},getItem:(n,a=!1)=>{const i=se.getItem(n,a);if(!i)return null;try{return JSON.parse(i)}catch{return i}},removeItem:(n,a=!1)=>se.removeItem(n,a),hasConsent:()=>se.hasConsent(),getConsentStatus:()=>se.getConsentStatus(),getStats:()=>se.getStorageStats(),clearNonEssential:()=>se.clearNonEssentialData(),exportData:()=>se.exportData()}}function Tn({isOpen:s,onClose:e}){const[t,n]=h.useState(se.getStorageStats()),[a,i]=h.useState(se.getConsentStatus());h.useEffect(()=>{s&&(n(se.getStorageStats()),i(se.getConsentStatus()))},[s]);const o=()=>{const d=a==="accepted"?"declined":"accepted";d==="accepted"?(localStorage.setItem("cookie-consent","accepted"),localStorage.setItem("cookie-consent-date",new Date().toISOString())):(localStorage.setItem("cookie-consent","declined"),localStorage.setItem("cookie-consent-date",new Date().toISOString()),se.clearNonEssentialData()),i(d),n(se.getStorageStats())},l=()=>{confirm(`⚠️ 确认清除所有数据？

这将删除您的所有网站收藏、设置和偏好。
此操作不可撤销！`)&&(se.clearNonEssentialData(),n(se.getStorageStats()),alert("✅ 所有非必要数据已清除"))},u=()=>{const d=se.exportData();if(!d){alert("❌ 需要同意Cookie使用才能导出数据");return}const f=new Blob([JSON.stringify(d,null,2)],{type:"application/json"}),c=URL.createObjectURL(f),m=document.createElement("a");m.href=c,m.download=`我的数据导出_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(c),alert("✅ 数据导出成功！")};return s?r.jsx(_t,{children:r.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:e}),r.jsxs(K.div,{className:"w-full max-w-2xl bg-white rounded-xl shadow-2xl z-50 max-h-[90vh] flex flex-col mx-4",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20,stiffness:300},children:[r.jsx("div",{className:"p-6 pb-0",children:r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("i",{className:"fa-solid fa-shield-halved text-blue-600 text-2xl"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"隐私与数据管理"})]}),r.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 text-xl",children:r.jsx("i",{className:"fa-solid fa-xmark"})})]})}),r.jsxs("div",{className:"flex-1 px-6 py-4 space-y-6 overflow-y-auto",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[r.jsx("i",{className:"fa-solid fa-cookie-bite text-amber-500"}),"Cookie使用状态"]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm text-gray-600",children:["当前状态:",r.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${a==="accepted"?"bg-green-100 text-green-800":a==="declined"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:a==="accepted"?"✅ 已同意":a==="declined"?"❌ 已拒绝":"⏳ 待决定"})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a==="accepted"?"您已同意使用Cookie和本地存储来提供完整功能":a==="declined"?"您已拒绝非必要Cookie，部分功能可能受限":"等待您的选择"})]}),a!=="pending"&&r.jsx("button",{onClick:o,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${a==="accepted"?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:a==="accepted"?"撤销同意":"重新同意"})]})]}),r.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[r.jsx("i",{className:"fa-solid fa-chart-pie text-blue-600"}),"数据使用统计"]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.totalKeys}),r.jsx("div",{className:"text-xs text-gray-600",children:"总数据项"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.essentialKeys}),r.jsx("div",{className:"text-xs text-gray-600",children:"必要数据"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t.nonEssentialKeys}),r.jsx("div",{className:"text-xs text-gray-600",children:"功能数据"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:t.storageUsed}),r.jsx("div",{className:"text-xs text-gray-600",children:"存储占用"})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[r.jsx("i",{className:"fa-solid fa-info-circle text-blue-600"}),"我们存储的数据类型"]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 rounded-lg",children:[r.jsx("i",{className:"fa-solid fa-shield-check text-green-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-green-800",children:"必要功能数据"}),r.jsx("div",{className:"text-green-700",children:"Cookie同意状态、基本设置 - 网站正常运行必需"})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-50 rounded-lg",children:[r.jsx("i",{className:"fa-solid fa-bookmark text-blue-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-blue-800",children:"收藏夹数据"}),r.jsx("div",{className:"text-blue-700",children:"您添加的网站收藏、访问记录、个人笔记"})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-purple-50 rounded-lg",children:[r.jsx("i",{className:"fa-solid fa-palette text-purple-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-purple-800",children:"界面偏好"}),r.jsx("div",{className:"text-purple-700",children:"主题设置、透明度、布局偏好等个性化配置"})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-orange-50 rounded-lg",children:[r.jsx("i",{className:"fa-solid fa-chart-line text-orange-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-orange-800",children:"性能分析"}),r.jsx("div",{className:"text-orange-700",children:"加载时间、使用统计，帮助改善用户体验"})]})]})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"fa-solid fa-wrench text-gray-600"}),"数据管理操作"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:u,disabled:a!=="accepted",className:"w-full p-3 bg-blue-100 hover:bg-blue-200 disabled:bg-gray-100 disabled:text-gray-400 text-blue-800 rounded-lg transition-colors text-left",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("i",{className:"fa-solid fa-download"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"导出我的数据"}),r.jsx("div",{className:"text-sm opacity-75",children:"下载包含所有个人数据的JSON文件"})]})]})}),r.jsx("button",{onClick:l,className:"w-full p-3 bg-red-100 hover:bg-red-200 text-red-800 rounded-lg transition-colors text-left",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("i",{className:"fa-solid fa-trash"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"清除所有数据"}),r.jsx("div",{className:"text-sm opacity-75",children:"删除所有非必要的本地存储数据"})]})]})})]})]})]}),r.jsx("div",{className:"p-6 pt-0 border-t",children:r.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[r.jsxs("span",{children:["最后更新: ",new Date().toLocaleDateString("zh-CN")]}),r.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg",children:"关闭"})]})})]})]})}):null}function Ji({onClose:s,websites:e,setWebsites:t}){const[n,a]=h.useState(!1),[i,o]=h.useState(!1),{cardOpacity:l,searchBarOpacity:u,parallaxEnabled:d,setCardOpacity:f,setSearchBarOpacity:c,setParallaxEnabled:m}=mt(),{currentUser:_,logout:b}=Se(),S=h.useRef(null),N=C=>{const I={...C,visitCount:0,lastVisit:new Date().toISOString().split("T")[0]};t([...e,I]),a(!1)},Z=()=>{try{const C={websites:e,settings:{cardOpacity:l,searchBarOpacity:u,parallaxEnabled:d,theme:localStorage.getItem("theme")||"light"},exportTime:new Date().toISOString(),version:"1.0"},I=JSON.stringify(C,null,2),k=new Blob([I],{type:"application/json"}),R=URL.createObjectURL(k),V=document.createElement("a");V.href=R,V.download=`炫酷收藏夹_导出数据_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(V),V.click(),document.body.removeChild(V),URL.revokeObjectURL(R),alert("数据导出成功！")}catch(C){console.error("导出数据失败:",C),alert("导出数据失败，请重试！")}},re=C=>{var V;const I=(V=C.target.files)==null?void 0:V[0];if(!I)return;if(!confirm(`⚠️ 导入数据前请注意：

• 导入会完全覆盖当前所有数据
• 包括所有网站卡片、透明度设置、主题等
• 建议先导出当前数据作为备份

确定要继续导入吗？`)){S.current&&(S.current.value="");return}const R=new FileReader;R.onload=L=>{var J;try{const X=(J=L.target)==null?void 0:J.result,U=JSON.parse(X);if(!U.websites||!Array.isArray(U.websites))throw new Error("无效的数据格式：缺少网站数据");if(t(U.websites),U.settings){const{cardOpacity:ce,searchBarOpacity:we,parallaxEnabled:Ce,theme:ae}=U.settings;typeof ce=="number"&&f(ce),typeof we=="number"&&c(we),typeof Ce=="boolean"&&m(Ce),ae&&localStorage.setItem("theme",ae)}alert("数据导入成功！页面将刷新以应用新设置。"),window.location.reload()}catch(X){console.error("导入数据失败:",X),alert("导入数据失败：文件格式不正确或数据损坏！")}},R.onerror=()=>{alert("读取文件失败！")},R.readAsText(I),S.current&&(S.current.value="")};return r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center select-none",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:s}),r.jsxs(K.div,{className:"w-96 bg-white rounded-xl shadow-2xl z-50 max-h-[80vh] flex flex-col select-none",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20,stiffness:300},children:[r.jsx("div",{className:"p-6 pb-0 select-none",children:r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-medium text-gray-800 select-none",children:"设置"}),r.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 select-none",children:r.jsx("i",{className:"fa-solid fa-xmark text-lg select-none"})})]})}),r.jsxs("div",{className:"flex-1 px-6 py-2 pb-6 space-y-6 overflow-y-auto select-none",children:[r.jsxs("div",{className:"space-y-4 select-none",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:"透明度设置"}),r.jsxs("div",{className:"space-y-2 select-none",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 select-none",children:["卡片透明度 (",Math.round(l*100),"%)"]}),r.jsx("input",{type:"range",min:"0.05",max:"0.3",step:"0.01",value:l,onChange:C=>f(parseFloat(C.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"})]}),r.jsxs("div",{className:"space-y-2 select-none",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 select-none",children:["搜索框透明度 (",Math.round(u*100),"%)"]}),r.jsx("input",{type:"range",min:"0.05",max:"0.3",step:"0.01",value:u,onChange:C=>c(parseFloat(C.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"})]}),r.jsxs("div",{className:"space-y-2 select-none",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center justify-between select-none",children:[r.jsx("span",{className:"select-none",children:"视差背景效果"}),r.jsx("button",{onClick:()=>m(!d),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors select-none ${d?"bg-blue-500":"bg-gray-300"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform select-none ${d?"translate-x-6":"translate-x-1"}`})})]}),r.jsx("p",{className:"text-xs text-gray-500 select-none",children:d?"背景会跟随鼠标轻微移动":"背景固定不动"})]})]}),r.jsxs("div",{className:"space-y-4 select-none",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:"卡片管理"}),r.jsxs("button",{onClick:()=>a(!0),className:"w-full px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors select-none",children:[r.jsx("i",{className:"fa-solid fa-plus mr-2 select-none"}),"添加新卡片"]})]}),r.jsxs("div",{className:"space-y-4 select-none",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:"账号管理"}),_?r.jsxs("div",{className:"space-y-3",children:[r.jsx(Yi,{}),r.jsxs("button",{onClick:async()=>{try{await b(),s()}catch(C){console.error("登出失败:",C)}},className:"w-full px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-md transition-colors select-none",children:[r.jsx("i",{className:"fa-solid fa-sign-out-alt mr-2 select-none"}),"登出"]})]}):r.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:r.jsx(Ki,{onSuccess:s})})]}),r.jsxs("div",{className:"space-y-4 select-none",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:"云端同步"}),r.jsx(Gi,{})]}),r.jsxs("div",{className:"space-y-4 select-none",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:"隐私与Cookie"}),r.jsxs("button",{onClick:()=>o(!0),className:"w-full px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors select-none",children:[r.jsx("i",{className:"fa-solid fa-shield-halved mr-2 select-none"}),"隐私设置"]})]}),r.jsxs("div",{className:"space-y-4 select-none",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:"数据管理"}),r.jsxs("button",{onClick:Z,className:"w-full px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-md transition-colors select-none",children:[r.jsx("i",{className:"fa-solid fa-download mr-2 select-none"}),"导出数据"]}),r.jsxs("div",{className:"space-y-2 select-none",children:[r.jsxs("button",{onClick:()=>{var C;return(C=S.current)==null?void 0:C.click()},className:"w-full px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-md transition-colors select-none",children:[r.jsx("i",{className:"fa-solid fa-upload mr-2 select-none"}),"导入数据"]}),r.jsx("input",{ref:S,type:"file",accept:".json",onChange:re,className:"hidden"}),r.jsx("p",{className:"text-xs text-gray-500 select-none",children:"⚠️ 导入会覆盖所有当前数据，建议先导出备份"})]})]})]})]}),n&&r.jsx(Xs,{id:`new-${Date.now()}`,name:"",url:"",favicon:"",tags:[],note:"",onClose:()=>a(!1),onSave:N}),i&&r.jsx(Tn,{isOpen:i,onClose:()=>o(!1)})]})}function Xi(){const{currentUser:s,sendVerificationEmail:e,reloadUser:t,logout:n}=Se(),[a,i]=h.useState(!1),[o,l]=h.useState(!1);if(!s||s.emailVerified)return null;const u=async()=>{i(!0);try{await e(),alert("✅ 验证邮件已发送！请检查您的邮箱（包括垃圾邮件文件夹）")}catch(c){alert("❌ 发送失败，请稍后重试"),console.error("发送验证邮件失败:",c)}finally{i(!1)}},d=async()=>{l(!0);try{await t(),window.location.reload()}catch(c){console.error("检查验证状态失败:",c)}finally{l(!1)}},f=async()=>{confirm("确定要登出吗？您可以稍后验证邮箱后重新登录。")&&await n()};return r.jsx(K.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},className:"fixed top-0 left-0 right-0 z-50 bg-orange-500 text-white shadow-lg",children:r.jsx("div",{className:"container mx-auto px-4 py-3",children:r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("i",{className:"fa-solid fa-envelope-open-text text-xl"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"请验证您的邮箱地址"}),r.jsxs("p",{className:"text-sm text-orange-100",children:["我们已向 ",r.jsx("strong",{children:s.email})," 发送了验证链接"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:u,disabled:a,className:"bg-orange-600 hover:bg-orange-700 disabled:bg-orange-400 px-3 py-1 rounded text-sm transition-colors",children:a?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-1"}),"发送中..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fa-solid fa-paper-plane mr-1"}),"重新发送"]})}),r.jsx("button",{onClick:d,disabled:o,className:"bg-green-500 hover:bg-green-600 disabled:bg-green-400 px-3 py-1 rounded text-sm transition-colors",children:o?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-1"}),"检查中..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fa-solid fa-check-circle mr-1"}),"已验证"]})}),r.jsxs("button",{onClick:f,className:"bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-sm transition-colors",children:[r.jsx("i",{className:"fa-solid fa-sign-out-alt mr-1"}),"登出"]})]})]})})})}function eo({websites:s,setWebsites:e}){yr();const{parallaxEnabled:t}=mt(),{currentUser:n}=Se(),{displayName:a}=kn();qi(s);const{drag:i,drop:o,isDragging:l}=xr(s,e),[u,d]=h.useState("https://bing.img.run/uhd.php"),[f,c]=h.useState(!1),[m,_]=h.useState(!1),[b,S]=h.useState({x:0,y:0}),N=[...s].sort((C,I)=>{const k=(I.visitCount||0)-(C.visitCount||0);if(k!==0)return k;const R=new Date(C.lastVisit||"2000-01-01").getTime();return new Date(I.lastVisit||"2000-01-01").getTime()-R}),Z=C=>{e(s.map(I=>I.id===C.id?{...I,...C}:I))},re=()=>{if(!t||!b.x||!b.y)return"translate(0px, 0px)";const C=window.innerWidth,I=window.innerHeight,k=20,R=(U,ce)=>(U/ce*k-k/2).toFixed(1),V=parseFloat(R(b.x,C)),L=parseFloat(R(b.y,I)),J=-V*.5,X=-L*.5;return`translate(${J}px, ${X}px)`};return h.useEffect(()=>{const C=["https://bing.img.run/uhd.php","https://bing.img.run/1920x1080.php","https://bing.img.run/1366x768.php","https://bing.img.run/m.php"],I=(k=0)=>{if(k>=C.length){d("https://source.unsplash.com/random/1920x1080/?nature");return}const R=new Image;R.src=C[k],R.onload=()=>{c(!0),d(R.src)},R.onerror=()=>{I(k+1)}};I()},[]),h.useEffect(()=>{if(!t){S({x:0,y:0});return}const C=I=>{S({x:I.clientX,y:I.clientY})};return window.addEventListener("mousemove",C,{passive:!0}),()=>{window.removeEventListener("mousemove",C)}},[t]),r.jsxs(r.Fragment,{children:[r.jsx(Xi,{}),r.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-cover bg-center bg-no-repeat -z-10",style:{backgroundImage:`linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1)), url(${u})`,backgroundSize:"105% 105%",backgroundPosition:"center center",backgroundAttachment:"fixed",transform:re(),transition:"transform 0.1s ease-out"},children:r.jsxs("div",{className:"relative min-h-screen pt-[33vh]",children:[r.jsx(pr,{}),r.jsx("div",{className:"pt-16 pb-8 px-4 max-w-6xl mx-auto",children:r.jsx(K.div,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-x-3 gap-y-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:N.map(C=>r.jsx(K.div,{ref:I=>i(o(I)),style:{opacity:l?.5:1},layout:!0,transition:{type:"spring",stiffness:350,damping:25},children:r.jsx(hr,{...C,onSave:Z,onDelete:I=>{e(s.filter(k=>k.id!==I))}})},C.id))})}),m&&r.jsx(Ji,{onClose:()=>_(!1),websites:s,setWebsites:e}),n&&n.emailVerified&&r.jsx("div",{className:"fixed top-4 right-4 z-40",children:r.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-3 py-2 flex items-center space-x-2",children:[r.jsx("i",{className:"fa-solid fa-user text-white/80"}),r.jsx("span",{className:"text-white/90 text-sm font-medium",children:a})]})}),r.jsx("div",{className:"fixed bottom-4 right-4 z-[9999]",children:r.jsx("button",{onClick:()=>_(!0),className:"p-2 text-white/70 hover:text-white transition-colors","aria-label":"设置",children:r.jsx("i",{className:"fa-solid fa-sliders text-lg"})})}),r.jsx(gr,{})]})})]})}const to=[{id:"1",name:"GitHub",url:"https://github.com",favicon:"https://github.githubassets.com/favicons/favicon.png",tags:["开发","代码"],visitCount:42,lastVisit:"2023-05-15",note:"看代码的平台"},{id:"2",name:"Dribbble",url:"https://dribbble.com",favicon:"https://cdn.dribbble.com/assets/favicon-b38525134603b9513174e916967b4baaaaaa5ee0297c4f53d6fb3ab8ad26c3a4.ico",tags:["设计","灵感"],visitCount:28,lastVisit:"2023-05-10",note:"设计灵感来源"},{id:"3",name:"Medium",url:"https://medium.com",favicon:"https://miro.medium.com/v2/resize:fill:32:32/1*sHhtYhaCe2Uc3IU0IgKwIQ.png",tags:["文章","学习"],visitCount:15,lastVisit:"2023-05-05",note:"阅读技术文章"}];function so({isOpen:s,onClose:e,localWebsites:t,cloudWebsites:n,onChoice:a}){const[i,o]=h.useState(!1);if(!s)return null;const l=async u=>{o(!0);try{await a(u),e()}catch(d){console.error("处理数据同步失败:",d)}finally{o(!1)}};return r.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:e}),r.jsxs(K.div,{className:"w-96 bg-white rounded-xl shadow-2xl z-50 max-h-[80vh] flex flex-col",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20,stiffness:300},children:[r.jsx("div",{className:"p-6 pb-0",children:r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-medium text-gray-800",children:"数据同步选择"}),r.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",disabled:i,children:r.jsx("i",{className:"fa-solid fa-xmark text-lg"})})]})}),r.jsxs("div",{className:"flex-1 px-6 py-2 pb-6 space-y-4 overflow-y-auto",children:[r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-sm text-blue-800 mb-2",children:[r.jsx("i",{className:"fa-solid fa-info-circle mr-2"}),"检测到您有本地数据和云端数据，请选择如何处理："]})}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:[r.jsx("i",{className:"fa-solid fa-computer mr-2"}),"本地数据"]}),r.jsxs("p",{className:"text-xs text-gray-600",children:[t.length," 个网站卡片"]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:[r.jsx("i",{className:"fa-solid fa-cloud mr-2"}),"云端数据"]}),r.jsxs("p",{className:"text-xs text-gray-600",children:[n.length," 个网站卡片"]})]})]}),r.jsxs("div",{className:"space-y-3 pt-4",children:[r.jsx("button",{onClick:()=>l("cloud"),disabled:i,className:"w-full p-4 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded-lg transition-colors text-left",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("i",{className:"fa-solid fa-cloud-arrow-down text-lg mt-1"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"使用云端数据"}),r.jsx("div",{className:"text-xs text-blue-100",children:"本地数据将被云端数据覆盖"})]})]})}),r.jsx("button",{onClick:()=>l("local"),disabled:i,className:"w-full p-4 bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white rounded-lg transition-colors text-left",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("i",{className:"fa-solid fa-cloud-arrow-up text-lg mt-1"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"使用本地数据"}),r.jsx("div",{className:"text-xs text-green-100",children:"本地数据将同步到云端，覆盖云端数据"})]})]})}),r.jsx("button",{onClick:()=>l("merge"),disabled:i,className:"w-full p-4 bg-purple-500 hover:bg-purple-600 disabled:bg-gray-400 text-white rounded-lg transition-colors text-left",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("i",{className:"fa-solid fa-code-merge text-lg mt-1"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"智能合并"}),r.jsx("div",{className:"text-xs text-purple-100",children:"保留访问次数更高的网站卡片，去除重复项"})]})]})})]}),i&&r.jsxs("div",{className:"flex items-center justify-center py-4",children:[r.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-2"}),r.jsx("span",{className:"text-sm text-gray-600",children:"处理中..."})]})]})]})]})}function no(){const{currentUser:s}=Se(),[e,t]=h.useState({cloudWebsites:null,cloudSettings:null,loading:!1,error:null}),n=async()=>{if(!s||!s.emailVerified){t(i=>({...i,error:"需要登录且验证邮箱才能加载云端数据",loading:!1}));return}t(i=>({...i,loading:!0,error:null}));try{const[i,o]=await Promise.all([zi(s),Vi(s)]);t({cloudWebsites:i,cloudSettings:o,loading:!1,error:null}),console.log("✅ 云端数据加载完成:",{websites:(i==null?void 0:i.length)||0,hasSettings:!!o})}catch(i){t(o=>({...o,loading:!1,error:"加载云端数据失败: "+i.message})),console.error("❌ 加载云端数据失败:",i)}},a=i=>e.cloudWebsites?Zi(i,e.cloudWebsites):i;return h.useEffect(()=>{s&&s.emailVerified?n():t({cloudWebsites:null,cloudSettings:null,loading:!1,error:null})},[s]),{...e,loadCloudData:n,mergeWithLocalData:a,hasCloudData:!!e.cloudWebsites||!!e.cloudSettings}}const ao=()=>{h.useEffect(()=>{document.title="jiang_ai_web";const s=()=>{document.hidden?document.title="😭你就要离开我了吗":document.title="jiang_ai_web"};return document.addEventListener("visibilitychange",s),()=>{document.removeEventListener("visibilitychange",s)}},[])};function ro(){h.useEffect(()=>(["https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/webfonts/fa-solid-900.woff2","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/webfonts/fa-regular-400.woff2"].forEach(n=>{const a=document.createElement("link");a.rel="preload",a.as="font",a.type="font/woff2",a.crossOrigin="anonymous",a.href=n,document.head.appendChild(a)}),["https://www.google.com/s2/favicons?domain=github.com&sz=32","https://favicon.yandex.net/favicon/v2/github.com?size=32"].forEach(n=>{const a=new Image;a.src=n}),["https://bing.img.run","https://source.unsplash.com","https://www.google.com","https://favicon.yandex.net","https://icons.duckduckgo.com"].forEach(n=>{const a=document.createElement("link");a.rel="preconnect",a.href=n,document.head.appendChild(a)}),()=>{document.querySelectorAll('link[rel="preload"], link[rel="preconnect"]').forEach(a=>{a.getAttribute("data-preloader")!=="manual"&&a.remove()})}),[])}function io({onAccept:s,onDecline:e,onCustomize:t}){const[n,a]=h.useState(!1),[i,o]=h.useState(!1);h.useEffect(()=>{if(!localStorage.getItem("cookie-consent")){const c=setTimeout(()=>{a(!0),o(!0)},2e3);return()=>clearTimeout(c)}},[]);const l=()=>{localStorage.setItem("cookie-consent","accepted"),localStorage.setItem("cookie-consent-date",new Date().toISOString()),o(!1),setTimeout(()=>{a(!1),s==null||s()},300),console.log("✅ 用户已同意Cookie使用")},u=()=>{localStorage.setItem("cookie-consent","declined"),localStorage.setItem("cookie-consent-date",new Date().toISOString()),o(!1);try{const f=["cookie-consent","cookie-consent-date"],c=[];for(let m=0;m<localStorage.length;m++){const _=localStorage.key(m);_&&!f.includes(_)&&c.push(_)}c.forEach(m=>localStorage.removeItem(m))}catch(f){console.error("清理存储数据失败:",f)}setTimeout(()=>{a(!1),e==null||e()},300),console.log("❌ 用户拒绝了Cookie使用")},d=()=>{t==null||t()};return n?r.jsx(_t,{children:i&&r.jsxs(r.Fragment,{children:[r.jsx(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/20 z-[9998] pointer-events-none"}),r.jsxs(K.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",damping:25,stiffness:200},className:"fixed bottom-0 left-0 right-0 z-[9999] bg-white border-t border-gray-200 shadow-2xl",children:[r.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0 mt-1",children:r.jsx("i",{className:"fa-solid fa-cookie-bite text-amber-500 text-xl"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"🍪 Cookie使用说明"}),r.jsxs("p",{className:"text-sm text-gray-600 leading-relaxed",children:["我们使用Cookie和本地存储来提供更好的用户体验，包括：",r.jsx("br",{}),r.jsxs("span",{className:"inline-flex items-center gap-4 mt-1 text-xs",children:[r.jsx("span",{children:"📱 保存您的网站收藏"}),r.jsx("span",{children:"🎨 记住界面设置"}),r.jsx("span",{children:"☁️ 同步云端数据"}),r.jsx("span",{children:"📊 性能分析"})]})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["您可以随时在浏览器设置中管理这些Cookie。了解更多请查看我们的",r.jsx("button",{className:"text-blue-600 hover:text-blue-800 underline mx-1",onClick:()=>window.open("https://github.com/your-repo/privacy-policy","_blank"),children:"隐私政策"})]})]})]})}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[r.jsxs("button",{onClick:d,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("i",{className:"fa-solid fa-cog mr-2"}),"自定义设置"]}),r.jsxs("button",{onClick:u,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("i",{className:"fa-solid fa-times mr-2"}),"拒绝"]}),r.jsxs("button",{onClick:l,className:"px-6 py-2 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:[r.jsx("i",{className:"fa-solid fa-check mr-2"}),"接受并继续"]})]})]})}),r.jsx("div",{className:"h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500"})]})]})}):null}function oo(){ao(),ro();const s=Qi(),{currentUser:e}=Se(),{cloudWebsites:t,hasCloudData:n,mergeWithLocalData:a}=no(),[i,o]=h.useState(()=>{const b=s.getItem("websites");return b||to}),[l,u]=h.useState(!1),[d,f]=h.useState(!1),[c,m]=h.useState(!1);h.useEffect(()=>{s.setItem("websites",i)},[i,s]),h.useEffect(()=>{if(e&&e.emailVerified&&n&&t&&!d){const b=i.length,S=t.length;b>0&&S>0&&b!==S?u(!0):(S>0&&b===0&&o(t),f(!0))}},[e,n,t,i.length,d]);const _=async b=>{if(!(!e||!t))try{let S=[];switch(b){case"cloud":S=t,o(S);break;case"local":S=i,await Xt(e,S);break;case"merge":S=a(i),o(S),await Xt(e,S);break}f(!0),console.log(`✅ 数据同步完成 (${b}):`,S.length,"个网站")}catch(S){console.error("❌ 数据同步失败:",S)}};return r.jsxs(r.Fragment,{children:[r.jsx(zn,{children:r.jsx(Zn,{path:"/",element:r.jsx(eo,{websites:i,setWebsites:o})})}),l&&t&&r.jsx(so,{isOpen:l,onClose:()=>{u(!1),f(!0)},localWebsites:i,cloudWebsites:t,onChoice:_}),r.jsx(io,{onAccept:()=>{console.log("✅ 用户接受Cookie使用，启用完整功能")},onDecline:()=>{console.log("❌ 用户拒绝Cookie使用，限制数据存储")},onCustomize:()=>{m(!0)}}),c&&r.jsx(Tn,{isOpen:c,onClose:()=>m(!1)})]})}function lo(){return r.jsx(Bi,{children:r.jsx(Wi,{children:r.jsx(Hi,{children:r.jsx(mr,{children:r.jsx(Bn,{backend:Fn,children:r.jsx(oo,{})})})})})})}const co=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",uo=co?void 0:"/jiang_ai_web";ua.createRoot(document.getElementById("root")).render(r.jsx(h.StrictMode,{children:r.jsxs(Un,{basename:uo,children:[r.jsx(lo,{}),r.jsx($a,{})]})}));
