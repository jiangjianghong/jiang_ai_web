var Ha=Object.defineProperty;var qa=(t,e,s)=>e in t?Ha(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var he=(t,e,s)=>qa(t,typeof e!="symbol"?e+"":e,s);import{j as o,m as re,u as Ka,a as Ga,A as Dt,D as Ja,H as Qa}from"./ui-vendor-Bc0nx1qi.js";import{R as j,a as Ya,r as h,b as Xa,c as er,B as tr}from"./router-vendor-ojeZ8ZvP.js";import{a as sr}from"./react-vendor-BtP0CW_r.js";import{_ as $t,C as Pt,r as ut,S as nr,a as ar,F as $s,g as Fn,b as gt,c as Ft,d as rr,i as Un,p as or,u as ir,e as lr,E as zn,o as cr,L as dr,f as ur,h as fr,v as hr,j as tn,k as mr,l as pr,m as gr,n as xr,q as yr,s as br,t as vr,G as wr,w as _r,x as Nr,y as jr,z as Sr,A as kr,B as xt,D as Ps,H as Qt,I as Ls}from"./firebase-vendor-ZBlOrbTj.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(a){if(a.ep)return;a.ep=!0;const r=s(a);fetch(a.href,r)}})();var Wt={},sn;function Cr(){if(sn)return Wt;sn=1;var t=sr();return Wt.createRoot=t.createRoot,Wt.hydrateRoot=t.hydrateRoot,Wt}var nn=Cr();function Tr(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}const Ir=t=>{switch(t){case"success":return Ar;case"info":return Dr;case"warning":return Or;case"error":return $r;default:return null}},Er=Array(12).fill(0),Rr=({visible:t,className:e})=>j.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},j.createElement("div",{className:"sonner-spinner"},Er.map((s,n)=>j.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),Ar=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},j.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Or=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},j.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Dr=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},j.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),$r=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},j.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Pr=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},j.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),j.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Lr=()=>{const[t,e]=j.useState(document.hidden);return j.useEffect(()=>{const s=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),t};let _s=1;class Br{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const s=this.subscribers.indexOf(e);this.subscribers.splice(s,1)}),this.publish=e=>{this.subscribers.forEach(s=>s(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var s;const{message:n,...a}=e,r=typeof(e==null?void 0:e.id)=="number"||((s=e.id)==null?void 0:s.length)>0?e.id:_s++,i=this.toasts.find(u=>u.id===r),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(r)&&this.dismissedToasts.delete(r),i?this.toasts=this.toasts.map(u=>u.id===r?(this.publish({...u,...e,id:r,title:n}),{...u,...e,id:r,dismissible:l,title:n}):u):this.addToast({title:n,...a,dismissible:l,id:r}),r},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(s=>s({id:e,dismiss:!0})))):this.toasts.forEach(s=>{this.subscribers.forEach(n=>n({id:s.id,dismiss:!0}))}),e),this.message=(e,s)=>this.create({...s,message:e}),this.error=(e,s)=>this.create({...s,message:e,type:"error"}),this.success=(e,s)=>this.create({...s,type:"success",message:e}),this.info=(e,s)=>this.create({...s,type:"info",message:e}),this.warning=(e,s)=>this.create({...s,type:"warning",message:e}),this.loading=(e,s)=>this.create({...s,type:"loading",message:e}),this.promise=(e,s)=>{if(!s)return;let n;s.loading!==void 0&&(n=this.create({...s,promise:e,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));const a=Promise.resolve(e instanceof Function?e():e);let r=n!==void 0,i;const l=a.then(async c=>{if(i=["resolve",c],j.isValidElement(c))r=!1,this.create({id:n,type:"default",message:c});else if(Fr(c)&&!c.ok){r=!1;const d=typeof s.error=="function"?await s.error(`HTTP error! status: ${c.status}`):s.error,m=typeof s.description=="function"?await s.description(`HTTP error! status: ${c.status}`):s.description,x=typeof d=="object"&&!j.isValidElement(d)?d:{message:d};this.create({id:n,type:"error",description:m,...x})}else if(c instanceof Error){r=!1;const d=typeof s.error=="function"?await s.error(c):s.error,m=typeof s.description=="function"?await s.description(c):s.description,x=typeof d=="object"&&!j.isValidElement(d)?d:{message:d};this.create({id:n,type:"error",description:m,...x})}else if(s.success!==void 0){r=!1;const d=typeof s.success=="function"?await s.success(c):s.success,m=typeof s.description=="function"?await s.description(c):s.description,x=typeof d=="object"&&!j.isValidElement(d)?d:{message:d};this.create({id:n,type:"success",description:m,...x})}}).catch(async c=>{if(i=["reject",c],s.error!==void 0){r=!1;const f=typeof s.error=="function"?await s.error(c):s.error,d=typeof s.description=="function"?await s.description(c):s.description,g=typeof f=="object"&&!j.isValidElement(f)?f:{message:f};this.create({id:n,type:"error",description:d,...g})}}).finally(()=>{r&&(this.dismiss(n),n=void 0),s.finally==null||s.finally.call(s)}),u=()=>new Promise((c,f)=>l.then(()=>i[0]==="reject"?f(i[1]):c(i[1])).catch(f));return typeof n!="string"&&typeof n!="number"?{unwrap:u}:Object.assign(n,{unwrap:u})},this.custom=(e,s)=>{const n=(s==null?void 0:s.id)||_s++;return this.create({jsx:e(n),id:n,...s}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const xe=new Br,Mr=(t,e)=>{const s=(e==null?void 0:e.id)||_s++;return xe.addToast({title:t,...e,id:s}),s},Fr=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Ur=Mr,zr=()=>xe.toasts,Vr=()=>xe.getActiveToasts();Object.assign(Ur,{success:xe.success,info:xe.info,warning:xe.warning,error:xe.error,custom:xe.custom,message:xe.message,promise:xe.promise,dismiss:xe.dismiss,loading:xe.loading},{getHistory:zr,getToasts:Vr});Tr("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Zt(t){return t.label!==void 0}const Wr=3,Zr="24px",Hr="16px",an=4e3,qr=356,Kr=14,Gr=45,Jr=200;function De(...t){return t.filter(Boolean).join(" ")}function Qr(t){const[e,s]=t.split("-"),n=[];return e&&n.push(e),s&&n.push(s),n}const Yr=t=>{var e,s,n,a,r,i,l,u,c;const{invert:f,toast:d,unstyled:m,interacting:g,setHeights:x,visibleToasts:$,heights:y,index:b,toasts:O,expanded:P,removeToast:S,defaultRichColors:T,closeButton:_,style:C,cancelButtonStyle:I,actionButtonStyle:se,className:ee="",descriptionClassName:B="",duration:te,position:Q,gap:le,expandByDefault:ne,classNames:E,icons:W,closeButtonAriaLabel:q="Close toast"}=t,[K,L]=j.useState(null),[R,M]=j.useState(null),[V,p]=j.useState(!1),[w,N]=j.useState(!1),[Y,H]=j.useState(!1),[ae,G]=j.useState(!1),[ue,Ae]=j.useState(!1),[vt,lt]=j.useState(0),[wt,ct]=j.useState(0),Ue=j.useRef(d.duration||te||an),_t=j.useRef(null),Ne=j.useRef(null),Nt=b===0,cs=b+1<=$,me=d.type,Le=d.dismissible!==!1,jt=d.className||"",ds=d.descriptionClassName||"",Je=j.useMemo(()=>y.findIndex(z=>z.toastId===d.id)||0,[y,d.id]),us=j.useMemo(()=>{var z;return(z=d.closeButton)!=null?z:_},[d.closeButton,_]),St=j.useMemo(()=>d.duration||te||an,[d.duration,te]),ze=j.useRef(0),je=j.useRef(0),Te=j.useRef(0),Oe=j.useRef(null),[kt,za]=Q.split("-"),Js=j.useMemo(()=>y.reduce((z,de,pe)=>pe>=Je?z:z+de.height,0),[y,Je]),Qs=Lr(),Va=d.invert||f,fs=me==="loading";je.current=j.useMemo(()=>Je*le+Js,[Je,Js]),j.useEffect(()=>{Ue.current=St},[St]),j.useEffect(()=>{p(!0)},[]),j.useEffect(()=>{const z=Ne.current;if(z){const de=z.getBoundingClientRect().height;return ct(de),x(pe=>[{toastId:d.id,height:de,position:d.position},...pe]),()=>x(pe=>pe.filter(be=>be.toastId!==d.id))}},[x,d.id]),j.useLayoutEffect(()=>{if(!V)return;const z=Ne.current,de=z.style.height;z.style.height="auto";const pe=z.getBoundingClientRect().height;z.style.height=de,ct(pe),x(be=>be.find(fe=>fe.toastId===d.id)?be.map(fe=>fe.toastId===d.id?{...fe,height:pe}:fe):[{toastId:d.id,height:pe,position:d.position},...be])},[V,d.title,d.description,x,d.id,d.jsx,d.action,d.cancel]);const Ve=j.useCallback(()=>{N(!0),lt(je.current),x(z=>z.filter(de=>de.toastId!==d.id)),setTimeout(()=>{S(d)},Jr)},[d,S,x,je]);j.useEffect(()=>{if(d.promise&&me==="loading"||d.duration===1/0||d.type==="loading")return;let z;return P||g||Qs?(()=>{if(Te.current<ze.current){const be=new Date().getTime()-ze.current;Ue.current=Ue.current-be}Te.current=new Date().getTime()})():(()=>{Ue.current!==1/0&&(ze.current=new Date().getTime(),z=setTimeout(()=>{d.onAutoClose==null||d.onAutoClose.call(d,d),Ve()},Ue.current))})(),()=>clearTimeout(z)},[P,g,d,me,Qs,Ve]),j.useEffect(()=>{d.delete&&(Ve(),d.onDismiss==null||d.onDismiss.call(d,d))},[Ve,d.delete]);function Wa(){var z;if(W!=null&&W.loading){var de;return j.createElement("div",{className:De(E==null?void 0:E.loader,d==null||(de=d.classNames)==null?void 0:de.loader,"sonner-loader"),"data-visible":me==="loading"},W.loading)}return j.createElement(Rr,{className:De(E==null?void 0:E.loader,d==null||(z=d.classNames)==null?void 0:z.loader),visible:me==="loading"})}const Za=d.icon||(W==null?void 0:W[me])||Ir(me);var Ys,Xs;return j.createElement("li",{tabIndex:0,ref:Ne,className:De(ee,jt,E==null?void 0:E.toast,d==null||(e=d.classNames)==null?void 0:e.toast,E==null?void 0:E.default,E==null?void 0:E[me],d==null||(s=d.classNames)==null?void 0:s[me]),"data-sonner-toast":"","data-rich-colors":(Ys=d.richColors)!=null?Ys:T,"data-styled":!(d.jsx||d.unstyled||m),"data-mounted":V,"data-promise":!!d.promise,"data-swiped":ue,"data-removed":w,"data-visible":cs,"data-y-position":kt,"data-x-position":za,"data-index":b,"data-front":Nt,"data-swiping":Y,"data-dismissible":Le,"data-type":me,"data-invert":Va,"data-swipe-out":ae,"data-swipe-direction":R,"data-expanded":!!(P||ne&&V),style:{"--index":b,"--toasts-before":b,"--z-index":O.length-b,"--offset":`${w?vt:je.current}px`,"--initial-height":ne?"auto":`${wt}px`,...C,...d.style},onDragEnd:()=>{H(!1),L(null),Oe.current=null},onPointerDown:z=>{z.button!==2&&(fs||!Le||(_t.current=new Date,lt(je.current),z.target.setPointerCapture(z.pointerId),z.target.tagName!=="BUTTON"&&(H(!0),Oe.current={x:z.clientX,y:z.clientY})))},onPointerUp:()=>{var z,de,pe;if(ae||!Le)return;Oe.current=null;const be=Number(((z=Ne.current)==null?void 0:z.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),zt=Number(((de=Ne.current)==null?void 0:de.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),fe=new Date().getTime()-((pe=_t.current)==null?void 0:pe.getTime()),Se=K==="x"?be:zt,Vt=Math.abs(Se)/fe;if(Math.abs(Se)>=Gr||Vt>.11){lt(je.current),d.onDismiss==null||d.onDismiss.call(d,d),M(K==="x"?be>0?"right":"left":zt>0?"down":"up"),Ve(),G(!0);return}else{var Ie,Ee;(Ie=Ne.current)==null||Ie.style.setProperty("--swipe-amount-x","0px"),(Ee=Ne.current)==null||Ee.style.setProperty("--swipe-amount-y","0px")}Ae(!1),H(!1),L(null)},onPointerMove:z=>{var de,pe,be;if(!Oe.current||!Le||((de=window.getSelection())==null?void 0:de.toString().length)>0)return;const fe=z.clientY-Oe.current.y,Se=z.clientX-Oe.current.x;var Vt;const Ie=(Vt=t.swipeDirections)!=null?Vt:Qr(Q);!K&&(Math.abs(Se)>1||Math.abs(fe)>1)&&L(Math.abs(Se)>Math.abs(fe)?"x":"y");let Ee={x:0,y:0};const en=Qe=>1/(1.5+Math.abs(Qe)/20);if(K==="y"){if(Ie.includes("top")||Ie.includes("bottom"))if(Ie.includes("top")&&fe<0||Ie.includes("bottom")&&fe>0)Ee.y=fe;else{const Qe=fe*en(fe);Ee.y=Math.abs(Qe)<Math.abs(fe)?Qe:fe}}else if(K==="x"&&(Ie.includes("left")||Ie.includes("right")))if(Ie.includes("left")&&Se<0||Ie.includes("right")&&Se>0)Ee.x=Se;else{const Qe=Se*en(Se);Ee.x=Math.abs(Qe)<Math.abs(Se)?Qe:Se}(Math.abs(Ee.x)>0||Math.abs(Ee.y)>0)&&Ae(!0),(pe=Ne.current)==null||pe.style.setProperty("--swipe-amount-x",`${Ee.x}px`),(be=Ne.current)==null||be.style.setProperty("--swipe-amount-y",`${Ee.y}px`)}},us&&!d.jsx&&me!=="loading"?j.createElement("button",{"aria-label":q,"data-disabled":fs,"data-close-button":!0,onClick:fs||!Le?()=>{}:()=>{Ve(),d.onDismiss==null||d.onDismiss.call(d,d)},className:De(E==null?void 0:E.closeButton,d==null||(n=d.classNames)==null?void 0:n.closeButton)},(Xs=W==null?void 0:W.close)!=null?Xs:Pr):null,(me||d.icon||d.promise)&&d.icon!==null&&((W==null?void 0:W[me])!==null||d.icon)?j.createElement("div",{"data-icon":"",className:De(E==null?void 0:E.icon,d==null||(a=d.classNames)==null?void 0:a.icon)},d.promise||d.type==="loading"&&!d.icon?d.icon||Wa():null,d.type!=="loading"?Za:null):null,j.createElement("div",{"data-content":"",className:De(E==null?void 0:E.content,d==null||(r=d.classNames)==null?void 0:r.content)},j.createElement("div",{"data-title":"",className:De(E==null?void 0:E.title,d==null||(i=d.classNames)==null?void 0:i.title)},d.jsx?d.jsx:typeof d.title=="function"?d.title():d.title),d.description?j.createElement("div",{"data-description":"",className:De(B,ds,E==null?void 0:E.description,d==null||(l=d.classNames)==null?void 0:l.description)},typeof d.description=="function"?d.description():d.description):null),j.isValidElement(d.cancel)?d.cancel:d.cancel&&Zt(d.cancel)?j.createElement("button",{"data-button":!0,"data-cancel":!0,style:d.cancelButtonStyle||I,onClick:z=>{Zt(d.cancel)&&Le&&(d.cancel.onClick==null||d.cancel.onClick.call(d.cancel,z),Ve())},className:De(E==null?void 0:E.cancelButton,d==null||(u=d.classNames)==null?void 0:u.cancelButton)},d.cancel.label):null,j.isValidElement(d.action)?d.action:d.action&&Zt(d.action)?j.createElement("button",{"data-button":!0,"data-action":!0,style:d.actionButtonStyle||se,onClick:z=>{Zt(d.action)&&(d.action.onClick==null||d.action.onClick.call(d.action,z),!z.defaultPrevented&&Ve())},className:De(E==null?void 0:E.actionButton,d==null||(c=d.classNames)==null?void 0:c.actionButton)},d.action.label):null)};function rn(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Xr(t,e){const s={};return[t,e].forEach((n,a)=>{const r=a===1,i=r?"--mobile-offset":"--offset",l=r?Hr:Zr;function u(c){["top","right","bottom","left"].forEach(f=>{s[`${i}-${f}`]=typeof c=="number"?`${c}px`:c})}typeof n=="number"||typeof n=="string"?u(n):typeof n=="object"?["top","right","bottom","left"].forEach(c=>{n[c]===void 0?s[`${i}-${c}`]=l:s[`${i}-${c}`]=typeof n[c]=="number"?`${n[c]}px`:n[c]}):u(l)}),s}const eo=j.forwardRef(function(e,s){const{invert:n,position:a="bottom-right",hotkey:r=["altKey","KeyT"],expand:i,closeButton:l,className:u,offset:c,mobileOffset:f,theme:d="light",richColors:m,duration:g,style:x,visibleToasts:$=Wr,toastOptions:y,dir:b=rn(),gap:O=Kr,icons:P,containerAriaLabel:S="Notifications"}=e,[T,_]=j.useState([]),C=j.useMemo(()=>Array.from(new Set([a].concat(T.filter(R=>R.position).map(R=>R.position)))),[T,a]),[I,se]=j.useState([]),[ee,B]=j.useState(!1),[te,Q]=j.useState(!1),[le,ne]=j.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),E=j.useRef(null),W=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),q=j.useRef(null),K=j.useRef(!1),L=j.useCallback(R=>{_(M=>{var V;return(V=M.find(p=>p.id===R.id))!=null&&V.delete||xe.dismiss(R.id),M.filter(({id:p})=>p!==R.id)})},[]);return j.useEffect(()=>xe.subscribe(R=>{if(R.dismiss){requestAnimationFrame(()=>{_(M=>M.map(V=>V.id===R.id?{...V,delete:!0}:V))});return}setTimeout(()=>{Ya.flushSync(()=>{_(M=>{const V=M.findIndex(p=>p.id===R.id);return V!==-1?[...M.slice(0,V),{...M[V],...R},...M.slice(V+1)]:[R,...M]})})})}),[T]),j.useEffect(()=>{if(d!=="system"){ne(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ne("dark"):ne("light")),typeof window>"u")return;const R=window.matchMedia("(prefers-color-scheme: dark)");try{R.addEventListener("change",({matches:M})=>{ne(M?"dark":"light")})}catch{R.addListener(({matches:V})=>{try{ne(V?"dark":"light")}catch(p){console.error(p)}})}},[d]),j.useEffect(()=>{T.length<=1&&B(!1)},[T]),j.useEffect(()=>{const R=M=>{var V;if(r.every(N=>M[N]||M.code===N)){var w;B(!0),(w=E.current)==null||w.focus()}M.code==="Escape"&&(document.activeElement===E.current||(V=E.current)!=null&&V.contains(document.activeElement))&&B(!1)};return document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[r]),j.useEffect(()=>{if(E.current)return()=>{q.current&&(q.current.focus({preventScroll:!0}),q.current=null,K.current=!1)}},[E.current]),j.createElement("section",{ref:s,"aria-label":`${S} ${W}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((R,M)=>{var V;const[p,w]=R.split("-");return T.length?j.createElement("ol",{key:R,dir:b==="auto"?rn():b,tabIndex:-1,ref:E,className:u,"data-sonner-toaster":!0,"data-sonner-theme":le,"data-y-position":p,"data-x-position":w,style:{"--front-toast-height":`${((V=I[0])==null?void 0:V.height)||0}px`,"--width":`${qr}px`,"--gap":`${O}px`,...x,...Xr(c,f)},onBlur:N=>{K.current&&!N.currentTarget.contains(N.relatedTarget)&&(K.current=!1,q.current&&(q.current.focus({preventScroll:!0}),q.current=null))},onFocus:N=>{N.target instanceof HTMLElement&&N.target.dataset.dismissible==="false"||K.current||(K.current=!0,q.current=N.relatedTarget)},onMouseEnter:()=>B(!0),onMouseMove:()=>B(!0),onMouseLeave:()=>{te||B(!1)},onDragEnd:()=>B(!1),onPointerDown:N=>{N.target instanceof HTMLElement&&N.target.dataset.dismissible==="false"||Q(!0)},onPointerUp:()=>Q(!1)},T.filter(N=>!N.position&&M===0||N.position===R).map((N,Y)=>{var H,ae;return j.createElement(Yr,{key:N.id,icons:P,index:Y,toast:N,defaultRichColors:m,duration:(H=y==null?void 0:y.duration)!=null?H:g,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:n,visibleToasts:$,closeButton:(ae=y==null?void 0:y.closeButton)!=null?ae:l,interacting:te,position:R,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,closeButtonAriaLabel:y==null?void 0:y.closeButtonAriaLabel,removeToast:L,toasts:T.filter(G=>G.position==N.position),heights:I.filter(G=>G.position==N.position),setHeights:se,expandByDefault:i,gap:O,expanded:ee,swipeDirections:e.swipeDirections})})):null}))});var X;(function(t){t.assertEqual=a=>{};function e(a){}t.assertIs=e;function s(a){throw new Error}t.assertNever=s,t.arrayToEnum=a=>{const r={};for(const i of a)r[i]=i;return r},t.getValidEnumValues=a=>{const r=t.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),i={};for(const l of r)i[l]=a[l];return t.objectValues(i)},t.objectValues=a=>t.objectKeys(a).map(function(r){return a[r]}),t.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const r=[];for(const i in a)Object.prototype.hasOwnProperty.call(a,i)&&r.push(i);return r},t.find=(a,r)=>{for(const i of a)if(r(i))return i},t.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,r=" | "){return a.map(i=>typeof i=="string"?`'${i}'`:i).join(r)}t.joinValues=n,t.jsonStringifyReplacer=(a,r)=>typeof r=="bigint"?r.toString():r})(X||(X={}));var on;(function(t){t.mergeShapes=(e,s)=>({...e,...s})})(on||(on={}));const A=X.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),We=t=>{switch(typeof t){case"undefined":return A.undefined;case"string":return A.string;case"number":return Number.isNaN(t)?A.nan:A.number;case"boolean":return A.boolean;case"function":return A.function;case"bigint":return A.bigint;case"symbol":return A.symbol;case"object":return Array.isArray(t)?A.array:t===null?A.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?A.promise:typeof Map<"u"&&t instanceof Map?A.map:typeof Set<"u"&&t instanceof Set?A.set:typeof Date<"u"&&t instanceof Date?A.date:A.object;default:return A.unknown}},v=X.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Me extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=e}format(e){const s=e||function(r){return r.message},n={_errors:[]},a=r=>{for(const i of r.issues)if(i.code==="invalid_union")i.unionErrors.map(a);else if(i.code==="invalid_return_type")a(i.returnTypeError);else if(i.code==="invalid_arguments")a(i.argumentsError);else if(i.path.length===0)n._errors.push(s(i));else{let l=n,u=0;for(;u<i.path.length;){const c=i.path[u];u===i.path.length-1?(l[c]=l[c]||{_errors:[]},l[c]._errors.push(s(i))):l[c]=l[c]||{_errors:[]},l=l[c],u++}}};return a(this),n}static assert(e){if(!(e instanceof Me))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,X.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=s=>s.message){const s={},n=[];for(const a of this.issues)if(a.path.length>0){const r=a.path[0];s[r]=s[r]||[],s[r].push(e(a))}else n.push(e(a));return{formErrors:n,fieldErrors:s}}get formErrors(){return this.flatten()}}Me.create=t=>new Me(t);const Ns=(t,e)=>{let s;switch(t.code){case v.invalid_type:t.received===A.undefined?s="Required":s=`Expected ${t.expected}, received ${t.received}`;break;case v.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(t.expected,X.jsonStringifyReplacer)}`;break;case v.unrecognized_keys:s=`Unrecognized key(s) in object: ${X.joinValues(t.keys,", ")}`;break;case v.invalid_union:s="Invalid input";break;case v.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${X.joinValues(t.options)}`;break;case v.invalid_enum_value:s=`Invalid enum value. Expected ${X.joinValues(t.options)}, received '${t.received}'`;break;case v.invalid_arguments:s="Invalid function arguments";break;case v.invalid_return_type:s="Invalid function return type";break;case v.invalid_date:s="Invalid date";break;case v.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(s=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(s=`${s} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?s=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?s=`Invalid input: must end with "${t.validation.endsWith}"`:X.assertNever(t.validation):t.validation!=="regex"?s=`Invalid ${t.validation}`:s="Invalid";break;case v.too_small:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?s=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:s="Invalid input";break;case v.too_big:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?s=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:s="Invalid input";break;case v.custom:s="Invalid input";break;case v.invalid_intersection_types:s="Intersection results could not be merged";break;case v.not_multiple_of:s=`Number must be a multiple of ${t.multipleOf}`;break;case v.not_finite:s="Number must be finite";break;default:s=e.defaultError,X.assertNever(t)}return{message:s}};let to=Ns;function so(){return to}const no=t=>{const{data:e,path:s,errorMaps:n,issueData:a}=t,r=[...s,...a.path||[]],i={...a,path:r};if(a.message!==void 0)return{...a,path:r,message:a.message};let l="";const u=n.filter(c=>!!c).slice().reverse();for(const c of u)l=c(i,{data:e,defaultError:l}).message;return{...a,path:r,message:l}};function k(t,e){const s=so(),n=no({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,s,s===Ns?void 0:Ns].filter(a=>!!a)});t.common.issues.push(n)}class _e{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,s){const n=[];for(const a of s){if(a.status==="aborted")return F;a.status==="dirty"&&e.dirty(),n.push(a.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,s){const n=[];for(const a of s){const r=await a.key,i=await a.value;n.push({key:r,value:i})}return _e.mergeObjectSync(e,n)}static mergeObjectSync(e,s){const n={};for(const a of s){const{key:r,value:i}=a;if(r.status==="aborted"||i.status==="aborted")return F;r.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),r.value!=="__proto__"&&(typeof i.value<"u"||a.alwaysSet)&&(n[r.value]=i.value)}return{status:e.value,value:n}}}const F=Object.freeze({status:"aborted"}),Rt=t=>({status:"dirty",value:t}),ke=t=>({status:"valid",value:t}),ln=t=>t.status==="aborted",cn=t=>t.status==="dirty",ft=t=>t.status==="valid",Yt=t=>typeof Promise<"u"&&t instanceof Promise;var D;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(D||(D={}));class Ke{constructor(e,s,n,a){this._cachedPath=[],this.parent=e,this.data=s,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const dn=(t,e)=>{if(ft(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const s=new Me(t.common.issues);return this._error=s,this._error}}};function Z(t){if(!t)return{};const{errorMap:e,invalid_type_error:s,required_error:n,description:a}=t;if(e&&(s||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(i,l)=>{const{message:u}=t;return i.code==="invalid_enum_value"?{message:u??l.defaultError}:typeof l.data>"u"?{message:u??n??l.defaultError}:i.code!=="invalid_type"?{message:l.defaultError}:{message:u??s??l.defaultError}},description:a}}class J{get description(){return this._def.description}_getType(e){return We(e.data)}_getOrReturnCtx(e,s){return s||{common:e.parent.common,data:e.data,parsedType:We(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new _e,ctx:{common:e.parent.common,data:e.data,parsedType:We(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const s=this._parse(e);if(Yt(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(e){const s=this._parse(e);return Promise.resolve(s)}parse(e,s){const n=this.safeParse(e,s);if(n.success)return n.data;throw n.error}safeParse(e,s){const n={common:{issues:[],async:(s==null?void 0:s.async)??!1,contextualErrorMap:s==null?void 0:s.errorMap},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:We(e)},a=this._parseSync({data:e,path:n.path,parent:n});return dn(n,a)}"~validate"(e){var n,a;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:We(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:s});return ft(r)?{value:r.value}:{issues:s.common.issues}}catch(r){(a=(n=r==null?void 0:r.message)==null?void 0:n.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(r=>ft(r)?{value:r.value}:{issues:s.common.issues})}async parseAsync(e,s){const n=await this.safeParseAsync(e,s);if(n.success)return n.data;throw n.error}async safeParseAsync(e,s){const n={common:{issues:[],contextualErrorMap:s==null?void 0:s.errorMap,async:!0},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:We(e)},a=this._parse({data:e,path:n.path,parent:n}),r=await(Yt(a)?a:Promise.resolve(a));return dn(n,r)}refine(e,s){const n=a=>typeof s=="string"||typeof s>"u"?{message:s}:typeof s=="function"?s(a):s;return this._refinement((a,r)=>{const i=e(a),l=()=>r.addIssue({code:v.custom,...n(a)});return typeof Promise<"u"&&i instanceof Promise?i.then(u=>u?!0:(l(),!1)):i?!0:(l(),!1)})}refinement(e,s){return this._refinement((n,a)=>e(n)?!0:(a.addIssue(typeof s=="function"?s(n,a):s),!1))}_refinement(e){return new mt({schema:this,typeName:U.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s=>this["~validate"](s)}}optional(){return qe.create(this,this._def)}nullable(){return pt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Pe.create(this)}promise(){return ss.create(this,this._def)}or(e){return es.create([this,e],this._def)}and(e){return ts.create(this,e,this._def)}transform(e){return new mt({...Z(this._def),schema:this,typeName:U.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const s=typeof e=="function"?e:()=>e;return new Ss({...Z(this._def),innerType:this,defaultValue:s,typeName:U.ZodDefault})}brand(){return new Co({typeName:U.ZodBranded,type:this,...Z(this._def)})}catch(e){const s=typeof e=="function"?e:()=>e;return new ks({...Z(this._def),innerType:this,catchValue:s,typeName:U.ZodCatch})}describe(e){const s=this.constructor;return new s({...this._def,description:e})}pipe(e){return Bs.create(this,e)}readonly(){return Cs.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ao=/^c[^\s-]{8,}$/i,ro=/^[0-9a-z]+$/,oo=/^[0-9A-HJKMNP-TV-Z]{26}$/i,io=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,lo=/^[a-z0-9_-]{21}$/i,co=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,uo=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,fo=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ho="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let hs;const mo=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,po=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,go=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,xo=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,yo=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,bo=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Vn="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",vo=new RegExp(`^${Vn}$`);function Wn(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const s=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${s}`}function wo(t){return new RegExp(`^${Wn(t)}$`)}function _o(t){let e=`${Vn}T${Wn(t)}`;const s=[];return s.push(t.local?"Z?":"Z"),t.offset&&s.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${s.join("|")})`,new RegExp(`^${e}$`)}function No(t,e){return!!((e==="v4"||!e)&&mo.test(t)||(e==="v6"||!e)&&go.test(t))}function jo(t,e){if(!co.test(t))return!1;try{const[s]=t.split(".");if(!s)return!1;const n=s.replace(/-/g,"+").replace(/_/g,"/").padEnd(s.length+(4-s.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||e&&a.alg!==e)}catch{return!1}}function So(t,e){return!!((e==="v4"||!e)&&po.test(t)||(e==="v6"||!e)&&xo.test(t))}class He extends J{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==A.string){const r=this._getOrReturnCtx(e);return k(r,{code:v.invalid_type,expected:A.string,received:r.parsedType}),F}const n=new _e;let a;for(const r of this._def.checks)if(r.kind==="min")e.data.length<r.value&&(a=this._getOrReturnCtx(e,a),k(a,{code:v.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),n.dirty());else if(r.kind==="max")e.data.length>r.value&&(a=this._getOrReturnCtx(e,a),k(a,{code:v.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),n.dirty());else if(r.kind==="length"){const i=e.data.length>r.value,l=e.data.length<r.value;(i||l)&&(a=this._getOrReturnCtx(e,a),i?k(a,{code:v.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):l&&k(a,{code:v.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),n.dirty())}else if(r.kind==="email")fo.test(e.data)||(a=this._getOrReturnCtx(e,a),k(a,{validation:"email",code:v.invalid_string,message:r.message}),n.dirty());else if(r.kind==="emoji")hs||(hs=new RegExp(ho,"u")),hs.test(e.data)||(a=this._getOrReturnCtx(e,a),k(a,{validation:"emoji",code:v.invalid_string,message:r.message}),n.dirty());else if(r.kind==="uuid")io.test(e.data)||(a=this._getOrReturnCtx(e,a),k(a,{validation:"uuid",code:v.invalid_string,message:r.message}),n.dirty());else if(r.kind==="nanoid")lo.test(e.data)||(a=this._getOrReturnCtx(e,a),k(a,{validation:"nanoid",code:v.invalid_string,message:r.message}),n.dirty());else if(r.kind==="cuid")ao.test(e.data)||(a=this._getOrReturnCtx(e,a),k(a,{validation:"cuid",code:v.invalid_string,message:r.message}),n.dirty());else if(r.kind==="cuid2")ro.test(e.data)||(a=this._getOrReturnCtx(e,a),k(a,{validation:"cuid2",code:v.invalid_string,message:r.message}),n.dirty());else if(r.kind==="ulid")oo.test(e.data)||(a=this._getOrReturnCtx(e,a),k(a,{validation:"ulid",code:v.invalid_string,message:r.message}),n.dirty());else if(r.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),k(a,{validation:"url",code:v.invalid_string,message:r.message}),n.dirty()}else r.kind==="regex"?(r.regex.lastIndex=0,r.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),k(a,{validation:"regex",code:v.invalid_string,message:r.message}),n.dirty())):r.kind==="trim"?e.data=e.data.trim():r.kind==="includes"?e.data.includes(r.value,r.position)||(a=this._getOrReturnCtx(e,a),k(a,{code:v.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),n.dirty()):r.kind==="toLowerCase"?e.data=e.data.toLowerCase():r.kind==="toUpperCase"?e.data=e.data.toUpperCase():r.kind==="startsWith"?e.data.startsWith(r.value)||(a=this._getOrReturnCtx(e,a),k(a,{code:v.invalid_string,validation:{startsWith:r.value},message:r.message}),n.dirty()):r.kind==="endsWith"?e.data.endsWith(r.value)||(a=this._getOrReturnCtx(e,a),k(a,{code:v.invalid_string,validation:{endsWith:r.value},message:r.message}),n.dirty()):r.kind==="datetime"?_o(r).test(e.data)||(a=this._getOrReturnCtx(e,a),k(a,{code:v.invalid_string,validation:"datetime",message:r.message}),n.dirty()):r.kind==="date"?vo.test(e.data)||(a=this._getOrReturnCtx(e,a),k(a,{code:v.invalid_string,validation:"date",message:r.message}),n.dirty()):r.kind==="time"?wo(r).test(e.data)||(a=this._getOrReturnCtx(e,a),k(a,{code:v.invalid_string,validation:"time",message:r.message}),n.dirty()):r.kind==="duration"?uo.test(e.data)||(a=this._getOrReturnCtx(e,a),k(a,{validation:"duration",code:v.invalid_string,message:r.message}),n.dirty()):r.kind==="ip"?No(e.data,r.version)||(a=this._getOrReturnCtx(e,a),k(a,{validation:"ip",code:v.invalid_string,message:r.message}),n.dirty()):r.kind==="jwt"?jo(e.data,r.alg)||(a=this._getOrReturnCtx(e,a),k(a,{validation:"jwt",code:v.invalid_string,message:r.message}),n.dirty()):r.kind==="cidr"?So(e.data,r.version)||(a=this._getOrReturnCtx(e,a),k(a,{validation:"cidr",code:v.invalid_string,message:r.message}),n.dirty()):r.kind==="base64"?yo.test(e.data)||(a=this._getOrReturnCtx(e,a),k(a,{validation:"base64",code:v.invalid_string,message:r.message}),n.dirty()):r.kind==="base64url"?bo.test(e.data)||(a=this._getOrReturnCtx(e,a),k(a,{validation:"base64url",code:v.invalid_string,message:r.message}),n.dirty()):X.assertNever(r);return{status:n.value,value:e.data}}_regex(e,s,n){return this.refinement(a=>e.test(a),{validation:s,code:v.invalid_string,...D.errToObj(n)})}_addCheck(e){return new He({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...D.errToObj(e)})}url(e){return this._addCheck({kind:"url",...D.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...D.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...D.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...D.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...D.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...D.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...D.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...D.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...D.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...D.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...D.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...D.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...D.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...D.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...D.errToObj(e)})}regex(e,s){return this._addCheck({kind:"regex",regex:e,...D.errToObj(s)})}includes(e,s){return this._addCheck({kind:"includes",value:e,position:s==null?void 0:s.position,...D.errToObj(s==null?void 0:s.message)})}startsWith(e,s){return this._addCheck({kind:"startsWith",value:e,...D.errToObj(s)})}endsWith(e,s){return this._addCheck({kind:"endsWith",value:e,...D.errToObj(s)})}min(e,s){return this._addCheck({kind:"min",value:e,...D.errToObj(s)})}max(e,s){return this._addCheck({kind:"max",value:e,...D.errToObj(s)})}length(e,s){return this._addCheck({kind:"length",value:e,...D.errToObj(s)})}nonempty(e){return this.min(1,D.errToObj(e))}trim(){return new He({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new He({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new He({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxLength(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}He.create=t=>new He({checks:[],typeName:U.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Z(t)});function ko(t,e){const s=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,a=s>n?s:n,r=Number.parseInt(t.toFixed(a).replace(".","")),i=Number.parseInt(e.toFixed(a).replace(".",""));return r%i/10**a}class Lt extends J{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==A.number){const r=this._getOrReturnCtx(e);return k(r,{code:v.invalid_type,expected:A.number,received:r.parsedType}),F}let n;const a=new _e;for(const r of this._def.checks)r.kind==="int"?X.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),k(n,{code:v.invalid_type,expected:"integer",received:"float",message:r.message}),a.dirty()):r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(n=this._getOrReturnCtx(e,n),k(n,{code:v.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),a.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(n=this._getOrReturnCtx(e,n),k(n,{code:v.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),a.dirty()):r.kind==="multipleOf"?ko(e.data,r.value)!==0&&(n=this._getOrReturnCtx(e,n),k(n,{code:v.not_multiple_of,multipleOf:r.value,message:r.message}),a.dirty()):r.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),k(n,{code:v.not_finite,message:r.message}),a.dirty()):X.assertNever(r);return{status:a.value,value:e.data}}gte(e,s){return this.setLimit("min",e,!0,D.toString(s))}gt(e,s){return this.setLimit("min",e,!1,D.toString(s))}lte(e,s){return this.setLimit("max",e,!0,D.toString(s))}lt(e,s){return this.setLimit("max",e,!1,D.toString(s))}setLimit(e,s,n,a){return new Lt({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:n,message:D.toString(a)}]})}_addCheck(e){return new Lt({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:D.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:D.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:D.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:D.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:D.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:D.toString(s)})}finite(e){return this._addCheck({kind:"finite",message:D.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:D.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:D.toString(e)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&X.isInteger(e.value))}get isFinite(){let e=null,s=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(s===null||n.value>s)&&(s=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(s)&&Number.isFinite(e)}}Lt.create=t=>new Lt({checks:[],typeName:U.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Z(t)});class Bt extends J{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==A.bigint)return this._getInvalidInput(e);let n;const a=new _e;for(const r of this._def.checks)r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(n=this._getOrReturnCtx(e,n),k(n,{code:v.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),a.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(n=this._getOrReturnCtx(e,n),k(n,{code:v.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),a.dirty()):r.kind==="multipleOf"?e.data%r.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),k(n,{code:v.not_multiple_of,multipleOf:r.value,message:r.message}),a.dirty()):X.assertNever(r);return{status:a.value,value:e.data}}_getInvalidInput(e){const s=this._getOrReturnCtx(e);return k(s,{code:v.invalid_type,expected:A.bigint,received:s.parsedType}),F}gte(e,s){return this.setLimit("min",e,!0,D.toString(s))}gt(e,s){return this.setLimit("min",e,!1,D.toString(s))}lte(e,s){return this.setLimit("max",e,!0,D.toString(s))}lt(e,s){return this.setLimit("max",e,!1,D.toString(s))}setLimit(e,s,n,a){return new Bt({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:n,message:D.toString(a)}]})}_addCheck(e){return new Bt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:D.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:D.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:D.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:D.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:D.toString(s)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}Bt.create=t=>new Bt({checks:[],typeName:U.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Z(t)});class un extends J{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==A.boolean){const n=this._getOrReturnCtx(e);return k(n,{code:v.invalid_type,expected:A.boolean,received:n.parsedType}),F}return ke(e.data)}}un.create=t=>new un({typeName:U.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Z(t)});class Xt extends J{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==A.date){const r=this._getOrReturnCtx(e);return k(r,{code:v.invalid_type,expected:A.date,received:r.parsedType}),F}if(Number.isNaN(e.data.getTime())){const r=this._getOrReturnCtx(e);return k(r,{code:v.invalid_date}),F}const n=new _e;let a;for(const r of this._def.checks)r.kind==="min"?e.data.getTime()<r.value&&(a=this._getOrReturnCtx(e,a),k(a,{code:v.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),n.dirty()):r.kind==="max"?e.data.getTime()>r.value&&(a=this._getOrReturnCtx(e,a),k(a,{code:v.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),n.dirty()):X.assertNever(r);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Xt({...this._def,checks:[...this._def.checks,e]})}min(e,s){return this._addCheck({kind:"min",value:e.getTime(),message:D.toString(s)})}max(e,s){return this._addCheck({kind:"max",value:e.getTime(),message:D.toString(s)})}get minDate(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e!=null?new Date(e):null}}Xt.create=t=>new Xt({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:U.ZodDate,...Z(t)});class fn extends J{_parse(e){if(this._getType(e)!==A.symbol){const n=this._getOrReturnCtx(e);return k(n,{code:v.invalid_type,expected:A.symbol,received:n.parsedType}),F}return ke(e.data)}}fn.create=t=>new fn({typeName:U.ZodSymbol,...Z(t)});class hn extends J{_parse(e){if(this._getType(e)!==A.undefined){const n=this._getOrReturnCtx(e);return k(n,{code:v.invalid_type,expected:A.undefined,received:n.parsedType}),F}return ke(e.data)}}hn.create=t=>new hn({typeName:U.ZodUndefined,...Z(t)});class mn extends J{_parse(e){if(this._getType(e)!==A.null){const n=this._getOrReturnCtx(e);return k(n,{code:v.invalid_type,expected:A.null,received:n.parsedType}),F}return ke(e.data)}}mn.create=t=>new mn({typeName:U.ZodNull,...Z(t)});class pn extends J{constructor(){super(...arguments),this._any=!0}_parse(e){return ke(e.data)}}pn.create=t=>new pn({typeName:U.ZodAny,...Z(t)});class gn extends J{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ke(e.data)}}gn.create=t=>new gn({typeName:U.ZodUnknown,...Z(t)});class Ge extends J{_parse(e){const s=this._getOrReturnCtx(e);return k(s,{code:v.invalid_type,expected:A.never,received:s.parsedType}),F}}Ge.create=t=>new Ge({typeName:U.ZodNever,...Z(t)});class xn extends J{_parse(e){if(this._getType(e)!==A.undefined){const n=this._getOrReturnCtx(e);return k(n,{code:v.invalid_type,expected:A.void,received:n.parsedType}),F}return ke(e.data)}}xn.create=t=>new xn({typeName:U.ZodVoid,...Z(t)});class Pe extends J{_parse(e){const{ctx:s,status:n}=this._processInputParams(e),a=this._def;if(s.parsedType!==A.array)return k(s,{code:v.invalid_type,expected:A.array,received:s.parsedType}),F;if(a.exactLength!==null){const i=s.data.length>a.exactLength.value,l=s.data.length<a.exactLength.value;(i||l)&&(k(s,{code:i?v.too_big:v.too_small,minimum:l?a.exactLength.value:void 0,maximum:i?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&s.data.length<a.minLength.value&&(k(s,{code:v.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&s.data.length>a.maxLength.value&&(k(s,{code:v.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),s.common.async)return Promise.all([...s.data].map((i,l)=>a.type._parseAsync(new Ke(s,i,s.path,l)))).then(i=>_e.mergeArray(n,i));const r=[...s.data].map((i,l)=>a.type._parseSync(new Ke(s,i,s.path,l)));return _e.mergeArray(n,r)}get element(){return this._def.type}min(e,s){return new Pe({...this._def,minLength:{value:e,message:D.toString(s)}})}max(e,s){return new Pe({...this._def,maxLength:{value:e,message:D.toString(s)}})}length(e,s){return new Pe({...this._def,exactLength:{value:e,message:D.toString(s)}})}nonempty(e){return this.min(1,e)}}Pe.create=(t,e)=>new Pe({type:t,minLength:null,maxLength:null,exactLength:null,typeName:U.ZodArray,...Z(e)});function dt(t){if(t instanceof ce){const e={};for(const s in t.shape){const n=t.shape[s];e[s]=qe.create(dt(n))}return new ce({...t._def,shape:()=>e})}else return t instanceof Pe?new Pe({...t._def,type:dt(t.element)}):t instanceof qe?qe.create(dt(t.unwrap())):t instanceof pt?pt.create(dt(t.unwrap())):t instanceof nt?nt.create(t.items.map(e=>dt(e))):t}class ce extends J{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),s=X.objectKeys(e);return this._cached={shape:e,keys:s},this._cached}_parse(e){if(this._getType(e)!==A.object){const c=this._getOrReturnCtx(e);return k(c,{code:v.invalid_type,expected:A.object,received:c.parsedType}),F}const{status:n,ctx:a}=this._processInputParams(e),{shape:r,keys:i}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ge&&this._def.unknownKeys==="strip"))for(const c in a.data)i.includes(c)||l.push(c);const u=[];for(const c of i){const f=r[c],d=a.data[c];u.push({key:{status:"valid",value:c},value:f._parse(new Ke(a,d,a.path,c)),alwaysSet:c in a.data})}if(this._def.catchall instanceof Ge){const c=this._def.unknownKeys;if(c==="passthrough")for(const f of l)u.push({key:{status:"valid",value:f},value:{status:"valid",value:a.data[f]}});else if(c==="strict")l.length>0&&(k(a,{code:v.unrecognized_keys,keys:l}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const f of l){const d=a.data[f];u.push({key:{status:"valid",value:f},value:c._parse(new Ke(a,d,a.path,f)),alwaysSet:f in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const c=[];for(const f of u){const d=await f.key,m=await f.value;c.push({key:d,value:m,alwaysSet:f.alwaysSet})}return c}).then(c=>_e.mergeObjectSync(n,c)):_e.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return D.errToObj,new ce({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(s,n)=>{var r,i;const a=((i=(r=this._def).errorMap)==null?void 0:i.call(r,s,n).message)??n.defaultError;return s.code==="unrecognized_keys"?{message:D.errToObj(e).message??a}:{message:a}}}:{}})}strip(){return new ce({...this._def,unknownKeys:"strip"})}passthrough(){return new ce({...this._def,unknownKeys:"passthrough"})}extend(e){return new ce({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ce({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:U.ZodObject})}setKey(e,s){return this.augment({[e]:s})}catchall(e){return new ce({...this._def,catchall:e})}pick(e){const s={};for(const n of X.objectKeys(e))e[n]&&this.shape[n]&&(s[n]=this.shape[n]);return new ce({...this._def,shape:()=>s})}omit(e){const s={};for(const n of X.objectKeys(this.shape))e[n]||(s[n]=this.shape[n]);return new ce({...this._def,shape:()=>s})}deepPartial(){return dt(this)}partial(e){const s={};for(const n of X.objectKeys(this.shape)){const a=this.shape[n];e&&!e[n]?s[n]=a:s[n]=a.optional()}return new ce({...this._def,shape:()=>s})}required(e){const s={};for(const n of X.objectKeys(this.shape))if(e&&!e[n])s[n]=this.shape[n];else{let r=this.shape[n];for(;r instanceof qe;)r=r._def.innerType;s[n]=r}return new ce({...this._def,shape:()=>s})}keyof(){return Zn(X.objectKeys(this.shape))}}ce.create=(t,e)=>new ce({shape:()=>t,unknownKeys:"strip",catchall:Ge.create(),typeName:U.ZodObject,...Z(e)});ce.strictCreate=(t,e)=>new ce({shape:()=>t,unknownKeys:"strict",catchall:Ge.create(),typeName:U.ZodObject,...Z(e)});ce.lazycreate=(t,e)=>new ce({shape:t,unknownKeys:"strip",catchall:Ge.create(),typeName:U.ZodObject,...Z(e)});class es extends J{_parse(e){const{ctx:s}=this._processInputParams(e),n=this._def.options;function a(r){for(const l of r)if(l.result.status==="valid")return l.result;for(const l of r)if(l.result.status==="dirty")return s.common.issues.push(...l.ctx.common.issues),l.result;const i=r.map(l=>new Me(l.ctx.common.issues));return k(s,{code:v.invalid_union,unionErrors:i}),F}if(s.common.async)return Promise.all(n.map(async r=>{const i={...s,common:{...s.common,issues:[]},parent:null};return{result:await r._parseAsync({data:s.data,path:s.path,parent:i}),ctx:i}})).then(a);{let r;const i=[];for(const u of n){const c={...s,common:{...s.common,issues:[]},parent:null},f=u._parseSync({data:s.data,path:s.path,parent:c});if(f.status==="valid")return f;f.status==="dirty"&&!r&&(r={result:f,ctx:c}),c.common.issues.length&&i.push(c.common.issues)}if(r)return s.common.issues.push(...r.ctx.common.issues),r.result;const l=i.map(u=>new Me(u));return k(s,{code:v.invalid_union,unionErrors:l}),F}}get options(){return this._def.options}}es.create=(t,e)=>new es({options:t,typeName:U.ZodUnion,...Z(e)});function js(t,e){const s=We(t),n=We(e);if(t===e)return{valid:!0,data:t};if(s===A.object&&n===A.object){const a=X.objectKeys(e),r=X.objectKeys(t).filter(l=>a.indexOf(l)!==-1),i={...t,...e};for(const l of r){const u=js(t[l],e[l]);if(!u.valid)return{valid:!1};i[l]=u.data}return{valid:!0,data:i}}else if(s===A.array&&n===A.array){if(t.length!==e.length)return{valid:!1};const a=[];for(let r=0;r<t.length;r++){const i=t[r],l=e[r],u=js(i,l);if(!u.valid)return{valid:!1};a.push(u.data)}return{valid:!0,data:a}}else return s===A.date&&n===A.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class ts extends J{_parse(e){const{status:s,ctx:n}=this._processInputParams(e),a=(r,i)=>{if(ln(r)||ln(i))return F;const l=js(r.value,i.value);return l.valid?((cn(r)||cn(i))&&s.dirty(),{status:s.value,value:l.data}):(k(n,{code:v.invalid_intersection_types}),F)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([r,i])=>a(r,i)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}ts.create=(t,e,s)=>new ts({left:t,right:e,typeName:U.ZodIntersection,...Z(s)});class nt extends J{_parse(e){const{status:s,ctx:n}=this._processInputParams(e);if(n.parsedType!==A.array)return k(n,{code:v.invalid_type,expected:A.array,received:n.parsedType}),F;if(n.data.length<this._def.items.length)return k(n,{code:v.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),F;!this._def.rest&&n.data.length>this._def.items.length&&(k(n,{code:v.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const r=[...n.data].map((i,l)=>{const u=this._def.items[l]||this._def.rest;return u?u._parse(new Ke(n,i,n.path,l)):null}).filter(i=>!!i);return n.common.async?Promise.all(r).then(i=>_e.mergeArray(s,i)):_e.mergeArray(s,r)}get items(){return this._def.items}rest(e){return new nt({...this._def,rest:e})}}nt.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new nt({items:t,typeName:U.ZodTuple,rest:null,...Z(e)})};class yn extends J{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:s,ctx:n}=this._processInputParams(e);if(n.parsedType!==A.map)return k(n,{code:v.invalid_type,expected:A.map,received:n.parsedType}),F;const a=this._def.keyType,r=this._def.valueType,i=[...n.data.entries()].map(([l,u],c)=>({key:a._parse(new Ke(n,l,n.path,[c,"key"])),value:r._parse(new Ke(n,u,n.path,[c,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const u of i){const c=await u.key,f=await u.value;if(c.status==="aborted"||f.status==="aborted")return F;(c.status==="dirty"||f.status==="dirty")&&s.dirty(),l.set(c.value,f.value)}return{status:s.value,value:l}})}else{const l=new Map;for(const u of i){const c=u.key,f=u.value;if(c.status==="aborted"||f.status==="aborted")return F;(c.status==="dirty"||f.status==="dirty")&&s.dirty(),l.set(c.value,f.value)}return{status:s.value,value:l}}}}yn.create=(t,e,s)=>new yn({valueType:e,keyType:t,typeName:U.ZodMap,...Z(s)});class Mt extends J{_parse(e){const{status:s,ctx:n}=this._processInputParams(e);if(n.parsedType!==A.set)return k(n,{code:v.invalid_type,expected:A.set,received:n.parsedType}),F;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(k(n,{code:v.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),s.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(k(n,{code:v.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),s.dirty());const r=this._def.valueType;function i(u){const c=new Set;for(const f of u){if(f.status==="aborted")return F;f.status==="dirty"&&s.dirty(),c.add(f.value)}return{status:s.value,value:c}}const l=[...n.data.values()].map((u,c)=>r._parse(new Ke(n,u,n.path,c)));return n.common.async?Promise.all(l).then(u=>i(u)):i(l)}min(e,s){return new Mt({...this._def,minSize:{value:e,message:D.toString(s)}})}max(e,s){return new Mt({...this._def,maxSize:{value:e,message:D.toString(s)}})}size(e,s){return this.min(e,s).max(e,s)}nonempty(e){return this.min(1,e)}}Mt.create=(t,e)=>new Mt({valueType:t,minSize:null,maxSize:null,typeName:U.ZodSet,...Z(e)});class bn extends J{get schema(){return this._def.getter()}_parse(e){const{ctx:s}=this._processInputParams(e);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}bn.create=(t,e)=>new bn({getter:t,typeName:U.ZodLazy,...Z(e)});class vn extends J{_parse(e){if(e.data!==this._def.value){const s=this._getOrReturnCtx(e);return k(s,{received:s.data,code:v.invalid_literal,expected:this._def.value}),F}return{status:"valid",value:e.data}}get value(){return this._def.value}}vn.create=(t,e)=>new vn({value:t,typeName:U.ZodLiteral,...Z(e)});function Zn(t,e){return new ht({values:t,typeName:U.ZodEnum,...Z(e)})}class ht extends J{_parse(e){if(typeof e.data!="string"){const s=this._getOrReturnCtx(e),n=this._def.values;return k(s,{expected:X.joinValues(n),received:s.parsedType,code:v.invalid_type}),F}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const s=this._getOrReturnCtx(e),n=this._def.values;return k(s,{received:s.data,code:v.invalid_enum_value,options:n}),F}return ke(e.data)}get options(){return this._def.values}get enum(){const e={};for(const s of this._def.values)e[s]=s;return e}get Values(){const e={};for(const s of this._def.values)e[s]=s;return e}get Enum(){const e={};for(const s of this._def.values)e[s]=s;return e}extract(e,s=this._def){return ht.create(e,{...this._def,...s})}exclude(e,s=this._def){return ht.create(this.options.filter(n=>!e.includes(n)),{...this._def,...s})}}ht.create=Zn;class wn extends J{_parse(e){const s=X.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==A.string&&n.parsedType!==A.number){const a=X.objectValues(s);return k(n,{expected:X.joinValues(a),received:n.parsedType,code:v.invalid_type}),F}if(this._cache||(this._cache=new Set(X.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const a=X.objectValues(s);return k(n,{received:n.data,code:v.invalid_enum_value,options:a}),F}return ke(e.data)}get enum(){return this._def.values}}wn.create=(t,e)=>new wn({values:t,typeName:U.ZodNativeEnum,...Z(e)});class ss extends J{unwrap(){return this._def.type}_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==A.promise&&s.common.async===!1)return k(s,{code:v.invalid_type,expected:A.promise,received:s.parsedType}),F;const n=s.parsedType===A.promise?s.data:Promise.resolve(s.data);return ke(n.then(a=>this._def.type.parseAsync(a,{path:s.path,errorMap:s.common.contextualErrorMap})))}}ss.create=(t,e)=>new ss({type:t,typeName:U.ZodPromise,...Z(e)});class mt extends J{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===U.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:s,ctx:n}=this._processInputParams(e),a=this._def.effect||null,r={addIssue:i=>{k(n,i),i.fatal?s.abort():s.dirty()},get path(){return n.path}};if(r.addIssue=r.addIssue.bind(r),a.type==="preprocess"){const i=a.transform(n.data,r);if(n.common.async)return Promise.resolve(i).then(async l=>{if(s.value==="aborted")return F;const u=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return u.status==="aborted"?F:u.status==="dirty"||s.value==="dirty"?Rt(u.value):u});{if(s.value==="aborted")return F;const l=this._def.schema._parseSync({data:i,path:n.path,parent:n});return l.status==="aborted"?F:l.status==="dirty"||s.value==="dirty"?Rt(l.value):l}}if(a.type==="refinement"){const i=l=>{const u=a.refinement(l,r);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?F:(l.status==="dirty"&&s.dirty(),i(l.value),{status:s.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?F:(l.status==="dirty"&&s.dirty(),i(l.value).then(()=>({status:s.value,value:l.value}))))}if(a.type==="transform")if(n.common.async===!1){const i=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ft(i))return F;const l=a.transform(i.value,r);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(i=>ft(i)?Promise.resolve(a.transform(i.value,r)).then(l=>({status:s.value,value:l})):F);X.assertNever(a)}}mt.create=(t,e,s)=>new mt({schema:t,typeName:U.ZodEffects,effect:e,...Z(s)});mt.createWithPreprocess=(t,e,s)=>new mt({schema:e,effect:{type:"preprocess",transform:t},typeName:U.ZodEffects,...Z(s)});class qe extends J{_parse(e){return this._getType(e)===A.undefined?ke(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}qe.create=(t,e)=>new qe({innerType:t,typeName:U.ZodOptional,...Z(e)});class pt extends J{_parse(e){return this._getType(e)===A.null?ke(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}pt.create=(t,e)=>new pt({innerType:t,typeName:U.ZodNullable,...Z(e)});class Ss extends J{_parse(e){const{ctx:s}=this._processInputParams(e);let n=s.data;return s.parsedType===A.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}Ss.create=(t,e)=>new Ss({innerType:t,typeName:U.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Z(e)});class ks extends J{_parse(e){const{ctx:s}=this._processInputParams(e),n={...s,common:{...s.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Yt(a)?a.then(r=>({status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Me(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Me(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}ks.create=(t,e)=>new ks({innerType:t,typeName:U.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Z(e)});class _n extends J{_parse(e){if(this._getType(e)!==A.nan){const n=this._getOrReturnCtx(e);return k(n,{code:v.invalid_type,expected:A.nan,received:n.parsedType}),F}return{status:"valid",value:e.data}}}_n.create=t=>new _n({typeName:U.ZodNaN,...Z(t)});class Co extends J{_parse(e){const{ctx:s}=this._processInputParams(e),n=s.data;return this._def.type._parse({data:n,path:s.path,parent:s})}unwrap(){return this._def.type}}class Bs extends J{_parse(e){const{status:s,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const r=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return r.status==="aborted"?F:r.status==="dirty"?(s.dirty(),Rt(r.value)):this._def.out._parseAsync({data:r.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?F:a.status==="dirty"?(s.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(e,s){return new Bs({in:e,out:s,typeName:U.ZodPipeline})}}class Cs extends J{_parse(e){const s=this._def.innerType._parse(e),n=a=>(ft(a)&&(a.value=Object.freeze(a.value)),a);return Yt(s)?s.then(a=>n(a)):n(s)}unwrap(){return this._def.innerType}}Cs.create=(t,e)=>new Cs({innerType:t,typeName:U.ZodReadonly,...Z(e)});var U;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(U||(U={}));const Ht=He.create;Ge.create;Pe.create;const To=ce.create;es.create;ts.create;nt.create;ht.create;ss.create;qe.create;pt.create;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn="firebasestorage.googleapis.com",qn="storageBucket",Io=2*60*1e3,Eo=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie extends $s{constructor(e,s,n=0){super(ms(e),`Firebase Storage: ${s} (${ms(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ie.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ms(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var oe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(oe||(oe={}));function ms(t){return"storage/"+t}function Ms(){const t="An unknown error occurred, please check the error payload for server response.";return new ie(oe.UNKNOWN,t)}function Ro(t){return new ie(oe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Ao(t){return new ie(oe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Oo(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ie(oe.UNAUTHENTICATED,t)}function Do(){return new ie(oe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function $o(t){return new ie(oe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Po(){return new ie(oe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Lo(){return new ie(oe.CANCELED,"User canceled the upload/download.")}function Bo(t){return new ie(oe.INVALID_URL,"Invalid URL '"+t+"'.")}function Mo(t){return new ie(oe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Fo(){return new ie(oe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+qn+"' property when initializing the app?")}function Uo(){return new ie(oe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function zo(){return new ie(oe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Vo(t){return new ie(oe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ts(t){return new ie(oe.INVALID_ARGUMENT,t)}function Kn(){return new ie(oe.APP_DELETED,"The Firebase app was deleted.")}function Wo(t){return new ie(oe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function At(t,e){return new ie(oe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ct(t){throw new ie(oe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e,s){this.bucket=e,this.path_=s}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,s){let n;try{n=ve.makeFromUrl(e,s)}catch{return new ve(e,"")}if(n.path==="")return n;throw Mo(e)}static makeFromUrl(e,s){let n=null;const a="([A-Za-z0-9.\\-_]+)";function r(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const i="(/(.*))?$",l=new RegExp("^gs://"+a+i,"i"),u={bucket:1,path:3};function c(S){S.path_=decodeURIComponent(S.path)}const f="v[A-Za-z0-9_]+",d=s.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",g=new RegExp(`^https?://${d}/${f}/b/${a}/o${m}`,"i"),x={bucket:1,path:3},$=s===Hn?"(?:storage.googleapis.com|storage.cloud.google.com)":s,y="([^?#]*)",b=new RegExp(`^https?://${$}/${a}/${y}`,"i"),P=[{regex:l,indices:u,postModify:r},{regex:g,indices:x,postModify:c},{regex:b,indices:{bucket:1,path:2},postModify:c}];for(let S=0;S<P.length;S++){const T=P[S],_=T.regex.exec(e);if(_){const C=_[T.indices.bucket];let I=_[T.indices.path];I||(I=""),n=new ve(C,I),T.postModify(n);break}}if(n==null)throw Bo(e);return n}}class Zo{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(t,e,s){let n=1,a=null,r=null,i=!1,l=0;function u(){return l===2}let c=!1;function f(...y){c||(c=!0,e.apply(null,y))}function d(y){a=setTimeout(()=>{a=null,t(g,u())},y)}function m(){r&&clearTimeout(r)}function g(y,...b){if(c){m();return}if(y){m(),f.call(null,y,...b);return}if(u()||i){m(),f.call(null,y,...b);return}n<64&&(n*=2);let P;l===1?(l=2,P=0):P=(n+Math.random())*1e3,d(P)}let x=!1;function $(y){x||(x=!0,m(),!c&&(a!==null?(y||(l=2),clearTimeout(a),d(0)):y||(l=1)))}return d(0),r=setTimeout(()=>{i=!0,$(!0)},s),$}function qo(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(t){return t!==void 0}function Go(t){return typeof t=="object"&&!Array.isArray(t)}function Fs(t){return typeof t=="string"||t instanceof String}function Nn(t){return Us()&&t instanceof Blob}function Us(){return typeof Blob<"u"}function jn(t,e,s,n){if(n<e)throw Ts(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>s)throw Ts(`Invalid value for '${t}'. Expected ${s} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(t,e,s){let n=e;return s==null&&(n=`https://${e}`),`${s}://${n}/v0${t}`}function Gn(t){const e=encodeURIComponent;let s="?";for(const n in t)if(t.hasOwnProperty(n)){const a=e(n)+"="+e(t[n]);s=s+a+"&"}return s=s.slice(0,-1),s}var st;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(st||(st={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(t,e){const s=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,r=e.indexOf(t)!==-1;return s||a||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,s,n,a,r,i,l,u,c,f,d,m=!0,g=!1){this.url_=e,this.method_=s,this.headers_=n,this.body_=a,this.successCodes_=r,this.additionalRetryCodes_=i,this.callback_=l,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=f,this.connectionFactory_=d,this.retry=m,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,$)=>{this.resolve_=x,this.reject_=$,this.start_()})}start_(){const e=(n,a)=>{if(a){n(!1,new qt(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const i=l=>{const u=l.loaded,c=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&r.addUploadProgressListener(i),r.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(i),this.pendingConnection_=null;const l=r.getErrorCode()===st.NO_ERROR,u=r.getStatus();if(!l||Jo(u,this.additionalRetryCodes_)&&this.retry){const f=r.getErrorCode()===st.ABORT;n(!1,new qt(!1,null,f));return}const c=this.successCodes_.indexOf(u)!==-1;n(!0,new qt(c,r))})},s=(n,a)=>{const r=this.resolve_,i=this.reject_,l=a.connection;if(a.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());Ko(u)?r(u):r()}catch(u){i(u)}else if(l!==null){const u=Ms();u.serverResponse=l.getErrorText(),this.errorCallback_?i(this.errorCallback_(l,u)):i(u)}else if(a.canceled){const u=this.appDelete_?Kn():Lo();i(u)}else{const u=Po();i(u)}};this.canceled_?s(!1,new qt(!1,null,!0)):this.backoffId_=Ho(e,s,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&qo(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qt{constructor(e,s,n){this.wasSuccessCode=e,this.connection=s,this.canceled=!!n}}function Yo(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Xo(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function ei(t,e){e&&(t["X-Firebase-GMPID"]=e)}function ti(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function si(t,e,s,n,a,r,i=!0,l=!1){const u=Gn(t.urlParams),c=t.url+u,f=Object.assign({},t.headers);return ei(f,e),Yo(f,s),Xo(f,r),ti(f,n),new Qo(c,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,i,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function ai(...t){const e=ni();if(e!==void 0){const s=new e;for(let n=0;n<t.length;n++)s.append(t[n]);return s.getBlob()}else{if(Us())return new Blob(t);throw new ie(oe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function ri(t,e,s){return t.webkitSlice?t.webkitSlice(e,s):t.mozSlice?t.mozSlice(e,s):t.slice?t.slice(e,s):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(t){if(typeof atob>"u")throw Vo("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $e={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ps{constructor(e,s){this.data=e,this.contentType=s||null}}function ii(t,e){switch(t){case $e.RAW:return new ps(Jn(e));case $e.BASE64:case $e.BASE64URL:return new ps(Qn(t,e));case $e.DATA_URL:return new ps(ci(e),di(e))}throw Ms()}function Jn(t){const e=[];for(let s=0;s<t.length;s++){let n=t.charCodeAt(s);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(s<t.length-1&&(t.charCodeAt(s+1)&64512)===56320))e.push(239,191,189);else{const r=n,i=t.charCodeAt(++s);n=65536|(r&1023)<<10|i&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function li(t){let e;try{e=decodeURIComponent(t)}catch{throw At($e.DATA_URL,"Malformed data URL.")}return Jn(e)}function Qn(t,e){switch(t){case $e.BASE64:{const a=e.indexOf("-")!==-1,r=e.indexOf("_")!==-1;if(a||r)throw At(t,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case $e.BASE64URL:{const a=e.indexOf("+")!==-1,r=e.indexOf("/")!==-1;if(a||r)throw At(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let s;try{s=oi(e)}catch(a){throw a.message.includes("polyfill")?a:At(t,"Invalid character found")}const n=new Uint8Array(s.length);for(let a=0;a<s.length;a++)n[a]=s.charCodeAt(a);return n}class Yn{constructor(e){this.base64=!1,this.contentType=null;const s=e.match(/^data:([^,]+)?,/);if(s===null)throw At($e.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=s[1]||null;n!=null&&(this.base64=ui(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function ci(t){const e=new Yn(t);return e.base64?Qn($e.BASE64,e.rest):li(e.rest)}function di(t){return new Yn(t).contentType}function ui(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,s){let n=0,a="";Nn(e)?(this.data_=e,n=e.size,a=e.type):e instanceof ArrayBuffer?(s?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(s?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,s){if(Nn(this.data_)){const n=this.data_,a=ri(n,e,s);return a===null?null:new Ze(a)}else{const n=new Uint8Array(this.data_.buffer,e,s-e);return new Ze(n,!0)}}static getBlob(...e){if(Us()){const s=e.map(n=>n instanceof Ze?n.data_:n);return new Ze(ai.apply(null,s))}else{const s=e.map(i=>Fs(i)?ii($e.RAW,i).data:i.data_);let n=0;s.forEach(i=>{n+=i.byteLength});const a=new Uint8Array(n);let r=0;return s.forEach(i=>{for(let l=0;l<i.length;l++)a[r++]=i[l]}),new Ze(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(t){let e;try{e=JSON.parse(t)}catch{return null}return Go(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function hi(t,e){const s=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?s:t+"/"+s}function ea(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(t,e){return e}class ge{constructor(e,s,n,a){this.server=e,this.local=s||e,this.writable=!!n,this.xform=a||mi}}let Kt=null;function pi(t){return!Fs(t)||t.length<2?t:ea(t)}function ta(){if(Kt)return Kt;const t=[];t.push(new ge("bucket")),t.push(new ge("generation")),t.push(new ge("metageneration")),t.push(new ge("name","fullPath",!0));function e(r,i){return pi(i)}const s=new ge("name");s.xform=e,t.push(s);function n(r,i){return i!==void 0?Number(i):i}const a=new ge("size");return a.xform=n,t.push(a),t.push(new ge("timeCreated")),t.push(new ge("updated")),t.push(new ge("md5Hash",null,!0)),t.push(new ge("cacheControl",null,!0)),t.push(new ge("contentDisposition",null,!0)),t.push(new ge("contentEncoding",null,!0)),t.push(new ge("contentLanguage",null,!0)),t.push(new ge("contentType",null,!0)),t.push(new ge("metadata","customMetadata",!0)),Kt=t,Kt}function gi(t,e){function s(){const n=t.bucket,a=t.fullPath,r=new ve(n,a);return e._makeStorageReference(r)}Object.defineProperty(t,"ref",{get:s})}function xi(t,e,s){const n={};n.type="file";const a=s.length;for(let r=0;r<a;r++){const i=s[r];n[i.local]=i.xform(n,e[i.server])}return gi(n,t),n}function sa(t,e,s){const n=Xn(e);return n===null?null:xi(t,n,s)}function yi(t,e,s,n){const a=Xn(e);if(a===null||!Fs(a.downloadTokens))return null;const r=a.downloadTokens;if(r.length===0)return null;const i=encodeURIComponent;return r.split(",").map(c=>{const f=t.bucket,d=t.fullPath,m="/b/"+i(f)+"/o/"+i(d),g=zs(m,s,n),x=Gn({alt:"media",token:c});return g+x})[0]}function bi(t,e){const s={},n=e.length;for(let a=0;a<n;a++){const r=e[a];r.writable&&(s[r.server]=t[r.local])}return JSON.stringify(s)}class na{constructor(e,s,n,a){this.url=e,this.method=s,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(t){if(!t)throw Ms()}function vi(t,e){function s(n,a){const r=sa(t,a,e);return aa(r!==null),r}return s}function wi(t,e){function s(n,a){const r=sa(t,a,e);return aa(r!==null),yi(r,a,t.host,t._protocol)}return s}function ra(t){function e(s,n){let a;return s.getStatus()===401?s.getErrorText().includes("Firebase App Check token is invalid")?a=Do():a=Oo():s.getStatus()===402?a=Ao(t.bucket):s.getStatus()===403?a=$o(t.path):a=n,a.status=s.getStatus(),a.serverResponse=n.serverResponse,a}return e}function _i(t){const e=ra(t);function s(n,a){let r=e(n,a);return n.getStatus()===404&&(r=Ro(t.path)),r.serverResponse=a.serverResponse,r}return s}function Ni(t,e,s){const n=e.fullServerUrl(),a=zs(n,t.host,t._protocol),r="GET",i=t.maxOperationRetryTime,l=new na(a,r,wi(t,s),i);return l.errorHandler=_i(e),l}function ji(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Si(t,e,s){const n=Object.assign({},s);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=ji(null,e)),n}function ki(t,e,s,n,a){const r=e.bucketOnlyServerUrl(),i={"X-Goog-Upload-Protocol":"multipart"};function l(){let P="";for(let S=0;S<2;S++)P=P+Math.random().toString().slice(2);return P}const u=l();i["Content-Type"]="multipart/related; boundary="+u;const c=Si(e,n,a),f=bi(c,s),d="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,m=`\r
--`+u+"--",g=Ze.getBlob(d,n,m);if(g===null)throw Uo();const x={name:c.fullPath},$=zs(r,t.host,t._protocol),y="POST",b=t.maxUploadRetryTime,O=new na($,y,vi(t,s),b);return O.urlParams=x,O.headers=i,O.body=g.uploadData(),O.errorHandler=ra(e),O}class Ci{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=st.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=st.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=st.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,s,n,a,r){if(this.sent_)throw Ct("cannot .send() more than once");if(Un(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(s,e,!0),r!==void 0)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ct("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ct("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ct("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ct("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Ti extends Ci{initXhr(){this.xhr_.responseType="text"}}function oa(){return new Ti}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,s){this._service=e,s instanceof ve?this._location=s:this._location=ve.makeFromUrl(s,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,s){return new at(e,s)}get root(){const e=new ve(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ea(this._location.path)}get storage(){return this._service}get parent(){const e=fi(this._location.path);if(e===null)return null;const s=new ve(this._location.bucket,e);return new at(this._service,s)}_throwIfRoot(e){if(this._location.path==="")throw Wo(e)}}function Ii(t,e,s){t._throwIfRoot("uploadBytes");const n=ki(t.storage,t._location,ta(),new Ze(e,!0),s);return t.storage.makeRequestWithTokens(n,oa).then(a=>({metadata:a,ref:t}))}function Ei(t){t._throwIfRoot("getDownloadURL");const e=Ni(t.storage,t._location,ta());return t.storage.makeRequestWithTokens(e,oa).then(s=>{if(s===null)throw zo();return s})}function Ri(t,e){const s=hi(t._location.path,e),n=new ve(t._location.bucket,s);return new at(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(t){return/^[A-Za-z]+:\/\//.test(t)}function Oi(t,e){return new at(t,e)}function ia(t,e){if(t instanceof Vs){const s=t;if(s._bucket==null)throw Fo();const n=new at(s,s._bucket);return e!=null?ia(n,e):n}else return e!==void 0?Ri(t,e):t}function Di(t,e){if(e&&Ai(e)){if(t instanceof Vs)return Oi(t,e);throw Ts("To use ref(service, url), the first argument must be a Storage instance.")}else return ia(t,e)}function Sn(t,e){const s=e==null?void 0:e[qn];return s==null?null:ve.makeFromBucketSpec(s,t)}function $i(t,e,s,n={}){t.host=`${e}:${s}`;const a=Un(e);a&&(or(`https://${t.host}/b`),ir("Storage",!0)),t._isUsingEmulator=!0,t._protocol=a?"https":"http";const{mockUserToken:r}=n;r&&(t._overrideAuthToken=typeof r=="string"?r:lr(r,t.app.options.projectId))}class Vs{constructor(e,s,n,a,r,i=!1){this.app=e,this._authProvider=s,this._appCheckProvider=n,this._url=a,this._firebaseVersion=r,this._isUsingEmulator=i,this._bucket=null,this._host=Hn,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Io,this._maxUploadRetryTime=Eo,this._requests=new Set,a!=null?this._bucket=ve.makeFromBucketSpec(a,this._host):this._bucket=Sn(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ve.makeFromBucketSpec(this._url,e):this._bucket=Sn(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jn("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jn("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const s=await e.getToken();if(s!==null)return s.accessToken}return null}async _getAppCheckToken(){if(ar(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new at(this,e)}_makeRequest(e,s,n,a,r=!0){if(this._deleted)return new Zo(Kn());{const i=si(e,this._appId,n,a,s,this._firebaseVersion,r,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(e,s){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,s,n,a).getPromise()}}const kn="@firebase/storage",Cn="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="storage";function Pi(t,e,s){return t=gt(t),Ii(t,e,s)}function Li(t){return t=gt(t),Ei(t)}function Bi(t,e){return t=gt(t),Di(t,e)}function Mi(t=Fn(),e){t=gt(t);const n=Ft(t,la).getImmediate({identifier:e}),a=rr("storage");return a&&Fi(n,...a),n}function Fi(t,e,s,n={}){$i(t,e,s,n)}function Ui(t,{instanceIdentifier:e}){const s=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new Vs(s,n,a,e,nr)}function zi(){$t(new Pt(la,Ui,"PUBLIC").setMultipleInstances(!0)),ut(kn,Cn,""),ut(kn,Cn,"esm2017")}zi();const ca="@firebase/installations",Ws="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=1e4,ua=`w:${Ws}`,fa="FIS_v2",Vi="https://firebaseinstallations.googleapis.com/v1",Wi=60*60*1e3,Zi="installations",Hi="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},rt=new zn(Zi,Hi,qi);function ha(t){return t instanceof $s&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma({projectId:t}){return`${Vi}/projects/${t}/installations`}function pa(t){return{token:t.token,requestStatus:2,expiresIn:Gi(t.expiresIn),creationTime:Date.now()}}async function ga(t,e){const n=(await e.json()).error;return rt.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function xa({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Ki(t,{refreshToken:e}){const s=xa(t);return s.append("Authorization",Ji(e)),s}async function ya(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Gi(t){return Number(t.replace("s","000"))}function Ji(t){return`${fa} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qi({appConfig:t,heartbeatServiceProvider:e},{fid:s}){const n=ma(t),a=xa(t),r=e.getImmediate({optional:!0});if(r){const c=await r.getHeartbeatsHeader();c&&a.append("x-firebase-client",c)}const i={fid:s,authVersion:fa,appId:t.appId,sdkVersion:ua},l={method:"POST",headers:a,body:JSON.stringify(i)},u=await ya(()=>fetch(n,l));if(u.ok){const c=await u.json();return{fid:c.fid||s,registrationStatus:2,refreshToken:c.refreshToken,authToken:pa(c.authToken)}}else throw await ga("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=/^[cdef][\w-]{21}$/,Is="";function el(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const s=tl(t);return Xi.test(s)?s:Is}catch{return Is}}function tl(t){return Yi(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=new Map;function wa(t,e){const s=os(t);_a(s,e),sl(s,e)}function _a(t,e){const s=va.get(t);if(s)for(const n of s)n(e)}function sl(t,e){const s=nl();s&&s.postMessage({key:t,fid:e}),al()}let tt=null;function nl(){return!tt&&"BroadcastChannel"in self&&(tt=new BroadcastChannel("[Firebase] FID Change"),tt.onmessage=t=>{_a(t.data.key,t.data.fid)}),tt}function al(){va.size===0&&tt&&(tt.close(),tt=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl="firebase-installations-database",ol=1,ot="firebase-installations-store";let gs=null;function Zs(){return gs||(gs=cr(rl,ol,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ot)}}})),gs}async function ns(t,e){const s=os(t),a=(await Zs()).transaction(ot,"readwrite"),r=a.objectStore(ot),i=await r.get(s);return await r.put(e,s),await a.done,(!i||i.fid!==e.fid)&&wa(t,e.fid),e}async function Na(t){const e=os(t),n=(await Zs()).transaction(ot,"readwrite");await n.objectStore(ot).delete(e),await n.done}async function is(t,e){const s=os(t),a=(await Zs()).transaction(ot,"readwrite"),r=a.objectStore(ot),i=await r.get(s),l=e(i);return l===void 0?await r.delete(s):await r.put(l,s),await a.done,l&&(!i||i.fid!==l.fid)&&wa(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hs(t){let e;const s=await is(t.appConfig,n=>{const a=il(n),r=ll(t,a);return e=r.registrationPromise,r.installationEntry});return s.fid===Is?{installationEntry:await e}:{installationEntry:s,registrationPromise:e}}function il(t){const e=t||{fid:el(),registrationStatus:0};return ja(e)}function ll(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(rt.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const s={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=cl(t,s);return{installationEntry:s,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:dl(t)}:{installationEntry:e}}async function cl(t,e){try{const s=await Qi(t,e);return ns(t.appConfig,s)}catch(s){throw ha(s)&&s.customData.serverCode===409?await Na(t.appConfig):await ns(t.appConfig,{fid:e.fid,registrationStatus:0}),s}}async function dl(t){let e=await Tn(t.appConfig);for(;e.registrationStatus===1;)await ba(100),e=await Tn(t.appConfig);if(e.registrationStatus===0){const{installationEntry:s,registrationPromise:n}=await Hs(t);return n||s}return e}function Tn(t){return is(t,e=>{if(!e)throw rt.create("installation-not-found");return ja(e)})}function ja(t){return ul(t)?{fid:t.fid,registrationStatus:0}:t}function ul(t){return t.registrationStatus===1&&t.registrationTime+da<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl({appConfig:t,heartbeatServiceProvider:e},s){const n=hl(t,s),a=Ki(t,s),r=e.getImmediate({optional:!0});if(r){const c=await r.getHeartbeatsHeader();c&&a.append("x-firebase-client",c)}const i={installation:{sdkVersion:ua,appId:t.appId}},l={method:"POST",headers:a,body:JSON.stringify(i)},u=await ya(()=>fetch(n,l));if(u.ok){const c=await u.json();return pa(c)}else throw await ga("Generate Auth Token",u)}function hl(t,{fid:e}){return`${ma(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qs(t,e=!1){let s;const n=await is(t.appConfig,r=>{if(!Sa(r))throw rt.create("not-registered");const i=r.authToken;if(!e&&gl(i))return r;if(i.requestStatus===1)return s=ml(t,e),r;{if(!navigator.onLine)throw rt.create("app-offline");const l=yl(r);return s=pl(t,l),l}});return s?await s:n.authToken}async function ml(t,e){let s=await In(t.appConfig);for(;s.authToken.requestStatus===1;)await ba(100),s=await In(t.appConfig);const n=s.authToken;return n.requestStatus===0?qs(t,e):n}function In(t){return is(t,e=>{if(!Sa(e))throw rt.create("not-registered");const s=e.authToken;return bl(s)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function pl(t,e){try{const s=await fl(t,e),n=Object.assign(Object.assign({},e),{authToken:s});return await ns(t.appConfig,n),s}catch(s){if(ha(s)&&(s.customData.serverCode===401||s.customData.serverCode===404))await Na(t.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await ns(t.appConfig,n)}throw s}}function Sa(t){return t!==void 0&&t.registrationStatus===2}function gl(t){return t.requestStatus===2&&!xl(t)}function xl(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Wi}function yl(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function bl(t){return t.requestStatus===1&&t.requestTime+da<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vl(t){const e=t,{installationEntry:s,registrationPromise:n}=await Hs(e);return n?n.catch(console.error):qs(e).catch(console.error),s.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(t,e=!1){const s=t;return await _l(s),(await qs(s,e)).token}async function _l(t){const{registrationPromise:e}=await Hs(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(t){if(!t||!t.options)throw xs("App Configuration");if(!t.name)throw xs("App Name");const e=["projectId","apiKey","appId"];for(const s of e)if(!t.options[s])throw xs(s);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function xs(t){return rt.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka="installations",jl="installations-internal",Sl=t=>{const e=t.getProvider("app").getImmediate(),s=Nl(e),n=Ft(e,"heartbeat");return{app:e,appConfig:s,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},kl=t=>{const e=t.getProvider("app").getImmediate(),s=Ft(e,ka).getImmediate();return{getId:()=>vl(s),getToken:a=>wl(s,a)}};function Cl(){$t(new Pt(ka,Sl,"PUBLIC")),$t(new Pt(jl,kl,"PRIVATE"))}Cl();ut(ca,Ws);ut(ca,Ws,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as="analytics",Tl="firebase_id",Il="origin",El=60*1e3,Rl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ks="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ye=new dr("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},we=new zn("analytics","Analytics",Al);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(t){if(!t.startsWith(Ks)){const e=we.create("invalid-gtag-resource",{gtagURL:t});return ye.warn(e.message),""}return t}function Ca(t){return Promise.all(t.map(e=>e.catch(s=>s)))}function Dl(t,e){let s;return window.trustedTypes&&(s=window.trustedTypes.createPolicy(t,e)),s}function $l(t,e){const s=Dl("firebase-js-sdk-policy",{createScriptURL:Ol}),n=document.createElement("script"),a=`${Ks}?l=${t}&id=${e}`;n.src=s?s==null?void 0:s.createScriptURL(a):a,n.async=!0,document.head.appendChild(n)}function Pl(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Ll(t,e,s,n,a,r){const i=n[a];try{if(i)await e[i];else{const u=(await Ca(s)).find(c=>c.measurementId===a);u&&await e[u.appId]}}catch(l){ye.error(l)}t("config",a,r)}async function Bl(t,e,s,n,a){try{let r=[];if(a&&a.send_to){let i=a.send_to;Array.isArray(i)||(i=[i]);const l=await Ca(s);for(const u of i){const c=l.find(d=>d.measurementId===u),f=c&&e[c.appId];if(f)r.push(f);else{r=[];break}}}r.length===0&&(r=Object.values(e)),await Promise.all(r),t("event",n,a||{})}catch(r){ye.error(r)}}function Ml(t,e,s,n){async function a(r,...i){try{if(r==="event"){const[l,u]=i;await Bl(t,e,s,l,u)}else if(r==="config"){const[l,u]=i;await Ll(t,e,s,n,l,u)}else if(r==="consent"){const[l,u]=i;t("consent",l,u)}else if(r==="get"){const[l,u,c]=i;t("get",l,u,c)}else if(r==="set"){const[l]=i;t("set",l)}else t(r,...i)}catch(l){ye.error(l)}}return a}function Fl(t,e,s,n,a){let r=function(...i){window[n].push(arguments)};return window[a]&&typeof window[a]=="function"&&(r=window[a]),window[a]=Ml(r,t,e,s),{gtagCore:r,wrappedGtag:window[a]}}function Ul(t){const e=window.document.getElementsByTagName("script");for(const s of Object.values(e))if(s.src&&s.src.includes(Ks)&&s.src.includes(t))return s;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl=30,Vl=1e3;class Wl{constructor(e={},s=Vl){this.throttleMetadata=e,this.intervalMillis=s}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,s){this.throttleMetadata[e]=s}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Ta=new Wl;function Zl(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Hl(t){var e;const{appId:s,apiKey:n}=t,a={method:"GET",headers:Zl(n)},r=Rl.replace("{app-id}",s),i=await fetch(r,a);if(i.status!==200&&i.status!==304){let l="";try{const u=await i.json();!((e=u.error)===null||e===void 0)&&e.message&&(l=u.error.message)}catch{}throw we.create("config-fetch-failed",{httpStatus:i.status,responseMessage:l})}return i.json()}async function ql(t,e=Ta,s){const{appId:n,apiKey:a,measurementId:r}=t.options;if(!n)throw we.create("no-app-id");if(!a){if(r)return{measurementId:r,appId:n};throw we.create("no-api-key")}const i=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new Jl;return setTimeout(async()=>{l.abort()},El),Ia({appId:n,apiKey:a,measurementId:r},i,l,e)}async function Ia(t,{throttleEndTimeMillis:e,backoffCount:s},n,a=Ta){var r;const{appId:i,measurementId:l}=t;try{await Kl(n,e)}catch(u){if(l)return ye.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:i,measurementId:l};throw u}try{const u=await Hl(t);return a.deleteThrottleMetadata(i),u}catch(u){const c=u;if(!Gl(c)){if(a.deleteThrottleMetadata(i),l)return ye.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:i,measurementId:l};throw u}const f=Number((r=c==null?void 0:c.customData)===null||r===void 0?void 0:r.httpStatus)===503?tn(s,a.intervalMillis,zl):tn(s,a.intervalMillis),d={throttleEndTimeMillis:Date.now()+f,backoffCount:s+1};return a.setThrottleMetadata(i,d),ye.debug(`Calling attemptFetch again in ${f} millis`),Ia(t,d,n,a)}}function Kl(t,e){return new Promise((s,n)=>{const a=Math.max(e-Date.now(),0),r=setTimeout(s,a);t.addEventListener(()=>{clearTimeout(r),n(we.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Gl(t){if(!(t instanceof $s)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class Jl{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Ql(t,e,s,n,a){if(a&&a.global){t("event",s,n);return}else{const r=await e,i=Object.assign(Object.assign({},n),{send_to:r});t("event",s,i)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yl(){if(fr())try{await hr()}catch(t){return ye.warn(we.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return ye.warn(we.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Xl(t,e,s,n,a,r,i){var l;const u=ql(t);u.then(g=>{s[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&ye.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>ye.error(g)),e.push(u);const c=Yl().then(g=>{if(g)return n.getId()}),[f,d]=await Promise.all([u,c]);Ul(r)||$l(r,f.measurementId),a("js",new Date);const m=(l=i==null?void 0:i.config)!==null&&l!==void 0?l:{};return m[Il]="firebase",m.update=!0,d!=null&&(m[Tl]=d),a("config",f.measurementId,m),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e){this.app=e}_delete(){return delete Ot[this.app.options.appId],Promise.resolve()}}let Ot={},En=[];const Rn={};let ys="dataLayer",tc="gtag",An,Ea,On=!1;function sc(){const t=[];if(ur()&&t.push("This is a browser extension environment."),pr()||t.push("Cookies are not available."),t.length>0){const e=t.map((n,a)=>`(${a+1}) ${n}`).join(" "),s=we.create("invalid-analytics-context",{errorInfo:e});ye.warn(s.message)}}function nc(t,e,s){sc();const n=t.options.appId;if(!n)throw we.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)ye.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw we.create("no-api-key");if(Ot[n]!=null)throw we.create("already-exists",{id:n});if(!On){Pl(ys);const{wrappedGtag:r,gtagCore:i}=Fl(Ot,En,Rn,ys,tc);Ea=r,An=i,On=!0}return Ot[n]=Xl(t,En,Rn,e,An,ys,s),new ec(t)}function ac(t=Fn()){t=gt(t);const e=Ft(t,as);return e.isInitialized()?e.getImmediate():rc(t)}function rc(t,e={}){const s=Ft(t,as);if(s.isInitialized()){const a=s.getImmediate();if(mr(e,s.getOptions()))return a;throw we.create("already-initialized")}return s.initialize({options:e})}function oc(t,e,s,n){t=gt(t),Ql(Ea,Ot[t.app.options.appId],e,s,n).catch(a=>ye.error(a))}const Dn="@firebase/analytics",$n="0.10.17";function ic(){$t(new Pt(as,(e,{options:s})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return nc(n,a,s)},"PUBLIC")),$t(new Pt("analytics-internal",t,"PRIVATE")),ut(Dn,$n),ut(Dn,$n,"esm2017");function t(e){try{const s=e.getProvider(as).getImmediate();return{logEvent:(n,a,r)=>oc(s,n,a,r)}}catch(s){throw we.create("interop-component-reg-failed",{reason:s})}}}ic();const lc={apiKey:"AIzaSyAgRdBtg_I5NMAC5x3gh-7_CvQ058n25go",authDomain:"jiang-ai-web.firebaseapp.com",projectId:"jiang-ai-web",storageBucket:"jiang-ai-web.firebasestorage.app",messagingSenderId:"923755523160",appId:"1:923755523160:web:043dca5d76b6ded7ecee2d",measurementId:"G-8FXGZWC0M4"},ls=gr(lc),Fe=xr(ls),yt=yr(ls),cc=Mi(ls);typeof window<"u"&&ac(ls);async function dc(t,e){try{if(t.includes("firebase")&&t.includes("storage")||t==="/icon/icon.jpg"||t.includes("/icon/icon.jpg"))return t;if(t.startsWith("data:"))return console.log("  data URL"),t;console.log("  Storage:",t);let s;try{s=await fetch(t)}catch(c){console.warn(" CORS:",c);const f=`https://cors-anywhere.herokuapp.com/${t}`;s=await fetch(f)}if(!s.ok)throw new Error(`Failed to fetch icon: ${s.status}`);const n=await s.blob(),a=Date.now();let r="png";if(n.type){const c=n.type.toLowerCase();c.includes("svg")?r="svg":c.includes("png")?r="png":c.includes("jpeg")||c.includes("jpg")?r="jpg":c.includes("ico")?r="ico":c.includes("gif")?r="gif":c.includes("webp")&&(r="webp")}const i=`favicons/${e}-${a}.${r}`,l=Bi(cc,i);await Pi(l,n);const u=await Li(l);return console.log(" :",u),u}catch(s){return console.error(" :",s),t}}const uc=To({name:Ht().min(1,""),url:Ht().url(""),favicon:Ht().url("URL"),note:Ht().optional()});function Ra({id:t,name:e,url:s,favicon:n,tags:a,note:r,onClose:i,onSave:l,onDelete:u}){const[c,f]=h.useState({name:e,url:s,favicon:n,note:r||""}),[d,m]=h.useState({}),[g,x]=h.useState(!1),[$,y]=h.useState(!1),b=_=>{const C=/\{([^}]+)\}/g;return(_.match(C)||[]).map(se=>se.replace(/\{|\}/g,"").trim())},O=_=>_.replace(/\{[^}]+\}/g,"").trim(),P=async()=>{if(!c.url||!c.url.startsWith("http")){m({url:"(http://https://)"});return}try{x(!0);const _=new URL(c.url).hostname,I=(B=>{try{return new URL(B).hostname.replace(/^www\./,"")}catch{return B.replace(/^(https?:\/\/)?(www\.)?/,"").split("/")[0]}})(c.url);console.log(" :",I);try{const B="favicon-cache-simple",te=localStorage.getItem(B);if(te){const Q=JSON.parse(te);delete Q[I],localStorage.setItem(B,JSON.stringify(Q))}}catch(B){console.warn(":",B)}const se=Date.now(),ee=`https://www.google.com/s2/favicons?domain=${c.url}&sz=64&t=${se}`;f(B=>({...B,favicon:ee})),f(B=>({...B,name:_.replace("www.","").split(".")[0]})),m(B=>{const te={...B};return delete te.url,te}),console.log(" :",ee)}catch(_){console.error(":",_),m({url:""})}finally{x(!1)}},S=async _=>{_.preventDefault();try{y(!0);const C=uc.safeParse(c);if(!C.success){const B={};C.error.errors.forEach(te=>{B[te.path[0]]=te.message}),m(B);return}const I=b(c.note||""),se=O(c.note||"");let ee=c.favicon;if(c.favicon!==n){console.log(" ...");try{ee=await dc(c.favicon,t),console.log(" :",ee)}catch(B){console.warn(" URL:",B)}}else console.log(" ");if(c.favicon!==n){console.log(" Favicon ");const te=(Q=>{try{return new URL(Q).hostname.replace(/^www\./,"")}catch{return Q.replace(/^(https?:\/\/)?(www\.)?/,"").split("/")[0]}})(c.url);try{const Q="favicon-cache-simple",le=localStorage.getItem(Q);if(le){const ne=JSON.parse(le);delete ne[te],localStorage.setItem(Q,JSON.stringify(ne)),console.log(" :",te)}}catch(Q){console.warn(":",Q)}}l({id:t,name:c.name,url:c.url,favicon:ee,tags:I,note:se}),i()}catch(C){console.error(":",C),m({submit:""})}finally{y(!1)}},T=_=>{const{name:C,value:I}=_.target;f(se=>({...se,[C]:I})),d[C]&&m(se=>{const ee={...se};return delete ee[C],ee})};return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 select-none",children:o.jsxs(re.div,{className:"w-full max-w-md bg-white rounded-xl shadow-xl p-6 select-none",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{type:"spring",damping:25},children:[o.jsxs("div",{className:"flex justify-between items-center mb-4 select-none",children:[o.jsx("h2",{className:"text-xl font-semibold select-none",children:""}),o.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700 select-none",children:o.jsx("i",{className:"fa-solid fa-xmark select-none"})})]}),o.jsxs("form",{onSubmit:S,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 select-none",children:""}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"url",name:"url",value:c.url,onChange:T,className:"flex-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com"}),o.jsx("button",{type:"button",onClick:P,disabled:g||!c.url,className:"px-3 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-blue-300 select-none",children:g?"...":""})]}),d.url&&o.jsx("p",{className:"mt-1 text-sm text-red-500 select-none",children:d.url})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 select-none",children:""}),o.jsx("input",{type:"text",name:"name",value:c.name,onChange:T,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:""}),d.name&&o.jsx("p",{className:"mt-1 text-sm text-red-500 select-none",children:d.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 select-none",children:""}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex-1",children:o.jsx("input",{type:"url",name:"favicon",value:c.favicon,onChange:T,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/favicon.ico"})}),o.jsx("span",{className:"text-gray-400 select-none",children:""}),o.jsxs("label",{className:"cursor-pointer select-none",children:[o.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:_=>{var I;const C=(I=_.target.files)==null?void 0:I[0];if(C){const se=new FileReader;se.onload=ee=>{var B;(B=ee.target)!=null&&B.result&&f(te=>{var Q;return{...te,favicon:(Q=ee.target)==null?void 0:Q.result}})},se.readAsDataURL(C)}}}),o.jsxs("div",{className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm text-gray-700 transition-colors select-none",children:[o.jsx("i",{className:"fa-solid fa-upload mr-1 select-none"}),""]})]})]}),c.favicon&&o.jsxs("div",{className:"mt-2 flex items-center select-none",children:[o.jsx("img",{src:c.favicon,alt:"",className:"w-8 h-8 rounded mr-2 select-none"}),o.jsx("span",{className:"text-xs text-gray-500 truncate max-w-xs select-none",children:c.favicon.startsWith("data:image")?"":c.favicon})]}),d.favicon&&o.jsx("p",{className:"mt-1 text-sm text-red-500 select-none",children:d.favicon})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 select-none",children:[" (",":  ",""," ","",")"]}),o.jsxs("div",{className:"text-xs text-gray-500 mb-1 select-none",children:["",""]}),o.jsx("textarea",{name:"note",value:c.note,onChange:T,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"..."})]}),o.jsxs("div",{className:"flex flex-col gap-4 pt-4 select-none",children:[o.jsxs("div",{className:"flex gap-2 select-none",children:[o.jsx("button",{type:"button",onClick:i,className:"flex-1 px-4 py-2 text-gray-700 border rounded-md hover:bg-gray-50 select-none",children:""}),o.jsx("button",{type:"submit",disabled:$,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed select-none",children:$?o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-2"}),"..."]}):""})]}),d.submit&&o.jsx("p",{className:"text-red-500 text-sm text-center select-none",children:d.submit}),u&&o.jsxs("button",{type:"button",onClick:()=>{confirm("")&&(u(t),i())},className:"w-full px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 shadow-md select-none",children:[o.jsx("i",{className:"fa-solid fa-trash mr-2 select-none"}),""]})]})]})]})})}const fc=[{name:"",rgb:"0, 0, 0",preview:"#000000"},{name:"",rgb:"255, 255, 255",preview:"#ffffff"},{name:"",rgb:"239, 68, 68",preview:"#ef4444"},{name:"",rgb:"245, 158, 11",preview:"#f59e0b"},{name:"",rgb:"59, 130, 246",preview:"#3b82f6"},{name:"",rgb:"34, 197, 94",preview:"#22c55e"},{name:"",rgb:"147, 51, 234",preview:"#9333ea"}],Aa=h.createContext(void 0);function hc({children:t}){const[e,s]=h.useState(()=>{const y=localStorage.getItem("cardOpacity");let b=y?parseFloat(y):.1;return b>1&&(b=b/100),Math.max(.05,Math.min(1,b))}),[n,a]=h.useState(()=>{const y=localStorage.getItem("searchBarOpacity");let b=y?parseFloat(y):.1;return b>1&&(b=b/100),Math.max(.05,Math.min(1,b))}),[r,i]=h.useState(()=>{const y=localStorage.getItem("parallaxEnabled");return y?JSON.parse(y):!0}),[l,u]=h.useState(()=>localStorage.getItem("cardColor")||"255, 255, 255"),[c,f]=h.useState(()=>localStorage.getItem("searchBarColor")||"255, 255, 255"),d=()=>window.innerHeight>window.innerWidth?"mobile":"1080p",[m,g]=h.useState(()=>localStorage.getItem("wallpaperResolution")||d()),[x,$]=h.useState(!1);return h.useEffect(()=>{localStorage.setItem("cardOpacity",e.toString())},[e]),h.useEffect(()=>{localStorage.setItem("searchBarOpacity",n.toString())},[n]),h.useEffect(()=>{localStorage.setItem("parallaxEnabled",JSON.stringify(r))},[r]),h.useEffect(()=>{localStorage.setItem("wallpaperResolution",m)},[m]),h.useEffect(()=>{localStorage.setItem("cardColor",l)},[l]),h.useEffect(()=>{localStorage.setItem("searchBarColor",c)},[c]),o.jsx(Aa.Provider,{value:{cardOpacity:e,searchBarOpacity:n,parallaxEnabled:r,wallpaperResolution:m,isSettingsOpen:x,cardColor:l,searchBarColor:c,setCardOpacity:s,setSearchBarOpacity:a,setParallaxEnabled:i,setWallpaperResolution:g,setIsSettingsOpen:$,setCardColor:u,setSearchBarColor:f},children:t})}function bt(){const t=h.useContext(Aa);if(t===void 0)throw new Error("useTransparency must be used within a TransparencyProvider");return t}class mc{constructor(){he(this,"cacheKey","favicon-cache-simple");he(this,"defaultExpiry",7*24*60*60*1e3);he(this,"cache",{});he(this,"loadingPromises",new Map);this.loadCache()}loadCache(){try{const e=localStorage.getItem(this.cacheKey);e&&(this.cache=JSON.parse(e),this.cleanExpiredCache())}catch(e){console.warn(" favicon :",e),this.cache={}}}saveCache(){try{localStorage.setItem(this.cacheKey,JSON.stringify(this.cache))}catch(e){console.warn(" favicon :",e)}}cleanExpiredCache(){const e=Date.now(),s=[];for(const[n,a]of Object.entries(this.cache))e>a.expiry&&s.push(n);s.forEach(n=>{delete this.cache[n]}),s.length>0&&this.saveCache()}extractDomain(e){try{return new URL(e).hostname.replace(/^www\./,"")}catch{return e.replace(/^(https?:\/\/)?(www\.)?/,"").split("/")[0]}}getFaviconUrls(e,s){return[e,`https://www.google.com/s2/favicons?domain=${s}&sz=64`,`https://www.google.com/s2/favicons?domain=${s}&sz=32`,`https://icons.duckduckgo.com/ip3/${s}.ico`,`https://${s}/favicon.ico`,"/icon/icon.jpg"]}async tryLoadFavicon(e){for(const s of e)try{return await new Promise((n,a)=>{const r=new Image;r.onload=()=>n(),r.onerror=()=>a(),r.src=s,setTimeout(()=>a(),2e3)}),console.log(` Favicon : ${s}`),s}catch{console.log(` Favicon : ${s}`);continue}return"/icon/icon.jpg"}getCachedFavicon(e){const s=this.extractDomain(e),n=this.cache[s];return n&&Date.now()<n.expiry?n.cachedUrl:null}async getFavicon(e,s){const n=this.extractDomain(e),a=this.getCachedFavicon(e);if(a)return a;if(this.loadingPromises.has(n))return this.loadingPromises.get(n);const r=this.loadFavicon(e,s,n);this.loadingPromises.set(n,r);try{return await r}finally{this.loadingPromises.delete(n)}}async loadFavicon(e,s,n){const a=this.getFaviconUrls(s,n);try{const r=await this.tryLoadFavicon(a);return this.cache[n]={url:e,cachedUrl:r,timestamp:Date.now(),expiry:Date.now()+this.defaultExpiry},this.saveCache(),r}catch(r){return console.warn(` favicon : ${n}`,r),"/icon/icon.jpg"}}async getFaviconWithIndexedDB(e,s){return this.getFavicon(e,s)}async getFaviconWithHybridCache(e,s){return this.getFavicon(e,s)}async batchCacheFaviconsToIndexedDB(e){console.log(`  ${e.length}  favicon`);let s=0,n=0,a=0;const r=2;for(let i=0;i<e.length;i+=r){const u=e.slice(i,i+r).map(async(c,f)=>{const d=this.extractDomain(c.url);try{if(this.getCachedFavicon(c.url)){n++;return}const g=(f+1)*500;await new Promise($=>setTimeout($,g)),console.log(` [${i+f+1}/${e.length}] : ${d}`),await this.getFavicon(c.url,c.favicon)?(s++,console.log(` : ${d}`)):a++}catch(m){a++,console.warn(` : ${d}`,m)}});await Promise.allSettled(u),i+r<e.length&&await new Promise(c=>setTimeout(c,1e3))}console.log("  favicon :"),console.log(`   : ${s}, : ${n}, : ${a}`)}clearCache(){this.cache={},this.loadingPromises.clear();try{localStorage.removeItem(this.cacheKey)}catch(e){console.warn(" favicon :",e)}}getCacheStats(){const e=Date.now(),s=Object.keys(this.cache).length,n=Object.values(this.cache).filter(r=>e>r.expiry).length;let a="0 KB";try{a=`${(new Blob([JSON.stringify(this.cache)]).size/1024).toFixed(1)} KB`}catch{}return{total:s,expired:n,size:a}}}const Es=new mc;function pc(t,e){const[s,n]=h.useState(e),[a,r]=h.useState(!1),[i,l]=h.useState(!1);return h.useEffect(()=>{n(e),l(!1),r(!1);const u=e==="/icon/icon.jpg",c=e.includes("google.com/s2/favicons")&&!e.includes("&t=");if(u||c){const f=Es.getCachedFavicon(t);if(f&&f!==e&&f!=="/icon/icon.jpg"){console.log(" :",f),n(f);return}u&&(r(!0),Es.getFavicon(t,e).then(d=>{d!==e&&d!=="/icon/icon.jpg"&&(console.log(" :",d),n(d)),l(!1)}).catch(d=>{console.warn("Favicon :",d),l(!0)}).finally(()=>{r(!1)}))}},[t,e]),{faviconUrl:s,isLoading:a,error:i}}const Gt={mobile:640,tablet:768,desktop:1024,wide:1440},gc={columns:{mobile:2,tablet:3,tabletLandscape:4,desktop:6,wide:8},gaps:{mobile:"gap-x-2 gap-y-6",tablet:"gap-x-3 gap-y-8",desktop:"gap-x-4 gap-y-10"},cardSizes:{mobile:"w-full max-w-[160px]",tablet:"w-full max-w-[180px]",desktop:"w-full max-w-[200px]"}};function Oa(t){const[e,s]=h.useState({width:typeof window<"u"?window.innerWidth:1024,height:typeof window<"u"?window.innerHeight:768}),[n,a]=h.useState("landscape"),[r,i]=h.useState("desktop"),l={...gc,...t};h.useEffect(()=>{const m=()=>{const g=window.innerWidth,x=window.innerHeight;s({width:g,height:x}),a(g>x?"landscape":"portrait"),g<Gt.mobile||g<Gt.tablet?i("mobile"):g<Gt.desktop?i("tablet"):g<Gt.wide?i("desktop"):i("wide")};return m(),window.addEventListener("resize",m),window.addEventListener("orientationchange",m),()=>{window.removeEventListener("resize",m),window.removeEventListener("orientationchange",m)}},[]);const u=()=>{const m=r==="tablet"&&n==="landscape";return{columns:m?l.columns.tabletLandscape:l.columns[r],gap:l.gaps[r==="wide"?"desktop":r],cardSize:l.cardSizes[r==="wide"?"desktop":r],deviceType:r,orientation:n,screenSize:e,isMobile:r==="mobile",isTablet:r==="tablet",isDesktop:r==="desktop"||r==="wide",isTabletLandscape:m}},c=()=>{const m=u(),g="grid";return m.isMobile?`${g} grid-cols-2 ${m.gap} px-2`:m.isTablet?m.isTabletLandscape?`${g} grid-cols-4 ${m.gap} px-4`:`${g} grid-cols-3 ${m.gap} px-4`:`${g} grid-cols-6 lg:grid-cols-8 ${m.gap} px-6`},f=()=>{const m=u(),g="relative group";return m.isMobile?`${g} ${m.cardSize} mx-auto`:m.isTablet?`${g} ${m.cardSize} mx-auto transform transition-transform duration-200 hover:scale-105`:`${g} ${m.cardSize} mx-auto transform transition-all duration-300 hover:scale-110 hover:z-10`},d=()=>{const m=u();return m.isMobile?{containerClass:"px-4 py-4",searchClass:"w-full max-w-lg mx-auto",buttonSize:"text-sm px-3 py-2"}:m.isTablet?{containerClass:"px-6 py-6",searchClass:"w-full max-w-2xl mx-auto",buttonSize:"text-base px-4 py-2"}:{containerClass:"px-8 py-8",searchClass:"w-full max-w-3xl mx-auto",buttonSize:"text-lg px-6 py-3"}};return{...u(),getGridClasses:c,getCardClasses:f,getSearchBarLayout:d}}function xc({id:t,name:e,url:s,favicon:n,tags:a,visitCount:r,note:i,index:l,moveCard:u,onSave:c,onDelete:f}){const[d,m]=h.useState(!1),[g,x]=h.useState(!1),[$,y]=h.useState(!1),b=h.useRef(null),O=h.useRef(null),{cardOpacity:P,cardColor:S}=bt(),{faviconUrl:T,isLoading:_,error:C}=pc(s,n),{isMobile:I,getCardClasses:se}=Oa(),[{isDragging:ee},B]=Ka({type:"WEBSITE_CARD",item:{id:t,index:l},collect:L=>({isDragging:L.isDragging()}),canDrag:()=>!I}),[,te]=Ga({accept:"WEBSITE_CARD",hover(L){if(!b.current)return;const R=L.index,M=l;R!==M&&(u(R,M),L.index=M)}});te(b),B(b);const Q=()=>{O.current&&(clearTimeout(O.current),O.current=null)};h.useEffect(()=>()=>{Q()},[]);const le=()=>{!I&&!ee&&x(!0)},ne=()=>{I||x(!1)},E=()=>{I&&(y(!0),setTimeout(()=>y(!1),200)),window.open(s,"_blank"),c({id:t,name:e,url:s,favicon:n,tags:a,note:i,visitCount:r+1,lastVisit:new Date().toISOString().split("T")[0]})},W=()=>{I&&m(!0)},q=()=>{I&&(O.current=setTimeout(W,500))},K=()=>{O.current&&(clearTimeout(O.current),O.current=null)};return o.jsxs(o.Fragment,{children:[o.jsxs(re.div,{className:`${se()} relative rounded-lg`,style:{opacity:ee?.5:1,backgroundColor:`rgba(${S}, ${P})`,backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",transform:$&&I?"scale(0.95)":"scale(1)",transition:I?"transform 0.15s ease-in-out":"background-color 0.3s ease, border-color 0.3s ease"},onMouseEnter:le,onMouseLeave:ne,onTouchStart:q,onTouchEnd:K,onTouchMove:K,onTouchCancel:K,onClick:E,whileTap:I?{scale:.95,transition:{duration:.15,ease:"easeInOut"}}:{},whileHover:I?{}:{scale:1.03,y:-4,transition:{duration:.3,ease:[.4,0,.2,1],type:"spring",stiffness:200,damping:15}},initial:{opacity:0,y:20},whileInView:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut",delay:.1}},viewport:{once:!0},ref:b,children:[o.jsx("div",{className:`absolute ${I?"top-1 right-1":"bottom-0.5 right-0.5"} z-10`,children:o.jsx("button",{onClick:L=>{L.stopPropagation(),m(!0)},className:`p-1 text-white/50 hover:text-white select-none transition-all duration-500 ease-out ${I?"text-xs bg-black/20 rounded-full":""} ${g&&!I?"opacity-100":I?"opacity-70":"opacity-0"}`,children:o.jsx("i",{className:"fa-solid fa-gear text-xs select-none"})})}),o.jsxs("div",{className:`h-full flex flex-col ${I?"pt-2":"pt-3"} select-none`,children:[o.jsxs("div",{className:`flex flex-col items-center ${I?"px-1":"px-2"} select-none`,children:[o.jsxs("div",{className:`${I?"w-8 h-8 mb-1":"w-11 h-11 mb-1"} rounded-md overflow-hidden select-none relative`,children:[o.jsx("img",{src:T,alt:`${e} favicon`,className:"w-full h-full object-contain select-none",loading:"lazy",draggable:"false"}),_&&o.jsx("div",{className:`absolute top-0 right-0 ${I?"w-1.5 h-1.5":"w-2 h-2"} bg-yellow-400 rounded-full animate-pulse`,title:"..."}),!_&&C&&o.jsx("div",{className:`absolute top-0 right-0 ${I?"w-1.5 h-1.5":"w-2 h-2"} bg-red-400 rounded-full`,title:""})]}),o.jsx("h3",{className:`${I?"text-[0.65rem]":"text-xs"} font-medium text-white text-center line-clamp-2 px-2 mt-1 select-none`,children:e})]}),!I&&o.jsx("div",{className:"px-2 mb-1 select-none",children:o.jsx("p",{className:"text-white/60 text-[0.65rem] text-center line-clamp-2 select-none",children:i||new URL(s).hostname})}),o.jsx("div",{className:`mt-0 ${I?"px-1 pb-1":"px-3 pb-2"} select-none`,children:o.jsx("div",{className:"flex flex-wrap gap-1 justify-center select-none",children:a.slice(0,I?2:6).map(L=>o.jsx("span",{className:`px-1.5 py-0.5 bg-white/20 rounded-full ${I?"text-[0.55rem]":"text-[0.65rem]"} text-white ${I?"max-w-[45px]":"max-w-[60px]"} truncate select-none`,children:L},L))})}),r>0&&o.jsx("div",{className:"px-2 pb-2 select-none",children:o.jsx("div",{className:"text-center",children:o.jsxs("span",{className:`px-2 py-1 bg-blue-500/20 text-blue-200 rounded-full ${I?"text-[0.55rem]":"text-[0.65rem]"} border border-blue-300/30`,children:[o.jsx("i",{className:"fa-solid fa-eye mr-1"}),r,""]})})}),o.jsx("div",{className:"flex-1"})]}),!I&&g&&o.jsx(re.div,{className:"absolute inset-0 rounded-lg ring-2 ring-white/30 pointer-events-none",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.4,ease:"easeOut"}}),!I&&g&&o.jsx(re.div,{className:"absolute inset-0 rounded-lg pointer-events-none",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5,ease:"easeOut"},style:{boxShadow:"0 8px 25px rgba(0,0,0,0.2)",zIndex:-1}})]}),d&&o.jsx(Ra,{id:t,name:e,url:s,favicon:n,tags:a,note:i,onClose:()=>m(!1),onSave:L=>{c(L),m(!1)},onDelete:f})]})}function yc(t={}){var M,V;const e=h.useRef(null);h.useEffect(()=>{const p=w=>{if(w.code==="Space"||w.key===" "||w.keyCode===32){const N=document.activeElement;!(N&&(N.tagName==="INPUT"||N.tagName==="TEXTAREA"||N.isContentEditable))&&e.current&&(w.preventDefault(),e.current.focus())}};return window.addEventListener("keydown",p,{capture:!0}),()=>window.removeEventListener("keydown",p,{capture:!0})},[]);const[s,n]=h.useState(""),[a,r]=h.useState(!1),[i,l]=h.useState("bing"),[u,c]=h.useState(!1),[f,d]=h.useState([]),[m,g]=h.useState(!1),[x,$]=h.useState(-1),y=h.useRef(null),[b,O]=h.useState(null),[P,S]=h.useState(null),[T,_]=h.useState(!1),C=h.useRef(null),{searchBarOpacity:I,searchBarColor:se}=bt(),ee=[{key:"bing",label:"Bing",icon:o.jsx("i",{className:"fa-brands fa-microsoft text-blue-400"})},{key:"google",label:"Google",icon:o.jsx("i",{className:"fa-brands fa-google text-blue-500"})}],B=(p,w)=>{const N=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FECA57","#FF9FF3","#54A0FF","#5F27CD","#00D2D3","#FF9F43","#EE5A24","#FD79A8","#0FB9B1","#A55EEA","#26D0CE","#FDCB6E","#6C5CE7","#74B9FF","#E17055","#F39C12","#E74C3C","#3498DB","#9B59B6","#1ABC9C"],Y=["M2,5 Q12,2 22,5 Q32,8 42,5 L42,8 Q32,11 22,8 Q12,5 2,8 Z","M20,2 L38,2 L29,12 Z","M20,7 A6,6 0,1,1 20,7.1 Z","M20,2 L30,7 L20,12 L10,7 Z","M20,2 L22,8 L28,8 L23,11 L25,17 L20,14 L15,17 L17,11 L12,8 L18,8 Z","M2,6 Q15,2 28,6 Q41,10 54,6 L54,9 Q41,13 28,9 Q15,5 2,9 Z","M5,5 L10,2 L15,5 L20,2 L25,5 L30,2 L35,5 L35,8 L30,11 L25,8 L20,11 L15,8 L10,11 L5,8 Z","M20,2 Q25,7 20,12 Q15,7 20,2 M20,2 Q25,7 30,2 Q25,7 30,12 Q25,7 20,12","M20,4 C18,2 15,2 15,5 C15,8 20,12 20,12 C20,12 25,8 25,5 C25,2 22,2 20,4 Z","M15,4 Q10,7 15,10 Q20,7 25,10 Q30,7 25,4 Q20,7 15,4","M5,4 Q20,2 35,4 Q40,7 35,10 Q20,8 5,10 Q0,7 5,4","M2,7 Q10,3 18,7 Q26,11 34,7 Q38,5 42,7 L42,10 Q38,8 34,10 Q26,14 18,10 Q10,6 2,10 Z"];for(let ae=0;ae<50;ae++){const G=document.createElementNS("http://www.w3.org/2000/svg","svg"),ue=document.createElementNS("http://www.w3.org/2000/svg","path"),Ae=N[Math.floor(Math.random()*N.length)],vt=Y[Math.floor(Math.random()*Y.length)],lt=Math.random()*.6+.5,wt=44*lt,ct=16*lt;if(G.setAttribute("width",wt.toString()),G.setAttribute("height",ct.toString()),G.setAttribute("viewBox","0 0 44 16"),G.style.cssText=`
        position: fixed;
        pointer-events: none;
        z-index: 10000;
        left: ${p-wt/2}px;
        top: ${w-ct/2}px;
        transform-origin: center;
      `,ue.setAttribute("d",vt),ue.setAttribute("fill",Ae),Math.random()>.5&&(ue.setAttribute("stroke",Ae),ue.setAttribute("stroke-width","1"),ue.setAttribute("fill-opacity","0.8")),Math.random()>.7){const ze=`gradient-${Date.now()}-${ae}`,je=document.createElementNS("http://www.w3.org/2000/svg","defs"),Te=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),Oe=document.createElementNS("http://www.w3.org/2000/svg","stop"),kt=document.createElementNS("http://www.w3.org/2000/svg","stop");Te.setAttribute("id",ze),Te.setAttribute("x1","0%"),Te.setAttribute("y1","0%"),Te.setAttribute("x2","100%"),Te.setAttribute("y2","100%"),Oe.setAttribute("offset","0%"),Oe.setAttribute("stop-color",Ae),kt.setAttribute("offset","100%"),kt.setAttribute("stop-color",N[Math.floor(Math.random()*N.length)]),Te.appendChild(Oe),Te.appendChild(kt),je.appendChild(Te),G.appendChild(je),ue.setAttribute("fill",`url(#${ze})`)}G.appendChild(ue),document.body.appendChild(G);const Ue=Math.random()*360*(Math.PI/180),_t=Math.random()*4+2;let Ne=Math.cos(Ue)*_t,Nt=Math.sin(Ue)*_t;const cs=(Math.random()-.5)*80;let me=Math.random()*360,Le=p-wt/2,jt=w-ct/2;const ds=.2,Je=.998,us=Date.now(),St=()=>{const ze=(Date.now()-us)/1e3;Nt+=ds,Ne*=Je,Nt*=Je,Le+=Ne,jt+=Nt,me+=cs*(1/60),G.style.left=Le+"px",G.style.top=jt+"px",G.style.transform=`rotate(${me}deg)`;const je=Math.max(0,1-ze/7);G.style.opacity=je.toString(),je>0&&jt<window.innerHeight+100?requestAnimationFrame(St):document.body.contains(G)&&document.body.removeChild(G)};setTimeout(()=>{requestAnimationFrame(St)},Math.random()*150)}},te=()=>{const p=ee.findIndex(N=>N.key===i),w=ee[(p+1)%ee.length].key;if(l(w),C.current){const N=C.current.getBoundingClientRect(),Y=N.left+60,H=N.top+N.height/2;B(Y,H)}},Q=["chatGPT","Gemini","Deepseek","Kimi"],le=["https://chatgpt.com/","https://gemini.google.com/","https://chat.deepseek.com/","https://www.kimi.com/"],ne=[o.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,verticalAlign:"middle",position:"relative",top:"1px",userSelect:"none"},children:o.jsx("img",{src:"/jiang_ai_web/icon/chatgpt.svg",alt:"chatGPT",style:{width:20,height:20,display:"block",userSelect:"none"}})}),o.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,verticalAlign:"middle",position:"relative",top:"1px",userSelect:"none"},children:o.jsx("img",{src:"/jiang_ai_web/icon/gemini.svg",alt:"Gemini",style:{width:20,height:20,display:"block",userSelect:"none"}})}),o.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,verticalAlign:"middle",position:"relative",top:"1px",userSelect:"none"},children:o.jsx("img",{src:"/jiang_ai_web/icon/deepseek.svg",alt:"Deepseek",style:{width:20,height:20,display:"block",userSelect:"none"}})}),o.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,verticalAlign:"middle",position:"relative",top:"1px",userSelect:"none"},children:o.jsx("img",{src:"/jiang_ai_web/icon/kimi.svg",alt:"Kimi",style:{width:20,height:20,display:"block",userSelect:"none"}})})],E=(p,w)=>{switch(p){case"google":return`https://www.google.com/search?q=${encodeURIComponent(w)}`;default:return`https://www.bing.com/search?q=${encodeURIComponent(w)}`}},W=async p=>{if(!p.trim())return[];try{const w=document.createElement("script"),N=`baiduCallback_${Date.now()}`;return new Promise(Y=>{window[N]=H=>{if(H&&H.s&&Array.isArray(H.s)){const ae=H.s.slice(0,5).map((G,ue)=>({id:`baidu-${ue}`,text:G,query:G}));Y(ae)}else{const ae=q(p);Y(ae.slice(0,5).map((G,ue)=>({id:`local-${ue}`,text:G,query:G})))}document.head.removeChild(w),delete window[N]},setTimeout(()=>{if(window[N]){const H=q(p);Y(H.slice(0,5).map((ae,G)=>({id:`local-${G}`,text:ae,query:ae}))),document.head.contains(w)&&document.head.removeChild(w),delete window[N]}},2e3),w.src=`https://suggestion.baidu.com/su?wd=${encodeURIComponent(p)}&cb=${N}`,w.onerror=()=>{const H=q(p);Y(H.slice(0,5).map((ae,G)=>({id:`local-${G}`,text:ae,query:ae}))),document.head.contains(w)&&document.head.removeChild(w),delete window[N]},document.head.appendChild(w)})}catch(w){return console.warn("Failed to fetch Baidu suggestions:",w),q(p).slice(0,5).map((Y,H)=>({id:`local-${H}`,text:Y,query:Y}))}},q=p=>{const w=[],N=p.toLowerCase(),Y=[p,`${p} `,`${p} `,`${p} `,` ${p}`,`${p} `,`${p} `,`${p} `];return N.includes("")||N.includes("how")?w.push(`${p}`,`${p} `,`${p} `):N.includes("")||N.includes("")?w.push(`${p}`,`${p} `,`${p} `):w.push(...Y),[...new Set(w)]};h.useEffect(()=>{const p=setTimeout(()=>{s.trim()?W(s).then(w=>{d(w),g(w.length>0),$(-1)}):(d([]),g(!1),$(-1))},500);return()=>clearTimeout(p)},[s]);const K=(p,w)=>{p.preventDefault();const N=w||(x>=0&&f[x]?f[x].query:s);N.trim()&&(window.open(E(i,N),"_blank"),n(""),g(!1))},L=p=>{switch(p.key){case"ArrowDown":if(!m)return;p.preventDefault(),$(w=>w<f.length-1?w+1:w);break;case"ArrowUp":if(!m)return;p.preventDefault(),$(w=>w>-1?w-1:-1);break;case"Escape":g(!1),$(-1);break;case"Tab":p.shiftKey||(p.preventDefault(),te());break}},R=h.useRef(null);return h.useLayoutEffect(()=>{if(u&&y.current){const p=y.current.getBoundingClientRect();O({left:p.left+p.width/2,top:p.top})}else O(null)},[u,i]),o.jsx("div",{className:"relative left-0 right-0 z-50 flex justify-center px-4 select-none",children:o.jsx(re.div,{className:"w-full flex justify-center",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},children:o.jsx("form",{ref:C,onSubmit:K,className:"relative flex items-center justify-center",onMouseEnter:()=>{R.current&&(clearTimeout(R.current),R.current=null),r(!0)},onMouseLeave:()=>{R.current&&clearTimeout(R.current),R.current=setTimeout(()=>{r(!1),c(!1),setTimeout(()=>{g(!1)},100)},200)},children:o.jsxs(re.div,{animate:{width:a?520:340},initial:{width:340},transition:{type:"tween",duration:.28,ease:"easeInOut"},style:{display:"flex",alignItems:"center",position:"relative"},onAnimationComplete:()=>{a&&c(!0)},children:[o.jsxs("div",{className:"relative flex items-center",children:[o.jsxs("button",{type:"button",className:"flex items-center gap-2 px-1.5 py-1 text-white/80 hover:text-white bg-transparent border-none outline-none text-lg select-none relative z-20",style:{pointerEvents:"auto",height:36,minWidth:36,minHeight:36,justifyContent:"center",alignItems:"center",display:"flex"},tabIndex:-1,onClick:()=>{te()},onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),children:[(M=ee.find(p=>p.key===i))==null?void 0:M.icon,o.jsx("span",{className:"hidden sm:inline text-base font-semibold select-none",children:(V=ee.find(p=>p.key===i))==null?void 0:V.label})]}),T&&o.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800/90 text-white text-sm rounded-lg shadow-lg backdrop-blur-sm border border-white/10 whitespace-nowrap z-30",children:[" ",i==="bing"?"Google":"Bing",o.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-800/90"})]})]}),o.jsx("span",{className:"mx-2 text-white/30 select-none font-normal text-base z-10",children:"|"}),o.jsx("span",{className:"text-white/60 select-none font-normal text-base z-10"}),o.jsx("input",{ref:e,type:"text",value:s,onChange:p=>n(p.target.value),onKeyDown:L,placeholder:"...",className:"backdrop-blur-md border border-white/20 rounded-full pl-4 py-2 text-white placeholder-white/60 outline-none text-base transition-all duration-200 pr-12 w-full ml-3",style:{backgroundColor:`rgba(${se}, ${I})`,minWidth:"4rem",maxWidth:"100%"}}),o.jsx("button",{ref:y,type:"submit",className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-white/70 hover:text-white transition-colors bg-transparent border-none outline-none group select-none",style:{pointerEvents:"auto"},children:o.jsx(re.i,{className:"fa-solid fa-magnifying-glass text-sm",whileHover:{scale:1.22,rotate:18,color:"#fff"},whileTap:{scale:.95,rotate:0},animate:{color:a?"#fff":void 0},transition:{type:"spring",stiffness:350,damping:18},style:{display:"inline-block"}})}),m&&f.length>0&&o.jsx(re.div,{className:"absolute top-full left-0 right-0 mt-2 backdrop-blur-md rounded-lg shadow-lg border border-white/20 z-50 overflow-hidden max-h-60 overflow-y-auto",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.2},style:{pointerEvents:"auto",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:f.map((p,w)=>o.jsx("div",{className:`px-4 py-3 cursor-pointer transition-colors border-b border-white/10 last:border-b-0 select-none ${w===x?"bg-blue-500/20 text-gray-800":"hover:bg-white/50 text-gray-700"}`,onClick:N=>{N.stopPropagation(),n(p.text),K(N,p.query)},onMouseEnter:()=>$(w),onMouseDown:N=>N.preventDefault(),children:o.jsxs("div",{className:"flex items-center gap-3 select-none",children:[o.jsx("i",{className:"fa-solid fa-magnifying-glass text-gray-400 text-sm w-4 select-none"}),o.jsx("div",{className:"flex-1 min-w-0 select-none",children:o.jsx("div",{className:"font-medium text-sm truncate select-none",children:p.text})})]})},p.id))}),a&&u&&b&&o.jsx("div",{className:"fixed z-30",style:{left:b.left,top:b.top,width:0,height:0,pointerEvents:"auto",transform:"translate(-50%, -50%)"},children:o.jsx("div",{style:{position:"absolute",left:0,top:0},children:ne.map((p,w,N)=>{const H=(-60+120/(N.length-1)*w)*(Math.PI/180),ae=44,G=ae*Math.cos(H),ue=ae*Math.sin(H),Ae=19,vt=Ae*3.6;return o.jsxs(re.span,{role:"img","aria-label":Q[w],initial:{x:0,y:0,scale:.3,opacity:0,filter:"none"},animate:{x:G,y:ue,scale:1.18,opacity:1,filter:"none"},whileHover:{scale:1.38,filter:"drop-shadow(0 0 4px #fff) drop-shadow(0 0 8px #fff)"},transition:{type:"spring",stiffness:400,damping:22,delay:.08*w},style:{position:"absolute",left:0,top:0,fontSize:22,cursor:"pointer",userSelect:"none",zIndex:2,willChange:"filter, transform"},onClick:()=>window.open(le[w],"_blank"),onMouseEnter:()=>S(w),onMouseLeave:()=>S(null),children:[p,P===w&&o.jsx("div",{style:{position:"absolute",left:28,top:"50%",transform:"translateY(-50%)",height:Ae,width:vt,background:"rgba(255,255,255,0.98)",color:"#222",borderRadius:Ae/2,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 12px #0003",fontSize:14,fontWeight:500,pointerEvents:"auto",zIndex:10,padding:"0 10px",whiteSpace:"nowrap"},children:o.jsx("span",{style:{userSelect:"none"},children:Q[w]})})]},w)})})})]})})})})}function bc(){const[t,e]=h.useState(!1);h.useEffect(()=>{const n=setTimeout(()=>{e(!0)},1e4);return()=>clearTimeout(n)},[]);const s=()=>{window.open("https://github.com/jiangjianghong","_blank")};return t?o.jsx("div",{className:"cat-container",children:o.jsxs("div",{className:"cat",onClick:s,style:{cursor:"pointer"},children:[o.jsx("div",{className:"paw"}),o.jsx("div",{className:"paw"}),o.jsxs("div",{className:"shake",children:[o.jsx("div",{className:"tail"}),o.jsxs("div",{className:"main",children:[o.jsx("div",{className:"head"}),o.jsx("div",{className:"body",children:o.jsx("div",{className:"leg"})}),o.jsxs("div",{className:"face",children:[o.jsxs("div",{className:"mustache_cont",children:[o.jsx("div",{className:"mustache"}),o.jsx("div",{className:"mustache"})]}),o.jsxs("div",{className:"mustache_cont",children:[o.jsx("div",{className:"mustache"}),o.jsx("div",{className:"mustache"})]}),o.jsx("div",{className:"nose"}),o.jsx("div",{className:"eye"}),o.jsx("div",{className:"eye"}),o.jsxs("div",{className:"brow_cont",children:[o.jsx("div",{className:"brow"}),o.jsx("div",{className:"brow"})]}),o.jsxs("div",{className:"brow_cont",children:[o.jsx("div",{className:"brow"}),o.jsx("div",{className:"brow"})]}),o.jsx("div",{className:"ear_l",children:o.jsx("div",{className:"inner"})}),o.jsxs("div",{className:"ear_r",children:[o.jsx("div",{className:"outer"}),o.jsx("div",{className:"inner"})]})]})]})]})]})}):null}const it=()=>navigator.onLine;function Ut(t,e=1e4){return new Promise((s,n)=>{const a=setTimeout(()=>{n(new Error(` (${e}ms)`))},e);t.then(r=>{clearTimeout(a),s(r)}).catch(r=>{clearTimeout(a),n(r)})})}const vc=async(t,e,s=5e3)=>{if(!it())throw new Error("");return Ut(jr(Fe,t,e),s)},wc=async(t,e,s=5e3)=>{if(!it())throw new Error("");return Ut(Nr(Fe,t,e),s)},_c=async(t=5e3)=>{if(!it())throw new Error("");const e=new wr;return e.setCustomParameters({prompt:"select_account"}),Ut(_r(Fe,e),t)},Pn=async(t=5e3)=>{if(!it())throw new Error("");if(!Fe.currentUser)throw new Error("");return Ut(vr(Fe.currentUser),t)},Nc=async(t=5e3)=>{if(!it())throw new Error("");if(!Fe.currentUser)throw new Error("");return Ut(br(Fe.currentUser),t)},Tt=t=>{if(!it())return"";const e=(t==null?void 0:t.code)||(t==null?void 0:t.message)||"";if(e.includes("")||e.includes("timeout"))return"";switch(e){case"auth/network-request-failed":return"";case"auth/timeout":return"";case"auth/too-many-requests":return"";case"auth/user-not-found":return"";case"auth/wrong-password":return"";case"auth/email-already-in-use":return"";case"auth/weak-password":return"";case"auth/invalid-email":return"";case"auth/popup-closed-by-user":return"";case"auth/cancelled-popup-request":return"";default:return(t==null?void 0:t.message)||""}},jc=t=>{const e=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",e),window.addEventListener("offline",s),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",s)}},Da=h.createContext(void 0);function Ce(){const t=h.useContext(Da);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function Sc({children:t}){const[e,s]=h.useState(null),[n,a]=h.useState(!0),[r,i]=h.useState(it()),[l,u]=h.useState(null),c=()=>u(null),f=async(b,O)=>{try{c(),await vc(b,O)}catch(P){const S=Tt(P);throw u(S),new Error(S)}},d=async(b,O)=>{try{if(c(),(await wc(b,O)).user)try{await Pn()}catch(S){console.warn(":",S)}}catch(P){const S=Tt(P);throw u(S),new Error(S)}},m=async()=>{try{c(),e&&!e.emailVerified&&await Pn()}catch(b){const O=Tt(b);throw u(O),new Error(O)}},g=async()=>{try{c(),e&&await Nc()}catch(b){const O=Tt(b);throw u(O),new Error(O)}},x=async()=>{try{c(),await _c()}catch(b){const O=Tt(b);throw u(O),new Error(O)}},$=async()=>{c(),await kr(Fe)};h.useEffect(()=>Sr(Fe,O=>{s(O),a(!1)}),[]),h.useEffect(()=>jc(O=>{i(O),u(O?P=>P!=null&&P.includes("")?null:P:"")}),[]);const y={currentUser:e,login:f,register:d,loginWithGoogle:x,logout:$,sendVerificationEmail:m,reloadUser:g,loading:n,isNetworkOnline:r,error:l};return o.jsx(Da.Provider,{value:y,children:!n&&t})}const $a=async(t,e=3,s=1e3)=>{let n;for(let a=0;a<=e;a++)try{return await t()}catch(r){if(n=r,a===e)throw n;const i=s*Math.pow(2,a);console.log(` ${i}ms (${a+1}/${e+1})`),await new Promise(l=>setTimeout(l,i))}throw n},kc=async(t,e,s)=>{var n,a;try{return(n=s==null?void 0:s.onSyncStart)==null||n.call(s),await $a(async()=>{const r=xt(yt,"userSettings",t.uid);await Ls(r,{...e,lastSync:Qt()},{merge:!0})}),console.log(""),(a=s==null?void 0:s.onSyncSuccess)==null||a.call(s,""),!0}catch(r){return console.error(":",r),!1}},Cc=async t=>{try{const e=xt(yt,"userSettings",t.uid),s=await Ps(e);if(s.exists()){const n=s.data();return console.log(""),n}else return console.log(""),null}catch(e){return console.error(":",e),null}},Rs=async(t,e,s)=>{var n,a;try{return(n=s==null?void 0:s.onSyncStart)==null||n.call(s),await $a(async()=>{const r=xt(yt,"userWebsites",t.uid);await Ls(r,{websites:e,lastSync:Qt()})}),console.log(""),(a=s==null?void 0:s.onSyncSuccess)==null||a.call(s,""),!0}catch(r){return console.error(":",r),!1}},Tc=async t=>{try{const e=xt(yt,"userWebsites",t.uid),s=await Ps(e);if(s.exists()){const n=s.data();return console.log(""),n.websites}else return console.log(""),null}catch(e){return console.error(":",e),null}},Ic=(t,e)=>{const s={};return t.forEach(n=>{s[n.id]={...n}}),e.forEach(n=>{const a=s[n.id];if(!a)s[n.id]={...n};else{const r=new Date(a.lastVisit||"2000-01-01").getTime(),i=new Date(n.lastVisit||"2000-01-01").getTime();let l;i>r?l={...n}:r>i?l={...a}:l=n.visitCount>a.visitCount?{...n}:{...a},l.visitCount=Math.max(a.visitCount||0,n.visitCount||0),l.lastVisit=r>i?a.lastVisit:n.lastVisit,s[n.id]=l}}),Object.values(s)};let bs=null,Re=0;const It=3,As=(t,e,s,n)=>{bs&&clearTimeout(bs),bs=setTimeout(async()=>{var a,r,i,l;(a=n==null?void 0:n.onSyncStart)==null||a.call(n);try{const c=(await Promise.allSettled([Rs(t,e),kc(t,s)])).filter(f=>f.status==="rejected");c.length===0?(Re=0,(r=n==null?void 0:n.onSyncSuccess)==null||r.call(n,"")):Re<It?(Re++,console.log(` ${Re}/${It} ...`),setTimeout(()=>{As(t,e,s,n)},1e3*Math.pow(2,Re-1))):(Re=0,(i=n==null?void 0:n.onSyncError)==null||i.call(n,`${c.length}  ${It} `))}catch(u){Re<It?(Re++,console.log(` ${Re}/${It} ...`),setTimeout(()=>{As(t,e,s,n)},1e3*Math.pow(2,Re-1))):(Re=0,(l=n==null?void 0:n.onSyncError)==null||l.call(n,": "+u.message))}},5e3)},Ln=async(t,e,s)=>{var n,a;try{(n=s==null?void 0:s.onSyncStart)==null||n.call(s);const r=xt(yt,"userProfiles",t.uid),i={uid:t.uid,email:t.email||"",displayName:e,createdAt:Qt(),updatedAt:Qt()};return await Ls(r,i,{merge:!0}),console.log(""),(a=s==null?void 0:s.onSyncSuccess)==null||a.call(s,""),!0}catch(r){return console.error(":",r),!1}},vs=async t=>{try{const e=xt(yt,"userProfiles",t.uid),s=await Ps(e);if(s.exists()){const n=s.data();return console.log(""),n}else return console.log(""),null}catch(e){return console.error(":",e),null}},Pa=h.createContext(void 0);function La(){const t=h.useContext(Pa);if(t===void 0)throw new Error("useUserProfile must be used within a UserProfileProvider");return t}function Ec({children:t}){const{currentUser:e}=Ce(),[s,n]=h.useState(null),[a,r]=h.useState(!1),i=(s==null?void 0:s.displayName)||"",l=async c=>{if(!e||!e.emailVerified)return!1;r(!0);try{return await Ln(e,c)?(n(d=>d?{...d,displayName:c,updatedAt:new Date}:null),setTimeout(async()=>{const d=await vs(e);d&&n(d)},1e3),!0):!1}catch(f){return console.error(":",f),!1}finally{r(!1)}};h.useEffect(()=>{(async()=>{var f;if(e&&e.emailVerified){r(!0);try{const d=await vs(e);if(d)n(d);else{const m=((f=e.email)==null?void 0:f.split("@")[0])||"";await Ln(e,m);const g=await vs(e);n(g)}}catch(d){console.error(":",d)}finally{r(!1)}}else n(null)})()},[e]);const u={userProfile:s,displayName:i,updateDisplayName:l,loading:a};return o.jsx(Pa.Provider,{value:u,children:t})}const Bn={isOnline:navigator.onLine,lastSyncTime:null,syncInProgress:!1,syncError:null,pendingChanges:0},Ba=h.createContext(void 0);function Gs(){const t=h.useContext(Ba);if(t===void 0)throw new Error("useSyncStatus must be used within a SyncProvider");return t}function Rc({children:t}){const[e,s]=h.useState(Bn),n=i=>{s(l=>({...l,...i}))},a=()=>{s(Bn)};h.useEffect(()=>{const i=()=>{n({isOnline:!0,syncError:null}),console.log(" ")},l=()=>{n({isOnline:!1,syncError:"",syncInProgress:!1}),console.log(" ")};return window.addEventListener("online",i),window.addEventListener("offline",l),n({isOnline:navigator.onLine}),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",l)}},[]);const r={syncStatus:e,updateSyncStatus:n,resetSyncStatus:a};return o.jsx(Ba.Provider,{value:r,children:t})}function Ac(t){const{currentUser:e}=Ce(),{updateSyncStatus:s}=Gs(),{cardOpacity:n,searchBarOpacity:a,parallaxEnabled:r,wallpaperResolution:i}=bt(),l=h.useRef(""),u=h.useRef(null),c=h.useRef(null),f=h.useRef(0),d=h.useCallback((m=!1)=>{if(!navigator.onLine){s({syncInProgress:!1,syncError:"",pendingChanges:1});return}if(!e||!e.emailVerified){e&&!e.emailVerified&&s({syncInProgress:!1,syncError:"",pendingChanges:1});return}if((document.querySelector('[role="dialog"]')||document.querySelector(".modal")||document.querySelector("[data-modal]"))&&!m){console.log(" "),setTimeout(()=>d(!1),5e3);return}const x={cardOpacity:n,searchBarOpacity:a,parallaxEnabled:r,wallpaperResolution:i,theme:localStorage.getItem("theme")||"light",lastSync:null};console.log(m?" ...":" ..."),As(e,t,x,{onSyncStart:()=>{s({syncInProgress:!0,syncError:null,pendingChanges:0})},onSyncSuccess:$=>{const y=JSON.stringify({websites:t.map(b=>({id:b.id,name:b.name,url:b.url,visitCount:b.visitCount})),settings:{cardOpacity:n,searchBarOpacity:a,parallaxEnabled:r,wallpaperResolution:i,theme:x.theme}});l.current=y,f.current=0,s({syncInProgress:!1,lastSyncTime:new Date,syncError:null,pendingChanges:0}),console.log(" :",$)},onSyncError:$=>{s({syncInProgress:!1,syncError:$,pendingChanges:1}),console.error(" :",$)}})},[e,t,n,a,r,i,s]);h.useEffect(()=>{if(JSON.stringify({websites:t.map(b=>({id:b.id,name:b.name,url:b.url,visitCount:b.visitCount})),settings:{cardOpacity:n,searchBarOpacity:a,parallaxEnabled:r,wallpaperResolution:i,theme:localStorage.getItem("theme")||"light"}})===l.current)return;const g=Date.now();f.current===0&&(f.current=g),u.current&&clearTimeout(u.current);const x=g-f.current,$=45e3,y=5e3;if(x>=$){console.log(" "),c.current&&(clearTimeout(c.current),c.current=null),d(!0);return}if(u.current=setTimeout(()=>{d(!1)},y),!c.current){const b=$-x;console.log(` ${Math.round(b/1e3)}`),c.current=setTimeout(()=>{console.log(" "),u.current&&(clearTimeout(u.current),u.current=null),d(!0)},b)}return()=>{u.current&&clearTimeout(u.current)}},[e,t,n,a,r,i,d]),h.useEffect(()=>()=>{u.current&&clearTimeout(u.current),c.current&&clearTimeout(c.current)},[])}function Oc(){const{syncStatus:t}=Gs(),{currentUser:e}=Ce(),[,s]=h.useState(0);if(h.useEffect(()=>{const l=()=>{if(!t.lastSyncTime)return 6e4;const d=Math.floor((new Date().getTime()-t.lastSyncTime.getTime())/1e3);return d<60?1e3:d<3600?6e4:3e5},u=()=>{const f=l();return setTimeout(()=>{s(d=>d+1),u()},f)},c=u();return()=>clearTimeout(c)},[t.lastSyncTime]),!e)return null;const n=l=>{if(!l)return"";const c=Math.floor((new Date().getTime()-l.getTime())/1e3);return c<60?`${c}`:c<3600?`${Math.floor(c/60)}`:c<86400?`${Math.floor(c/3600)}`:`${Math.floor(c/86400)}`},a=()=>t.syncInProgress?o.jsx("i",{className:"fa-solid fa-sync fa-spin text-blue-500"}):t.syncError?o.jsx("i",{className:"fa-solid fa-exclamation-triangle text-red-500"}):t.isOnline?t.pendingChanges>0?o.jsx("i",{className:"fa-solid fa-clock text-orange-500"}):o.jsx("i",{className:"fa-solid fa-check-circle text-green-500"}):o.jsx("i",{className:"fa-solid fa-wifi-slash text-gray-500"}),r=()=>t.syncInProgress?"...":t.syncError?"":t.isOnline?t.pendingChanges>0?`${t.pendingChanges} `:"":"",i=()=>t.syncError?t.syncError:`: ${n(t.lastSyncTime)}`;return o.jsx("div",{className:"space-y-2",children:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[a(),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:r()})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${t.isOnline?"bg-green-500":"bg-red-500"}`}),o.jsx("span",{className:"text-xs text-gray-500",children:t.isOnline?"":""})]})]}),o.jsx("p",{className:"text-xs text-gray-500",children:i()}),o.jsx(Dt,{children:t.syncError&&o.jsx(re.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"bg-red-50 border border-red-200 rounded p-2",children:o.jsxs("p",{className:"text-xs text-red-600",children:[o.jsx("i",{className:"fa-solid fa-info-circle mr-1"}),t.syncError]})})}),o.jsx(Dt,{children:t.syncInProgress&&o.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"w-full bg-gray-200 rounded-full h-1",children:o.jsx(re.div,{className:"bg-blue-500 h-1 rounded-full",initial:{width:"0%"},animate:{width:"100%"},transition:{duration:2,ease:"easeInOut"}})})})]})})}function Dc(){const{syncStatus:t}=Gs(),{currentUser:e}=Ce();if(!e)return null;const s=()=>t.syncInProgress?"...":t.syncError?"":t.pendingChanges>0?"":"",n=()=>t.syncInProgress?"blue":t.syncError?"red":t.pendingChanges>0?"yellow":"green",a=()=>t.syncInProgress?"...":t.pendingChanges>0?"5":"45",r=n();return o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[o.jsxs("div",{className:`bg-${r}-50 rounded p-2 text-center`,children:[o.jsx("div",{className:`font-medium text-${r}-700`,children:""}),o.jsx("div",{className:`text-${r}-600`,children:e.emailVerified?s():""})]}),o.jsxs("div",{className:"bg-blue-50 rounded p-2 text-center",children:[o.jsx("div",{className:"font-medium text-blue-700",children:""}),o.jsx("div",{className:"text-blue-600",children:a()})]})]})}function $c({onSuccess:t}){const[e,s]=h.useState(!0),[n,a]=h.useState(""),[r,i]=h.useState(""),[l,u]=h.useState(""),[c,f]=h.useState(!1),[d,m]=h.useState(""),[g,x]=h.useState(!1),[$,y]=h.useState(""),{login:b,register:O,loginWithGoogle:P,sendVerificationEmail:S,error:T,isNetworkOnline:_}=Ce(),C=d||T,I=async B=>{if(B.preventDefault(),!n||!r){m("");return}if(!e&&!l.trim()){m("");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)){m("");return}if(!e){if(l.length<2||l.length>20){m("2-20");return}if(!/^[a-zA-Z0-9\u4e00-\u9fa5_-]+$/.test(l)){m("");return}}f(!0),m("");try{e?(await b(n,r),t()):(await O(n,r),x(!0),y(n),localStorage.setItem("pendingDisplayName",l))}catch(Q){console.error(":",Q)}finally{f(!1)}},se=async()=>{f(!0),m("");try{await P(),t()}catch(B){console.error("Google:",B)}finally{f(!1)}},ee=async()=>{try{await S(),alert("")}catch{alert("")}};return g?o.jsx(re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:o.jsxs("div",{className:"flex items-start space-x-2",children:[o.jsx("i",{className:"fa-solid fa-envelope-circle-check text-green-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-green-800",children:""}),o.jsxs("p",{className:"text-sm text-green-700 mt-1",children:[" ",o.jsx("strong",{children:$}),"  "]}),o.jsxs("div",{className:"mt-3 flex space-x-2",children:[o.jsx("button",{onClick:ee,className:"text-xs bg-green-100 hover:bg-green-200 text-green-800 px-2 py-1 rounded",children:""}),o.jsx("button",{onClick:()=>{x(!1),s(!0),a(""),i(""),u("")},className:"text-xs bg-blue-100 hover:bg-blue-200 text-blue-800 px-2 py-1 rounded",children:""})]})]})]})}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e?"":""}),o.jsx("p",{className:"text-sm text-gray-600",children:e?"":""})]}),C&&o.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:C}),!_&&o.jsxs("div",{className:"mb-4 p-3 bg-yellow-100 border border-yellow-400 text-yellow-700 rounded flex items-center space-x-2",children:[o.jsx("i",{className:"fa-solid fa-wifi-slash"}),o.jsx("span",{children:""})]}),o.jsxs("form",{onSubmit:I,className:"space-y-4",children:[!e&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),o.jsx("input",{type:"text",value:l,onChange:B=>u(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"2-20",disabled:c,maxLength:20}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:""})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),o.jsx("input",{type:"email",value:n,onChange:B=>a(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"",disabled:c})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),o.jsx("input",{type:"password",value:r,onChange:B=>i(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"6",disabled:c,minLength:6})]}),o.jsx("button",{type:"submit",disabled:c||!_,className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white py-2 px-4 rounded-md transition-colors",children:c?"...":e?"":""})]}),o.jsxs("div",{className:"mt-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("div",{className:"w-full border-t border-gray-300"})}),o.jsx("div",{className:"relative flex justify-center text-sm",children:o.jsx("span",{className:"px-2 bg-white text-gray-500",children:""})})]}),o.jsxs("button",{onClick:se,disabled:c||!_,className:"mt-4 w-full bg-red-500 hover:bg-red-600 disabled:bg-gray-400 text-white py-2 px-4 rounded-md transition-colors flex items-center justify-center",children:[o.jsx("i",{className:"fab fa-google mr-2"})," Google ",e?"":""]})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("button",{onClick:()=>s(!e),className:"text-blue-500 hover:text-blue-600",disabled:c,children:e?"":""})})]})}function Pc(){const{currentUser:t}=Ce(),{displayName:e,updateDisplayName:s,loading:n}=La(),[a,r]=h.useState(!1),[i,l]=h.useState(e),[u,c]=h.useState(!1),[f,d]=h.useState("");if(h.useEffect(()=>{l(e)},[e]),!t||!t.emailVerified)return null;const m=async()=>{if(!i.trim()){d("");return}if(i.length<2||i.length>20){d("2-20");return}if(!/^[a-zA-Z0-9\u4e00-\u9fa5_-]+$/.test(i)){d("");return}c(!0),d("");try{await s(i)?(r(!1),alert("")):d("")}catch(x){d(""),console.error(":",x)}finally{c(!1)}},g=()=>{l(e),r(!1),d("")};return o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:""}),!a&&o.jsxs("button",{onClick:()=>r(!0),className:"text-xs text-blue-500 hover:text-blue-600",disabled:n,children:[o.jsx("i",{className:"fa-solid fa-edit mr-1"}),""]})]}),a?o.jsxs("div",{className:"space-y-2",children:[o.jsx("input",{type:"text",value:i,onChange:x=>l(x.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"",maxLength:20,disabled:u}),f&&o.jsx("p",{className:"text-xs text-red-600",children:f}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:m,disabled:u||!i.trim(),className:"text-xs bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white px-2 py-1 rounded",children:u?o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-1"}),"..."]}):o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-check mr-1"}),""]})}),o.jsxs("button",{onClick:g,disabled:u,className:"text-xs bg-gray-500 hover:bg-gray-600 text-white px-2 py-1 rounded",children:[o.jsx("i",{className:"fa-solid fa-times mr-1"}),""]})]}),o.jsx("p",{className:"text-xs text-gray-500",children:"2-20"})]}):o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("i",{className:"fa-solid fa-user text-gray-400"}),o.jsx("span",{className:"text-sm font-medium text-gray-800",children:n?"...":e})]}),o.jsx("div",{className:"border-t border-gray-200 pt-2",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("i",{className:"fa-solid fa-envelope text-gray-400"}),o.jsx("span",{className:"text-xs text-gray-600",children:t.email})]}),o.jsx("i",{className:"fa-solid fa-check-circle text-green-500 text-xs",title:""})]})})]})}const Ye=class Ye{static getInstance(){return Ye.instance||(Ye.instance=new Ye),Ye.instance}hasConsent(){try{return localStorage.getItem("cookie-consent")==="accepted"}catch{return!1}}getConsentStatus(){try{const e=localStorage.getItem("cookie-consent");return e==="accepted"?"accepted":e==="declined"?"declined":"pending"}catch{return"pending"}}setItem(e,s,n=!1){try{return n||this.hasConsent()?(localStorage.setItem(e,s),!0):(console.warn(` : ${e} (Cookie)`),!1)}catch(a){return console.error(":",a),!1}}getItem(e,s=!1){try{return s||this.hasConsent()?localStorage.getItem(e):(console.warn(` : ${e} (Cookie)`),null)}catch(n){return console.error(":",n),null}}removeItem(e,s=!1){try{return s||this.hasConsent()?(localStorage.removeItem(e),!0):(console.warn(` : ${e} (Cookie)`),!1)}catch(n){return console.error(":",n),!1}}getAllKeys(e=!0){try{if(!this.hasConsent()&&!e)return[];const s=[],n=["cookie-consent","cookie-consent-date"];for(let a=0;a<localStorage.length;a++){const r=localStorage.key(a);r&&(e||!n.includes(r))&&s.push(r)}return s}catch{return[]}}clearNonEssentialData(){const e=["cookie-consent","cookie-consent-date"];this.getAllKeys(!0).forEach(n=>{if(!e.includes(n))try{localStorage.removeItem(n)}catch(a){console.error(`: ${n}`,a)}}),console.log(" ")}getStorageStats(){const e=this.getAllKeys(!0),s=["cookie-consent","cookie-consent-date"],n=e.filter(r=>!s.includes(r)).length;let a=0;return e.forEach(r=>{try{const i=localStorage.getItem(r)||"";a+=r.length+i.length}catch{}}),{totalKeys:e.length,essentialKeys:s.filter(r=>e.includes(r)).length,nonEssentialKeys:n,consentRequired:!this.hasConsent()&&n>0,storageUsed:`${Math.round(a/1024*100)/100} KB`}}exportData(){if(!this.hasConsent())return console.warn("  (Cookie)"),null;const e={};return this.getAllKeys(!1).forEach(n=>{try{const a=localStorage.getItem(n);a&&(e[n]=JSON.parse(a))}catch{e[n]=localStorage.getItem(n)}}),{exportTime:new Date().toISOString(),consentStatus:this.getConsentStatus(),data:e}}};he(Ye,"instance");let rs=Ye;const Be=rs.getInstance();function Ma({isOpen:t,onClose:e}){const[s,n]=h.useState(Be.getStorageStats()),[a,r]=h.useState(Be.getConsentStatus());h.useEffect(()=>{t&&(n(Be.getStorageStats()),r(Be.getConsentStatus()))},[t]);const i=()=>{const c=a==="accepted"?"declined":"accepted";c==="accepted"?(localStorage.setItem("cookie-consent","accepted"),localStorage.setItem("cookie-consent-date",new Date().toISOString())):(localStorage.setItem("cookie-consent","declined"),localStorage.setItem("cookie-consent-date",new Date().toISOString()),Be.clearNonEssentialData()),r(c),n(Be.getStorageStats())},l=()=>{confirm(` 


`)&&(Be.clearNonEssentialData(),n(Be.getStorageStats()),alert(" "))},u=()=>{const c=Be.exportData();if(!c){alert(" Cookie");return}const f=new Blob([JSON.stringify(c,null,2)],{type:"application/json"}),d=URL.createObjectURL(f),m=document.createElement("a");m.href=d,m.download=`_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(d),alert(" ")};return t?o.jsx(Dt,{children:o.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:e}),o.jsxs(re.div,{className:"w-full max-w-2xl bg-white rounded-xl shadow-2xl z-50 max-h-[90vh] flex flex-col mx-4",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20,stiffness:300},children:[o.jsx("div",{className:"p-6 pb-0",children:o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("i",{className:"fa-solid fa-shield-halved text-blue-600 text-2xl"}),o.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:""})]}),o.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 text-xl",children:o.jsx("i",{className:"fa-solid fa-xmark"})})]})}),o.jsxs("div",{className:"flex-1 px-6 py-4 space-y-6 overflow-y-auto",children:[o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[o.jsx("i",{className:"fa-solid fa-cookie-bite text-amber-500"}),"Cookie"]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"text-sm text-gray-600",children:[":",o.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${a==="accepted"?"bg-green-100 text-green-800":a==="declined"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:a==="accepted"?" ":a==="declined"?" ":" "})]}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a==="accepted"?"Cookie":a==="declined"?"Cookie":""})]}),a!=="pending"&&o.jsx("button",{onClick:i,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${a==="accepted"?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:a==="accepted"?"":""})]})]}),o.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[o.jsx("i",{className:"fa-solid fa-chart-pie text-blue-600"}),""]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.totalKeys}),o.jsx("div",{className:"text-xs text-gray-600",children:""})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.essentialKeys}),o.jsx("div",{className:"text-xs text-gray-600",children:""})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-purple-600",children:s.nonEssentialKeys}),o.jsx("div",{className:"text-xs text-gray-600",children:""})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-orange-600",children:s.storageUsed}),o.jsx("div",{className:"text-xs text-gray-600",children:""})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[o.jsx("i",{className:"fa-solid fa-info-circle text-blue-600"}),""]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 rounded-lg",children:[o.jsx("i",{className:"fa-solid fa-shield-check text-green-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-green-800",children:""}),o.jsx("div",{className:"text-green-700",children:"Cookie - "})]})]}),o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-50 rounded-lg",children:[o.jsx("i",{className:"fa-solid fa-bookmark text-blue-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-blue-800",children:""}),o.jsx("div",{className:"text-blue-700",children:""})]})]}),o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-purple-50 rounded-lg",children:[o.jsx("i",{className:"fa-solid fa-palette text-purple-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-purple-800",children:""}),o.jsx("div",{className:"text-purple-700",children:""})]})]}),o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-orange-50 rounded-lg",children:[o.jsx("i",{className:"fa-solid fa-chart-line text-orange-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-orange-800",children:""}),o.jsx("div",{className:"text-orange-700",children:""})]})]})]})]}),o.jsxs("div",{className:"border-t pt-4",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx("i",{className:"fa-solid fa-wrench text-gray-600"}),""]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:u,disabled:a!=="accepted",className:"w-full p-3 bg-blue-100 hover:bg-blue-200 disabled:bg-gray-100 disabled:text-gray-400 text-blue-800 rounded-lg transition-colors text-left",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("i",{className:"fa-solid fa-download"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:""}),o.jsx("div",{className:"text-sm opacity-75",children:"JSON"})]})]})}),o.jsx("button",{onClick:l,className:"w-full p-3 bg-red-100 hover:bg-red-200 text-red-800 rounded-lg transition-colors text-left",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("i",{className:"fa-solid fa-trash"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:""}),o.jsx("div",{className:"text-sm opacity-75",children:""})]})]})})]}),o.jsxs("div",{className:"mt-6",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[o.jsx("i",{className:"fa-solid fa-book-open text-blue-500"}),""]}),o.jsx("p",{className:"text-sm text-gray-600 mb-3",children:""}),o.jsxs("a",{href:"/tutorial.html",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium shadow transition-colors",children:[o.jsx("i",{className:"fa-solid fa-graduation-cap"}),""]})]})]})]}),o.jsx("div",{className:"p-6 pt-0 border-t",children:o.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[o.jsxs("span",{children:[": ",new Date().toLocaleDateString("zh-CN")]}),o.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg",children:""})]})})]})]})}):null}function Lc({isOpen:t,onClose:e,onConfirm:s,title:n,message:a,confirmText:r="",cancelText:i="",type:l="warning"}){const c=(()=>{switch(l){case"danger":return{icon:"fa-solid fa-triangle-exclamation text-red-500",confirmButton:"bg-red-500 hover:bg-red-600 text-white",borderColor:"border-red-200"};case"warning":return{icon:"fa-solid fa-exclamation-triangle text-orange-500",confirmButton:"bg-orange-500 hover:bg-orange-600 text-white",borderColor:"border-orange-200"};case"info":return{icon:"fa-solid fa-info-circle text-blue-500",confirmButton:"bg-blue-500 hover:bg-blue-600 text-white",borderColor:"border-blue-200"}}})(),f=()=>{s(),e()};return o.jsx(Dt,{children:t&&o.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center",children:[o.jsx(re.div,{className:"absolute inset-0 bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),o.jsx(re.div,{className:`relative bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 border-2 ${c.borderColor}`,initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20,stiffness:300},children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-start space-x-4",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("i",{className:`${c.icon} text-2xl`})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:n}),o.jsx("div",{className:"text-sm text-gray-600 whitespace-pre-line",children:a})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[o.jsx("button",{onClick:e,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:i}),o.jsx("button",{onClick:f,className:`px-4 py-2 rounded-lg transition-colors ${c.confirmButton}`,children:r})]})]})})]})})}function Mn({label:t,selectedColor:e,onChange:s}){return o.jsxs("div",{className:"space-y-3 select-none",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700 select-none",children:t}),o.jsx("div",{className:"flex gap-2 flex-wrap",children:fc.map(n=>o.jsx(re.button,{type:"button",onClick:()=>s(n.rgb),className:`w-8 h-8 rounded-lg border-2 transition-all duration-200 hover:scale-110 ${e===n.rgb?"border-blue-500 shadow-lg":"border-gray-300 hover:border-gray-400"}`,style:{backgroundColor:n.preview},title:n.name,whileHover:{scale:1.1},whileTap:{scale:.95},children:e===n.rgb&&o.jsx(re.div,{className:"w-full h-full flex items-center justify-center",initial:{scale:0},animate:{scale:1},transition:{duration:.2},children:o.jsx("i",{className:`fa-solid fa-check text-sm ${n.name===""||n.name===""?"text-gray-700":"text-white"}`})})},n.name))})]})}const Bc=[{id:"1",name:"GitHub",url:"https://github.com",favicon:"https://github.githubassets.com/favicons/favicon.png",tags:["",""],visitCount:42,lastVisit:"2023-05-15",note:""},{id:"2",name:"Dribbble",url:"https://dribbble.com",favicon:"https://cdn.dribbble.com/assets/favicon-b38525134603b9513174e916967b4baaaaaa5ee0297c4f53d6fb3ab8ad26c3a4.ico",tags:["",""],visitCount:28,lastVisit:"2023-05-10",note:""},{id:"3",name:"Medium",url:"https://medium.com",favicon:"https://miro.medium.com/v2/resize:fill:32:32/1*sHhtYhaCe2Uc3IU0IgKwIQ.png",tags:["",""],visitCount:15,lastVisit:"2023-05-05",note:""}];function Fa(t={}){const{enableAutoSync:e=!0,syncDelay:s=100}=t,n=rs.getInstance(),[a,r]=h.useState(!0),[i,l]=h.useState(null),[u,c]=h.useState(!0),f=h.useCallback(()=>{try{const S=n.getItem("websites");if(S){const T=JSON.parse(S);if(Array.isArray(T)&&T.length>0){const _=T.filter(C=>C.id&&C.name&&C.url);if(_.length>0)return console.log(`  ${_.length} `),_}}}catch(S){console.warn(":",S),l("")}return Bc},[n]),[d,m]=h.useState(()=>{const S=f();return r(!1),S}),g=h.useCallback(S=>{try{n.setItem("websites",JSON.stringify(S))||console.warn("Cookie")}catch(T){console.error(":",T),l("")}},[n]);h.useEffect(()=>{if(!e||!u)return;const S=setTimeout(()=>{const T=f();(T.length!==d.length||JSON.stringify(T.map(_=>_.id).sort())!==JSON.stringify(d.map(_=>_.id).sort()))&&(console.log(" "),m(T)),c(!1)},s);return()=>clearTimeout(S)},[e,s,u,f,d]),h.useEffect(()=>{!u&&e&&g(d)},[d,g,e,u]);const x=h.useCallback(S=>{l(null),m(S)},[]),$=h.useCallback(S=>{const T={...S,visitCount:0,lastVisit:new Date().toISOString().split("T")[0]};x(_=>[..._,T])},[x]),y=h.useCallback((S,T)=>{x(_=>_.map(C=>C.id===S?{...C,...T}:C))},[x]),b=h.useCallback(S=>{x(T=>T.filter(_=>_.id!==S))},[x]),O=h.useCallback(async()=>{try{const S={websites:d,settings:{cardOpacity:parseFloat(localStorage.getItem("cardOpacity")||"0.1"),searchBarOpacity:parseFloat(localStorage.getItem("searchBarOpacity")||"0.1"),parallaxEnabled:JSON.parse(localStorage.getItem("parallaxEnabled")||"true"),wallpaperResolution:localStorage.getItem("wallpaperResolution")||"1080p",theme:localStorage.getItem("theme")||"light"},exportTime:new Date().toISOString(),version:"1.0"};return JSON.stringify(S,null,2)}catch(S){throw new Error(`: ${S instanceof Error?S.message:""}`)}},[d]),P=h.useCallback(async S=>{try{if(!S.websites||!Array.isArray(S.websites))return{success:!1,message:""};const T=S.websites.filter(_=>_.id&&_.name&&_.url&&typeof _.id=="string"&&typeof _.name=="string"&&typeof _.url=="string").map(_=>({..._,visitCount:typeof _.visitCount=="number"?_.visitCount:0,lastVisit:_.lastVisit||new Date().toISOString().split("T")[0],tags:Array.isArray(_.tags)?_.tags:[],note:_.note||""}));return T.length===0?{success:!1,message:""}:(x(T),{success:!0,message:` ${T.length} `,validCount:T.length})}catch(T){return{success:!1,message:`: ${T instanceof Error?T.message:""}`}}},[x]);return{websites:d,setWebsites:x,addWebsite:$,updateWebsite:y,deleteWebsite:b,exportData:O,importData:P,isLoading:a,error:i}}function Mc(){const t=h.useCallback(()=>{try{return{cardOpacity:parseFloat(localStorage.getItem("cardOpacity")||"0.1"),searchBarOpacity:parseFloat(localStorage.getItem("searchBarOpacity")||"0.1"),parallaxEnabled:JSON.parse(localStorage.getItem("parallaxEnabled")||"true"),wallpaperResolution:localStorage.getItem("wallpaperResolution")||"1080p",theme:localStorage.getItem("theme")||"light"}}catch(n){return console.warn(":",n),{cardOpacity:.1,searchBarOpacity:.1,parallaxEnabled:!0,wallpaperResolution:"1080p",theme:"light"}}},[]),e=h.useCallback(n=>{const a=[];return n.cardOpacity!==void 0&&(typeof n.cardOpacity!="number"||n.cardOpacity<.05||n.cardOpacity>.3)&&a.push("0.05-0.3"),n.searchBarOpacity!==void 0&&(typeof n.searchBarOpacity!="number"||n.searchBarOpacity<.05||n.searchBarOpacity>.3)&&a.push("0.05-0.3"),n.parallaxEnabled!==void 0&&typeof n.parallaxEnabled!="boolean"&&a.push("truefalse"),n.wallpaperResolution!==void 0&&(["4k","1080p","720p","mobile"].includes(n.wallpaperResolution)||a.push("")),n.theme!==void 0&&(["light","dark"].includes(n.theme)||a.push("lightdark")),{valid:a.length===0,errors:a}},[]),s=h.useCallback(n=>{const a=e(n),r=[];if(!a.valid)return console.warn(":",a.errors),{success:!1,appliedSettings:[]};try{return typeof n.cardOpacity=="number"&&(localStorage.setItem("cardOpacity",n.cardOpacity.toString()),r.push("")),typeof n.searchBarOpacity=="number"&&(localStorage.setItem("searchBarOpacity",n.searchBarOpacity.toString()),r.push("")),typeof n.parallaxEnabled=="boolean"&&(localStorage.setItem("parallaxEnabled",JSON.stringify(n.parallaxEnabled)),r.push("")),n.wallpaperResolution&&["4k","1080p","720p","mobile"].includes(n.wallpaperResolution)&&(localStorage.setItem("wallpaperResolution",n.wallpaperResolution),r.push("")),n.theme&&["light","dark"].includes(n.theme)&&(localStorage.setItem("theme",n.theme),r.push("")),{success:!0,appliedSettings:r}}catch(i){return console.error(":",i),{success:!1,appliedSettings:[]}}},[e]);return{exportSettings:t,importSettings:s,validateSettings:e}}function Fc(t,e){const[s,n]=h.useState(!1),[a,r]=h.useState(!1),[i,l]=h.useState(null),{importData:u}=Fa({enableAutoSync:!1}),{exportSettings:c,importSettings:f}=Mc(),d=h.useCallback(async(g={})=>{const{includeSettings:x=!0,includeWebsites:$=!0}=g;if(!s){n(!0),l(null);try{if($&&(!t||t.length===0)&&!confirm(""))return;const y={exportTime:new Date().toISOString(),version:"1.0"};$&&(y.websites=t||[]),x&&(y.settings=c());const b=JSON.stringify(y,null,2);if(new Blob([b]).size/1024/1024>50)throw new Error("50MB");const P=new Blob([b],{type:"application/json"}),S=`__${new Date().toISOString().split("T")[0]}.json`;if("showSaveFilePicker"in window)try{const I=await(await window.showSaveFilePicker({suggestedName:S,types:[{description:"JSON",accept:{"application/json":[".json"]}}]})).createWritable();await I.write(P),await I.close(),alert(`${$?` ${t.length} `:""}${x?"":""}`);return}catch(C){if(C.name==="AbortError")return;console.warn("API:",C)}const T=URL.createObjectURL(P),_=document.createElement("a");_.href=T,_.download=S,_.style.display="none",document.body.appendChild(_),_.click(),document.body.removeChild(_),setTimeout(()=>URL.revokeObjectURL(T),1e3),alert(`${$?` ${t.length} `:""}${x?"":""}`)}catch(y){const b=y instanceof Error?y.message:"";l(`: ${b}`),alert(`${b}`)}finally{n(!1)}}},[s,t,c]),m=h.useCallback(async g=>a?{success:!1,message:""}:(r(!0),l(null),new Promise(x=>{const $=new FileReader;$.onload=async y=>{var b;try{const O=(b=y.target)==null?void 0:b.result,P=JSON.parse(O);let S=0,T=[];if(P.websites){const C=await u(P);C.success&&(e(P.websites.filter(I=>I.id&&I.name&&I.url)),S=C.validCount||0)}if(P.settings){const C=f(P.settings);C.success&&(T=C.appliedSettings)}if(S+T.length===0){x({success:!1,message:""});return}x({success:!0,message:"",details:{websitesImported:S,settingsApplied:T}})}catch(O){const P=O instanceof Error?O.message:"";l(`: ${P}`),x({success:!1,message:`: ${P}`})}finally{r(!1)}},$.onerror=()=>{l(""),r(!1),x({success:!1,message:""})},$.readAsText(g)})),[a,u,f,e]);return{exportAllData:d,importAllData:m,isExporting:s,isImporting:a,error:i}}function Uc({onClose:t,websites:e,setWebsites:s}){const[n,a]=h.useState(!1),[r,i]=h.useState(!1),[l,u]=h.useState(!1),[c,f]=h.useState(null),{exportAllData:d,importAllData:m,isExporting:g,isImporting:x}=Fc(e,s),{cardOpacity:$,searchBarOpacity:y,parallaxEnabled:b,wallpaperResolution:O,cardColor:P,searchBarColor:S,setCardOpacity:T,setSearchBarOpacity:_,setParallaxEnabled:C,setWallpaperResolution:I,setIsSettingsOpen:se,setCardColor:ee,setSearchBarColor:B}=bt(),{currentUser:te,logout:Q}=Ce(),le=h.useRef(null);h.useEffect(()=>(se(!0),()=>se(!1)),[se]);const ne=()=>{se(!1),t()},E=L=>{const R={...L,visitCount:0,lastVisit:new Date().toISOString().split("T")[0]};s([...e,R]),a(!1)},W=async()=>{await d()},q=L=>{var V;const R=(V=L.target.files)==null?void 0:V[0];if(!R)return;const M=5*1024*1024;if(R.size>M){alert("5MB"),le.current&&(le.current.value="");return}if(!R.type.includes("json")&&!R.name.endsWith(".json")){alert("JSON"),le.current&&(le.current.value="");return}f(R),u(!0),le.current&&(le.current.value="")},K=async()=>{if(!c||x)return;const L=await m(c);if(L.success){const R=L.details;let M="";R!=null&&R.websitesImported&&(M+=` ${R.websitesImported} `),R!=null&&R.settingsApplied&&R.settingsApplied.length>0&&(M+=`${R.settingsApplied.join("")}`),M+="",alert(M),window.location.reload()}else alert(L.message);f(null)};return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center select-none",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:ne}),o.jsxs(re.div,{className:"w-96 bg-white rounded-xl shadow-2xl z-50 max-h-[80vh] flex flex-col select-none",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20,stiffness:300},children:[o.jsx("div",{className:"p-6 pb-0 select-none",children:o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-medium text-gray-800 select-none",children:""}),o.jsx("button",{onClick:ne,className:"text-gray-500 hover:text-gray-700 select-none",children:o.jsx("i",{className:"fa-solid fa-xmark text-lg select-none"})})]})}),o.jsxs("div",{className:"flex-1 px-6 py-2 pb-6 space-y-6 overflow-y-auto select-none",children:[o.jsxs("div",{className:"space-y-4 select-none",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:""}),te?o.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 space-y-4",children:[o.jsx(Pc,{}),o.jsx("div",{className:"flex justify-center pt-1",children:o.jsxs("button",{onClick:async()=>{try{await Q(),ne()}catch(L){console.error(":",L)}},className:"text-red-500 hover:text-red-600 transition-colors flex items-center text-sm select-none",children:[o.jsx("i",{className:"fa-solid fa-sign-out-alt mr-1.5 text-xs select-none"}),""]})})]}):o.jsx("div",{className:"bg-gray-100 rounded-lg p-4",children:o.jsx($c,{onSuccess:ne})})]}),o.jsxs("div",{className:"space-y-4 select-none",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:""}),o.jsx("div",{className:"bg-gray-100 rounded-lg p-4",children:o.jsx(Oc,{})})]}),o.jsx("div",{className:"select-none -mt-4",children:o.jsx(Dc,{})}),o.jsxs("div",{className:"space-y-4 select-none",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:""}),o.jsxs("div",{className:"space-y-2 select-none",children:[o.jsxs("label",{className:"text-sm font-medium text-gray-700 select-none",children:[" (",Math.round(y*100),"%)"]}),o.jsx("input",{type:"range",min:"0.05",max:"0.5",step:"0.01",value:y,onChange:L=>_(parseFloat(L.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"})]}),o.jsx(Mn,{label:"",selectedColor:S,onChange:B}),o.jsxs("div",{className:"space-y-2 select-none",children:[o.jsxs("label",{className:"text-sm font-medium text-gray-700 select-none",children:[" (",Math.round($*100),"%)"]}),o.jsx("input",{type:"range",min:"0.05",max:"0.5",step:"0.01",value:$,onChange:L=>T(parseFloat(L.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"})]}),o.jsx(Mn,{label:"",selectedColor:P,onChange:ee}),o.jsxs("div",{className:"space-y-2 select-none",children:[o.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center justify-between select-none",children:[o.jsx("span",{className:"select-none",children:""}),o.jsx("button",{onClick:()=>C(!b),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors select-none ${b?"bg-blue-500":"bg-gray-300"}`,children:o.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform select-none ${b?"translate-x-6":"translate-x-1"}`})})]}),o.jsx("p",{className:"text-xs text-gray-500 select-none",children:b?"":""})]}),o.jsxs("div",{className:"space-y-2 select-none",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700 select-none",children:""}),o.jsx("div",{className:"grid grid-cols-2 gap-2 select-none",children:[{value:"4k",label:"4K ",desc:""},{value:"1080p",label:"1080p ",desc:""},{value:"720p",label:"720p ",desc:""},{value:"mobile",label:"",desc:""}].map(L=>o.jsxs("button",{onClick:()=>I(L.value),className:`p-3 rounded-lg border-2 transition-all text-left select-none cursor-pointer ${O===L.value?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-700 hover:border-gray-300"}`,children:[o.jsx("div",{className:"font-medium text-sm",children:L.label}),o.jsx("div",{className:"text-xs text-gray-500",children:L.desc})]},L.value))}),o.jsx("p",{className:"text-xs text-gray-500 select-none",children:""})]})]}),o.jsxs("div",{className:"space-y-4 select-none",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:""}),o.jsxs("button",{onClick:()=>a(!0),className:"w-full px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors select-none",children:[o.jsx("i",{className:"fa-solid fa-plus mr-2 select-none"}),""]})]}),o.jsxs("div",{className:"space-y-4 select-none",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:""}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 select-none",children:[o.jsx("button",{onClick:W,disabled:g,className:`px-3 py-2 rounded-md transition-colors text-sm select-none ${g?"bg-gray-400 cursor-not-allowed text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:g?o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-1 select-none"}),""]}):o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-download mr-1 select-none"}),""]})}),o.jsx("button",{onClick:()=>{var L;return(L=le.current)==null?void 0:L.click()},disabled:x,className:`px-3 py-2 rounded-md transition-colors text-sm select-none ${x?"bg-gray-400 cursor-not-allowed text-white":"bg-orange-500 hover:bg-orange-600 text-white"}`,children:x?o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-1 select-none"}),""]}):o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-upload mr-1 select-none"}),""]})})]}),o.jsx("input",{ref:le,type:"file",accept:".json",onChange:q,className:"hidden"}),o.jsx("p",{className:"text-xs text-gray-500 select-none",children:" "})]}),o.jsxs("div",{className:"space-y-4 select-none",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:"Cookie"}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs("button",{onClick:()=>i(!0),className:"w-full px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors select-none",children:[o.jsx("i",{className:"fa-solid fa-shield-halved mr-2 select-none"}),""]}),o.jsxs("a",{href:"/tutorial.html",target:"_blank",rel:"noopener noreferrer",className:"w-full px-4 py-2 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-md transition-colors flex items-center justify-center gap-2 font-medium select-none border border-blue-200",style:{textDecoration:"none"},children:[o.jsx("i",{className:"fa-solid fa-graduation-cap"}),""]})]})]})]})]}),n&&o.jsx(Ra,{id:`new-${Date.now()}`,name:"",url:"",favicon:"",tags:[],note:"",onClose:()=>a(!1),onSave:E}),r&&o.jsx(Ma,{isOpen:r,onClose:()=>i(!1)}),o.jsx(Lc,{isOpen:l,onClose:()=>{u(!1),f(null)},onConfirm:K,title:"",message:` 

 
 
 

`,confirmText:"",cancelText:"",type:"warning"})]})}function zc(){const{currentUser:t,sendVerificationEmail:e,reloadUser:s,logout:n}=Ce(),[a,r]=h.useState(!1),[i,l]=h.useState(!1);if(!t||t.emailVerified)return null;const u=async()=>{r(!0);try{await e(),alert(" ")}catch(d){alert(" "),console.error(":",d)}finally{r(!1)}},c=async()=>{l(!0);try{await s(),window.location.reload()}catch(d){console.error(":",d)}finally{l(!1)}},f=async()=>{confirm("")&&await n()};return o.jsx(re.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},className:"fixed top-0 left-0 right-0 z-50 bg-orange-500 text-white shadow-lg",children:o.jsx("div",{className:"container mx-auto px-4 py-3",children:o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("i",{className:"fa-solid fa-envelope-open-text text-xl"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:""}),o.jsxs("p",{className:"text-sm text-orange-100",children:[" ",o.jsx("strong",{children:t.email})," "]})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:u,disabled:a,className:"bg-orange-600 hover:bg-orange-700 disabled:bg-orange-400 px-3 py-1 rounded text-sm transition-colors",children:a?o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-1"}),"..."]}):o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-paper-plane mr-1"}),""]})}),o.jsx("button",{onClick:c,disabled:i,className:"bg-green-500 hover:bg-green-600 disabled:bg-green-400 px-3 py-1 rounded text-sm transition-colors",children:i?o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-1"}),"..."]}):o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-check-circle mr-1"}),""]})}),o.jsxs("button",{onClick:f,className:"bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-sm transition-colors",children:[o.jsx("i",{className:"fa-solid fa-sign-out-alt mr-1"}),""]})]})]})})})}const Xe=class Xe{constructor(){he(this,"db",null);he(this,"dbName","WallpaperCache");he(this,"version",1);he(this,"storeName","images")}static getInstance(){return Xe.instance||(Xe.instance=new Xe),Xe.instance}async init(){return new Promise((e,s)=>{const n=indexedDB.open(this.dbName,this.version);n.onerror=()=>{console.error("IndexedDB :",n.error),s(n.error)},n.onsuccess=()=>{this.db=n.result,console.log(" IndexedDB "),e()},n.onupgradeneeded=a=>{const r=a.target.result;r.objectStoreNames.contains(this.storeName)||(r.createObjectStore(this.storeName,{keyPath:"key"}).createIndex("timestamp","timestamp",{unique:!1}),console.log("  IndexedDB "))}})}async ensureDB(){return this.db||await this.init(),this.db}async set(e,s,n=2*60*60*1e3){try{const i=(await this.ensureDB()).transaction([this.storeName],"readwrite").objectStore(this.storeName),l={key:e,blob:s,timestamp:Date.now(),ttl:n,size:s.size,type:s.type},u=i.put(l);return new Promise((c,f)=>{u.onsuccess=()=>{console.log(` IndexedDB : ${e} (${(s.size/1024/1024).toFixed(2)}MB)`),c()},u.onerror=()=>{console.error("IndexedDB :",u.error),f(u.error)}})}catch(a){throw console.error("IndexedDB :",a),a}}async get(e){try{const r=(await this.ensureDB()).transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);return new Promise((i,l)=>{r.onsuccess=()=>{const u=r.result;if(!u){i(null);return}if(Date.now()-u.timestamp>u.ttl){console.log(` IndexedDB : ${e}`),this.delete(e),i(null);return}console.log(` IndexedDB : ${e} (${(u.size/1024/1024).toFixed(2)}MB)`),i(u.blob)},r.onerror=()=>{console.error("IndexedDB :",r.error),l(r.error)}})}catch(s){return console.error("IndexedDB :",s),null}}async has(e){try{const r=(await this.ensureDB()).transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);return new Promise(i=>{r.onsuccess=()=>{const l=r.result;if(!l){i(!1);return}if(Date.now()-l.timestamp>l.ttl){this.delete(e),i(!1);return}i(!0)},r.onerror=()=>{i(!1)}})}catch{return!1}}async delete(e){try{const r=(await this.ensureDB()).transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(e);return new Promise((i,l)=>{r.onsuccess=()=>{console.log(` IndexedDB : ${e}`),i()},r.onerror=()=>{console.error("IndexedDB :",r.error),l(r.error)}})}catch(s){console.error("IndexedDB :",s)}}async cleanup(){try{const a=(await this.ensureDB()).transaction([this.storeName],"readwrite").objectStore(this.storeName).openCursor();let r=0;const i=Date.now();return new Promise((l,u)=>{a.onsuccess=c=>{const f=c.target.result;if(f){const d=f.value;i-d.timestamp>d.ttl&&(f.delete(),r++),f.continue()}else console.log(` IndexedDB  ${r} `),l()},a.onerror=()=>{console.error("IndexedDB :",a.error),u(a.error)}})}catch(e){console.error("IndexedDB :",e)}}async getStats(){try{const a=(await this.ensureDB()).transaction([this.storeName],"readonly").objectStore(this.storeName).openCursor();let r=0,i=0;return new Promise((l,u)=>{a.onsuccess=c=>{const f=c.target.result;if(f){const d=f.value;r++,i+=d.size||0,f.continue()}else l({count:r,totalSize:i})},a.onerror=()=>{console.error("IndexedDB :",a.error),u(a.error)}})}catch(e){return console.error("IndexedDB :",e),{count:0,totalSize:0}}}};he(Xe,"instance");let Os=Xe;const Et=Os.getInstance(),et=class et{constructor(){he(this,"cache",new Map)}static getInstance(){return et.instance||(et.instance=new et),et.instance}set(e,s,n=5*60*1e3){this.cache.set(e,{data:s,timestamp:Date.now(),ttl:n})}get(e){const s=this.cache.get(e);return s?Date.now()-s.timestamp>s.ttl?(this.cache.delete(e),null):s.data:null}cleanup(){const e=Date.now();for(const[s,n]of this.cache.entries())e-n.timestamp>n.ttl&&this.cache.delete(s)}clear(){this.cache.clear()}size(){return this.cache.size}};he(et,"instance");let Ds=et;const Ua=Ds.getInstance();setInterval(()=>{Ua.cleanup()},6e4);const ws={async cacheWallpaperBlob(t,e){try{console.log(" Blob:",{url:t,cacheKey:e});const s=`wallpaper-blob:${e}`,n=await Et.get(s);if(n)return console.log(" IndexedDB:",s),URL.createObjectURL(n);console.log(" ...");const a=`https://corsproxy.io/?${encodeURIComponent(t)}`;console.log(" CORS:",a);const r=await fetch(a,{mode:"cors",headers:{Accept:"image/*"}});if(!r.ok)throw new Error(`: ${r.status} ${r.statusText}`);console.log(" Blob...");const i=await r.blob(),l=URL.createObjectURL(i);return console.log(" BlobIndexedDB:",{cacheKey:s,blobUrl:l,size:`${(i.size/1024/1024).toFixed(2)}MB`}),await Et.set(s,i,2*60*60*1e3),Ua.set(`wallpaper-source:${e}`,t,2*60*60*1e3),console.log(" IndexedDB:  "),l}catch(s){return console.error(" Blob:",s),console.error(" :",{url:t,cacheKey:e,error:s instanceof Error?s.message:String(s)}),console.log(" CORSBlob"),t}},async preloadTodayWallpapers(){const t=new Date().toDateString(),e=[{url:"https://bing.img.run/uhd.php",key:`bing-${t}`},{url:"https://bing.img.run/1920x1080.php",key:`bing-hd-${t}`},{url:"https://source.unsplash.com/1920x1080/?nature",key:`unsplash-${t}`}],s=await Promise.allSettled(e.map(({url:n,key:a})=>this.cacheWallpaperBlob(n,a)));console.log(" :",s.filter(n=>n.status==="fulfilled").length,"/",s.length)},async getCachedWallpaper(t){const e=`wallpaper-blob:${t}`;try{const s=await Et.get(e);if(s)return console.log(" IndexedDB:",e),URL.createObjectURL(s)}catch(s){console.warn("IndexedDB:",s)}return null},async hasCachedWallpaper(t){const e=`wallpaper-blob:${t}`;return await Et.has(e)},async cleanupWallpaperCache(){try{await Et.cleanup(),console.log(" ")}catch(t){console.error(":",t)}}};function Vc(t,e=[]){const s=h.useRef(null),n=h.useRef(),a=h.useCallback((...i)=>{n.current=i,s.current===null&&(s.current=requestAnimationFrame(()=>{s.current=null,n.current&&t(...n.current)}))},e),r=h.useCallback(()=>{s.current!==null&&(cancelAnimationFrame(s.current),s.current=null)},[]);return Object.assign(a,{cancel:r})}function Wc(t,e=!0){const s=Vc(t,[e]);return h.useCallback(a=>{e&&s(a)},[s,e])}function Zc({websites:t,setWebsites:e}){const{parallaxEnabled:s,wallpaperResolution:n,isSettingsOpen:a}=bt(),{currentUser:r}=Ce(),{displayName:i}=La(),{isMobile:l,getGridClasses:u,getSearchBarLayout:c}=Oa();Ac(t);const f=(E,W)=>{const q=[...t],[K]=q.splice(E,1);q.splice(W,0,K),e(q)},[d,m]=h.useState(""),[g,x]=h.useState(!1),[$,y]=h.useState(!1),[b,O]=h.useState({x:0,y:0}),[P,S]=h.useState(!1),[T,_]=h.useState(0),[C,I]=h.useState(!1);h.useEffect(()=>{const E=()=>new Date().toISOString().split("T")[0],W=()=>`wallpaper-${n}-${E()}`,K=(()=>{try{const L=W(),R=localStorage.getItem(L);if(R){const{url:M,timestamp:V}=JSON.parse(R),p=Date.now(),w=24*60*60*1e3;if(p-V<w&&M)return M}}catch(L){console.warn(":",L)}return null})();K&&(m(K),x(!0),console.log(" "))},[]),h.useEffect(()=>{const E=setTimeout(()=>{const W=()=>new Date().toISOString().split("T")[0],q=R=>`wallpaper-${R}-${W()}`,L=(R=>{try{const M=q(R),V=localStorage.getItem(M);if(V){const{url:p,timestamp:w}=JSON.parse(V),N=Date.now(),Y=24*60*60*1e3;if(N-w<Y&&p)return p}}catch(M){console.warn(":",M)}return null})(n);console.log(L?" ":" ")},300);return()=>clearTimeout(E)},[n]);const se=[...t].sort((E,W)=>{const q=(W.visitCount||0)-(E.visitCount||0);if(q!==0)return q;const K=new Date(E.lastVisit||"2000-01-01").getTime();return new Date(W.lastVisit||"2000-01-01").getTime()-K}),ee=()=>{C||(_(E=>E+1),I(!0),S(!0),setTimeout(()=>{S(!1),setTimeout(()=>{I(!1)},300)},1e3))},B=E=>{e(t.map(W=>W.id===E.id?{...W,...E}:W))};h.useEffect(()=>{const E=p=>({"4k":"https://bing.img.run/uhd.php","1080p":"https://bing.img.run/1920x1080.php","720p":"https://bing.img.run/1366x768.php",mobile:"https://bing.img.run/m.php"})[p],W=()=>{const p=["https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1920&h=1080&fit=crop","https://images.unsplash.com/photo-1519904981063-b0cf448d479e?w=1920&h=1080&fit=crop","https://images.unsplash.com/photo-1501594907352-04cda38ebc29?w=1920&h=1080&fit=crop"],w=new Date().getDate();return p[w%p.length]},q=()=>new Date().toISOString().split("T")[0],K=()=>`wallpaper-${n}-${q()}`,L=()=>`blob-${n}-${q()}`,R=async()=>{try{const p=L();console.log(" Blob:",p);const w=await ws.getCachedWallpaper(p);if(console.log(" Blob:",w?"":""),w)return console.log(" Blob"),{url:w,type:"blob"};const N=K();console.log(" URL:",N);const Y=localStorage.getItem(N);if(Y){const{url:H,timestamp:ae}=JSON.parse(Y),G=Date.now(),ue=24*60*60*1e3;if(G-ae<ue&&H)return console.log(" URL"),{url:H,type:"url"}}}catch(p){console.warn(":",p)}return null},M=async p=>{try{const w=K(),N={url:p,timestamp:Date.now(),resolution:n};localStorage.setItem(w,JSON.stringify(N)),console.log(" URL");const Y=L();console.log(" Blob..."),ws.cacheWallpaperBlob(p,Y).then(H=>{console.log(" Blob"),console.log(" Blob URL:",H)}).catch(H=>{console.warn(" BlobURL:",H)}),console.log(" ")}catch(w){console.warn(":",w)}},V=(p,w=!1)=>{console.log(" :",n,w?"()":""),x(!1);const N=new Image,Y=setTimeout(()=>{if(N.onload=null,N.onerror=null,console.warn(" "),w)m(""),x(!0);else{const H=W();V(H,!0)}},6e3);N.onload=()=>{clearTimeout(Y),m(N.src),x(!0),M(N.src),console.log(" :",N.src)},N.onerror=()=>{if(clearTimeout(Y),w)console.warn(" "),m(""),x(!0);else{console.warn(" API");const H=W();V(H,!0)}},N.src=p};R().then(p=>{if(p){if(console.log(` ${p.type==="blob"?"Blob":"URL"}:`,p.url),m(p.url),x(!0),p.type==="url"){const w=L();console.log(" Blob..."),ws.cacheWallpaperBlob(p.url,w).then(N=>{console.log(" Blob"),console.log(" Blob URL:",N)}).catch(N=>{console.warn(" Blob:",N)})}}else{const w=E(n);console.log("  Bing :",w),V(w)}}).catch(p=>{console.warn(":",p);const w=E(n);console.log("  Bing :",w),V(w)})},[n]);const te=h.useCallback(E=>{O({x:E.clientX,y:E.clientY})},[]),Q=Wc(te,s&&!a);h.useEffect(()=>{if(!s||a){O({x:0,y:0});return}return window.addEventListener("mousemove",Q,{passive:!0}),()=>{window.removeEventListener("mousemove",Q)}},[s,a,Q]),h.useEffect(()=>{if(t.length>0){const E=setTimeout(()=>{console.log("  favicon..."),Es.batchCacheFaviconsToIndexedDB(t).then(()=>{console.log(" Favicon ")}).catch(W=>{console.warn(" Favicon :",W)})},2e3);return()=>clearTimeout(E)}},[t]);const ne=(()=>{const E=c(),W=u();return{container:`relative min-h-screen ${l?"pt-[25vh]":"pt-[33vh]"}`,searchContainer:E.containerClass,cardContainer:`${l?"pt-8 pb-4":"pt-16 pb-8"} px-4 max-w-6xl mx-auto`,gridLayout:W,userInfo:l?"fixed top-2 right-2 z-40 scale-90":"fixed top-4 right-4 z-40",settingsButton:l?"fixed bottom-2 right-2 z-[9999] p-2 bg-white/10 rounded-full backdrop-blur-sm":"fixed bottom-4 right-4 z-[9999]"}})();return o.jsxs(o.Fragment,{children:[o.jsx(zc,{}),o.jsx("div",{className:"fixed top-0 left-0 w-full h-full -z-10",style:{backgroundImage:d?`url(${d})`:void 0,backgroundSize:"cover",backgroundPosition:l?"center center":"center top",backgroundRepeat:"no-repeat",filter:g?"none":"blur(2px)",transform:!a&&s&&!l&&b?`translate(${b.x*.02}px, ${b.y*.02}px) scale(1.05)`:"translate(0px, 0px) scale(1)",transition:"filter 1.5s ease-out, transform 0.3s ease-out"}}),d&&o.jsx("div",{className:"fixed top-0 left-0 w-full h-full -z-10",style:{background:l?"linear-gradient(to bottom, rgba(30, 41, 59, 0.6) 0%, rgba(30, 41, 59, 0.4) 50%, rgba(30, 41, 59, 0.2) 100%)":"linear-gradient(to bottom, rgba(30, 41, 59, 0.7) 0%, rgba(30, 41, 59, 0.3) 50%, rgba(30, 41, 59, 0.1) 100%)",opacity:g?0:1,transition:"opacity 1.5s ease-out",pointerEvents:"none"}}),!g&&d&&o.jsx("div",{className:`fixed ${l?"top-2 left-2":"top-4 left-4"} z-40 bg-black/30 backdrop-blur-sm rounded-lg px-4 py-2`,children:o.jsxs("div",{className:"text-white/90 text-sm font-medium flex items-center space-x-2",children:[o.jsx("div",{className:"animate-pulse rounded-full h-2 w-2 bg-white/70"}),o.jsx("span",{className:l?"text-xs":"text-sm",children:""})]})}),o.jsxs("div",{className:ne.container,children:[o.jsx("div",{className:ne.searchContainer,children:o.jsx(yc,{})}),o.jsx("div",{className:ne.cardContainer,children:o.jsx(re.div,{className:ne.gridLayout,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:se.map((E,W)=>o.jsx(xc,{...E,index:W,moveCard:f,onSave:B,onDelete:q=>{e(t.filter(K=>K.id!==q))}},E.id))})}),$&&o.jsx(Uc,{onClose:()=>y(!1),websites:t,setWebsites:e}),r&&r.emailVerified&&o.jsxs("div",{className:ne.userInfo,children:[o.jsxs("button",{onClick:ee,className:`bg-white/20 backdrop-blur-sm rounded-lg ${l?"px-2 py-1":"px-3 py-2"} flex items-center space-x-2 hover:bg-white/30 transition-colors cursor-pointer`,children:[o.jsx("i",{className:`fa-solid fa-user text-white/80 ${l?"text-xs":""}`}),o.jsx("span",{className:`text-white/90 ${l?"text-xs":"text-sm"} font-medium ${l&&i.length>8?"max-w-[60px] truncate":""}`,children:i})]}),P&&!l&&o.jsxs("div",{className:`absolute top-full right-0 mt-2 bg-white/95 backdrop-blur-sm rounded-lg px-4 py-3 shadow-lg border border-white/20 transition-opacity duration-300 ${P?"opacity-100":"opacity-0"}`,children:[o.jsx("p",{className:"text-gray-800 text-sm font-medium whitespace-nowrap",children:T>=10?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-red-500",children:""})," "]}):`"${i}"`}),o.jsx("div",{className:"absolute -top-2 right-4 w-0 h-0 border-l-4 border-r-4 border-b-4 border-l-transparent border-r-transparent border-b-white/95"})]})]}),o.jsx("div",{className:ne.settingsButton,children:o.jsx("button",{onClick:()=>y(!0),className:"p-2 text-white/70 hover:text-white transition-colors","aria-label":"",children:o.jsx("i",{className:`fa-solid fa-sliders ${l?"text-base":"text-lg"}`})})}),!l&&o.jsx(bc,{})]})]})}function Hc({isOpen:t,onClose:e,localWebsites:s,cloudWebsites:n,onChoice:a}){const[r,i]=h.useState(!1);if(!t)return null;const l=async u=>{i(!0);try{await a(u),e()}catch(c){console.error(":",c)}finally{i(!1)}};return o.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:e}),o.jsxs(re.div,{className:"w-96 bg-white rounded-xl shadow-2xl z-50 max-h-[80vh] flex flex-col",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20,stiffness:300},children:[o.jsx("div",{className:"p-6 pb-0",children:o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-medium text-gray-800",children:""}),o.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",disabled:r,children:o.jsx("i",{className:"fa-solid fa-xmark text-lg"})})]})}),o.jsxs("div",{className:"flex-1 px-6 py-2 pb-6 space-y-4 overflow-y-auto",children:[o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm text-blue-800 mb-2",children:[o.jsx("i",{className:"fa-solid fa-info-circle mr-2"}),""]})}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[o.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:[o.jsx("i",{className:"fa-solid fa-computer mr-2"}),""]}),o.jsxs("p",{className:"text-xs text-gray-600",children:[s.length," "]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[o.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:[o.jsx("i",{className:"fa-solid fa-cloud mr-2"}),""]}),o.jsxs("p",{className:"text-xs text-gray-600",children:[n.length," "]})]})]}),o.jsxs("div",{className:"space-y-3 pt-4",children:[o.jsx("button",{onClick:()=>l("cloud"),disabled:r,className:"w-full p-4 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded-lg transition-colors text-left",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("i",{className:"fa-solid fa-cloud-arrow-down text-lg mt-1"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:""}),o.jsx("div",{className:"text-xs text-blue-100",children:""})]})]})}),o.jsx("button",{onClick:()=>l("local"),disabled:r,className:"w-full p-4 bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white rounded-lg transition-colors text-left",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("i",{className:"fa-solid fa-cloud-arrow-up text-lg mt-1"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:""}),o.jsx("div",{className:"text-xs text-green-100",children:""})]})]})}),o.jsx("button",{onClick:()=>l("merge"),disabled:r,className:"w-full p-4 bg-purple-500 hover:bg-purple-600 disabled:bg-gray-400 text-white rounded-lg transition-colors text-left",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("i",{className:"fa-solid fa-code-merge text-lg mt-1"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:""}),o.jsx("div",{className:"text-xs text-purple-100",children:""})]})]})})]}),r&&o.jsxs("div",{className:"flex items-center justify-center py-4",children:[o.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-2"}),o.jsx("span",{className:"text-sm text-gray-600",children:"..."})]})]})]})]})}function qc(){const{isNetworkOnline:t,error:e}=Ce();return t&&!e?null:o.jsxs("div",{className:"fixed top-4 right-4 z-50 max-w-sm",children:[!t&&o.jsxs("div",{className:"mb-2 p-3 bg-yellow-100 border border-yellow-400 text-yellow-700 rounded-lg shadow-lg flex items-center space-x-2",children:[o.jsx("i",{className:"fa-solid fa-wifi-slash"}),o.jsx("span",{className:"text-sm",children:""})]}),e&&o.jsx("div",{className:"p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg shadow-lg",children:o.jsxs("div",{className:"flex items-start space-x-2",children:[o.jsx("i",{className:"fa-solid fa-exclamation-triangle mt-0.5"}),o.jsx("span",{className:"text-sm",children:e})]})})]})}function Kc(t=!0){const{currentUser:e}=Ce(),[s,n]=h.useState({cloudWebsites:null,cloudSettings:null,loading:!1,error:null}),a=async()=>{if(!e||!e.emailVerified){n(i=>({...i,error:"",loading:!1}));return}n(i=>({...i,loading:!0,error:null}));try{const[i,l]=await Promise.all([Tc(e),Cc(e)]);n({cloudWebsites:i,cloudSettings:l,loading:!1,error:null}),console.log(" :",{websites:(i==null?void 0:i.length)||0,hasSettings:!!l})}catch(i){n(l=>({...l,loading:!1,error:": "+i.message})),console.error(" :",i)}},r=i=>s.cloudWebsites?Ic(i,s.cloudWebsites):i;return h.useEffect(()=>{t&&e&&e.emailVerified?a():n({cloudWebsites:null,cloudSettings:null,loading:!1,error:null})},[e,t]),{...s,loadCloudData:a,mergeWithLocalData:r,hasCloudData:!!s.cloudWebsites||!!s.cloudSettings}}const Gc=()=>{h.useEffect(()=>{document.title="jiang_ai_web";const t=()=>{document.hidden?document.title="":document.title="jiang_ai_web"};return document.addEventListener("visibilitychange",t),()=>{document.removeEventListener("visibilitychange",t)}},[])};class Jc{constructor(){he(this,"preloadedResources",new Set);he(this,"preloadQueue",[]);he(this,"isProcessing",!1);he(this,"maxConcurrent",3)}async preloadImage(e){return this.preloadedResources.has(e)?!0:new Promise(s=>{const n=new Image;n.onload=()=>{this.preloadedResources.add(e),s(!0)},n.onerror=()=>{s(!1)},n.src=e})}async preloadImages(e){const s=e.filter(n=>!this.preloadedResources.has(n));if(s.length!==0)for(let n=0;n<s.length;n+=this.maxConcurrent){const a=s.slice(n,n+this.maxConcurrent);await Promise.allSettled(a.map(r=>this.preloadImage(r)))}}queuePreload(e){!this.preloadedResources.has(e)&&!this.preloadQueue.includes(e)&&(this.preloadQueue.push(e),this.processQueue())}async processQueue(){if(!(this.isProcessing||this.preloadQueue.length===0)){this.isProcessing=!0;try{"requestIdleCallback"in window?await new Promise(e=>{requestIdleCallback(()=>{this.processBatch(),e()})}):await new Promise(e=>{setTimeout(()=>{this.processBatch(),e()},16)})}finally{this.isProcessing=!1,this.preloadQueue.length>0&&setTimeout(()=>this.processQueue(),100)}}}async processBatch(){const e=this.preloadQueue.splice(0,this.maxConcurrent);e.length!==0&&await Promise.allSettled(e.map(s=>this.preloadImage(s)))}preloadFont(e,s){const n=document.createElement("link");if(n.rel="preload",n.as="font",n.type="font/woff2",n.crossOrigin="anonymous",n.href=e,document.head.appendChild(n),"FontFace"in window){const a=new FontFace(s,`url(${e})`);a.load().then(()=>{document.fonts.add(a)}).catch(r=>{console.warn(":",r)})}}preloadCSS(e){const s=document.createElement("link");s.rel="preload",s.as="style",s.href=e,s.onload=()=>{s.rel="stylesheet"},document.head.appendChild(s)}getStats(){return{preloaded:this.preloadedResources.size,queued:this.preloadQueue.length}}clear(){this.preloadedResources.clear(),this.preloadQueue.length=0}}const Jt=new Jc;function Qc(t=!0){return h.useEffect(()=>t?(["https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/webfonts/fa-solid-900.woff2","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/webfonts/fa-regular-400.woff2"].forEach(i=>{Jt.queuePreload(i)}),["https://bing.img.run","https://source.unsplash.com","https://www.google.com","https://favicon.yandex.net","https://icons.duckduckgo.com"].forEach(i=>{const l=document.createElement("link");l.rel="preconnect",l.href=i,document.head.querySelector(`link[href="${i}"]`)||document.head.appendChild(l)}),()=>{}):void 0,[t]),{preloadFavicons:a=>{const r=a.map(i=>i.favicon);Jt.preloadImages(r)},preloadImage:a=>{Jt.queuePreload(a)},getPreloadStats:()=>Jt.getStats()}}function Yc({onAccept:t,onDecline:e,onCustomize:s}){const[n,a]=h.useState(!1),[r,i]=h.useState(!1);h.useEffect(()=>{if(!localStorage.getItem("cookie-consent")){const d=setTimeout(()=>{a(!0),i(!0)},2e3);return()=>clearTimeout(d)}},[]);const l=()=>{localStorage.setItem("cookie-consent","accepted"),localStorage.setItem("cookie-consent-date",new Date().toISOString()),i(!1),setTimeout(()=>{a(!1),t==null||t()},300),console.log(" Cookie")},u=()=>{localStorage.setItem("cookie-consent","declined"),localStorage.setItem("cookie-consent-date",new Date().toISOString()),i(!1);try{const f=["cookie-consent","cookie-consent-date"],d=[];for(let m=0;m<localStorage.length;m++){const g=localStorage.key(m);g&&!f.includes(g)&&d.push(g)}d.forEach(m=>localStorage.removeItem(m))}catch(f){console.error(":",f)}setTimeout(()=>{a(!1),e==null||e()},300),console.log(" Cookie")},c=()=>{s==null||s()};return n?o.jsx(Dt,{children:r&&o.jsxs(o.Fragment,{children:[o.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/20 z-[9998] pointer-events-none"}),o.jsxs(re.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",damping:25,stiffness:200},className:"fixed bottom-0 left-0 right-0 z-[9999] bg-white border-t border-gray-200 shadow-2xl",children:[o.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"flex-shrink-0 mt-1",children:o.jsx("i",{className:"fa-solid fa-cookie-bite text-amber-500 text-xl"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:" Cookie"}),o.jsxs("p",{className:"text-sm text-gray-600 leading-relaxed",children:["Cookie",o.jsx("br",{}),o.jsxs("span",{className:"inline-flex items-center gap-4 mt-1 text-xs",children:[o.jsx("span",{children:" "}),o.jsx("span",{children:" "}),o.jsx("span",{children:" "}),o.jsx("span",{children:" "})]})]}),o.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Cookie",o.jsx("button",{className:"text-blue-600 hover:text-blue-800 underline mx-1",onClick:()=>window.open("https://github.com/your-repo/privacy-policy","_blank"),children:""})]})]})]})}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[o.jsxs("button",{onClick:c,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("i",{className:"fa-solid fa-cog mr-2"}),""]}),o.jsxs("button",{onClick:u,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("i",{className:"fa-solid fa-times mr-2"}),""]}),o.jsxs("button",{onClick:l,className:"px-6 py-2 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:[o.jsx("i",{className:"fa-solid fa-check mr-2"}),""]})]})]})}),o.jsx("div",{className:"h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500"})]})]})}):null}function Xc(t){const e=h.useRef(t.length),s=t.length;return e.current!==s&&(e.current=s),e.current}function ed(t,e){const s=[],n=new Map(t.map(c=>[c.id,c])),a=new Map(e.map(c=>[c.id,c])),r=new Set([...n.keys(),...a.keys()]);let i=0,l=0,u=0;for(const c of r){const f=n.get(c),d=a.get(c);if(f&&!d)s.push({id:c,type:"missing_cloud",localData:f}),i++;else if(!f&&d)s.push({id:c,type:"missing_local",cloudData:d}),l++;else if(f&&d){const m=[];f.name!==d.name&&m.push("name"),f.url!==d.url&&m.push("url"),f.note!==d.note&&m.push("note"),JSON.stringify(f.tags)!==JSON.stringify(d.tags)&&m.push("tags"),m.length>0&&(s.push({id:c,type:"different_content",localData:f,cloudData:d,fields:m}),u++)}}return{hasConflicts:s.length>0,conflicts:s,summary:{totalLocal:t.length,totalCloud:e.length,onlyLocal:i,onlyCloud:l,different:u}}}function td(t,e){return t.length!==e.length?!0:ed(t,e).hasConflicts}function sd(){Gc();const{websites:t,setWebsites:e}=Fa(),{currentUser:s}=Ce(),[n,a]=h.useState(!1),r=n&&(s==null?void 0:s.emailVerified),{cloudWebsites:i,cloudSettings:l,hasCloudData:u,mergeWithLocalData:c}=Kc(r);Qc(n);const{setCardOpacity:f,setSearchBarOpacity:d,setParallaxEnabled:m,setWallpaperResolution:g}=bt(),[x,$]=h.useState(!1),[y,b]=h.useState(!1),[O,P]=h.useState(!1);h.useEffect(()=>{const _=setTimeout(()=>{a(!0)},100);return()=>clearTimeout(_)},[]);const S=Xc(t);h.useEffect(()=>{if(r&&s&&s.emailVerified&&u&&i&&!y){const _=S,C=i.length;_>0&&C>0&&td(t,i)?$(!0):(C>0&&_===0&&e(i),b(!0))}},[r,s,u,i,S,y,e,t]),h.useEffect(()=>{r&&s&&s.emailVerified&&l&&(typeof l.cardOpacity=="number"&&f(l.cardOpacity),typeof l.searchBarOpacity=="number"&&d(l.searchBarOpacity),typeof l.parallaxEnabled=="boolean"&&m(l.parallaxEnabled),l.wallpaperResolution&&g(l.wallpaperResolution),l.theme&&localStorage.setItem("theme",l.theme))},[r,s,l,f,d,m,g]);const T=async _=>{if(!(!s||!i))try{let C=[];switch(_){case"cloud":C=i,e(C);break;case"local":C=t,await Rs(s,C);break;case"merge":C=c(t),e(C),await Rs(s,C);break}b(!0)}catch(C){console.error(" :",C)}};return o.jsxs(o.Fragment,{children:[o.jsx(Xa,{children:o.jsx(er,{path:"/",element:o.jsx(Zc,{websites:t,setWebsites:e})})}),x&&i&&o.jsx(Hc,{isOpen:x,onClose:()=>{$(!1),b(!0)},localWebsites:t,cloudWebsites:i,onChoice:T}),o.jsx(Yc,{onAccept:()=>{console.log(" Cookie")},onDecline:()=>{console.log(" Cookie")},onCustomize:()=>{P(!0)}}),O&&o.jsx(Ma,{isOpen:O,onClose:()=>P(!1)}),o.jsx(qc,{})]})}function nd(){return o.jsx(Sc,{children:o.jsx(Ec,{children:o.jsx(Rc,{children:o.jsx(hc,{children:o.jsx(Ja,{backend:Qa,children:o.jsx(sd,{})})})})})})}const ad=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",rd=ad?void 0:"/jiang_ai_web",od=({error:t})=>o.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100vh",background:"white",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"20px",fontFamily:"Arial, sans-serif"},children:[o.jsx("h1",{style:{color:"red",marginBottom:"20px"},children:""}),o.jsxs("pre",{style:{background:"#f5f5f5",padding:"20px",borderRadius:"8px",fontSize:"14px",maxWidth:"80%",overflow:"auto"},children:[t.message,`

`,t.stack]})]});try{const t=document.getElementById("root");if(!t)throw new Error('id"root"');nn.createRoot(t).render(o.jsx(h.StrictMode,{children:o.jsxs(tr,{basename:rd,children:[o.jsx(nd,{}),o.jsx(eo,{})]})}))}catch(t){console.error(" React:",t),nn.createRoot(document.getElementById("root")).render(o.jsx(od,{error:t}))}
