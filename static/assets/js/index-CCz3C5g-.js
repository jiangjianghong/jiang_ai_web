var Ba=Object.defineProperty;var $a=(t,e,s)=>e in t?Ba(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var he=(t,e,s)=>$a(t,typeof e!="symbol"?e+"":e,s);import{j as i,m as le,u as La,a as Ma,A as kt,D as Fa,H as Ua}from"./ui-vendor-Bc0nx1qi.js";import{R as v,a as za,r as f,b as Va,c as Wa,B as Za}from"./router-vendor-ojeZ8ZvP.js";import{a as Ha}from"./react-vendor-BtP0CW_r.js";import{_ as Ct,C as It,r as lt,S as qa,a as Ka,F as Cs,g as Rn,b as ft,c as At,d as Ga,i as An,p as Qa,u as Ja,e as Ya,E as On,o as Xa,L as er,f as tr,h as sr,v as nr,j as qs,k as ar,l as rr,m as ir,n as or,q as lr,s as cr,t as dr,w as Ks,x as ur,G as hr,y as fr,z as mr,A as pr,B as mt,D as Is,H as Zt,I as Ts}from"./firebase-vendor-CAtwhGmE.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(a){if(a.ep)return;a.ep=!0;const r=s(a);fetch(a.href,r)}})();var Mt={},Gs;function gr(){if(Gs)return Mt;Gs=1;var t=Ha();return Mt.createRoot=t.createRoot,Mt.hydrateRoot=t.hydrateRoot,Mt}var Qs=gr();function xr(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}const yr=t=>{switch(t){case"success":return wr;case"info":return Nr;case"warning":return _r;case"error":return jr;default:return null}},br=Array(12).fill(0),vr=({visible:t,className:e})=>v.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},v.createElement("div",{className:"sonner-spinner"},br.map((s,n)=>v.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),wr=v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},v.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),_r=v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},v.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Nr=v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},v.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),jr=v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},v.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Sr=v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},v.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),v.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),kr=()=>{const[t,e]=v.useState(document.hidden);return v.useEffect(()=>{const s=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),t};let ps=1;class Cr{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const s=this.subscribers.indexOf(e);this.subscribers.splice(s,1)}),this.publish=e=>{this.subscribers.forEach(s=>s(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var s;const{message:n,...a}=e,r=typeof(e==null?void 0:e.id)=="number"||((s=e.id)==null?void 0:s.length)>0?e.id:ps++,o=this.toasts.find(u=>u.id===r),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(r)&&this.dismissedToasts.delete(r),o?this.toasts=this.toasts.map(u=>u.id===r?(this.publish({...u,...e,id:r,title:n}),{...u,...e,id:r,dismissible:l,title:n}):u):this.addToast({title:n,...a,dismissible:l,id:r}),r},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(s=>s({id:e,dismiss:!0})))):this.toasts.forEach(s=>{this.subscribers.forEach(n=>n({id:s.id,dismiss:!0}))}),e),this.message=(e,s)=>this.create({...s,message:e}),this.error=(e,s)=>this.create({...s,message:e,type:"error"}),this.success=(e,s)=>this.create({...s,type:"success",message:e}),this.info=(e,s)=>this.create({...s,type:"info",message:e}),this.warning=(e,s)=>this.create({...s,type:"warning",message:e}),this.loading=(e,s)=>this.create({...s,type:"loading",message:e}),this.promise=(e,s)=>{if(!s)return;let n;s.loading!==void 0&&(n=this.create({...s,promise:e,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));const a=Promise.resolve(e instanceof Function?e():e);let r=n!==void 0,o;const l=a.then(async c=>{if(o=["resolve",c],v.isValidElement(c))r=!1,this.create({id:n,type:"default",message:c});else if(Tr(c)&&!c.ok){r=!1;const d=typeof s.error=="function"?await s.error(`HTTP error! status: ${c.status}`):s.error,m=typeof s.description=="function"?await s.description(`HTTP error! status: ${c.status}`):s.description,x=typeof d=="object"&&!v.isValidElement(d)?d:{message:d};this.create({id:n,type:"error",description:m,...x})}else if(c instanceof Error){r=!1;const d=typeof s.error=="function"?await s.error(c):s.error,m=typeof s.description=="function"?await s.description(c):s.description,x=typeof d=="object"&&!v.isValidElement(d)?d:{message:d};this.create({id:n,type:"error",description:m,...x})}else if(s.success!==void 0){r=!1;const d=typeof s.success=="function"?await s.success(c):s.success,m=typeof s.description=="function"?await s.description(c):s.description,x=typeof d=="object"&&!v.isValidElement(d)?d:{message:d};this.create({id:n,type:"success",description:m,...x})}}).catch(async c=>{if(o=["reject",c],s.error!==void 0){r=!1;const h=typeof s.error=="function"?await s.error(c):s.error,d=typeof s.description=="function"?await s.description(c):s.description,p=typeof h=="object"&&!v.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:d,...p})}}).finally(()=>{r&&(this.dismiss(n),n=void 0),s.finally==null||s.finally.call(s)}),u=()=>new Promise((c,h)=>l.then(()=>o[0]==="reject"?h(o[1]):c(o[1])).catch(h));return typeof n!="string"&&typeof n!="number"?{unwrap:u}:Object.assign(n,{unwrap:u})},this.custom=(e,s)=>{const n=(s==null?void 0:s.id)||ps++;return this.create({jsx:e(n),id:n,...s}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const xe=new Cr,Ir=(t,e)=>{const s=(e==null?void 0:e.id)||ps++;return xe.addToast({title:t,...e,id:s}),s},Tr=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Er=Ir,Rr=()=>xe.toasts,Ar=()=>xe.getActiveToasts();Object.assign(Er,{success:xe.success,info:xe.info,warning:xe.warning,error:xe.error,custom:xe.custom,message:xe.message,promise:xe.promise,dismiss:xe.dismiss,loading:xe.loading},{getHistory:Rr,getToasts:Ar});xr("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Ft(t){return t.label!==void 0}const Or=3,Dr="24px",Pr="16px",Js=4e3,Br=356,$r=14,Lr=45,Mr=200;function Re(...t){return t.filter(Boolean).join(" ")}function Fr(t){const[e,s]=t.split("-"),n=[];return e&&n.push(e),s&&n.push(s),n}const Ur=t=>{var e,s,n,a,r,o,l,u,c;const{invert:h,toast:d,unstyled:m,interacting:p,setHeights:x,visibleToasts:D,heights:w,index:E,toasts:q,expanded:$,removeToast:N,defaultRichColors:C,closeButton:b,style:k,cancelButtonStyle:M,actionButtonStyle:Y,className:K="",descriptionClassName:A="",duration:O,position:P,gap:te,expandByDefault:G,classNames:j,icons:L,closeButtonAriaLabel:ee="Close toast"}=t,[se,U]=v.useState(null),[R,F]=v.useState(null),[g,_]=v.useState(!1),[B,W]=v.useState(!1),[ne,ae]=v.useState(!1),[X,ce]=v.useState(!1),[De,at]=v.useState(!1),[Ot,He]=v.useState(0),[xt,yt]=v.useState(0),Le=v.useRef(d.duration||O||Js),bt=v.useRef(null),be=v.useRef(null),ns=E===0,Dt=E+1<=D,fe=d.type,Te=d.dismissible!==!1,as=d.className||"",Pt=d.descriptionClassName||"",rt=v.useMemo(()=>w.findIndex(Z=>Z.toastId===d.id)||0,[w,d.id]),Bt=v.useMemo(()=>{var Z;return(Z=d.closeButton)!=null?Z:b},[d.closeButton,b]),qe=v.useMemo(()=>d.duration||O||Js,[d.duration,O]),Pe=v.useRef(0),pe=v.useRef(0),it=v.useRef(0),Ee=v.useRef(null),[Ra,Aa]=P.split("-"),zs=v.useMemo(()=>w.reduce((Z,de,me)=>me>=rt?Z:Z+de.height,0),[w,rt]),Vs=kr(),Oa=d.invert||h,rs=fe==="loading";pe.current=v.useMemo(()=>rt*te+zs,[rt,zs]),v.useEffect(()=>{Le.current=qe},[qe]),v.useEffect(()=>{_(!0)},[]),v.useEffect(()=>{const Z=be.current;if(Z){const de=Z.getBoundingClientRect().height;return yt(de),x(me=>[{toastId:d.id,height:de,position:d.position},...me]),()=>x(me=>me.filter(ve=>ve.toastId!==d.id))}},[x,d.id]),v.useLayoutEffect(()=>{if(!g)return;const Z=be.current,de=Z.style.height;Z.style.height="auto";const me=Z.getBoundingClientRect().height;Z.style.height=de,yt(me),x(ve=>ve.find(ue=>ue.toastId===d.id)?ve.map(ue=>ue.toastId===d.id?{...ue,height:me}:ue):[{toastId:d.id,height:me,position:d.position},...ve])},[g,d.title,d.description,x,d.id,d.jsx,d.action,d.cancel]);const Me=v.useCallback(()=>{W(!0),He(pe.current),x(Z=>Z.filter(de=>de.toastId!==d.id)),setTimeout(()=>{N(d)},Mr)},[d,N,x,pe]);v.useEffect(()=>{if(d.promise&&fe==="loading"||d.duration===1/0||d.type==="loading")return;let Z;return $||p||Vs?(()=>{if(it.current<Pe.current){const ve=new Date().getTime()-Pe.current;Le.current=Le.current-ve}it.current=new Date().getTime()})():(()=>{Le.current!==1/0&&(Pe.current=new Date().getTime(),Z=setTimeout(()=>{d.onAutoClose==null||d.onAutoClose.call(d,d),Me()},Le.current))})(),()=>clearTimeout(Z)},[$,p,d,fe,Vs,Me]),v.useEffect(()=>{d.delete&&(Me(),d.onDismiss==null||d.onDismiss.call(d,d))},[Me,d.delete]);function Da(){var Z;if(L!=null&&L.loading){var de;return v.createElement("div",{className:Re(j==null?void 0:j.loader,d==null||(de=d.classNames)==null?void 0:de.loader,"sonner-loader"),"data-visible":fe==="loading"},L.loading)}return v.createElement(vr,{className:Re(j==null?void 0:j.loader,d==null||(Z=d.classNames)==null?void 0:Z.loader),visible:fe==="loading"})}const Pa=d.icon||(L==null?void 0:L[fe])||yr(fe);var Ws,Zs;return v.createElement("li",{tabIndex:0,ref:be,className:Re(K,as,j==null?void 0:j.toast,d==null||(e=d.classNames)==null?void 0:e.toast,j==null?void 0:j.default,j==null?void 0:j[fe],d==null||(s=d.classNames)==null?void 0:s[fe]),"data-sonner-toast":"","data-rich-colors":(Ws=d.richColors)!=null?Ws:C,"data-styled":!(d.jsx||d.unstyled||m),"data-mounted":g,"data-promise":!!d.promise,"data-swiped":De,"data-removed":B,"data-visible":Dt,"data-y-position":Ra,"data-x-position":Aa,"data-index":E,"data-front":ns,"data-swiping":ne,"data-dismissible":Te,"data-type":fe,"data-invert":Oa,"data-swipe-out":X,"data-swipe-direction":R,"data-expanded":!!($||G&&g),style:{"--index":E,"--toasts-before":E,"--z-index":q.length-E,"--offset":`${B?Ot:pe.current}px`,"--initial-height":G?"auto":`${xt}px`,...k,...d.style},onDragEnd:()=>{ae(!1),U(null),Ee.current=null},onPointerDown:Z=>{rs||!Te||(bt.current=new Date,He(pe.current),Z.target.setPointerCapture(Z.pointerId),Z.target.tagName!=="BUTTON"&&(ae(!0),Ee.current={x:Z.clientX,y:Z.clientY}))},onPointerUp:()=>{var Z,de,me;if(X||!Te)return;Ee.current=null;const ve=Number(((Z=be.current)==null?void 0:Z.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),$t=Number(((de=be.current)==null?void 0:de.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ue=new Date().getTime()-((me=bt.current)==null?void 0:me.getTime()),je=se==="x"?ve:$t,Lt=Math.abs(je)/ue;if(Math.abs(je)>=Lr||Lt>.11){He(pe.current),d.onDismiss==null||d.onDismiss.call(d,d),F(se==="x"?ve>0?"right":"left":$t>0?"down":"up"),Me(),ce(!0);return}else{var ke,Ce;(ke=be.current)==null||ke.style.setProperty("--swipe-amount-x","0px"),(Ce=be.current)==null||Ce.style.setProperty("--swipe-amount-y","0px")}at(!1),ae(!1),U(null)},onPointerMove:Z=>{var de,me,ve;if(!Ee.current||!Te||((de=window.getSelection())==null?void 0:de.toString().length)>0)return;const ue=Z.clientY-Ee.current.y,je=Z.clientX-Ee.current.x;var Lt;const ke=(Lt=t.swipeDirections)!=null?Lt:Fr(P);!se&&(Math.abs(je)>1||Math.abs(ue)>1)&&U(Math.abs(je)>Math.abs(ue)?"x":"y");let Ce={x:0,y:0};const Hs=Ke=>1/(1.5+Math.abs(Ke)/20);if(se==="y"){if(ke.includes("top")||ke.includes("bottom"))if(ke.includes("top")&&ue<0||ke.includes("bottom")&&ue>0)Ce.y=ue;else{const Ke=ue*Hs(ue);Ce.y=Math.abs(Ke)<Math.abs(ue)?Ke:ue}}else if(se==="x"&&(ke.includes("left")||ke.includes("right")))if(ke.includes("left")&&je<0||ke.includes("right")&&je>0)Ce.x=je;else{const Ke=je*Hs(je);Ce.x=Math.abs(Ke)<Math.abs(je)?Ke:je}(Math.abs(Ce.x)>0||Math.abs(Ce.y)>0)&&at(!0),(me=be.current)==null||me.style.setProperty("--swipe-amount-x",`${Ce.x}px`),(ve=be.current)==null||ve.style.setProperty("--swipe-amount-y",`${Ce.y}px`)}},Bt&&!d.jsx&&fe!=="loading"?v.createElement("button",{"aria-label":ee,"data-disabled":rs,"data-close-button":!0,onClick:rs||!Te?()=>{}:()=>{Me(),d.onDismiss==null||d.onDismiss.call(d,d)},className:Re(j==null?void 0:j.closeButton,d==null||(n=d.classNames)==null?void 0:n.closeButton)},(Zs=L==null?void 0:L.close)!=null?Zs:Sr):null,(fe||d.icon||d.promise)&&d.icon!==null&&((L==null?void 0:L[fe])!==null||d.icon)?v.createElement("div",{"data-icon":"",className:Re(j==null?void 0:j.icon,d==null||(a=d.classNames)==null?void 0:a.icon)},d.promise||d.type==="loading"&&!d.icon?d.icon||Da():null,d.type!=="loading"?Pa:null):null,v.createElement("div",{"data-content":"",className:Re(j==null?void 0:j.content,d==null||(r=d.classNames)==null?void 0:r.content)},v.createElement("div",{"data-title":"",className:Re(j==null?void 0:j.title,d==null||(o=d.classNames)==null?void 0:o.title)},d.jsx?d.jsx:typeof d.title=="function"?d.title():d.title),d.description?v.createElement("div",{"data-description":"",className:Re(A,Pt,j==null?void 0:j.description,d==null||(l=d.classNames)==null?void 0:l.description)},typeof d.description=="function"?d.description():d.description):null),v.isValidElement(d.cancel)?d.cancel:d.cancel&&Ft(d.cancel)?v.createElement("button",{"data-button":!0,"data-cancel":!0,style:d.cancelButtonStyle||M,onClick:Z=>{Ft(d.cancel)&&Te&&(d.cancel.onClick==null||d.cancel.onClick.call(d.cancel,Z),Me())},className:Re(j==null?void 0:j.cancelButton,d==null||(u=d.classNames)==null?void 0:u.cancelButton)},d.cancel.label):null,v.isValidElement(d.action)?d.action:d.action&&Ft(d.action)?v.createElement("button",{"data-button":!0,"data-action":!0,style:d.actionButtonStyle||Y,onClick:Z=>{Ft(d.action)&&(d.action.onClick==null||d.action.onClick.call(d.action,Z),!Z.defaultPrevented&&Me())},className:Re(j==null?void 0:j.actionButton,d==null||(c=d.classNames)==null?void 0:c.actionButton)},d.action.label):null)};function Ys(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function zr(t,e){const s={};return[t,e].forEach((n,a)=>{const r=a===1,o=r?"--mobile-offset":"--offset",l=r?Pr:Dr;function u(c){["top","right","bottom","left"].forEach(h=>{s[`${o}-${h}`]=typeof c=="number"?`${c}px`:c})}typeof n=="number"||typeof n=="string"?u(n):typeof n=="object"?["top","right","bottom","left"].forEach(c=>{n[c]===void 0?s[`${o}-${c}`]=l:s[`${o}-${c}`]=typeof n[c]=="number"?`${n[c]}px`:n[c]}):u(l)}),s}const Vr=v.forwardRef(function(e,s){const{invert:n,position:a="bottom-right",hotkey:r=["altKey","KeyT"],expand:o,closeButton:l,className:u,offset:c,mobileOffset:h,theme:d="light",richColors:m,duration:p,style:x,visibleToasts:D=Or,toastOptions:w,dir:E=Ys(),gap:q=$r,icons:$,containerAriaLabel:N="Notifications"}=e,[C,b]=v.useState([]),k=v.useMemo(()=>Array.from(new Set([a].concat(C.filter(R=>R.position).map(R=>R.position)))),[C,a]),[M,Y]=v.useState([]),[K,A]=v.useState(!1),[O,P]=v.useState(!1),[te,G]=v.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),j=v.useRef(null),L=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),ee=v.useRef(null),se=v.useRef(!1),U=v.useCallback(R=>{b(F=>{var g;return(g=F.find(_=>_.id===R.id))!=null&&g.delete||xe.dismiss(R.id),F.filter(({id:_})=>_!==R.id)})},[]);return v.useEffect(()=>xe.subscribe(R=>{if(R.dismiss){requestAnimationFrame(()=>{b(F=>F.map(g=>g.id===R.id?{...g,delete:!0}:g))});return}setTimeout(()=>{za.flushSync(()=>{b(F=>{const g=F.findIndex(_=>_.id===R.id);return g!==-1?[...F.slice(0,g),{...F[g],...R},...F.slice(g+1)]:[R,...F]})})})}),[C]),v.useEffect(()=>{if(d!=="system"){G(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?G("dark"):G("light")),typeof window>"u")return;const R=window.matchMedia("(prefers-color-scheme: dark)");try{R.addEventListener("change",({matches:F})=>{G(F?"dark":"light")})}catch{R.addListener(({matches:g})=>{try{G(g?"dark":"light")}catch(_){console.error(_)}})}},[d]),v.useEffect(()=>{C.length<=1&&A(!1)},[C]),v.useEffect(()=>{const R=F=>{var g;if(r.every(W=>F[W]||F.code===W)){var B;A(!0),(B=j.current)==null||B.focus()}F.code==="Escape"&&(document.activeElement===j.current||(g=j.current)!=null&&g.contains(document.activeElement))&&A(!1)};return document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[r]),v.useEffect(()=>{if(j.current)return()=>{ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null,se.current=!1)}},[j.current]),v.createElement("section",{ref:s,"aria-label":`${N} ${L}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((R,F)=>{var g;const[_,B]=R.split("-");return C.length?v.createElement("ol",{key:R,dir:E==="auto"?Ys():E,tabIndex:-1,ref:j,className:u,"data-sonner-toaster":!0,"data-sonner-theme":te,"data-y-position":_,"data-x-position":B,style:{"--front-toast-height":`${((g=M[0])==null?void 0:g.height)||0}px`,"--width":`${Br}px`,"--gap":`${q}px`,...x,...zr(c,h)},onBlur:W=>{se.current&&!W.currentTarget.contains(W.relatedTarget)&&(se.current=!1,ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null))},onFocus:W=>{W.target instanceof HTMLElement&&W.target.dataset.dismissible==="false"||se.current||(se.current=!0,ee.current=W.relatedTarget)},onMouseEnter:()=>A(!0),onMouseMove:()=>A(!0),onMouseLeave:()=>{O||A(!1)},onDragEnd:()=>A(!1),onPointerDown:W=>{W.target instanceof HTMLElement&&W.target.dataset.dismissible==="false"||P(!0)},onPointerUp:()=>P(!1)},C.filter(W=>!W.position&&F===0||W.position===R).map((W,ne)=>{var ae,X;return v.createElement(Ur,{key:W.id,icons:$,index:ne,toast:W,defaultRichColors:m,duration:(ae=w==null?void 0:w.duration)!=null?ae:p,className:w==null?void 0:w.className,descriptionClassName:w==null?void 0:w.descriptionClassName,invert:n,visibleToasts:D,closeButton:(X=w==null?void 0:w.closeButton)!=null?X:l,interacting:O,position:R,style:w==null?void 0:w.style,unstyled:w==null?void 0:w.unstyled,classNames:w==null?void 0:w.classNames,cancelButtonStyle:w==null?void 0:w.cancelButtonStyle,actionButtonStyle:w==null?void 0:w.actionButtonStyle,closeButtonAriaLabel:w==null?void 0:w.closeButtonAriaLabel,removeToast:U,toasts:C.filter(ce=>ce.position==W.position),heights:M.filter(ce=>ce.position==W.position),setHeights:Y,expandByDefault:o,gap:q,expanded:K,swipeDirections:e.swipeDirections})})):null}))});var J;(function(t){t.assertEqual=a=>{};function e(a){}t.assertIs=e;function s(a){throw new Error}t.assertNever=s,t.arrayToEnum=a=>{const r={};for(const o of a)r[o]=o;return r},t.getValidEnumValues=a=>{const r=t.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of r)o[l]=a[l];return t.objectValues(o)},t.objectValues=a=>t.objectKeys(a).map(function(r){return a[r]}),t.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const r=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&r.push(o);return r},t.find=(a,r)=>{for(const o of a)if(r(o))return o},t.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,r=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(r)}t.joinValues=n,t.jsonStringifyReplacer=(a,r)=>typeof r=="bigint"?r.toString():r})(J||(J={}));var Xs;(function(t){t.mergeShapes=(e,s)=>({...e,...s})})(Xs||(Xs={}));const I=J.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Fe=t=>{switch(typeof t){case"undefined":return I.undefined;case"string":return I.string;case"number":return Number.isNaN(t)?I.nan:I.number;case"boolean":return I.boolean;case"function":return I.function;case"bigint":return I.bigint;case"symbol":return I.symbol;case"object":return Array.isArray(t)?I.array:t===null?I.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?I.promise:typeof Map<"u"&&t instanceof Map?I.map:typeof Set<"u"&&t instanceof Set?I.set:typeof Date<"u"&&t instanceof Date?I.date:I.object;default:return I.unknown}},y=J.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class $e extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=e}format(e){const s=e||function(r){return r.message},n={_errors:[]},a=r=>{for(const o of r.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)n._errors.push(s(o));else{let l=n,u=0;for(;u<o.path.length;){const c=o.path[u];u===o.path.length-1?(l[c]=l[c]||{_errors:[]},l[c]._errors.push(s(o))):l[c]=l[c]||{_errors:[]},l=l[c],u++}}};return a(this),n}static assert(e){if(!(e instanceof $e))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,J.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=s=>s.message){const s={},n=[];for(const a of this.issues)if(a.path.length>0){const r=a.path[0];s[r]=s[r]||[],s[r].push(e(a))}else n.push(e(a));return{formErrors:n,fieldErrors:s}}get formErrors(){return this.flatten()}}$e.create=t=>new $e(t);const gs=(t,e)=>{let s;switch(t.code){case y.invalid_type:t.received===I.undefined?s="Required":s=`Expected ${t.expected}, received ${t.received}`;break;case y.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(t.expected,J.jsonStringifyReplacer)}`;break;case y.unrecognized_keys:s=`Unrecognized key(s) in object: ${J.joinValues(t.keys,", ")}`;break;case y.invalid_union:s="Invalid input";break;case y.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${J.joinValues(t.options)}`;break;case y.invalid_enum_value:s=`Invalid enum value. Expected ${J.joinValues(t.options)}, received '${t.received}'`;break;case y.invalid_arguments:s="Invalid function arguments";break;case y.invalid_return_type:s="Invalid function return type";break;case y.invalid_date:s="Invalid date";break;case y.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(s=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(s=`${s} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?s=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?s=`Invalid input: must end with "${t.validation.endsWith}"`:J.assertNever(t.validation):t.validation!=="regex"?s=`Invalid ${t.validation}`:s="Invalid";break;case y.too_small:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?s=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:s="Invalid input";break;case y.too_big:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?s=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:s="Invalid input";break;case y.custom:s="Invalid input";break;case y.invalid_intersection_types:s="Intersection results could not be merged";break;case y.not_multiple_of:s=`Number must be a multiple of ${t.multipleOf}`;break;case y.not_finite:s="Number must be finite";break;default:s=e.defaultError,J.assertNever(t)}return{message:s}};let Wr=gs;function Zr(){return Wr}const Hr=t=>{const{data:e,path:s,errorMaps:n,issueData:a}=t,r=[...s,...a.path||[]],o={...a,path:r};if(a.message!==void 0)return{...a,path:r,message:a.message};let l="";const u=n.filter(c=>!!c).slice().reverse();for(const c of u)l=c(o,{data:e,defaultError:l}).message;return{...a,path:r,message:l}};function S(t,e){const s=Zr(),n=Hr({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,s,s===gs?void 0:gs].filter(a=>!!a)});t.common.issues.push(n)}class Ne{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,s){const n=[];for(const a of s){if(a.status==="aborted")return z;a.status==="dirty"&&e.dirty(),n.push(a.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,s){const n=[];for(const a of s){const r=await a.key,o=await a.value;n.push({key:r,value:o})}return Ne.mergeObjectSync(e,n)}static mergeObjectSync(e,s){const n={};for(const a of s){const{key:r,value:o}=a;if(r.status==="aborted"||o.status==="aborted")return z;r.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),r.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(n[r.value]=o.value)}return{status:e.value,value:n}}}const z=Object.freeze({status:"aborted"}),Nt=t=>({status:"dirty",value:t}),Se=t=>({status:"valid",value:t}),en=t=>t.status==="aborted",tn=t=>t.status==="dirty",ct=t=>t.status==="valid",Ht=t=>typeof Promise<"u"&&t instanceof Promise;var T;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(T||(T={}));class We{constructor(e,s,n,a){this._cachedPath=[],this.parent=e,this.data=s,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const sn=(t,e)=>{if(ct(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const s=new $e(t.common.issues);return this._error=s,this._error}}};function H(t){if(!t)return{};const{errorMap:e,invalid_type_error:s,required_error:n,description:a}=t;if(e&&(s||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(o,l)=>{const{message:u}=t;return o.code==="invalid_enum_value"?{message:u??l.defaultError}:typeof l.data>"u"?{message:u??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:u??s??l.defaultError}},description:a}}class Q{get description(){return this._def.description}_getType(e){return Fe(e.data)}_getOrReturnCtx(e,s){return s||{common:e.parent.common,data:e.data,parsedType:Fe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ne,ctx:{common:e.parent.common,data:e.data,parsedType:Fe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const s=this._parse(e);if(Ht(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(e){const s=this._parse(e);return Promise.resolve(s)}parse(e,s){const n=this.safeParse(e,s);if(n.success)return n.data;throw n.error}safeParse(e,s){const n={common:{issues:[],async:(s==null?void 0:s.async)??!1,contextualErrorMap:s==null?void 0:s.errorMap},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fe(e)},a=this._parseSync({data:e,path:n.path,parent:n});return sn(n,a)}"~validate"(e){var n,a;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fe(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:s});return ct(r)?{value:r.value}:{issues:s.common.issues}}catch(r){(a=(n=r==null?void 0:r.message)==null?void 0:n.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(r=>ct(r)?{value:r.value}:{issues:s.common.issues})}async parseAsync(e,s){const n=await this.safeParseAsync(e,s);if(n.success)return n.data;throw n.error}async safeParseAsync(e,s){const n={common:{issues:[],contextualErrorMap:s==null?void 0:s.errorMap,async:!0},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fe(e)},a=this._parse({data:e,path:n.path,parent:n}),r=await(Ht(a)?a:Promise.resolve(a));return sn(n,r)}refine(e,s){const n=a=>typeof s=="string"||typeof s>"u"?{message:s}:typeof s=="function"?s(a):s;return this._refinement((a,r)=>{const o=e(a),l=()=>r.addIssue({code:y.custom,...n(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,s){return this._refinement((n,a)=>e(n)?!0:(a.addIssue(typeof s=="function"?s(n,a):s),!1))}_refinement(e){return new ut({schema:this,typeName:V.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s=>this["~validate"](s)}}optional(){return Ve.create(this,this._def)}nullable(){return ht.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Oe.create(this)}promise(){return Qt.create(this,this._def)}or(e){return Kt.create([this,e],this._def)}and(e){return Gt.create(this,e,this._def)}transform(e){return new ut({...H(this._def),schema:this,typeName:V.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const s=typeof e=="function"?e:()=>e;return new ys({...H(this._def),innerType:this,defaultValue:s,typeName:V.ZodDefault})}brand(){return new pi({typeName:V.ZodBranded,type:this,...H(this._def)})}catch(e){const s=typeof e=="function"?e:()=>e;return new bs({...H(this._def),innerType:this,catchValue:s,typeName:V.ZodCatch})}describe(e){const s=this.constructor;return new s({...this._def,description:e})}pipe(e){return Es.create(this,e)}readonly(){return vs.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const qr=/^c[^\s-]{8,}$/i,Kr=/^[0-9a-z]+$/,Gr=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Qr=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Jr=/^[a-z0-9_-]{21}$/i,Yr=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Xr=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ei=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ti="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let is;const si=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ni=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ai=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ri=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ii=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,oi=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Dn="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",li=new RegExp(`^${Dn}$`);function Pn(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const s=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${s}`}function ci(t){return new RegExp(`^${Pn(t)}$`)}function di(t){let e=`${Dn}T${Pn(t)}`;const s=[];return s.push(t.local?"Z?":"Z"),t.offset&&s.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${s.join("|")})`,new RegExp(`^${e}$`)}function ui(t,e){return!!((e==="v4"||!e)&&si.test(t)||(e==="v6"||!e)&&ai.test(t))}function hi(t,e){if(!Yr.test(t))return!1;try{const[s]=t.split(".");if(!s)return!1;const n=s.replace(/-/g,"+").replace(/_/g,"/").padEnd(s.length+(4-s.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||e&&a.alg!==e)}catch{return!1}}function fi(t,e){return!!((e==="v4"||!e)&&ni.test(t)||(e==="v6"||!e)&&ri.test(t))}class ze extends Q{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==I.string){const r=this._getOrReturnCtx(e);return S(r,{code:y.invalid_type,expected:I.string,received:r.parsedType}),z}const n=new Ne;let a;for(const r of this._def.checks)if(r.kind==="min")e.data.length<r.value&&(a=this._getOrReturnCtx(e,a),S(a,{code:y.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),n.dirty());else if(r.kind==="max")e.data.length>r.value&&(a=this._getOrReturnCtx(e,a),S(a,{code:y.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),n.dirty());else if(r.kind==="length"){const o=e.data.length>r.value,l=e.data.length<r.value;(o||l)&&(a=this._getOrReturnCtx(e,a),o?S(a,{code:y.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):l&&S(a,{code:y.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),n.dirty())}else if(r.kind==="email")ei.test(e.data)||(a=this._getOrReturnCtx(e,a),S(a,{validation:"email",code:y.invalid_string,message:r.message}),n.dirty());else if(r.kind==="emoji")is||(is=new RegExp(ti,"u")),is.test(e.data)||(a=this._getOrReturnCtx(e,a),S(a,{validation:"emoji",code:y.invalid_string,message:r.message}),n.dirty());else if(r.kind==="uuid")Qr.test(e.data)||(a=this._getOrReturnCtx(e,a),S(a,{validation:"uuid",code:y.invalid_string,message:r.message}),n.dirty());else if(r.kind==="nanoid")Jr.test(e.data)||(a=this._getOrReturnCtx(e,a),S(a,{validation:"nanoid",code:y.invalid_string,message:r.message}),n.dirty());else if(r.kind==="cuid")qr.test(e.data)||(a=this._getOrReturnCtx(e,a),S(a,{validation:"cuid",code:y.invalid_string,message:r.message}),n.dirty());else if(r.kind==="cuid2")Kr.test(e.data)||(a=this._getOrReturnCtx(e,a),S(a,{validation:"cuid2",code:y.invalid_string,message:r.message}),n.dirty());else if(r.kind==="ulid")Gr.test(e.data)||(a=this._getOrReturnCtx(e,a),S(a,{validation:"ulid",code:y.invalid_string,message:r.message}),n.dirty());else if(r.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),S(a,{validation:"url",code:y.invalid_string,message:r.message}),n.dirty()}else r.kind==="regex"?(r.regex.lastIndex=0,r.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),S(a,{validation:"regex",code:y.invalid_string,message:r.message}),n.dirty())):r.kind==="trim"?e.data=e.data.trim():r.kind==="includes"?e.data.includes(r.value,r.position)||(a=this._getOrReturnCtx(e,a),S(a,{code:y.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),n.dirty()):r.kind==="toLowerCase"?e.data=e.data.toLowerCase():r.kind==="toUpperCase"?e.data=e.data.toUpperCase():r.kind==="startsWith"?e.data.startsWith(r.value)||(a=this._getOrReturnCtx(e,a),S(a,{code:y.invalid_string,validation:{startsWith:r.value},message:r.message}),n.dirty()):r.kind==="endsWith"?e.data.endsWith(r.value)||(a=this._getOrReturnCtx(e,a),S(a,{code:y.invalid_string,validation:{endsWith:r.value},message:r.message}),n.dirty()):r.kind==="datetime"?di(r).test(e.data)||(a=this._getOrReturnCtx(e,a),S(a,{code:y.invalid_string,validation:"datetime",message:r.message}),n.dirty()):r.kind==="date"?li.test(e.data)||(a=this._getOrReturnCtx(e,a),S(a,{code:y.invalid_string,validation:"date",message:r.message}),n.dirty()):r.kind==="time"?ci(r).test(e.data)||(a=this._getOrReturnCtx(e,a),S(a,{code:y.invalid_string,validation:"time",message:r.message}),n.dirty()):r.kind==="duration"?Xr.test(e.data)||(a=this._getOrReturnCtx(e,a),S(a,{validation:"duration",code:y.invalid_string,message:r.message}),n.dirty()):r.kind==="ip"?ui(e.data,r.version)||(a=this._getOrReturnCtx(e,a),S(a,{validation:"ip",code:y.invalid_string,message:r.message}),n.dirty()):r.kind==="jwt"?hi(e.data,r.alg)||(a=this._getOrReturnCtx(e,a),S(a,{validation:"jwt",code:y.invalid_string,message:r.message}),n.dirty()):r.kind==="cidr"?fi(e.data,r.version)||(a=this._getOrReturnCtx(e,a),S(a,{validation:"cidr",code:y.invalid_string,message:r.message}),n.dirty()):r.kind==="base64"?ii.test(e.data)||(a=this._getOrReturnCtx(e,a),S(a,{validation:"base64",code:y.invalid_string,message:r.message}),n.dirty()):r.kind==="base64url"?oi.test(e.data)||(a=this._getOrReturnCtx(e,a),S(a,{validation:"base64url",code:y.invalid_string,message:r.message}),n.dirty()):J.assertNever(r);return{status:n.value,value:e.data}}_regex(e,s,n){return this.refinement(a=>e.test(a),{validation:s,code:y.invalid_string,...T.errToObj(n)})}_addCheck(e){return new ze({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...T.errToObj(e)})}url(e){return this._addCheck({kind:"url",...T.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...T.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...T.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...T.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...T.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...T.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...T.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...T.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...T.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...T.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...T.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...T.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...T.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...T.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...T.errToObj(e)})}regex(e,s){return this._addCheck({kind:"regex",regex:e,...T.errToObj(s)})}includes(e,s){return this._addCheck({kind:"includes",value:e,position:s==null?void 0:s.position,...T.errToObj(s==null?void 0:s.message)})}startsWith(e,s){return this._addCheck({kind:"startsWith",value:e,...T.errToObj(s)})}endsWith(e,s){return this._addCheck({kind:"endsWith",value:e,...T.errToObj(s)})}min(e,s){return this._addCheck({kind:"min",value:e,...T.errToObj(s)})}max(e,s){return this._addCheck({kind:"max",value:e,...T.errToObj(s)})}length(e,s){return this._addCheck({kind:"length",value:e,...T.errToObj(s)})}nonempty(e){return this.min(1,T.errToObj(e))}trim(){return new ze({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ze({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ze({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxLength(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}ze.create=t=>new ze({checks:[],typeName:V.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...H(t)});function mi(t,e){const s=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,a=s>n?s:n,r=Number.parseInt(t.toFixed(a).replace(".","")),o=Number.parseInt(e.toFixed(a).replace(".",""));return r%o/10**a}class Tt extends Q{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==I.number){const r=this._getOrReturnCtx(e);return S(r,{code:y.invalid_type,expected:I.number,received:r.parsedType}),z}let n;const a=new Ne;for(const r of this._def.checks)r.kind==="int"?J.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),S(n,{code:y.invalid_type,expected:"integer",received:"float",message:r.message}),a.dirty()):r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(n=this._getOrReturnCtx(e,n),S(n,{code:y.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),a.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(n=this._getOrReturnCtx(e,n),S(n,{code:y.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),a.dirty()):r.kind==="multipleOf"?mi(e.data,r.value)!==0&&(n=this._getOrReturnCtx(e,n),S(n,{code:y.not_multiple_of,multipleOf:r.value,message:r.message}),a.dirty()):r.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),S(n,{code:y.not_finite,message:r.message}),a.dirty()):J.assertNever(r);return{status:a.value,value:e.data}}gte(e,s){return this.setLimit("min",e,!0,T.toString(s))}gt(e,s){return this.setLimit("min",e,!1,T.toString(s))}lte(e,s){return this.setLimit("max",e,!0,T.toString(s))}lt(e,s){return this.setLimit("max",e,!1,T.toString(s))}setLimit(e,s,n,a){return new Tt({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:n,message:T.toString(a)}]})}_addCheck(e){return new Tt({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:T.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:T.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:T.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:T.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:T.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:T.toString(s)})}finite(e){return this._addCheck({kind:"finite",message:T.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:T.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:T.toString(e)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&J.isInteger(e.value))}get isFinite(){let e=null,s=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(s===null||n.value>s)&&(s=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(s)&&Number.isFinite(e)}}Tt.create=t=>new Tt({checks:[],typeName:V.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...H(t)});class Et extends Q{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==I.bigint)return this._getInvalidInput(e);let n;const a=new Ne;for(const r of this._def.checks)r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(n=this._getOrReturnCtx(e,n),S(n,{code:y.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),a.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(n=this._getOrReturnCtx(e,n),S(n,{code:y.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),a.dirty()):r.kind==="multipleOf"?e.data%r.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),S(n,{code:y.not_multiple_of,multipleOf:r.value,message:r.message}),a.dirty()):J.assertNever(r);return{status:a.value,value:e.data}}_getInvalidInput(e){const s=this._getOrReturnCtx(e);return S(s,{code:y.invalid_type,expected:I.bigint,received:s.parsedType}),z}gte(e,s){return this.setLimit("min",e,!0,T.toString(s))}gt(e,s){return this.setLimit("min",e,!1,T.toString(s))}lte(e,s){return this.setLimit("max",e,!0,T.toString(s))}lt(e,s){return this.setLimit("max",e,!1,T.toString(s))}setLimit(e,s,n,a){return new Et({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:n,message:T.toString(a)}]})}_addCheck(e){return new Et({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:T.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:T.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:T.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:T.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:T.toString(s)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}Et.create=t=>new Et({checks:[],typeName:V.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...H(t)});class nn extends Q{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==I.boolean){const n=this._getOrReturnCtx(e);return S(n,{code:y.invalid_type,expected:I.boolean,received:n.parsedType}),z}return Se(e.data)}}nn.create=t=>new nn({typeName:V.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...H(t)});class qt extends Q{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==I.date){const r=this._getOrReturnCtx(e);return S(r,{code:y.invalid_type,expected:I.date,received:r.parsedType}),z}if(Number.isNaN(e.data.getTime())){const r=this._getOrReturnCtx(e);return S(r,{code:y.invalid_date}),z}const n=new Ne;let a;for(const r of this._def.checks)r.kind==="min"?e.data.getTime()<r.value&&(a=this._getOrReturnCtx(e,a),S(a,{code:y.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),n.dirty()):r.kind==="max"?e.data.getTime()>r.value&&(a=this._getOrReturnCtx(e,a),S(a,{code:y.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),n.dirty()):J.assertNever(r);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new qt({...this._def,checks:[...this._def.checks,e]})}min(e,s){return this._addCheck({kind:"min",value:e.getTime(),message:T.toString(s)})}max(e,s){return this._addCheck({kind:"max",value:e.getTime(),message:T.toString(s)})}get minDate(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e!=null?new Date(e):null}}qt.create=t=>new qt({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:V.ZodDate,...H(t)});class an extends Q{_parse(e){if(this._getType(e)!==I.symbol){const n=this._getOrReturnCtx(e);return S(n,{code:y.invalid_type,expected:I.symbol,received:n.parsedType}),z}return Se(e.data)}}an.create=t=>new an({typeName:V.ZodSymbol,...H(t)});class rn extends Q{_parse(e){if(this._getType(e)!==I.undefined){const n=this._getOrReturnCtx(e);return S(n,{code:y.invalid_type,expected:I.undefined,received:n.parsedType}),z}return Se(e.data)}}rn.create=t=>new rn({typeName:V.ZodUndefined,...H(t)});class on extends Q{_parse(e){if(this._getType(e)!==I.null){const n=this._getOrReturnCtx(e);return S(n,{code:y.invalid_type,expected:I.null,received:n.parsedType}),z}return Se(e.data)}}on.create=t=>new on({typeName:V.ZodNull,...H(t)});class ln extends Q{constructor(){super(...arguments),this._any=!0}_parse(e){return Se(e.data)}}ln.create=t=>new ln({typeName:V.ZodAny,...H(t)});class cn extends Q{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Se(e.data)}}cn.create=t=>new cn({typeName:V.ZodUnknown,...H(t)});class Ze extends Q{_parse(e){const s=this._getOrReturnCtx(e);return S(s,{code:y.invalid_type,expected:I.never,received:s.parsedType}),z}}Ze.create=t=>new Ze({typeName:V.ZodNever,...H(t)});class dn extends Q{_parse(e){if(this._getType(e)!==I.undefined){const n=this._getOrReturnCtx(e);return S(n,{code:y.invalid_type,expected:I.void,received:n.parsedType}),z}return Se(e.data)}}dn.create=t=>new dn({typeName:V.ZodVoid,...H(t)});class Oe extends Q{_parse(e){const{ctx:s,status:n}=this._processInputParams(e),a=this._def;if(s.parsedType!==I.array)return S(s,{code:y.invalid_type,expected:I.array,received:s.parsedType}),z;if(a.exactLength!==null){const o=s.data.length>a.exactLength.value,l=s.data.length<a.exactLength.value;(o||l)&&(S(s,{code:o?y.too_big:y.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&s.data.length<a.minLength.value&&(S(s,{code:y.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&s.data.length>a.maxLength.value&&(S(s,{code:y.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),s.common.async)return Promise.all([...s.data].map((o,l)=>a.type._parseAsync(new We(s,o,s.path,l)))).then(o=>Ne.mergeArray(n,o));const r=[...s.data].map((o,l)=>a.type._parseSync(new We(s,o,s.path,l)));return Ne.mergeArray(n,r)}get element(){return this._def.type}min(e,s){return new Oe({...this._def,minLength:{value:e,message:T.toString(s)}})}max(e,s){return new Oe({...this._def,maxLength:{value:e,message:T.toString(s)}})}length(e,s){return new Oe({...this._def,exactLength:{value:e,message:T.toString(s)}})}nonempty(e){return this.min(1,e)}}Oe.create=(t,e)=>new Oe({type:t,minLength:null,maxLength:null,exactLength:null,typeName:V.ZodArray,...H(e)});function ot(t){if(t instanceof oe){const e={};for(const s in t.shape){const n=t.shape[s];e[s]=Ve.create(ot(n))}return new oe({...t._def,shape:()=>e})}else return t instanceof Oe?new Oe({...t._def,type:ot(t.element)}):t instanceof Ve?Ve.create(ot(t.unwrap())):t instanceof ht?ht.create(ot(t.unwrap())):t instanceof et?et.create(t.items.map(e=>ot(e))):t}class oe extends Q{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),s=J.objectKeys(e);return this._cached={shape:e,keys:s},this._cached}_parse(e){if(this._getType(e)!==I.object){const c=this._getOrReturnCtx(e);return S(c,{code:y.invalid_type,expected:I.object,received:c.parsedType}),z}const{status:n,ctx:a}=this._processInputParams(e),{shape:r,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ze&&this._def.unknownKeys==="strip"))for(const c in a.data)o.includes(c)||l.push(c);const u=[];for(const c of o){const h=r[c],d=a.data[c];u.push({key:{status:"valid",value:c},value:h._parse(new We(a,d,a.path,c)),alwaysSet:c in a.data})}if(this._def.catchall instanceof Ze){const c=this._def.unknownKeys;if(c==="passthrough")for(const h of l)u.push({key:{status:"valid",value:h},value:{status:"valid",value:a.data[h]}});else if(c==="strict")l.length>0&&(S(a,{code:y.unrecognized_keys,keys:l}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const h of l){const d=a.data[h];u.push({key:{status:"valid",value:h},value:c._parse(new We(a,d,a.path,h)),alwaysSet:h in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const c=[];for(const h of u){const d=await h.key,m=await h.value;c.push({key:d,value:m,alwaysSet:h.alwaysSet})}return c}).then(c=>Ne.mergeObjectSync(n,c)):Ne.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return T.errToObj,new oe({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(s,n)=>{var r,o;const a=((o=(r=this._def).errorMap)==null?void 0:o.call(r,s,n).message)??n.defaultError;return s.code==="unrecognized_keys"?{message:T.errToObj(e).message??a}:{message:a}}}:{}})}strip(){return new oe({...this._def,unknownKeys:"strip"})}passthrough(){return new oe({...this._def,unknownKeys:"passthrough"})}extend(e){return new oe({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new oe({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:V.ZodObject})}setKey(e,s){return this.augment({[e]:s})}catchall(e){return new oe({...this._def,catchall:e})}pick(e){const s={};for(const n of J.objectKeys(e))e[n]&&this.shape[n]&&(s[n]=this.shape[n]);return new oe({...this._def,shape:()=>s})}omit(e){const s={};for(const n of J.objectKeys(this.shape))e[n]||(s[n]=this.shape[n]);return new oe({...this._def,shape:()=>s})}deepPartial(){return ot(this)}partial(e){const s={};for(const n of J.objectKeys(this.shape)){const a=this.shape[n];e&&!e[n]?s[n]=a:s[n]=a.optional()}return new oe({...this._def,shape:()=>s})}required(e){const s={};for(const n of J.objectKeys(this.shape))if(e&&!e[n])s[n]=this.shape[n];else{let r=this.shape[n];for(;r instanceof Ve;)r=r._def.innerType;s[n]=r}return new oe({...this._def,shape:()=>s})}keyof(){return Bn(J.objectKeys(this.shape))}}oe.create=(t,e)=>new oe({shape:()=>t,unknownKeys:"strip",catchall:Ze.create(),typeName:V.ZodObject,...H(e)});oe.strictCreate=(t,e)=>new oe({shape:()=>t,unknownKeys:"strict",catchall:Ze.create(),typeName:V.ZodObject,...H(e)});oe.lazycreate=(t,e)=>new oe({shape:t,unknownKeys:"strip",catchall:Ze.create(),typeName:V.ZodObject,...H(e)});class Kt extends Q{_parse(e){const{ctx:s}=this._processInputParams(e),n=this._def.options;function a(r){for(const l of r)if(l.result.status==="valid")return l.result;for(const l of r)if(l.result.status==="dirty")return s.common.issues.push(...l.ctx.common.issues),l.result;const o=r.map(l=>new $e(l.ctx.common.issues));return S(s,{code:y.invalid_union,unionErrors:o}),z}if(s.common.async)return Promise.all(n.map(async r=>{const o={...s,common:{...s.common,issues:[]},parent:null};return{result:await r._parseAsync({data:s.data,path:s.path,parent:o}),ctx:o}})).then(a);{let r;const o=[];for(const u of n){const c={...s,common:{...s.common,issues:[]},parent:null},h=u._parseSync({data:s.data,path:s.path,parent:c});if(h.status==="valid")return h;h.status==="dirty"&&!r&&(r={result:h,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(r)return s.common.issues.push(...r.ctx.common.issues),r.result;const l=o.map(u=>new $e(u));return S(s,{code:y.invalid_union,unionErrors:l}),z}}get options(){return this._def.options}}Kt.create=(t,e)=>new Kt({options:t,typeName:V.ZodUnion,...H(e)});function xs(t,e){const s=Fe(t),n=Fe(e);if(t===e)return{valid:!0,data:t};if(s===I.object&&n===I.object){const a=J.objectKeys(e),r=J.objectKeys(t).filter(l=>a.indexOf(l)!==-1),o={...t,...e};for(const l of r){const u=xs(t[l],e[l]);if(!u.valid)return{valid:!1};o[l]=u.data}return{valid:!0,data:o}}else if(s===I.array&&n===I.array){if(t.length!==e.length)return{valid:!1};const a=[];for(let r=0;r<t.length;r++){const o=t[r],l=e[r],u=xs(o,l);if(!u.valid)return{valid:!1};a.push(u.data)}return{valid:!0,data:a}}else return s===I.date&&n===I.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Gt extends Q{_parse(e){const{status:s,ctx:n}=this._processInputParams(e),a=(r,o)=>{if(en(r)||en(o))return z;const l=xs(r.value,o.value);return l.valid?((tn(r)||tn(o))&&s.dirty(),{status:s.value,value:l.data}):(S(n,{code:y.invalid_intersection_types}),z)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([r,o])=>a(r,o)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Gt.create=(t,e,s)=>new Gt({left:t,right:e,typeName:V.ZodIntersection,...H(s)});class et extends Q{_parse(e){const{status:s,ctx:n}=this._processInputParams(e);if(n.parsedType!==I.array)return S(n,{code:y.invalid_type,expected:I.array,received:n.parsedType}),z;if(n.data.length<this._def.items.length)return S(n,{code:y.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),z;!this._def.rest&&n.data.length>this._def.items.length&&(S(n,{code:y.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const r=[...n.data].map((o,l)=>{const u=this._def.items[l]||this._def.rest;return u?u._parse(new We(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(r).then(o=>Ne.mergeArray(s,o)):Ne.mergeArray(s,r)}get items(){return this._def.items}rest(e){return new et({...this._def,rest:e})}}et.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new et({items:t,typeName:V.ZodTuple,rest:null,...H(e)})};class un extends Q{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:s,ctx:n}=this._processInputParams(e);if(n.parsedType!==I.map)return S(n,{code:y.invalid_type,expected:I.map,received:n.parsedType}),z;const a=this._def.keyType,r=this._def.valueType,o=[...n.data.entries()].map(([l,u],c)=>({key:a._parse(new We(n,l,n.path,[c,"key"])),value:r._parse(new We(n,u,n.path,[c,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const u of o){const c=await u.key,h=await u.value;if(c.status==="aborted"||h.status==="aborted")return z;(c.status==="dirty"||h.status==="dirty")&&s.dirty(),l.set(c.value,h.value)}return{status:s.value,value:l}})}else{const l=new Map;for(const u of o){const c=u.key,h=u.value;if(c.status==="aborted"||h.status==="aborted")return z;(c.status==="dirty"||h.status==="dirty")&&s.dirty(),l.set(c.value,h.value)}return{status:s.value,value:l}}}}un.create=(t,e,s)=>new un({valueType:e,keyType:t,typeName:V.ZodMap,...H(s)});class Rt extends Q{_parse(e){const{status:s,ctx:n}=this._processInputParams(e);if(n.parsedType!==I.set)return S(n,{code:y.invalid_type,expected:I.set,received:n.parsedType}),z;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(S(n,{code:y.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),s.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(S(n,{code:y.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),s.dirty());const r=this._def.valueType;function o(u){const c=new Set;for(const h of u){if(h.status==="aborted")return z;h.status==="dirty"&&s.dirty(),c.add(h.value)}return{status:s.value,value:c}}const l=[...n.data.values()].map((u,c)=>r._parse(new We(n,u,n.path,c)));return n.common.async?Promise.all(l).then(u=>o(u)):o(l)}min(e,s){return new Rt({...this._def,minSize:{value:e,message:T.toString(s)}})}max(e,s){return new Rt({...this._def,maxSize:{value:e,message:T.toString(s)}})}size(e,s){return this.min(e,s).max(e,s)}nonempty(e){return this.min(1,e)}}Rt.create=(t,e)=>new Rt({valueType:t,minSize:null,maxSize:null,typeName:V.ZodSet,...H(e)});class hn extends Q{get schema(){return this._def.getter()}_parse(e){const{ctx:s}=this._processInputParams(e);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}hn.create=(t,e)=>new hn({getter:t,typeName:V.ZodLazy,...H(e)});class fn extends Q{_parse(e){if(e.data!==this._def.value){const s=this._getOrReturnCtx(e);return S(s,{received:s.data,code:y.invalid_literal,expected:this._def.value}),z}return{status:"valid",value:e.data}}get value(){return this._def.value}}fn.create=(t,e)=>new fn({value:t,typeName:V.ZodLiteral,...H(e)});function Bn(t,e){return new dt({values:t,typeName:V.ZodEnum,...H(e)})}class dt extends Q{_parse(e){if(typeof e.data!="string"){const s=this._getOrReturnCtx(e),n=this._def.values;return S(s,{expected:J.joinValues(n),received:s.parsedType,code:y.invalid_type}),z}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const s=this._getOrReturnCtx(e),n=this._def.values;return S(s,{received:s.data,code:y.invalid_enum_value,options:n}),z}return Se(e.data)}get options(){return this._def.values}get enum(){const e={};for(const s of this._def.values)e[s]=s;return e}get Values(){const e={};for(const s of this._def.values)e[s]=s;return e}get Enum(){const e={};for(const s of this._def.values)e[s]=s;return e}extract(e,s=this._def){return dt.create(e,{...this._def,...s})}exclude(e,s=this._def){return dt.create(this.options.filter(n=>!e.includes(n)),{...this._def,...s})}}dt.create=Bn;class mn extends Q{_parse(e){const s=J.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==I.string&&n.parsedType!==I.number){const a=J.objectValues(s);return S(n,{expected:J.joinValues(a),received:n.parsedType,code:y.invalid_type}),z}if(this._cache||(this._cache=new Set(J.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const a=J.objectValues(s);return S(n,{received:n.data,code:y.invalid_enum_value,options:a}),z}return Se(e.data)}get enum(){return this._def.values}}mn.create=(t,e)=>new mn({values:t,typeName:V.ZodNativeEnum,...H(e)});class Qt extends Q{unwrap(){return this._def.type}_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==I.promise&&s.common.async===!1)return S(s,{code:y.invalid_type,expected:I.promise,received:s.parsedType}),z;const n=s.parsedType===I.promise?s.data:Promise.resolve(s.data);return Se(n.then(a=>this._def.type.parseAsync(a,{path:s.path,errorMap:s.common.contextualErrorMap})))}}Qt.create=(t,e)=>new Qt({type:t,typeName:V.ZodPromise,...H(e)});class ut extends Q{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===V.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:s,ctx:n}=this._processInputParams(e),a=this._def.effect||null,r={addIssue:o=>{S(n,o),o.fatal?s.abort():s.dirty()},get path(){return n.path}};if(r.addIssue=r.addIssue.bind(r),a.type==="preprocess"){const o=a.transform(n.data,r);if(n.common.async)return Promise.resolve(o).then(async l=>{if(s.value==="aborted")return z;const u=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return u.status==="aborted"?z:u.status==="dirty"||s.value==="dirty"?Nt(u.value):u});{if(s.value==="aborted")return z;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?z:l.status==="dirty"||s.value==="dirty"?Nt(l.value):l}}if(a.type==="refinement"){const o=l=>{const u=a.refinement(l,r);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?z:(l.status==="dirty"&&s.dirty(),o(l.value),{status:s.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?z:(l.status==="dirty"&&s.dirty(),o(l.value).then(()=>({status:s.value,value:l.value}))))}if(a.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ct(o))return z;const l=a.transform(o.value,r);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>ct(o)?Promise.resolve(a.transform(o.value,r)).then(l=>({status:s.value,value:l})):z);J.assertNever(a)}}ut.create=(t,e,s)=>new ut({schema:t,typeName:V.ZodEffects,effect:e,...H(s)});ut.createWithPreprocess=(t,e,s)=>new ut({schema:e,effect:{type:"preprocess",transform:t},typeName:V.ZodEffects,...H(s)});class Ve extends Q{_parse(e){return this._getType(e)===I.undefined?Se(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ve.create=(t,e)=>new Ve({innerType:t,typeName:V.ZodOptional,...H(e)});class ht extends Q{_parse(e){return this._getType(e)===I.null?Se(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ht.create=(t,e)=>new ht({innerType:t,typeName:V.ZodNullable,...H(e)});class ys extends Q{_parse(e){const{ctx:s}=this._processInputParams(e);let n=s.data;return s.parsedType===I.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}ys.create=(t,e)=>new ys({innerType:t,typeName:V.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...H(e)});class bs extends Q{_parse(e){const{ctx:s}=this._processInputParams(e),n={...s,common:{...s.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Ht(a)?a.then(r=>({status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new $e(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new $e(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}bs.create=(t,e)=>new bs({innerType:t,typeName:V.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...H(e)});class pn extends Q{_parse(e){if(this._getType(e)!==I.nan){const n=this._getOrReturnCtx(e);return S(n,{code:y.invalid_type,expected:I.nan,received:n.parsedType}),z}return{status:"valid",value:e.data}}}pn.create=t=>new pn({typeName:V.ZodNaN,...H(t)});class pi extends Q{_parse(e){const{ctx:s}=this._processInputParams(e),n=s.data;return this._def.type._parse({data:n,path:s.path,parent:s})}unwrap(){return this._def.type}}class Es extends Q{_parse(e){const{status:s,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const r=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return r.status==="aborted"?z:r.status==="dirty"?(s.dirty(),Nt(r.value)):this._def.out._parseAsync({data:r.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?z:a.status==="dirty"?(s.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(e,s){return new Es({in:e,out:s,typeName:V.ZodPipeline})}}class vs extends Q{_parse(e){const s=this._def.innerType._parse(e),n=a=>(ct(a)&&(a.value=Object.freeze(a.value)),a);return Ht(s)?s.then(a=>n(a)):n(s)}unwrap(){return this._def.innerType}}vs.create=(t,e)=>new vs({innerType:t,typeName:V.ZodReadonly,...H(e)});var V;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(V||(V={}));const Ut=ze.create;Ze.create;Oe.create;const gi=oe.create;Kt.create;Gt.create;et.create;dt.create;Qt.create;Ve.create;ht.create;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n="firebasestorage.googleapis.com",Ln="storageBucket",xi=2*60*1e3,yi=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie extends Cs{constructor(e,s,n=0){super(os(e),`Firebase Storage: ${s} (${os(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ie.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return os(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var re;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(re||(re={}));function os(t){return"storage/"+t}function Rs(){const t="An unknown error occurred, please check the error payload for server response.";return new ie(re.UNKNOWN,t)}function bi(t){return new ie(re.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function vi(t){return new ie(re.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function wi(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ie(re.UNAUTHENTICATED,t)}function _i(){return new ie(re.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Ni(t){return new ie(re.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function ji(){return new ie(re.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Si(){return new ie(re.CANCELED,"User canceled the upload/download.")}function ki(t){return new ie(re.INVALID_URL,"Invalid URL '"+t+"'.")}function Ci(t){return new ie(re.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Ii(){return new ie(re.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ln+"' property when initializing the app?")}function Ti(){return new ie(re.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ei(){return new ie(re.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Ri(t){return new ie(re.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ws(t){return new ie(re.INVALID_ARGUMENT,t)}function Mn(){return new ie(re.APP_DELETED,"The Firebase app was deleted.")}function Ai(t){return new ie(re.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function jt(t,e){return new ie(re.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function vt(t){throw new ie(re.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e,s){this.bucket=e,this.path_=s}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,s){let n;try{n=we.makeFromUrl(e,s)}catch{return new we(e,"")}if(n.path==="")return n;throw Ci(e)}static makeFromUrl(e,s){let n=null;const a="([A-Za-z0-9.\\-_]+)";function r(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+a+o,"i"),u={bucket:1,path:3};function c(N){N.path_=decodeURIComponent(N.path)}const h="v[A-Za-z0-9_]+",d=s.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${h}/b/${a}/o${m}`,"i"),x={bucket:1,path:3},D=s===$n?"(?:storage.googleapis.com|storage.cloud.google.com)":s,w="([^?#]*)",E=new RegExp(`^https?://${D}/${a}/${w}`,"i"),$=[{regex:l,indices:u,postModify:r},{regex:p,indices:x,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let N=0;N<$.length;N++){const C=$[N],b=C.regex.exec(e);if(b){const k=b[C.indices.bucket];let M=b[C.indices.path];M||(M=""),n=new we(k,M),C.postModify(n);break}}if(n==null)throw ki(e);return n}}class Oi{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(t,e,s){let n=1,a=null,r=null,o=!1,l=0;function u(){return l===2}let c=!1;function h(...w){c||(c=!0,e.apply(null,w))}function d(w){a=setTimeout(()=>{a=null,t(p,u())},w)}function m(){r&&clearTimeout(r)}function p(w,...E){if(c){m();return}if(w){m(),h.call(null,w,...E);return}if(u()||o){m(),h.call(null,w,...E);return}n<64&&(n*=2);let $;l===1?(l=2,$=0):$=(n+Math.random())*1e3,d($)}let x=!1;function D(w){x||(x=!0,m(),!c&&(a!==null?(w||(l=2),clearTimeout(a),d(0)):w||(l=1)))}return d(0),r=setTimeout(()=>{o=!0,D(!0)},s),D}function Pi(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(t){return t!==void 0}function $i(t){return typeof t=="object"&&!Array.isArray(t)}function As(t){return typeof t=="string"||t instanceof String}function gn(t){return Os()&&t instanceof Blob}function Os(){return typeof Blob<"u"}function xn(t,e,s,n){if(n<e)throw ws(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>s)throw ws(`Invalid value for '${t}'. Expected ${s} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(t,e,s){let n=e;return s==null&&(n=`https://${e}`),`${s}://${n}/v0${t}`}function Fn(t){const e=encodeURIComponent;let s="?";for(const n in t)if(t.hasOwnProperty(n)){const a=e(n)+"="+e(t[n]);s=s+a+"&"}return s=s.slice(0,-1),s}var Xe;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Xe||(Xe={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(t,e){const s=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,r=e.indexOf(t)!==-1;return s||a||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,s,n,a,r,o,l,u,c,h,d,m=!0,p=!1){this.url_=e,this.method_=s,this.headers_=n,this.body_=a,this.successCodes_=r,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=m,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,D)=>{this.resolve_=x,this.reject_=D,this.start_()})}start_(){const e=(n,a)=>{if(a){n(!1,new zt(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const o=l=>{const u=l.loaded,c=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&r.addUploadProgressListener(o),r.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(o),this.pendingConnection_=null;const l=r.getErrorCode()===Xe.NO_ERROR,u=r.getStatus();if(!l||Li(u,this.additionalRetryCodes_)&&this.retry){const h=r.getErrorCode()===Xe.ABORT;n(!1,new zt(!1,null,h));return}const c=this.successCodes_.indexOf(u)!==-1;n(!0,new zt(c,r))})},s=(n,a)=>{const r=this.resolve_,o=this.reject_,l=a.connection;if(a.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());Bi(u)?r(u):r()}catch(u){o(u)}else if(l!==null){const u=Rs();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(a.canceled){const u=this.appDelete_?Mn():Si();o(u)}else{const u=ji();o(u)}};this.canceled_?s(!1,new zt(!1,null,!0)):this.backoffId_=Di(e,s,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Pi(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class zt{constructor(e,s,n){this.wasSuccessCode=e,this.connection=s,this.canceled=!!n}}function Fi(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Ui(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function zi(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Vi(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Wi(t,e,s,n,a,r,o=!0,l=!1){const u=Fn(t.urlParams),c=t.url+u,h=Object.assign({},t.headers);return zi(h,e),Fi(h,s),Ui(h,r),Vi(h,n),new Mi(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Hi(...t){const e=Zi();if(e!==void 0){const s=new e;for(let n=0;n<t.length;n++)s.append(t[n]);return s.getBlob()}else{if(Os())return new Blob(t);throw new ie(re.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function qi(t,e,s){return t.webkitSlice?t.webkitSlice(e,s):t.mozSlice?t.mozSlice(e,s):t.slice?t.slice(e,s):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(t){if(typeof atob>"u")throw Ri("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ae={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ls{constructor(e,s){this.data=e,this.contentType=s||null}}function Gi(t,e){switch(t){case Ae.RAW:return new ls(Un(e));case Ae.BASE64:case Ae.BASE64URL:return new ls(zn(t,e));case Ae.DATA_URL:return new ls(Ji(e),Yi(e))}throw Rs()}function Un(t){const e=[];for(let s=0;s<t.length;s++){let n=t.charCodeAt(s);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(s<t.length-1&&(t.charCodeAt(s+1)&64512)===56320))e.push(239,191,189);else{const r=n,o=t.charCodeAt(++s);n=65536|(r&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function Qi(t){let e;try{e=decodeURIComponent(t)}catch{throw jt(Ae.DATA_URL,"Malformed data URL.")}return Un(e)}function zn(t,e){switch(t){case Ae.BASE64:{const a=e.indexOf("-")!==-1,r=e.indexOf("_")!==-1;if(a||r)throw jt(t,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Ae.BASE64URL:{const a=e.indexOf("+")!==-1,r=e.indexOf("/")!==-1;if(a||r)throw jt(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let s;try{s=Ki(e)}catch(a){throw a.message.includes("polyfill")?a:jt(t,"Invalid character found")}const n=new Uint8Array(s.length);for(let a=0;a<s.length;a++)n[a]=s.charCodeAt(a);return n}class Vn{constructor(e){this.base64=!1,this.contentType=null;const s=e.match(/^data:([^,]+)?,/);if(s===null)throw jt(Ae.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=s[1]||null;n!=null&&(this.base64=Xi(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function Ji(t){const e=new Vn(t);return e.base64?zn(Ae.BASE64,e.rest):Qi(e.rest)}function Yi(t){return new Vn(t).contentType}function Xi(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,s){let n=0,a="";gn(e)?(this.data_=e,n=e.size,a=e.type):e instanceof ArrayBuffer?(s?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(s?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,s){if(gn(this.data_)){const n=this.data_,a=qi(n,e,s);return a===null?null:new Ue(a)}else{const n=new Uint8Array(this.data_.buffer,e,s-e);return new Ue(n,!0)}}static getBlob(...e){if(Os()){const s=e.map(n=>n instanceof Ue?n.data_:n);return new Ue(Hi.apply(null,s))}else{const s=e.map(o=>As(o)?Gi(Ae.RAW,o).data:o.data_);let n=0;s.forEach(o=>{n+=o.byteLength});const a=new Uint8Array(n);let r=0;return s.forEach(o=>{for(let l=0;l<o.length;l++)a[r++]=o[l]}),new Ue(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(t){let e;try{e=JSON.parse(t)}catch{return null}return $i(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function to(t,e){const s=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?s:t+"/"+s}function Zn(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(t,e){return e}class ge{constructor(e,s,n,a){this.server=e,this.local=s||e,this.writable=!!n,this.xform=a||so}}let Vt=null;function no(t){return!As(t)||t.length<2?t:Zn(t)}function Hn(){if(Vt)return Vt;const t=[];t.push(new ge("bucket")),t.push(new ge("generation")),t.push(new ge("metageneration")),t.push(new ge("name","fullPath",!0));function e(r,o){return no(o)}const s=new ge("name");s.xform=e,t.push(s);function n(r,o){return o!==void 0?Number(o):o}const a=new ge("size");return a.xform=n,t.push(a),t.push(new ge("timeCreated")),t.push(new ge("updated")),t.push(new ge("md5Hash",null,!0)),t.push(new ge("cacheControl",null,!0)),t.push(new ge("contentDisposition",null,!0)),t.push(new ge("contentEncoding",null,!0)),t.push(new ge("contentLanguage",null,!0)),t.push(new ge("contentType",null,!0)),t.push(new ge("metadata","customMetadata",!0)),Vt=t,Vt}function ao(t,e){function s(){const n=t.bucket,a=t.fullPath,r=new we(n,a);return e._makeStorageReference(r)}Object.defineProperty(t,"ref",{get:s})}function ro(t,e,s){const n={};n.type="file";const a=s.length;for(let r=0;r<a;r++){const o=s[r];n[o.local]=o.xform(n,e[o.server])}return ao(n,t),n}function qn(t,e,s){const n=Wn(e);return n===null?null:ro(t,n,s)}function io(t,e,s,n){const a=Wn(e);if(a===null||!As(a.downloadTokens))return null;const r=a.downloadTokens;if(r.length===0)return null;const o=encodeURIComponent;return r.split(",").map(c=>{const h=t.bucket,d=t.fullPath,m="/b/"+o(h)+"/o/"+o(d),p=Ds(m,s,n),x=Fn({alt:"media",token:c});return p+x})[0]}function oo(t,e){const s={},n=e.length;for(let a=0;a<n;a++){const r=e[a];r.writable&&(s[r.server]=t[r.local])}return JSON.stringify(s)}class Kn{constructor(e,s,n,a){this.url=e,this.method=s,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(t){if(!t)throw Rs()}function lo(t,e){function s(n,a){const r=qn(t,a,e);return Gn(r!==null),r}return s}function co(t,e){function s(n,a){const r=qn(t,a,e);return Gn(r!==null),io(r,a,t.host,t._protocol)}return s}function Qn(t){function e(s,n){let a;return s.getStatus()===401?s.getErrorText().includes("Firebase App Check token is invalid")?a=_i():a=wi():s.getStatus()===402?a=vi(t.bucket):s.getStatus()===403?a=Ni(t.path):a=n,a.status=s.getStatus(),a.serverResponse=n.serverResponse,a}return e}function uo(t){const e=Qn(t);function s(n,a){let r=e(n,a);return n.getStatus()===404&&(r=bi(t.path)),r.serverResponse=a.serverResponse,r}return s}function ho(t,e,s){const n=e.fullServerUrl(),a=Ds(n,t.host,t._protocol),r="GET",o=t.maxOperationRetryTime,l=new Kn(a,r,co(t,s),o);return l.errorHandler=uo(e),l}function fo(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function mo(t,e,s){const n=Object.assign({},s);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=fo(null,e)),n}function po(t,e,s,n,a){const r=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let $="";for(let N=0;N<2;N++)$=$+Math.random().toString().slice(2);return $}const u=l();o["Content-Type"]="multipart/related; boundary="+u;const c=mo(e,n,a),h=oo(c,s),d="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,m=`\r
--`+u+"--",p=Ue.getBlob(d,n,m);if(p===null)throw Ti();const x={name:c.fullPath},D=Ds(r,t.host,t._protocol),w="POST",E=t.maxUploadRetryTime,q=new Kn(D,w,lo(t,s),E);return q.urlParams=x,q.headers=o,q.body=p.uploadData(),q.errorHandler=Qn(e),q}class go{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Xe.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Xe.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Xe.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,s,n,a,r){if(this.sent_)throw vt("cannot .send() more than once");if(An(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(s,e,!0),r!==void 0)for(const o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw vt("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw vt("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw vt("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw vt("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class xo extends go{initXhr(){this.xhr_.responseType="text"}}function Jn(){return new xo}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,s){this._service=e,s instanceof we?this._location=s:this._location=we.makeFromUrl(s,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,s){return new tt(e,s)}get root(){const e=new we(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Zn(this._location.path)}get storage(){return this._service}get parent(){const e=eo(this._location.path);if(e===null)return null;const s=new we(this._location.bucket,e);return new tt(this._service,s)}_throwIfRoot(e){if(this._location.path==="")throw Ai(e)}}function yo(t,e,s){t._throwIfRoot("uploadBytes");const n=po(t.storage,t._location,Hn(),new Ue(e,!0),s);return t.storage.makeRequestWithTokens(n,Jn).then(a=>({metadata:a,ref:t}))}function bo(t){t._throwIfRoot("getDownloadURL");const e=ho(t.storage,t._location,Hn());return t.storage.makeRequestWithTokens(e,Jn).then(s=>{if(s===null)throw Ei();return s})}function vo(t,e){const s=to(t._location.path,e),n=new we(t._location.bucket,s);return new tt(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(t){return/^[A-Za-z]+:\/\//.test(t)}function _o(t,e){return new tt(t,e)}function Yn(t,e){if(t instanceof Ps){const s=t;if(s._bucket==null)throw Ii();const n=new tt(s,s._bucket);return e!=null?Yn(n,e):n}else return e!==void 0?vo(t,e):t}function No(t,e){if(e&&wo(e)){if(t instanceof Ps)return _o(t,e);throw ws("To use ref(service, url), the first argument must be a Storage instance.")}else return Yn(t,e)}function yn(t,e){const s=e==null?void 0:e[Ln];return s==null?null:we.makeFromBucketSpec(s,t)}function jo(t,e,s,n={}){t.host=`${e}:${s}`;const a=An(e);a&&(Qa(`https://${t.host}/b`),Ja("Storage",!0)),t._isUsingEmulator=!0,t._protocol=a?"https":"http";const{mockUserToken:r}=n;r&&(t._overrideAuthToken=typeof r=="string"?r:Ya(r,t.app.options.projectId))}class Ps{constructor(e,s,n,a,r,o=!1){this.app=e,this._authProvider=s,this._appCheckProvider=n,this._url=a,this._firebaseVersion=r,this._isUsingEmulator=o,this._bucket=null,this._host=$n,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=xi,this._maxUploadRetryTime=yi,this._requests=new Set,a!=null?this._bucket=we.makeFromBucketSpec(a,this._host):this._bucket=yn(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=we.makeFromBucketSpec(this._url,e):this._bucket=yn(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xn("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xn("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const s=await e.getToken();if(s!==null)return s.accessToken}return null}async _getAppCheckToken(){if(Ka(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new tt(this,e)}_makeRequest(e,s,n,a,r=!0){if(this._deleted)return new Oi(Mn());{const o=Wi(e,this._appId,n,a,s,this._firebaseVersion,r,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,s){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,s,n,a).getPromise()}}const bn="@firebase/storage",vn="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn="storage";function So(t,e,s){return t=ft(t),yo(t,e,s)}function ko(t){return t=ft(t),bo(t)}function Co(t,e){return t=ft(t),No(t,e)}function Io(t=Rn(),e){t=ft(t);const n=At(t,Xn).getImmediate({identifier:e}),a=Ga("storage");return a&&To(n,...a),n}function To(t,e,s,n={}){jo(t,e,s,n)}function Eo(t,{instanceIdentifier:e}){const s=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new Ps(s,n,a,e,qa)}function Ro(){Ct(new It(Xn,Eo,"PUBLIC").setMultipleInstances(!0)),lt(bn,vn,""),lt(bn,vn,"esm2017")}Ro();const ea="@firebase/installations",Bs="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=1e4,sa=`w:${Bs}`,na="FIS_v2",Ao="https://firebaseinstallations.googleapis.com/v1",Oo=60*60*1e3,Do="installations",Po="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},st=new On(Do,Po,Bo);function aa(t){return t instanceof Cs&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra({projectId:t}){return`${Ao}/projects/${t}/installations`}function ia(t){return{token:t.token,requestStatus:2,expiresIn:Lo(t.expiresIn),creationTime:Date.now()}}async function oa(t,e){const n=(await e.json()).error;return st.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function la({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function $o(t,{refreshToken:e}){const s=la(t);return s.append("Authorization",Mo(e)),s}async function ca(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Lo(t){return Number(t.replace("s","000"))}function Mo(t){return`${na} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fo({appConfig:t,heartbeatServiceProvider:e},{fid:s}){const n=ra(t),a=la(t),r=e.getImmediate({optional:!0});if(r){const c=await r.getHeartbeatsHeader();c&&a.append("x-firebase-client",c)}const o={fid:s,authVersion:na,appId:t.appId,sdkVersion:sa},l={method:"POST",headers:a,body:JSON.stringify(o)},u=await ca(()=>fetch(n,l));if(u.ok){const c=await u.json();return{fid:c.fid||s,registrationStatus:2,refreshToken:c.refreshToken,authToken:ia(c.authToken)}}else throw await oa("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=/^[cdef][\w-]{21}$/,_s="";function Vo(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const s=Wo(t);return zo.test(s)?s:_s}catch{return _s}}function Wo(t){return Uo(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=new Map;function ha(t,e){const s=es(t);fa(s,e),Zo(s,e)}function fa(t,e){const s=ua.get(t);if(s)for(const n of s)n(e)}function Zo(t,e){const s=Ho();s&&s.postMessage({key:t,fid:e}),qo()}let Ye=null;function Ho(){return!Ye&&"BroadcastChannel"in self&&(Ye=new BroadcastChannel("[Firebase] FID Change"),Ye.onmessage=t=>{fa(t.data.key,t.data.fid)}),Ye}function qo(){ua.size===0&&Ye&&(Ye.close(),Ye=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko="firebase-installations-database",Go=1,nt="firebase-installations-store";let cs=null;function $s(){return cs||(cs=Xa(Ko,Go,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(nt)}}})),cs}async function Jt(t,e){const s=es(t),a=(await $s()).transaction(nt,"readwrite"),r=a.objectStore(nt),o=await r.get(s);return await r.put(e,s),await a.done,(!o||o.fid!==e.fid)&&ha(t,e.fid),e}async function ma(t){const e=es(t),n=(await $s()).transaction(nt,"readwrite");await n.objectStore(nt).delete(e),await n.done}async function ts(t,e){const s=es(t),a=(await $s()).transaction(nt,"readwrite"),r=a.objectStore(nt),o=await r.get(s),l=e(o);return l===void 0?await r.delete(s):await r.put(l,s),await a.done,l&&(!o||o.fid!==l.fid)&&ha(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ls(t){let e;const s=await ts(t.appConfig,n=>{const a=Qo(n),r=Jo(t,a);return e=r.registrationPromise,r.installationEntry});return s.fid===_s?{installationEntry:await e}:{installationEntry:s,registrationPromise:e}}function Qo(t){const e=t||{fid:Vo(),registrationStatus:0};return pa(e)}function Jo(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(st.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const s={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=Yo(t,s);return{installationEntry:s,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Xo(t)}:{installationEntry:e}}async function Yo(t,e){try{const s=await Fo(t,e);return Jt(t.appConfig,s)}catch(s){throw aa(s)&&s.customData.serverCode===409?await ma(t.appConfig):await Jt(t.appConfig,{fid:e.fid,registrationStatus:0}),s}}async function Xo(t){let e=await wn(t.appConfig);for(;e.registrationStatus===1;)await da(100),e=await wn(t.appConfig);if(e.registrationStatus===0){const{installationEntry:s,registrationPromise:n}=await Ls(t);return n||s}return e}function wn(t){return ts(t,e=>{if(!e)throw st.create("installation-not-found");return pa(e)})}function pa(t){return el(t)?{fid:t.fid,registrationStatus:0}:t}function el(t){return t.registrationStatus===1&&t.registrationTime+ta<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl({appConfig:t,heartbeatServiceProvider:e},s){const n=sl(t,s),a=$o(t,s),r=e.getImmediate({optional:!0});if(r){const c=await r.getHeartbeatsHeader();c&&a.append("x-firebase-client",c)}const o={installation:{sdkVersion:sa,appId:t.appId}},l={method:"POST",headers:a,body:JSON.stringify(o)},u=await ca(()=>fetch(n,l));if(u.ok){const c=await u.json();return ia(c)}else throw await oa("Generate Auth Token",u)}function sl(t,{fid:e}){return`${ra(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ms(t,e=!1){let s;const n=await ts(t.appConfig,r=>{if(!ga(r))throw st.create("not-registered");const o=r.authToken;if(!e&&rl(o))return r;if(o.requestStatus===1)return s=nl(t,e),r;{if(!navigator.onLine)throw st.create("app-offline");const l=ol(r);return s=al(t,l),l}});return s?await s:n.authToken}async function nl(t,e){let s=await _n(t.appConfig);for(;s.authToken.requestStatus===1;)await da(100),s=await _n(t.appConfig);const n=s.authToken;return n.requestStatus===0?Ms(t,e):n}function _n(t){return ts(t,e=>{if(!ga(e))throw st.create("not-registered");const s=e.authToken;return ll(s)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function al(t,e){try{const s=await tl(t,e),n=Object.assign(Object.assign({},e),{authToken:s});return await Jt(t.appConfig,n),s}catch(s){if(aa(s)&&(s.customData.serverCode===401||s.customData.serverCode===404))await ma(t.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Jt(t.appConfig,n)}throw s}}function ga(t){return t!==void 0&&t.registrationStatus===2}function rl(t){return t.requestStatus===2&&!il(t)}function il(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Oo}function ol(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function ll(t){return t.requestStatus===1&&t.requestTime+ta<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cl(t){const e=t,{installationEntry:s,registrationPromise:n}=await Ls(e);return n?n.catch(console.error):Ms(e).catch(console.error),s.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dl(t,e=!1){const s=t;return await ul(s),(await Ms(s,e)).token}async function ul(t){const{registrationPromise:e}=await Ls(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(t){if(!t||!t.options)throw ds("App Configuration");if(!t.name)throw ds("App Name");const e=["projectId","apiKey","appId"];for(const s of e)if(!t.options[s])throw ds(s);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function ds(t){return st.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa="installations",fl="installations-internal",ml=t=>{const e=t.getProvider("app").getImmediate(),s=hl(e),n=At(e,"heartbeat");return{app:e,appConfig:s,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},pl=t=>{const e=t.getProvider("app").getImmediate(),s=At(e,xa).getImmediate();return{getId:()=>cl(s),getToken:a=>dl(s,a)}};function gl(){Ct(new It(xa,ml,"PUBLIC")),Ct(new It(fl,pl,"PRIVATE"))}gl();lt(ea,Bs);lt(ea,Bs,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="analytics",xl="firebase_id",yl="origin",bl=60*1e3,vl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Fs="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ye=new er("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},_e=new On("analytics","Analytics",wl);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(t){if(!t.startsWith(Fs)){const e=_e.create("invalid-gtag-resource",{gtagURL:t});return ye.warn(e.message),""}return t}function ya(t){return Promise.all(t.map(e=>e.catch(s=>s)))}function Nl(t,e){let s;return window.trustedTypes&&(s=window.trustedTypes.createPolicy(t,e)),s}function jl(t,e){const s=Nl("firebase-js-sdk-policy",{createScriptURL:_l}),n=document.createElement("script"),a=`${Fs}?l=${t}&id=${e}`;n.src=s?s==null?void 0:s.createScriptURL(a):a,n.async=!0,document.head.appendChild(n)}function Sl(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function kl(t,e,s,n,a,r){const o=n[a];try{if(o)await e[o];else{const u=(await ya(s)).find(c=>c.measurementId===a);u&&await e[u.appId]}}catch(l){ye.error(l)}t("config",a,r)}async function Cl(t,e,s,n,a){try{let r=[];if(a&&a.send_to){let o=a.send_to;Array.isArray(o)||(o=[o]);const l=await ya(s);for(const u of o){const c=l.find(d=>d.measurementId===u),h=c&&e[c.appId];if(h)r.push(h);else{r=[];break}}}r.length===0&&(r=Object.values(e)),await Promise.all(r),t("event",n,a||{})}catch(r){ye.error(r)}}function Il(t,e,s,n){async function a(r,...o){try{if(r==="event"){const[l,u]=o;await Cl(t,e,s,l,u)}else if(r==="config"){const[l,u]=o;await kl(t,e,s,n,l,u)}else if(r==="consent"){const[l,u]=o;t("consent",l,u)}else if(r==="get"){const[l,u,c]=o;t("get",l,u,c)}else if(r==="set"){const[l]=o;t("set",l)}else t(r,...o)}catch(l){ye.error(l)}}return a}function Tl(t,e,s,n,a){let r=function(...o){window[n].push(arguments)};return window[a]&&typeof window[a]=="function"&&(r=window[a]),window[a]=Il(r,t,e,s),{gtagCore:r,wrappedGtag:window[a]}}function El(t){const e=window.document.getElementsByTagName("script");for(const s of Object.values(e))if(s.src&&s.src.includes(Fs)&&s.src.includes(t))return s;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl=30,Al=1e3;class Ol{constructor(e={},s=Al){this.throttleMetadata=e,this.intervalMillis=s}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,s){this.throttleMetadata[e]=s}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const ba=new Ol;function Dl(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Pl(t){var e;const{appId:s,apiKey:n}=t,a={method:"GET",headers:Dl(n)},r=vl.replace("{app-id}",s),o=await fetch(r,a);if(o.status!==200&&o.status!==304){let l="";try{const u=await o.json();!((e=u.error)===null||e===void 0)&&e.message&&(l=u.error.message)}catch{}throw _e.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function Bl(t,e=ba,s){const{appId:n,apiKey:a,measurementId:r}=t.options;if(!n)throw _e.create("no-app-id");if(!a){if(r)return{measurementId:r,appId:n};throw _e.create("no-api-key")}const o=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new Ml;return setTimeout(async()=>{l.abort()},bl),va({appId:n,apiKey:a,measurementId:r},o,l,e)}async function va(t,{throttleEndTimeMillis:e,backoffCount:s},n,a=ba){var r;const{appId:o,measurementId:l}=t;try{await $l(n,e)}catch(u){if(l)return ye.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:l};throw u}try{const u=await Pl(t);return a.deleteThrottleMetadata(o),u}catch(u){const c=u;if(!Ll(c)){if(a.deleteThrottleMetadata(o),l)return ye.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:l};throw u}const h=Number((r=c==null?void 0:c.customData)===null||r===void 0?void 0:r.httpStatus)===503?qs(s,a.intervalMillis,Rl):qs(s,a.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:s+1};return a.setThrottleMetadata(o,d),ye.debug(`Calling attemptFetch again in ${h} millis`),va(t,d,n,a)}}function $l(t,e){return new Promise((s,n)=>{const a=Math.max(e-Date.now(),0),r=setTimeout(s,a);t.addEventListener(()=>{clearTimeout(r),n(_e.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Ll(t){if(!(t instanceof Cs)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class Ml{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Fl(t,e,s,n,a){if(a&&a.global){t("event",s,n);return}else{const r=await e,o=Object.assign(Object.assign({},n),{send_to:r});t("event",s,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ul(){if(sr())try{await nr()}catch(t){return ye.warn(_e.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return ye.warn(_e.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function zl(t,e,s,n,a,r,o){var l;const u=Bl(t);u.then(p=>{s[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&ye.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>ye.error(p)),e.push(u);const c=Ul().then(p=>{if(p)return n.getId()}),[h,d]=await Promise.all([u,c]);El(r)||jl(r,h.measurementId),a("js",new Date);const m=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return m[yl]="firebase",m.update=!0,d!=null&&(m[xl]=d),a("config",h.measurementId,m),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e){this.app=e}_delete(){return delete St[this.app.options.appId],Promise.resolve()}}let St={},Nn=[];const jn={};let us="dataLayer",Wl="gtag",Sn,wa,kn=!1;function Zl(){const t=[];if(tr()&&t.push("This is a browser extension environment."),rr()||t.push("Cookies are not available."),t.length>0){const e=t.map((n,a)=>`(${a+1}) ${n}`).join(" "),s=_e.create("invalid-analytics-context",{errorInfo:e});ye.warn(s.message)}}function Hl(t,e,s){Zl();const n=t.options.appId;if(!n)throw _e.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)ye.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw _e.create("no-api-key");if(St[n]!=null)throw _e.create("already-exists",{id:n});if(!kn){Sl(us);const{wrappedGtag:r,gtagCore:o}=Tl(St,Nn,jn,us,Wl);wa=r,Sn=o,kn=!0}return St[n]=zl(t,Nn,jn,e,Sn,us,s),new Vl(t)}function ql(t=Rn()){t=ft(t);const e=At(t,Yt);return e.isInitialized()?e.getImmediate():Kl(t)}function Kl(t,e={}){const s=At(t,Yt);if(s.isInitialized()){const a=s.getImmediate();if(ar(e,s.getOptions()))return a;throw _e.create("already-initialized")}return s.initialize({options:e})}function Gl(t,e,s,n){t=ft(t),Fl(wa,St[t.app.options.appId],e,s,n).catch(a=>ye.error(a))}const Cn="@firebase/analytics",In="0.10.17";function Ql(){Ct(new It(Yt,(e,{options:s})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return Hl(n,a,s)},"PUBLIC")),Ct(new It("analytics-internal",t,"PRIVATE")),lt(Cn,In),lt(Cn,In,"esm2017");function t(e){try{const s=e.getProvider(Yt).getImmediate();return{logEvent:(n,a,r)=>Gl(s,n,a,r)}}catch(s){throw _e.create("interop-component-reg-failed",{reason:s})}}}Ql();const Jl={apiKey:"AIzaSyAgRdBtg_I5NMAC5x3gh-7_CvQ058n25go",authDomain:"jiang-ai-web.firebaseapp.com",projectId:"jiang-ai-web",storageBucket:"jiang-ai-web.firebasestorage.app",messagingSenderId:"923755523160",appId:"1:923755523160:web:043dca5d76b6ded7ecee2d",measurementId:"G-8FXGZWC0M4"},ss=ir(Jl),wt=or(ss),pt=lr(ss),Yl=Io(ss);typeof window<"u"&&ql(ss);async function Xl(t,e){try{if(t.includes("firebase")&&t.includes("storage")||t==="/icon/icon.jpg"||t.includes("/icon/icon.jpg"))return t;if(t.startsWith("data:"))return console.log("  data URL"),t;console.log("  Storage:",t);let s;try{s=await fetch(t)}catch(c){console.warn(" CORS:",c);const h=`https://cors-anywhere.herokuapp.com/${t}`;s=await fetch(h)}if(!s.ok)throw new Error(`Failed to fetch icon: ${s.status}`);const n=await s.blob(),a=Date.now();let r="png";if(n.type){const c=n.type.toLowerCase();c.includes("svg")?r="svg":c.includes("png")?r="png":c.includes("jpeg")||c.includes("jpg")?r="jpg":c.includes("ico")?r="ico":c.includes("gif")?r="gif":c.includes("webp")&&(r="webp")}const o=`favicons/${e}-${a}.${r}`,l=Co(Yl,o);await So(l,n);const u=await ko(l);return console.log(" :",u),u}catch(s){return console.error(" :",s),t}}const ec=gi({name:Ut().min(1,""),url:Ut().url(""),favicon:Ut().url("URL"),note:Ut().optional()});function _a({id:t,name:e,url:s,favicon:n,tags:a,note:r,onClose:o,onSave:l,onDelete:u}){const[c,h]=f.useState({name:e,url:s,favicon:n,note:r||""}),[d,m]=f.useState({}),[p,x]=f.useState(!1),[D,w]=f.useState(!1),E=b=>{const k=/\{([^}]+)\}/g;return(b.match(k)||[]).map(Y=>Y.replace(/\{|\}/g,"").trim())},q=b=>b.replace(/\{[^}]+\}/g,"").trim(),$=async()=>{if(!c.url||!c.url.startsWith("http")){m({url:"(http://https://)"});return}try{x(!0);const b=new URL(c.url).hostname,M=(A=>{try{return new URL(A).hostname.replace(/^www\./,"")}catch{return A.replace(/^(https?:\/\/)?(www\.)?/,"").split("/")[0]}})(c.url);console.log(" :",M);try{const A="favicon-cache-simple",O=localStorage.getItem(A);if(O){const P=JSON.parse(O);delete P[M],localStorage.setItem(A,JSON.stringify(P))}}catch(A){console.warn(":",A)}const Y=Date.now(),K=`https://www.google.com/s2/favicons?domain=${c.url}&sz=64&t=${Y}`;h(A=>({...A,favicon:K})),h(A=>({...A,name:b.replace("www.","").split(".")[0]})),m(A=>{const O={...A};return delete O.url,O}),console.log(" :",K)}catch(b){console.error(":",b),m({url:""})}finally{x(!1)}},N=async b=>{b.preventDefault();try{w(!0);const k=ec.safeParse(c);if(!k.success){const A={};k.error.errors.forEach(O=>{A[O.path[0]]=O.message}),m(A);return}const M=E(c.note||""),Y=q(c.note||"");let K=c.favicon;if(c.favicon!==n){console.log(" ...");try{K=await Xl(c.favicon,t),console.log(" :",K)}catch(A){console.warn(" URL:",A)}}else console.log(" ");if(c.favicon!==n){console.log(" Favicon ");const O=(P=>{try{return new URL(P).hostname.replace(/^www\./,"")}catch{return P.replace(/^(https?:\/\/)?(www\.)?/,"").split("/")[0]}})(c.url);try{const P="favicon-cache-simple",te=localStorage.getItem(P);if(te){const G=JSON.parse(te);delete G[O],localStorage.setItem(P,JSON.stringify(G)),console.log(" :",O)}}catch(P){console.warn(":",P)}}l({id:t,name:c.name,url:c.url,favicon:K,tags:M,note:Y}),o()}catch(k){console.error(":",k),m({submit:""})}finally{w(!1)}},C=b=>{const{name:k,value:M}=b.target;h(Y=>({...Y,[k]:M})),d[k]&&m(Y=>{const K={...Y};return delete K[k],K})};return i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 select-none",children:i.jsxs(le.div,{className:"w-full max-w-md bg-white rounded-xl shadow-xl p-6 select-none",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{type:"spring",damping:25},children:[i.jsxs("div",{className:"flex justify-between items-center mb-4 select-none",children:[i.jsx("h2",{className:"text-xl font-semibold select-none",children:""}),i.jsx("button",{onClick:o,className:"text-gray-500 hover:text-gray-700 select-none",children:i.jsx("i",{className:"fa-solid fa-xmark select-none"})})]}),i.jsxs("form",{onSubmit:N,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 select-none",children:""}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"url",name:"url",value:c.url,onChange:C,className:"flex-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com"}),i.jsx("button",{type:"button",onClick:$,disabled:p||!c.url,className:"px-3 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-blue-300 select-none",children:p?"...":""})]}),d.url&&i.jsx("p",{className:"mt-1 text-sm text-red-500 select-none",children:d.url})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 select-none",children:""}),i.jsx("input",{type:"text",name:"name",value:c.name,onChange:C,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:""}),d.name&&i.jsx("p",{className:"mt-1 text-sm text-red-500 select-none",children:d.name})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 select-none",children:""}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex-1",children:i.jsx("input",{type:"url",name:"favicon",value:c.favicon,onChange:C,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/favicon.ico"})}),i.jsx("span",{className:"text-gray-400 select-none",children:""}),i.jsxs("label",{className:"cursor-pointer select-none",children:[i.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:b=>{var M;const k=(M=b.target.files)==null?void 0:M[0];if(k){const Y=new FileReader;Y.onload=K=>{var A;(A=K.target)!=null&&A.result&&h(O=>{var P;return{...O,favicon:(P=K.target)==null?void 0:P.result}})},Y.readAsDataURL(k)}}}),i.jsxs("div",{className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm text-gray-700 transition-colors select-none",children:[i.jsx("i",{className:"fa-solid fa-upload mr-1 select-none"}),""]})]})]}),c.favicon&&i.jsxs("div",{className:"mt-2 flex items-center select-none",children:[i.jsx("img",{src:c.favicon,alt:"",className:"w-8 h-8 rounded mr-2 select-none"}),i.jsx("span",{className:"text-xs text-gray-500 truncate max-w-xs select-none",children:c.favicon.startsWith("data:image")?"":c.favicon})]}),d.favicon&&i.jsx("p",{className:"mt-1 text-sm text-red-500 select-none",children:d.favicon})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 select-none",children:[" (",":  ",""," ","",")"]}),i.jsxs("div",{className:"text-xs text-gray-500 mb-1 select-none",children:["",""]}),i.jsx("textarea",{name:"note",value:c.note,onChange:C,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"..."})]}),i.jsxs("div",{className:"flex flex-col gap-4 pt-4 select-none",children:[i.jsxs("div",{className:"flex gap-2 select-none",children:[i.jsx("button",{type:"button",onClick:o,className:"flex-1 px-4 py-2 text-gray-700 border rounded-md hover:bg-gray-50 select-none",children:""}),i.jsx("button",{type:"submit",disabled:D,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed select-none",children:D?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-2"}),"..."]}):""})]}),d.submit&&i.jsx("p",{className:"text-red-500 text-sm text-center select-none",children:d.submit}),u&&i.jsxs("button",{type:"button",onClick:()=>{confirm("")&&(u(t),o())},className:"w-full px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 shadow-md select-none",children:[i.jsx("i",{className:"fa-solid fa-trash mr-2 select-none"}),""]})]})]})]})})}const Na=f.createContext(void 0);function tc({children:t}){const[e,s]=f.useState(()=>{const m=localStorage.getItem("cardOpacity");let p=m?parseFloat(m):.1;return p>1&&(p=p/100),Math.max(.05,Math.min(1,p))}),[n,a]=f.useState(()=>{const m=localStorage.getItem("searchBarOpacity");let p=m?parseFloat(m):.1;return p>1&&(p=p/100),Math.max(.05,Math.min(1,p))}),[r,o]=f.useState(()=>{const m=localStorage.getItem("parallaxEnabled");return m?JSON.parse(m):!0}),l=()=>window.innerHeight>window.innerWidth?"mobile":"1080p",[u,c]=f.useState(()=>localStorage.getItem("wallpaperResolution")||l()),[h,d]=f.useState(!1);return f.useEffect(()=>{localStorage.setItem("cardOpacity",e.toString())},[e]),f.useEffect(()=>{localStorage.setItem("searchBarOpacity",n.toString())},[n]),f.useEffect(()=>{localStorage.setItem("parallaxEnabled",JSON.stringify(r))},[r]),f.useEffect(()=>{localStorage.setItem("wallpaperResolution",u)},[u]),i.jsx(Na.Provider,{value:{cardOpacity:e,searchBarOpacity:n,parallaxEnabled:r,wallpaperResolution:u,isSettingsOpen:h,setCardOpacity:s,setSearchBarOpacity:a,setParallaxEnabled:o,setWallpaperResolution:c,setIsSettingsOpen:d},children:t})}function gt(){const t=f.useContext(Na);if(t===void 0)throw new Error("useTransparency must be used within a TransparencyProvider");return t}class sc{constructor(){he(this,"cacheKey","favicon-cache-simple");he(this,"defaultExpiry",7*24*60*60*1e3);he(this,"cache",{});he(this,"loadingPromises",new Map);this.loadCache()}loadCache(){try{const e=localStorage.getItem(this.cacheKey);e&&(this.cache=JSON.parse(e),this.cleanExpiredCache())}catch(e){console.warn(" favicon :",e),this.cache={}}}saveCache(){try{localStorage.setItem(this.cacheKey,JSON.stringify(this.cache))}catch(e){console.warn(" favicon :",e)}}cleanExpiredCache(){const e=Date.now(),s=[];for(const[n,a]of Object.entries(this.cache))e>a.expiry&&s.push(n);s.forEach(n=>{delete this.cache[n]}),s.length>0&&this.saveCache()}extractDomain(e){try{return new URL(e).hostname.replace(/^www\./,"")}catch{return e.replace(/^(https?:\/\/)?(www\.)?/,"").split("/")[0]}}getFaviconUrls(e,s){return[e,`https://www.google.com/s2/favicons?domain=${s}&sz=64`,`https://www.google.com/s2/favicons?domain=${s}&sz=32`,`https://icons.duckduckgo.com/ip3/${s}.ico`,`https://${s}/favicon.ico`,"/icon/icon.jpg"]}async tryLoadFavicon(e){for(const s of e)try{return await new Promise((n,a)=>{const r=new Image;r.onload=()=>n(),r.onerror=()=>a(),r.src=s,setTimeout(()=>a(),2e3)}),console.log(` Favicon : ${s}`),s}catch{console.log(` Favicon : ${s}`);continue}return"/icon/icon.jpg"}getCachedFavicon(e){const s=this.extractDomain(e),n=this.cache[s];return n&&Date.now()<n.expiry?n.cachedUrl:null}async getFavicon(e,s){const n=this.extractDomain(e),a=this.getCachedFavicon(e);if(a)return a;if(this.loadingPromises.has(n))return this.loadingPromises.get(n);const r=this.loadFavicon(e,s,n);this.loadingPromises.set(n,r);try{return await r}finally{this.loadingPromises.delete(n)}}async loadFavicon(e,s,n){const a=this.getFaviconUrls(s,n);try{const r=await this.tryLoadFavicon(a);return this.cache[n]={url:e,cachedUrl:r,timestamp:Date.now(),expiry:Date.now()+this.defaultExpiry},this.saveCache(),r}catch(r){return console.warn(` favicon : ${n}`,r),"/icon/icon.jpg"}}async getFaviconWithIndexedDB(e,s){return this.getFavicon(e,s)}async getFaviconWithHybridCache(e,s){return this.getFavicon(e,s)}async batchCacheFaviconsToIndexedDB(e){console.log(`  ${e.length}  favicon`);let s=0,n=0,a=0;const r=2;for(let o=0;o<e.length;o+=r){const u=e.slice(o,o+r).map(async(c,h)=>{const d=this.extractDomain(c.url);try{if(this.getCachedFavicon(c.url)){n++;return}const p=(h+1)*500;await new Promise(D=>setTimeout(D,p)),console.log(` [${o+h+1}/${e.length}] : ${d}`),await this.getFavicon(c.url,c.favicon)?(s++,console.log(` : ${d}`)):a++}catch(m){a++,console.warn(` : ${d}`,m)}});await Promise.allSettled(u),o+r<e.length&&await new Promise(c=>setTimeout(c,1e3))}console.log("  favicon :"),console.log(`   : ${s}, : ${n}, : ${a}`)}clearCache(){this.cache={},this.loadingPromises.clear();try{localStorage.removeItem(this.cacheKey)}catch(e){console.warn(" favicon :",e)}}getCacheStats(){const e=Date.now(),s=Object.keys(this.cache).length,n=Object.values(this.cache).filter(r=>e>r.expiry).length;let a="0 KB";try{a=`${(new Blob([JSON.stringify(this.cache)]).size/1024).toFixed(1)} KB`}catch{}return{total:s,expired:n,size:a}}}const Ns=new sc;function nc(t,e){const[s,n]=f.useState(e),[a,r]=f.useState(!1),[o,l]=f.useState(!1);return f.useEffect(()=>{n(e),l(!1),r(!1);const u=e==="/icon/icon.jpg",c=e.includes("google.com/s2/favicons")&&!e.includes("&t=");if(u||c){const h=Ns.getCachedFavicon(t);if(h&&h!==e&&h!=="/icon/icon.jpg"){console.log(" :",h),n(h);return}u&&(r(!0),Ns.getFavicon(t,e).then(d=>{d!==e&&d!=="/icon/icon.jpg"&&(console.log(" :",d),n(d)),l(!1)}).catch(d=>{console.warn("Favicon :",d),l(!0)}).finally(()=>{r(!1)}))}},[t,e]),{faviconUrl:s,isLoading:a,error:o}}function ac({id:t,name:e,url:s,favicon:n,tags:a,visitCount:r,note:o,index:l,moveCard:u,onSave:c,onDelete:h}){const[d,m]=f.useState(!1),p=f.useRef(null),{cardOpacity:x}=gt(),{faviconUrl:D,isLoading:w,error:E}=nc(s,n),[q,$]=f.useState(!1),N=f.useRef(null),[{isDragging:C},b]=La({type:"WEBSITE_CARD",item:{id:t,index:l},collect:A=>({isDragging:A.isDragging()}),canDrag:()=>q}),[,k]=Ma({accept:"WEBSITE_CARD",hover(A){if(!p.current)return;const O=A.index,P=l;O!==P&&(u(O,P),A.index=P)}});k(p),b(p);const M=()=>{C||(N.current=setTimeout(()=>{$(!0)},1e3))},Y=()=>{N.current&&(clearTimeout(N.current),N.current=null),$(!1)},K=()=>{c({id:t,name:e,url:s,favicon:n,tags:a,note:o,visitCount:(r||0)+1,lastVisit:new Date().toISOString().split("T")[0]}),window.open(s,"_blank")};return i.jsxs(i.Fragment,{children:[i.jsxs(le.div,{ref:p,className:`w-32 h-32 rounded-xl shadow-lg backdrop-blur-md border border-white/20 overflow-hidden relative group select-none ${q?"cursor-grabbing":"cursor-pointer"}`,style:{backgroundColor:`rgba(255, 255, 255, ${x})`,opacity:C?.5:1},transition:{type:"spring",stiffness:300,damping:15},whileHover:{scale:1.05},whileTap:{scale:.98},onClick:K,onPointerDown:M,onPointerUp:Y,onPointerLeave:Y,onPointerCancel:Y,draggable:!1,children:[i.jsx("div",{className:"absolute bottom-0.5 right-0.5 z-11",children:i.jsx("button",{onClick:A=>{A.stopPropagation(),m(!0)},className:"p-1 text-white/50 hover:text-white select-none",children:i.jsx("i",{className:"fa-solid fa-gear text-xs select-none"})})}),i.jsxs("div",{className:"h-full flex flex-col pt-3 select-none",style:{pointerEvents:C?"none":void 0},children:[i.jsxs("div",{className:"flex flex-col items-center px-2 select-none",children:[i.jsxs("div",{className:"w-11 h-11 mb-1 rounded-md overflow-hidden select-none relative",children:[i.jsx("img",{src:D,alt:`${e} favicon`,className:"w-full h-full object-contain select-none",loading:"lazy",draggable:"false"}),w&&i.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-yellow-400 rounded-full animate-pulse",title:"..."}),!w&&E&&i.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-red-400 rounded-full",title:""})]}),i.jsx("h3",{className:"text-xs font-medium text-white text-center line-clamp-2 px-2 mt-1 select-none",children:e})]}),i.jsx("div",{className:"px-2 mb-1 select-none",children:i.jsx("p",{className:"text-white/60 text-[0.65rem] text-center line-clamp-2 select-none",children:o||new URL(s).hostname})}),i.jsx("div",{className:"mt-0 px-3 pb-2 select-none",children:i.jsx("div",{className:"flex flex-wrap gap-1 justify-center select-none",children:a.slice(0,6).map(A=>i.jsx("span",{className:"px-1.5 py-0.5 bg-white/20 rounded-full text-[0.65rem] text-white max-w-[60px] truncate select-none",children:A},A))})})]})]}),d&&i.jsx(_a,{id:t,name:e,url:s,favicon:n,tags:a,note:o,onClose:()=>m(!1),onSave:A=>{c(A),m(!1)},onDelete:h})]})}function rc(t={}){var R,F;const e=f.useRef(null);f.useEffect(()=>{const g=_=>{if(_.code==="Space"||_.key===" "||_.keyCode===32){const B=document.activeElement;!(B&&(B.tagName==="INPUT"||B.tagName==="TEXTAREA"||B.isContentEditable))&&e.current&&(_.preventDefault(),e.current.focus())}};return window.addEventListener("keydown",g,{capture:!0}),()=>window.removeEventListener("keydown",g,{capture:!0})},[]);const[s,n]=f.useState(""),[a,r]=f.useState(!1),[o,l]=f.useState("bing"),[u,c]=f.useState(!1),[h,d]=f.useState([]),[m,p]=f.useState(!1),[x,D]=f.useState(-1),w=f.useRef(null),[E,q]=f.useState(null),[$,N]=f.useState(null),[C,b]=f.useState(!1),k=f.useRef(null),{searchBarOpacity:M}=gt(),Y=[{key:"bing",label:"Bing",icon:i.jsx("i",{className:"fa-brands fa-microsoft text-blue-400"})},{key:"google",label:"Google",icon:i.jsx("i",{className:"fa-brands fa-google text-blue-500"})}],K=(g,_)=>{const B=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FECA57","#FF9FF3","#54A0FF","#5F27CD","#00D2D3","#FF9F43","#EE5A24","#FD79A8","#0FB9B1","#A55EEA","#26D0CE","#FDCB6E","#6C5CE7","#74B9FF","#E17055","#F39C12","#E74C3C","#3498DB","#9B59B6","#1ABC9C"],W=["M2,5 Q12,2 22,5 Q32,8 42,5 L42,8 Q32,11 22,8 Q12,5 2,8 Z","M20,2 L38,2 L29,12 Z","M20,7 A6,6 0,1,1 20,7.1 Z","M20,2 L30,7 L20,12 L10,7 Z","M20,2 L22,8 L28,8 L23,11 L25,17 L20,14 L15,17 L17,11 L12,8 L18,8 Z","M2,6 Q15,2 28,6 Q41,10 54,6 L54,9 Q41,13 28,9 Q15,5 2,9 Z","M5,5 L10,2 L15,5 L20,2 L25,5 L30,2 L35,5 L35,8 L30,11 L25,8 L20,11 L15,8 L10,11 L5,8 Z","M20,2 Q25,7 20,12 Q15,7 20,2 M20,2 Q25,7 30,2 Q25,7 30,12 Q25,7 20,12","M20,4 C18,2 15,2 15,5 C15,8 20,12 20,12 C20,12 25,8 25,5 C25,2 22,2 20,4 Z","M15,4 Q10,7 15,10 Q20,7 25,10 Q30,7 25,4 Q20,7 15,4","M5,4 Q20,2 35,4 Q40,7 35,10 Q20,8 5,10 Q0,7 5,4","M2,7 Q10,3 18,7 Q26,11 34,7 Q38,5 42,7 L42,10 Q38,8 34,10 Q26,14 18,10 Q10,6 2,10 Z"];for(let ae=0;ae<50;ae++){const X=document.createElementNS("http://www.w3.org/2000/svg","svg"),ce=document.createElementNS("http://www.w3.org/2000/svg","path"),De=B[Math.floor(Math.random()*B.length)],at=W[Math.floor(Math.random()*W.length)],Ot=Math.random()*.6+.5,He=44*Ot,xt=16*Ot;if(X.setAttribute("width",He.toString()),X.setAttribute("height",xt.toString()),X.setAttribute("viewBox","0 0 44 16"),X.style.cssText=`
        position: fixed;
        pointer-events: none;
        z-index: 10000;
        left: ${g-He/2}px;
        top: ${_-xt/2}px;
        transform-origin: center;
      `,ce.setAttribute("d",at),ce.setAttribute("fill",De),Math.random()>.5&&(ce.setAttribute("stroke",De),ce.setAttribute("stroke-width","1"),ce.setAttribute("fill-opacity","0.8")),Math.random()>.7){const qe=`gradient-${Date.now()}-${ae}`,Pe=document.createElementNS("http://www.w3.org/2000/svg","defs"),pe=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),it=document.createElementNS("http://www.w3.org/2000/svg","stop"),Ee=document.createElementNS("http://www.w3.org/2000/svg","stop");pe.setAttribute("id",qe),pe.setAttribute("x1","0%"),pe.setAttribute("y1","0%"),pe.setAttribute("x2","100%"),pe.setAttribute("y2","100%"),it.setAttribute("offset","0%"),it.setAttribute("stop-color",De),Ee.setAttribute("offset","100%"),Ee.setAttribute("stop-color",B[Math.floor(Math.random()*B.length)]),pe.appendChild(it),pe.appendChild(Ee),Pe.appendChild(pe),X.appendChild(Pe),ce.setAttribute("fill",`url(#${qe})`)}X.appendChild(ce),document.body.appendChild(X);const yt=Math.random()*360*(Math.PI/180),Le=Math.random()*4+2;let bt=Math.cos(yt)*Le,be=Math.sin(yt)*Le;const ns=(Math.random()-.5)*80;let Dt=Math.random()*360,fe=g-He/2,Te=_-xt/2;const as=.2,Pt=.998,rt=Date.now(),Bt=()=>{const qe=(Date.now()-rt)/1e3;be+=as,bt*=Pt,be*=Pt,fe+=bt,Te+=be,Dt+=ns*(1/60),X.style.left=fe+"px",X.style.top=Te+"px",X.style.transform=`rotate(${Dt}deg)`;const Pe=Math.max(0,1-qe/7);X.style.opacity=Pe.toString(),Pe>0&&Te<window.innerHeight+100?requestAnimationFrame(Bt):document.body.contains(X)&&document.body.removeChild(X)};setTimeout(()=>{requestAnimationFrame(Bt)},Math.random()*150)}},A=()=>{const g=Y.findIndex(B=>B.key===o),_=Y[(g+1)%Y.length].key;if(l(_),k.current){const B=k.current.getBoundingClientRect(),W=B.left+60,ne=B.top+B.height/2;K(W,ne)}},O=["chatGPT","Gemini","Deepseek","Kimi"],P=["https://chatgpt.com/","https://gemini.google.com/","https://chat.deepseek.com/","https://www.kimi.com/"],te=[i.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,verticalAlign:"middle",position:"relative",top:"1px",userSelect:"none"},children:i.jsx("img",{src:"/jiang_ai_web/icon/chatgpt.svg",alt:"chatGPT",style:{width:20,height:20,display:"block",userSelect:"none"}})}),i.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,verticalAlign:"middle",position:"relative",top:"1px",userSelect:"none"},children:i.jsx("img",{src:"/jiang_ai_web/icon/gemini.svg",alt:"Gemini",style:{width:20,height:20,display:"block",userSelect:"none"}})}),i.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,verticalAlign:"middle",position:"relative",top:"1px",userSelect:"none"},children:i.jsx("img",{src:"/jiang_ai_web/icon/deepseek.svg",alt:"Deepseek",style:{width:20,height:20,display:"block",userSelect:"none"}})}),i.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,verticalAlign:"middle",position:"relative",top:"1px",userSelect:"none"},children:i.jsx("img",{src:"/jiang_ai_web/icon/kimi.svg",alt:"Kimi",style:{width:20,height:20,display:"block",userSelect:"none"}})})],G=(g,_)=>{switch(g){case"google":return`https://www.google.com/search?q=${encodeURIComponent(_)}`;default:return`https://www.bing.com/search?q=${encodeURIComponent(_)}`}},j=async g=>{if(!g.trim())return[];try{const _=document.createElement("script"),B=`baiduCallback_${Date.now()}`;return new Promise(W=>{window[B]=ne=>{if(ne&&ne.s&&Array.isArray(ne.s)){const ae=ne.s.slice(0,5).map((X,ce)=>({id:`baidu-${ce}`,text:X,query:X}));W(ae)}else{const ae=L(g);W(ae.slice(0,5).map((X,ce)=>({id:`local-${ce}`,text:X,query:X})))}document.head.removeChild(_),delete window[B]},setTimeout(()=>{if(window[B]){const ne=L(g);W(ne.slice(0,5).map((ae,X)=>({id:`local-${X}`,text:ae,query:ae}))),document.head.contains(_)&&document.head.removeChild(_),delete window[B]}},2e3),_.src=`https://suggestion.baidu.com/su?wd=${encodeURIComponent(g)}&cb=${B}`,_.onerror=()=>{const ne=L(g);W(ne.slice(0,5).map((ae,X)=>({id:`local-${X}`,text:ae,query:ae}))),document.head.contains(_)&&document.head.removeChild(_),delete window[B]},document.head.appendChild(_)})}catch(_){return console.warn("Failed to fetch Baidu suggestions:",_),L(g).slice(0,5).map((W,ne)=>({id:`local-${ne}`,text:W,query:W}))}},L=g=>{const _=[],B=g.toLowerCase(),W=[g,`${g} `,`${g} `,`${g} `,` ${g}`,`${g} `,`${g} `,`${g} `];return B.includes("")||B.includes("how")?_.push(`${g}`,`${g} `,`${g} `):B.includes("")||B.includes("")?_.push(`${g}`,`${g} `,`${g} `):_.push(...W),[...new Set(_)]};f.useEffect(()=>{const g=setTimeout(()=>{s.trim()?j(s).then(_=>{d(_),p(_.length>0),D(-1)}):(d([]),p(!1),D(-1))},500);return()=>clearTimeout(g)},[s]);const ee=(g,_)=>{g.preventDefault();const B=_||(x>=0&&h[x]?h[x].query:s);B.trim()&&(window.open(G(o,B),"_blank"),n(""),p(!1))},se=g=>{switch(g.key){case"ArrowDown":if(!m)return;g.preventDefault(),D(_=>_<h.length-1?_+1:_);break;case"ArrowUp":if(!m)return;g.preventDefault(),D(_=>_>-1?_-1:-1);break;case"Escape":p(!1),D(-1);break;case"Tab":g.shiftKey||(g.preventDefault(),A());break}},U=f.useRef(null);return f.useLayoutEffect(()=>{if(u&&w.current){const g=w.current.getBoundingClientRect();q({left:g.left+g.width/2,top:g.top})}else q(null)},[u,o]),i.jsx("div",{className:"relative left-0 right-0 z-50 flex justify-center px-4 select-none",children:i.jsx(le.div,{className:"w-full flex justify-center",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},children:i.jsx("form",{ref:k,onSubmit:ee,className:"relative flex items-center justify-center",onMouseEnter:()=>{U.current&&(clearTimeout(U.current),U.current=null),r(!0)},onMouseLeave:()=>{U.current&&clearTimeout(U.current),U.current=setTimeout(()=>{r(!1),c(!1),setTimeout(()=>{p(!1)},100)},200)},children:i.jsxs(le.div,{animate:{width:a?520:340},initial:{width:340},transition:{type:"tween",duration:.28,ease:"easeInOut"},style:{display:"flex",alignItems:"center",position:"relative"},onAnimationComplete:()=>{a&&c(!0)},children:[i.jsxs("div",{className:"relative flex items-center",children:[i.jsxs("button",{type:"button",className:"flex items-center gap-2 px-1.5 py-1 text-white/80 hover:text-white bg-transparent border-none outline-none text-lg select-none relative z-20",style:{pointerEvents:"auto",height:36,minWidth:36,minHeight:36,justifyContent:"center",alignItems:"center",display:"flex"},tabIndex:-1,onClick:()=>{A()},onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),children:[(R=Y.find(g=>g.key===o))==null?void 0:R.icon,i.jsx("span",{className:"hidden sm:inline text-base font-semibold select-none",children:(F=Y.find(g=>g.key===o))==null?void 0:F.label})]}),C&&i.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800/90 text-white text-sm rounded-lg shadow-lg backdrop-blur-sm border border-white/10 whitespace-nowrap z-30",children:[" ",o==="bing"?"Google":"Bing",i.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-800/90"})]})]}),i.jsx("span",{className:"mx-2 text-white/30 select-none font-normal text-base z-10",children:"|"}),i.jsx("span",{className:"text-white/60 select-none font-normal text-base z-10"}),i.jsx("input",{ref:e,type:"text",value:s,onChange:g=>n(g.target.value),onKeyDown:se,placeholder:"...",className:"backdrop-blur-md border border-white/20 rounded-full pl-4 py-2 text-white placeholder-white/60 outline-none text-base transition-all duration-200 pr-12 w-full ml-3",style:{backgroundColor:`rgba(255, 255, 255, ${M})`,minWidth:"4rem",maxWidth:"100%"}}),i.jsx("button",{ref:w,type:"submit",className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-white/70 hover:text-white transition-colors bg-transparent border-none outline-none group select-none",style:{pointerEvents:"auto"},children:i.jsx(le.i,{className:"fa-solid fa-magnifying-glass text-sm",whileHover:{scale:1.22,rotate:18,color:"#fff"},whileTap:{scale:.95,rotate:0},animate:{color:a?"#fff":void 0},transition:{type:"spring",stiffness:350,damping:18},style:{display:"inline-block"}})}),m&&h.length>0&&i.jsx(le.div,{className:"absolute top-full left-0 right-0 mt-2 backdrop-blur-md rounded-lg shadow-lg border border-white/20 z-50 overflow-hidden max-h-60 overflow-y-auto",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.2},style:{pointerEvents:"auto",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:h.map((g,_)=>i.jsx("div",{className:`px-4 py-3 cursor-pointer transition-colors border-b border-white/10 last:border-b-0 select-none ${_===x?"bg-blue-500/20 text-gray-800":"hover:bg-white/50 text-gray-700"}`,onClick:B=>{B.stopPropagation(),n(g.text),ee(B,g.query)},onMouseEnter:()=>D(_),onMouseDown:B=>B.preventDefault(),children:i.jsxs("div",{className:"flex items-center gap-3 select-none",children:[i.jsx("i",{className:"fa-solid fa-magnifying-glass text-gray-400 text-sm w-4 select-none"}),i.jsx("div",{className:"flex-1 min-w-0 select-none",children:i.jsx("div",{className:"font-medium text-sm truncate select-none",children:g.text})})]})},g.id))}),a&&u&&E&&i.jsx("div",{className:"fixed z-30",style:{left:E.left,top:E.top,width:0,height:0,pointerEvents:"auto",transform:"translate(-50%, -50%)"},children:i.jsx("div",{style:{position:"absolute",left:0,top:0},children:te.map((g,_,B)=>{const ne=(-60+120/(B.length-1)*_)*(Math.PI/180),ae=44,X=ae*Math.cos(ne),ce=ae*Math.sin(ne),De=19,at=De*3.6;return i.jsxs(le.span,{role:"img","aria-label":O[_],initial:{x:0,y:0,scale:.3,opacity:0,filter:"none"},animate:{x:X,y:ce,scale:1.18,opacity:1,filter:"none"},whileHover:{scale:1.38,filter:"drop-shadow(0 0 4px #fff) drop-shadow(0 0 8px #fff)"},transition:{type:"spring",stiffness:400,damping:22,delay:.08*_},style:{position:"absolute",left:0,top:0,fontSize:22,cursor:"pointer",userSelect:"none",zIndex:2,willChange:"filter, transform"},onClick:()=>window.open(P[_],"_blank"),onMouseEnter:()=>N(_),onMouseLeave:()=>N(null),children:[g,$===_&&i.jsx("div",{style:{position:"absolute",left:28,top:"50%",transform:"translateY(-50%)",height:De,width:at,background:"rgba(255,255,255,0.98)",color:"#222",borderRadius:De/2,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 12px #0003",fontSize:14,fontWeight:500,pointerEvents:"auto",zIndex:10,padding:"0 10px",whiteSpace:"nowrap"},children:i.jsx("span",{style:{userSelect:"none"},children:O[_]})})]},_)})})})]})})})})}function ic(){const t=()=>{window.open("https://github.com/jiangjianghong","_blank")};return i.jsx("div",{className:"cat-container",children:i.jsxs("div",{className:"cat",onClick:t,style:{cursor:"pointer"},children:[i.jsx("div",{className:"paw"}),i.jsx("div",{className:"paw"}),i.jsxs("div",{className:"shake",children:[i.jsx("div",{className:"tail"}),i.jsxs("div",{className:"main",children:[i.jsx("div",{className:"head"}),i.jsx("div",{className:"body",children:i.jsx("div",{className:"leg"})}),i.jsxs("div",{className:"face",children:[i.jsxs("div",{className:"mustache_cont",children:[i.jsx("div",{className:"mustache"}),i.jsx("div",{className:"mustache"})]}),i.jsxs("div",{className:"mustache_cont",children:[i.jsx("div",{className:"mustache"}),i.jsx("div",{className:"mustache"})]}),i.jsx("div",{className:"nose"}),i.jsx("div",{className:"eye"}),i.jsx("div",{className:"eye"}),i.jsxs("div",{className:"brow_cont",children:[i.jsx("div",{className:"brow"}),i.jsx("div",{className:"brow"})]}),i.jsxs("div",{className:"brow_cont",children:[i.jsx("div",{className:"brow"}),i.jsx("div",{className:"brow"})]}),i.jsx("div",{className:"ear_l",children:i.jsx("div",{className:"inner"})}),i.jsxs("div",{className:"ear_r",children:[i.jsx("div",{className:"outer"}),i.jsx("div",{className:"inner"})]})]})]})]})]})})}const ja=f.createContext(void 0);function Ie(){const t=f.useContext(ja);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function oc({children:t}){const[e,s]=f.useState(null),[n,a]=f.useState(!0),r=async(m,p)=>{await pr(wt,m,p)},o=async(m,p)=>{const x=await mr(wt,m,p);x.user&&await Ks(x.user)},l=async()=>{e&&!e.emailVerified&&await Ks(e)},u=async()=>{e&&await dr(e)},c=async()=>{const m=new hr;await fr(wt,m)},h=async()=>{await ur(wt)};f.useEffect(()=>cr(wt,p=>{s(p),a(!1)}),[]);const d={currentUser:e,login:r,register:o,loginWithGoogle:c,logout:h,sendVerificationEmail:l,reloadUser:u,loading:n};return i.jsx(ja.Provider,{value:d,children:!n&&t})}const lc=async(t,e,s)=>{var n,a;try{(n=s==null?void 0:s.onSyncStart)==null||n.call(s);const r=mt(pt,"userSettings",t.uid);return await Ts(r,{...e,lastSync:Zt()},{merge:!0}),console.log(""),(a=s==null?void 0:s.onSyncSuccess)==null||a.call(s,""),!0}catch(r){return console.error(":",r),!1}},cc=async t=>{try{const e=mt(pt,"userSettings",t.uid),s=await Is(e);if(s.exists()){const n=s.data();return console.log(""),n}else return console.log(""),null}catch(e){return console.error(":",e),null}},js=async(t,e,s)=>{var n,a;try{(n=s==null?void 0:s.onSyncStart)==null||n.call(s);const r=mt(pt,"userWebsites",t.uid);return await Ts(r,{websites:e,lastSync:Zt()}),console.log(""),(a=s==null?void 0:s.onSyncSuccess)==null||a.call(s,""),!0}catch(r){return console.error(":",r),!1}},dc=async t=>{try{const e=mt(pt,"userWebsites",t.uid),s=await Is(e);if(s.exists()){const n=s.data();return console.log(""),n.websites}else return console.log(""),null}catch(e){return console.error(":",e),null}},uc=(t,e)=>{const s={};return t.forEach(n=>{s[n.id]=n}),e.forEach(n=>{const a=s[n.id];(!a||n.visitCount>a.visitCount)&&(s[n.id]=n)}),Object.values(s)};let hs=null;const hc=(t,e,s,n)=>{hs&&clearTimeout(hs),hs=setTimeout(async()=>{var a,r,o,l;(a=n==null?void 0:n.onSyncStart)==null||a.call(n);try{const c=(await Promise.allSettled([js(t,e),lc(t,s)])).filter(h=>h.status==="rejected");c.length===0?(r=n==null?void 0:n.onSyncSuccess)==null||r.call(n,""):(o=n==null?void 0:n.onSyncError)==null||o.call(n,`${c.length} `)}catch(u){(l=n==null?void 0:n.onSyncError)==null||l.call(n,": "+u.message)}},3e3)},Tn=async(t,e,s)=>{var n,a;try{(n=s==null?void 0:s.onSyncStart)==null||n.call(s);const r=mt(pt,"userProfiles",t.uid),o={uid:t.uid,email:t.email||"",displayName:e,createdAt:Zt(),updatedAt:Zt()};return await Ts(r,o,{merge:!0}),console.log(""),(a=s==null?void 0:s.onSyncSuccess)==null||a.call(s,""),!0}catch(r){return console.error(":",r),!1}},fs=async t=>{try{const e=mt(pt,"userProfiles",t.uid),s=await Is(e);if(s.exists()){const n=s.data();return console.log(""),n}else return console.log(""),null}catch(e){return console.error(":",e),null}},Sa=f.createContext(void 0);function ka(){const t=f.useContext(Sa);if(t===void 0)throw new Error("useUserProfile must be used within a UserProfileProvider");return t}function fc({children:t}){const{currentUser:e}=Ie(),[s,n]=f.useState(null),[a,r]=f.useState(!1),o=(s==null?void 0:s.displayName)||"",l=async c=>{if(!e||!e.emailVerified)return!1;r(!0);try{return await Tn(e,c)?(n(d=>d?{...d,displayName:c,updatedAt:new Date}:null),setTimeout(async()=>{const d=await fs(e);d&&n(d)},1e3),!0):!1}catch(h){return console.error(":",h),!1}finally{r(!1)}};f.useEffect(()=>{(async()=>{var h;if(e&&e.emailVerified){r(!0);try{const d=await fs(e);if(d)n(d);else{const m=((h=e.email)==null?void 0:h.split("@")[0])||"";await Tn(e,m);const p=await fs(e);n(p)}}catch(d){console.error(":",d)}finally{r(!1)}}else n(null)})()},[e]);const u={userProfile:s,displayName:o,updateDisplayName:l,loading:a};return i.jsx(Sa.Provider,{value:u,children:t})}const En={isOnline:navigator.onLine,lastSyncTime:null,syncInProgress:!1,syncError:null,pendingChanges:0},Ca=f.createContext(void 0);function Us(){const t=f.useContext(Ca);if(t===void 0)throw new Error("useSyncStatus must be used within a SyncProvider");return t}function mc({children:t}){const[e,s]=f.useState(En),n=o=>{s(l=>({...l,...o}))},a=()=>{s(En)};window.addEventListener("online",()=>{n({isOnline:!0})}),window.addEventListener("offline",()=>{n({isOnline:!1})});const r={syncStatus:e,updateSyncStatus:n,resetSyncStatus:a};return i.jsx(Ca.Provider,{value:r,children:t})}function pc(t){const{currentUser:e}=Ie(),{updateSyncStatus:s}=Us(),{cardOpacity:n,searchBarOpacity:a,parallaxEnabled:r,wallpaperResolution:o}=gt(),l=f.useRef(""),u=f.useRef(null),c=f.useRef(null),h=f.useRef(0),d=f.useCallback((m=!1)=>{if(!e||!e.emailVerified){e&&!e.emailVerified&&s({syncInProgress:!1,syncError:"",pendingChanges:1});return}const p={cardOpacity:n,searchBarOpacity:a,parallaxEnabled:r,wallpaperResolution:o,theme:localStorage.getItem("theme")||"light",lastSync:null};console.log(m?" ...":" ..."),hc(e,t,p,{onSyncStart:()=>{s({syncInProgress:!0,syncError:null,pendingChanges:0})},onSyncSuccess:x=>{const D=JSON.stringify({websites:t.map(w=>({id:w.id,name:w.name,url:w.url,visitCount:w.visitCount})),settings:{cardOpacity:n,searchBarOpacity:a,parallaxEnabled:r,wallpaperResolution:o,theme:p.theme}});l.current=D,h.current=0,s({syncInProgress:!1,lastSyncTime:new Date,syncError:null,pendingChanges:0}),console.log(" :",x)},onSyncError:x=>{s({syncInProgress:!1,syncError:x,pendingChanges:1}),console.error(" :",x)}})},[e,t,n,a,r,o,s]);f.useEffect(()=>{if(JSON.stringify({websites:t.map(E=>({id:E.id,name:E.name,url:E.url,visitCount:E.visitCount})),settings:{cardOpacity:n,searchBarOpacity:a,parallaxEnabled:r,wallpaperResolution:o,theme:localStorage.getItem("theme")||"light"}})===l.current)return;const p=Date.now();h.current===0&&(h.current=p),u.current&&clearTimeout(u.current);const x=p-h.current,D=3e4,w=3e3;if(x>=D){console.log(" "),c.current&&(clearTimeout(c.current),c.current=null),d(!0);return}if(u.current=setTimeout(()=>{d(!1)},w),!c.current){const E=D-x;console.log(` ${Math.round(E/1e3)}`),c.current=setTimeout(()=>{console.log(" "),u.current&&(clearTimeout(u.current),u.current=null),d(!0)},E)}return()=>{u.current&&clearTimeout(u.current)}},[e,t,n,a,r,o,d]),f.useEffect(()=>()=>{u.current&&clearTimeout(u.current),c.current&&clearTimeout(c.current)},[])}function gc(){const{syncStatus:t}=Us(),{currentUser:e}=Ie(),[,s]=f.useState(0);if(f.useEffect(()=>{const l=()=>{if(!t.lastSyncTime)return 6e4;const d=Math.floor((new Date().getTime()-t.lastSyncTime.getTime())/1e3);return d<60?1e3:d<3600?6e4:3e5},u=()=>{const h=l();return setTimeout(()=>{s(d=>d+1),u()},h)},c=u();return()=>clearTimeout(c)},[t.lastSyncTime]),!e)return null;const n=l=>{if(!l)return"";const c=Math.floor((new Date().getTime()-l.getTime())/1e3);return c<60?`${c}`:c<3600?`${Math.floor(c/60)}`:c<86400?`${Math.floor(c/3600)}`:`${Math.floor(c/86400)}`},a=()=>t.syncInProgress?i.jsx("i",{className:"fa-solid fa-sync fa-spin text-blue-500"}):t.syncError?i.jsx("i",{className:"fa-solid fa-exclamation-triangle text-red-500"}):t.isOnline?t.pendingChanges>0?i.jsx("i",{className:"fa-solid fa-clock text-orange-500"}):i.jsx("i",{className:"fa-solid fa-check-circle text-green-500"}):i.jsx("i",{className:"fa-solid fa-wifi-slash text-gray-500"}),r=()=>t.syncInProgress?"...":t.syncError?"":t.isOnline?t.pendingChanges>0?`${t.pendingChanges} `:"":"",o=()=>t.syncError?t.syncError:`: ${n(t.lastSyncTime)}`;return i.jsx("div",{className:"space-y-2",children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[a(),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:r()})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${t.isOnline?"bg-green-500":"bg-red-500"}`}),i.jsx("span",{className:"text-xs text-gray-500",children:t.isOnline?"":""})]})]}),i.jsx("p",{className:"text-xs text-gray-500",children:o()}),i.jsx(kt,{children:t.syncError&&i.jsx(le.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"bg-red-50 border border-red-200 rounded p-2",children:i.jsxs("p",{className:"text-xs text-red-600",children:[i.jsx("i",{className:"fa-solid fa-info-circle mr-1"}),t.syncError]})})}),i.jsx(kt,{children:t.syncInProgress&&i.jsx(le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"w-full bg-gray-200 rounded-full h-1",children:i.jsx(le.div,{className:"bg-blue-500 h-1 rounded-full",initial:{width:"0%"},animate:{width:"100%"},transition:{duration:2,ease:"easeInOut"}})})})]})})}function xc(){const{syncStatus:t}=Us(),{currentUser:e}=Ie();return e?i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[i.jsxs("div",{className:"bg-blue-50 rounded p-2 text-center",children:[i.jsx("div",{className:"font-medium text-blue-700",children:""}),i.jsx("div",{className:"text-blue-600",children:e?"":""})]}),i.jsxs("div",{className:"bg-green-50 rounded p-2 text-center",children:[i.jsx("div",{className:"font-medium text-green-700",children:""}),i.jsx("div",{className:"text-green-600",children:t.pendingChanges>0?"3":"30"})]})]}):null}function yc({onSuccess:t}){const[e,s]=f.useState(!0),[n,a]=f.useState(""),[r,o]=f.useState(""),[l,u]=f.useState(""),[c,h]=f.useState(!1),[d,m]=f.useState(""),[p,x]=f.useState(!1),[D,w]=f.useState(""),{login:E,register:q,loginWithGoogle:$,sendVerificationEmail:N}=Ie(),C=async M=>{if(M.preventDefault(),!n||!r){m("");return}if(!e&&!l.trim()){m("");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)){m("");return}if(!e){if(l.length<2||l.length>20){m("2-20");return}if(!/^[a-zA-Z0-9\u4e00-\u9fa5_-]+$/.test(l)){m("");return}}h(!0),m("");try{e?(await E(n,r),t()):(await q(n,r),x(!0),w(n),localStorage.setItem("pendingDisplayName",l))}catch(K){switch(console.error(":",K),K.code){case"auth/user-not-found":m("");break;case"auth/wrong-password":m("");break;case"auth/email-already-in-use":m("");break;case"auth/weak-password":m("6");break;case"auth/invalid-email":m("");break;case"auth/network-request-failed":m(" Firebase ");break;case"auth/too-many-requests":m("");break;case"auth/invalid-credential":m("");break;default:m(e?"":"")}}finally{h(!1)}},b=async()=>{h(!0),m("");try{await $(),t()}catch(M){console.error("Google:",M),m("Google")}finally{h(!1)}},k=async()=>{try{await N(),alert("")}catch{alert("")}};return p?i.jsx(le.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx("i",{className:"fa-solid fa-envelope-circle-check text-green-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-green-800",children:""}),i.jsxs("p",{className:"text-sm text-green-700 mt-1",children:[" ",i.jsx("strong",{children:D}),"  "]}),i.jsxs("div",{className:"mt-3 flex space-x-2",children:[i.jsx("button",{onClick:k,className:"text-xs bg-green-100 hover:bg-green-200 text-green-800 px-2 py-1 rounded",children:""}),i.jsx("button",{onClick:()=>{x(!1),s(!0),a(""),o(""),u("")},className:"text-xs bg-blue-100 hover:bg-blue-200 text-blue-800 px-2 py-1 rounded",children:""})]})]})]})}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e?"":""}),i.jsx("p",{className:"text-sm text-gray-600",children:e?"":""})]}),d&&i.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:d}),i.jsxs("form",{onSubmit:C,className:"space-y-4",children:[!e&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),i.jsx("input",{type:"text",value:l,onChange:M=>u(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"2-20",disabled:c,maxLength:20}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:""})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),i.jsx("input",{type:"email",value:n,onChange:M=>a(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"",disabled:c})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),i.jsx("input",{type:"password",value:r,onChange:M=>o(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"6",disabled:c,minLength:6})]}),i.jsx("button",{type:"submit",disabled:c,className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white py-2 px-4 rounded-md transition-colors",children:c?"...":e?"":""})]}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-gray-300"})}),i.jsx("div",{className:"relative flex justify-center text-sm",children:i.jsx("span",{className:"px-2 bg-white text-gray-500",children:""})})]}),i.jsxs("button",{onClick:b,disabled:c,className:"mt-4 w-full bg-red-500 hover:bg-red-600 disabled:bg-gray-400 text-white py-2 px-4 rounded-md transition-colors flex items-center justify-center",children:[i.jsx("i",{className:"fab fa-google mr-2"})," Google ",e?"":""]})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsx("button",{onClick:()=>s(!e),className:"text-blue-500 hover:text-blue-600",disabled:c,children:e?"":""})})]})}function bc(){const{currentUser:t}=Ie(),{displayName:e,updateDisplayName:s,loading:n}=ka(),[a,r]=f.useState(!1),[o,l]=f.useState(e),[u,c]=f.useState(!1),[h,d]=f.useState("");if(f.useEffect(()=>{l(e)},[e]),!t||!t.emailVerified)return null;const m=async()=>{if(!o.trim()){d("");return}if(o.length<2||o.length>20){d("2-20");return}if(!/^[a-zA-Z0-9\u4e00-\u9fa5_-]+$/.test(o)){d("");return}c(!0),d("");try{await s(o)?(r(!1),alert("")):d("")}catch(x){d(""),console.error(":",x)}finally{c(!1)}},p=()=>{l(e),r(!1),d("")};return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:""}),!a&&i.jsxs("button",{onClick:()=>r(!0),className:"text-xs text-blue-500 hover:text-blue-600",disabled:n,children:[i.jsx("i",{className:"fa-solid fa-edit mr-1"}),""]})]}),a?i.jsxs("div",{className:"space-y-2",children:[i.jsx("input",{type:"text",value:o,onChange:x=>l(x.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"",maxLength:20,disabled:u}),h&&i.jsx("p",{className:"text-xs text-red-600",children:h}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:m,disabled:u||!o.trim(),className:"text-xs bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white px-2 py-1 rounded",children:u?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-1"}),"..."]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"fa-solid fa-check mr-1"}),""]})}),i.jsxs("button",{onClick:p,disabled:u,className:"text-xs bg-gray-500 hover:bg-gray-600 text-white px-2 py-1 rounded",children:[i.jsx("i",{className:"fa-solid fa-times mr-1"}),""]})]}),i.jsx("p",{className:"text-xs text-gray-500",children:"2-20"})]}):i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("i",{className:"fa-solid fa-user text-gray-400"}),i.jsx("span",{className:"text-sm font-medium text-gray-800",children:n?"...":e})]}),i.jsx("div",{className:"border-t border-gray-200 pt-2",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("i",{className:"fa-solid fa-envelope text-gray-400"}),i.jsx("span",{className:"text-xs text-gray-600",children:t.email})]}),i.jsx("i",{className:"fa-solid fa-check-circle text-green-500 text-xs",title:""})]})})]})}const Ge=class Ge{static getInstance(){return Ge.instance||(Ge.instance=new Ge),Ge.instance}hasConsent(){try{return localStorage.getItem("cookie-consent")==="accepted"}catch{return!1}}getConsentStatus(){try{const e=localStorage.getItem("cookie-consent");return e==="accepted"?"accepted":e==="declined"?"declined":"pending"}catch{return"pending"}}setItem(e,s,n=!1){try{return n||this.hasConsent()?(localStorage.setItem(e,s),!0):(console.warn(` : ${e} (Cookie)`),!1)}catch(a){return console.error(":",a),!1}}getItem(e,s=!1){try{return s||this.hasConsent()?localStorage.getItem(e):(console.warn(` : ${e} (Cookie)`),null)}catch(n){return console.error(":",n),null}}removeItem(e,s=!1){try{return s||this.hasConsent()?(localStorage.removeItem(e),!0):(console.warn(` : ${e} (Cookie)`),!1)}catch(n){return console.error(":",n),!1}}getAllKeys(e=!0){try{if(!this.hasConsent()&&!e)return[];const s=[],n=["cookie-consent","cookie-consent-date"];for(let a=0;a<localStorage.length;a++){const r=localStorage.key(a);r&&(e||!n.includes(r))&&s.push(r)}return s}catch{return[]}}clearNonEssentialData(){const e=["cookie-consent","cookie-consent-date"];this.getAllKeys(!0).forEach(n=>{if(!e.includes(n))try{localStorage.removeItem(n)}catch(a){console.error(`: ${n}`,a)}}),console.log(" ")}getStorageStats(){const e=this.getAllKeys(!0),s=["cookie-consent","cookie-consent-date"],n=e.filter(r=>!s.includes(r)).length;let a=0;return e.forEach(r=>{try{const o=localStorage.getItem(r)||"";a+=r.length+o.length}catch{}}),{totalKeys:e.length,essentialKeys:s.filter(r=>e.includes(r)).length,nonEssentialKeys:n,consentRequired:!this.hasConsent()&&n>0,storageUsed:`${Math.round(a/1024*100)/100} KB`}}exportData(){if(!this.hasConsent())return console.warn("  (Cookie)"),null;const e={};return this.getAllKeys(!1).forEach(n=>{try{const a=localStorage.getItem(n);a&&(e[n]=JSON.parse(a))}catch{e[n]=localStorage.getItem(n)}}),{exportTime:new Date().toISOString(),consentStatus:this.getConsentStatus(),data:e}}};he(Ge,"instance");let Xt=Ge;const Be=Xt.getInstance();function Ia({isOpen:t,onClose:e}){const[s,n]=f.useState(Be.getStorageStats()),[a,r]=f.useState(Be.getConsentStatus());f.useEffect(()=>{t&&(n(Be.getStorageStats()),r(Be.getConsentStatus()))},[t]);const o=()=>{const c=a==="accepted"?"declined":"accepted";c==="accepted"?(localStorage.setItem("cookie-consent","accepted"),localStorage.setItem("cookie-consent-date",new Date().toISOString())):(localStorage.setItem("cookie-consent","declined"),localStorage.setItem("cookie-consent-date",new Date().toISOString()),Be.clearNonEssentialData()),r(c),n(Be.getStorageStats())},l=()=>{confirm(` 


`)&&(Be.clearNonEssentialData(),n(Be.getStorageStats()),alert(" "))},u=()=>{const c=Be.exportData();if(!c){alert(" Cookie");return}const h=new Blob([JSON.stringify(c,null,2)],{type:"application/json"}),d=URL.createObjectURL(h),m=document.createElement("a");m.href=d,m.download=`_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(d),alert(" ")};return t?i.jsx(kt,{children:i.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:e}),i.jsxs(le.div,{className:"w-full max-w-2xl bg-white rounded-xl shadow-2xl z-50 max-h-[90vh] flex flex-col mx-4",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20,stiffness:300},children:[i.jsx("div",{className:"p-6 pb-0",children:i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("i",{className:"fa-solid fa-shield-halved text-blue-600 text-2xl"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:""})]}),i.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 text-xl",children:i.jsx("i",{className:"fa-solid fa-xmark"})})]})}),i.jsxs("div",{className:"flex-1 px-6 py-4 space-y-6 overflow-y-auto",children:[i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[i.jsx("i",{className:"fa-solid fa-cookie-bite text-amber-500"}),"Cookie"]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm text-gray-600",children:[":",i.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${a==="accepted"?"bg-green-100 text-green-800":a==="declined"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:a==="accepted"?" ":a==="declined"?" ":" "})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a==="accepted"?"Cookie":a==="declined"?"Cookie":""})]}),a!=="pending"&&i.jsx("button",{onClick:o,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${a==="accepted"?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:a==="accepted"?"":""})]})]}),i.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[i.jsx("i",{className:"fa-solid fa-chart-pie text-blue-600"}),""]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.totalKeys}),i.jsx("div",{className:"text-xs text-gray-600",children:""})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.essentialKeys}),i.jsx("div",{className:"text-xs text-gray-600",children:""})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-purple-600",children:s.nonEssentialKeys}),i.jsx("div",{className:"text-xs text-gray-600",children:""})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-orange-600",children:s.storageUsed}),i.jsx("div",{className:"text-xs text-gray-600",children:""})]})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[i.jsx("i",{className:"fa-solid fa-info-circle text-blue-600"}),""]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 rounded-lg",children:[i.jsx("i",{className:"fa-solid fa-shield-check text-green-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-green-800",children:""}),i.jsx("div",{className:"text-green-700",children:"Cookie - "})]})]}),i.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-50 rounded-lg",children:[i.jsx("i",{className:"fa-solid fa-bookmark text-blue-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-blue-800",children:""}),i.jsx("div",{className:"text-blue-700",children:""})]})]}),i.jsxs("div",{className:"flex items-start gap-3 p-3 bg-purple-50 rounded-lg",children:[i.jsx("i",{className:"fa-solid fa-palette text-purple-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-purple-800",children:""}),i.jsx("div",{className:"text-purple-700",children:""})]})]}),i.jsxs("div",{className:"flex items-start gap-3 p-3 bg-orange-50 rounded-lg",children:[i.jsx("i",{className:"fa-solid fa-chart-line text-orange-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-orange-800",children:""}),i.jsx("div",{className:"text-orange-700",children:""})]})]})]})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[i.jsx("i",{className:"fa-solid fa-wrench text-gray-600"}),""]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("button",{onClick:u,disabled:a!=="accepted",className:"w-full p-3 bg-blue-100 hover:bg-blue-200 disabled:bg-gray-100 disabled:text-gray-400 text-blue-800 rounded-lg transition-colors text-left",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("i",{className:"fa-solid fa-download"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:""}),i.jsx("div",{className:"text-sm opacity-75",children:"JSON"})]})]})}),i.jsx("button",{onClick:l,className:"w-full p-3 bg-red-100 hover:bg-red-200 text-red-800 rounded-lg transition-colors text-left",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("i",{className:"fa-solid fa-trash"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:""}),i.jsx("div",{className:"text-sm opacity-75",children:""})]})]})})]}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[i.jsx("i",{className:"fa-solid fa-book-open text-blue-500"}),""]}),i.jsx("p",{className:"text-sm text-gray-600 mb-3",children:""}),i.jsxs("a",{href:"/tutorial.html",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium shadow transition-colors",children:[i.jsx("i",{className:"fa-solid fa-graduation-cap"}),""]})]})]})]}),i.jsx("div",{className:"p-6 pt-0 border-t",children:i.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[i.jsxs("span",{children:[": ",new Date().toLocaleDateString("zh-CN")]}),i.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg",children:""})]})})]})]})}):null}function vc({isOpen:t,onClose:e,onConfirm:s,title:n,message:a,confirmText:r="",cancelText:o="",type:l="warning"}){const c=(()=>{switch(l){case"danger":return{icon:"fa-solid fa-triangle-exclamation text-red-500",confirmButton:"bg-red-500 hover:bg-red-600 text-white",borderColor:"border-red-200"};case"warning":return{icon:"fa-solid fa-exclamation-triangle text-orange-500",confirmButton:"bg-orange-500 hover:bg-orange-600 text-white",borderColor:"border-orange-200"};case"info":return{icon:"fa-solid fa-info-circle text-blue-500",confirmButton:"bg-blue-500 hover:bg-blue-600 text-white",borderColor:"border-blue-200"}}})(),h=()=>{s(),e()};return i.jsx(kt,{children:t&&i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center",children:[i.jsx(le.div,{className:"absolute inset-0 bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),i.jsx(le.div,{className:`relative bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 border-2 ${c.borderColor}`,initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20,stiffness:300},children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("i",{className:`${c.icon} text-2xl`})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:n}),i.jsx("div",{className:"text-sm text-gray-600 whitespace-pre-line",children:a})]})]}),i.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[i.jsx("button",{onClick:e,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:o}),i.jsx("button",{onClick:h,className:`px-4 py-2 rounded-lg transition-colors ${c.confirmButton}`,children:r})]})]})})]})})}const wc=[{id:"1",name:"GitHub",url:"https://github.com",favicon:"https://github.githubassets.com/favicons/favicon.png",tags:["",""],visitCount:42,lastVisit:"2023-05-15",note:""},{id:"2",name:"Dribbble",url:"https://dribbble.com",favicon:"https://cdn.dribbble.com/assets/favicon-b38525134603b9513174e916967b4baaaaaa5ee0297c4f53d6fb3ab8ad26c3a4.ico",tags:["",""],visitCount:28,lastVisit:"2023-05-10",note:""},{id:"3",name:"Medium",url:"https://medium.com",favicon:"https://miro.medium.com/v2/resize:fill:32:32/1*sHhtYhaCe2Uc3IU0IgKwIQ.png",tags:["",""],visitCount:15,lastVisit:"2023-05-05",note:""}];function Ta(t={}){const{enableAutoSync:e=!0,syncDelay:s=100}=t,n=Xt.getInstance(),[a,r]=f.useState(!0),[o,l]=f.useState(null),[u,c]=f.useState(!0),h=f.useCallback(()=>{try{const N=n.getItem("websites");if(N){const C=JSON.parse(N);if(Array.isArray(C)&&C.length>0){const b=C.filter(k=>k.id&&k.name&&k.url);if(b.length>0)return console.log(`  ${b.length} `),b}}}catch(N){console.warn(":",N),l("")}return wc},[n]),[d,m]=f.useState(()=>{const N=h();return r(!1),N}),p=f.useCallback(N=>{try{n.setItem("websites",JSON.stringify(N))||console.warn("Cookie")}catch(C){console.error(":",C),l("")}},[n]);f.useEffect(()=>{if(!e||!u)return;const N=setTimeout(()=>{const C=h();(C.length!==d.length||JSON.stringify(C.map(b=>b.id).sort())!==JSON.stringify(d.map(b=>b.id).sort()))&&(console.log(" "),m(C)),c(!1)},s);return()=>clearTimeout(N)},[e,s,u,h,d]),f.useEffect(()=>{!u&&e&&p(d)},[d,p,e,u]);const x=f.useCallback(N=>{l(null),m(N)},[]),D=f.useCallback(N=>{const C={...N,visitCount:0,lastVisit:new Date().toISOString().split("T")[0]};x(b=>[...b,C])},[x]),w=f.useCallback((N,C)=>{x(b=>b.map(k=>k.id===N?{...k,...C}:k))},[x]),E=f.useCallback(N=>{x(C=>C.filter(b=>b.id!==N))},[x]),q=f.useCallback(async()=>{try{const N={websites:d,settings:{cardOpacity:parseFloat(localStorage.getItem("cardOpacity")||"0.1"),searchBarOpacity:parseFloat(localStorage.getItem("searchBarOpacity")||"0.1"),parallaxEnabled:JSON.parse(localStorage.getItem("parallaxEnabled")||"true"),wallpaperResolution:localStorage.getItem("wallpaperResolution")||"1080p",theme:localStorage.getItem("theme")||"light"},exportTime:new Date().toISOString(),version:"1.0"};return JSON.stringify(N,null,2)}catch(N){throw new Error(`: ${N instanceof Error?N.message:""}`)}},[d]),$=f.useCallback(async N=>{try{if(!N.websites||!Array.isArray(N.websites))return{success:!1,message:""};const C=N.websites.filter(b=>b.id&&b.name&&b.url&&typeof b.id=="string"&&typeof b.name=="string"&&typeof b.url=="string").map(b=>({...b,visitCount:typeof b.visitCount=="number"?b.visitCount:0,lastVisit:b.lastVisit||new Date().toISOString().split("T")[0],tags:Array.isArray(b.tags)?b.tags:[],note:b.note||""}));return C.length===0?{success:!1,message:""}:(x(C),{success:!0,message:` ${C.length} `,validCount:C.length})}catch(C){return{success:!1,message:`: ${C instanceof Error?C.message:""}`}}},[x]);return{websites:d,setWebsites:x,addWebsite:D,updateWebsite:w,deleteWebsite:E,exportData:q,importData:$,isLoading:a,error:o}}function _c(){const t=f.useCallback(()=>{try{return{cardOpacity:parseFloat(localStorage.getItem("cardOpacity")||"0.1"),searchBarOpacity:parseFloat(localStorage.getItem("searchBarOpacity")||"0.1"),parallaxEnabled:JSON.parse(localStorage.getItem("parallaxEnabled")||"true"),wallpaperResolution:localStorage.getItem("wallpaperResolution")||"1080p",theme:localStorage.getItem("theme")||"light"}}catch(n){return console.warn(":",n),{cardOpacity:.1,searchBarOpacity:.1,parallaxEnabled:!0,wallpaperResolution:"1080p",theme:"light"}}},[]),e=f.useCallback(n=>{const a=[];return n.cardOpacity!==void 0&&(typeof n.cardOpacity!="number"||n.cardOpacity<.05||n.cardOpacity>.3)&&a.push("0.05-0.3"),n.searchBarOpacity!==void 0&&(typeof n.searchBarOpacity!="number"||n.searchBarOpacity<.05||n.searchBarOpacity>.3)&&a.push("0.05-0.3"),n.parallaxEnabled!==void 0&&typeof n.parallaxEnabled!="boolean"&&a.push("truefalse"),n.wallpaperResolution!==void 0&&(["4k","1080p","720p","mobile"].includes(n.wallpaperResolution)||a.push("")),n.theme!==void 0&&(["light","dark"].includes(n.theme)||a.push("lightdark")),{valid:a.length===0,errors:a}},[]),s=f.useCallback(n=>{const a=e(n),r=[];if(!a.valid)return console.warn(":",a.errors),{success:!1,appliedSettings:[]};try{return typeof n.cardOpacity=="number"&&(localStorage.setItem("cardOpacity",n.cardOpacity.toString()),r.push("")),typeof n.searchBarOpacity=="number"&&(localStorage.setItem("searchBarOpacity",n.searchBarOpacity.toString()),r.push("")),typeof n.parallaxEnabled=="boolean"&&(localStorage.setItem("parallaxEnabled",JSON.stringify(n.parallaxEnabled)),r.push("")),n.wallpaperResolution&&["4k","1080p","720p","mobile"].includes(n.wallpaperResolution)&&(localStorage.setItem("wallpaperResolution",n.wallpaperResolution),r.push("")),n.theme&&["light","dark"].includes(n.theme)&&(localStorage.setItem("theme",n.theme),r.push("")),{success:!0,appliedSettings:r}}catch(o){return console.error(":",o),{success:!1,appliedSettings:[]}}},[e]);return{exportSettings:t,importSettings:s,validateSettings:e}}function Nc(t,e){const[s,n]=f.useState(!1),[a,r]=f.useState(!1),[o,l]=f.useState(null),{importData:u}=Ta({enableAutoSync:!1}),{exportSettings:c,importSettings:h}=_c(),d=f.useCallback(async(p={})=>{const{includeSettings:x=!0,includeWebsites:D=!0}=p;if(!s){n(!0),l(null);try{if(D&&(!t||t.length===0)&&!confirm(""))return;const w={exportTime:new Date().toISOString(),version:"1.0"};D&&(w.websites=t||[]),x&&(w.settings=c());const E=JSON.stringify(w,null,2);if(new Blob([E]).size/1024/1024>50)throw new Error("50MB");const $=new Blob([E],{type:"application/json"}),N=`__${new Date().toISOString().split("T")[0]}.json`;if("showSaveFilePicker"in window)try{const M=await(await window.showSaveFilePicker({suggestedName:N,types:[{description:"JSON",accept:{"application/json":[".json"]}}]})).createWritable();await M.write($),await M.close(),alert(`${D?` ${t.length} `:""}${x?"":""}`);return}catch(k){if(k.name==="AbortError")return;console.warn("API:",k)}const C=URL.createObjectURL($),b=document.createElement("a");b.href=C,b.download=N,b.style.display="none",document.body.appendChild(b),b.click(),document.body.removeChild(b),setTimeout(()=>URL.revokeObjectURL(C),1e3),alert(`${D?` ${t.length} `:""}${x?"":""}`)}catch(w){const E=w instanceof Error?w.message:"";l(`: ${E}`),alert(`${E}`)}finally{n(!1)}}},[s,t,c]),m=f.useCallback(async p=>a?{success:!1,message:""}:(r(!0),l(null),new Promise(x=>{const D=new FileReader;D.onload=async w=>{var E;try{const q=(E=w.target)==null?void 0:E.result,$=JSON.parse(q);let N=0,C=[];if($.websites){const k=await u($);k.success&&(e($.websites.filter(M=>M.id&&M.name&&M.url)),N=k.validCount||0)}if($.settings){const k=h($.settings);k.success&&(C=k.appliedSettings)}if(N+C.length===0){x({success:!1,message:""});return}x({success:!0,message:"",details:{websitesImported:N,settingsApplied:C}})}catch(q){const $=q instanceof Error?q.message:"";l(`: ${$}`),x({success:!1,message:`: ${$}`})}finally{r(!1)}},D.onerror=()=>{l(""),r(!1),x({success:!1,message:""})},D.readAsText(p)})),[a,u,h,e]);return{exportAllData:d,importAllData:m,isExporting:s,isImporting:a,error:o}}function jc({onClose:t,websites:e,setWebsites:s}){const[n,a]=f.useState(!1),[r,o]=f.useState(!1),[l,u]=f.useState(!1),[c,h]=f.useState(null),{exportAllData:d,importAllData:m,isExporting:p,isImporting:x}=Nc(e,s),{cardOpacity:D,searchBarOpacity:w,parallaxEnabled:E,wallpaperResolution:q,setCardOpacity:$,setSearchBarOpacity:N,setParallaxEnabled:C,setWallpaperResolution:b,setIsSettingsOpen:k}=gt(),{currentUser:M,logout:Y}=Ie(),K=f.useRef(null);f.useEffect(()=>(k(!0),()=>k(!1)),[k]);const A=()=>{k(!1),t()},O=j=>{const L={...j,visitCount:0,lastVisit:new Date().toISOString().split("T")[0]};s([...e,L]),a(!1)},P=async()=>{await d()},te=j=>{var se;const L=(se=j.target.files)==null?void 0:se[0];if(!L)return;const ee=5*1024*1024;if(L.size>ee){alert("5MB"),K.current&&(K.current.value="");return}if(!L.type.includes("json")&&!L.name.endsWith(".json")){alert("JSON"),K.current&&(K.current.value="");return}h(L),u(!0),K.current&&(K.current.value="")},G=async()=>{if(!c||x)return;const j=await m(c);if(j.success){const L=j.details;let ee="";L!=null&&L.websitesImported&&(ee+=` ${L.websitesImported} `),L!=null&&L.settingsApplied&&L.settingsApplied.length>0&&(ee+=`${L.settingsApplied.join("")}`),ee+="",alert(ee),window.location.reload()}else alert(j.message);h(null)};return i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center select-none",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:A}),i.jsxs(le.div,{className:"w-96 bg-white rounded-xl shadow-2xl z-50 max-h-[80vh] flex flex-col select-none",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20,stiffness:300},children:[i.jsx("div",{className:"p-6 pb-0 select-none",children:i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-xl font-medium text-gray-800 select-none",children:""}),i.jsx("button",{onClick:A,className:"text-gray-500 hover:text-gray-700 select-none",children:i.jsx("i",{className:"fa-solid fa-xmark text-lg select-none"})})]})}),i.jsxs("div",{className:"flex-1 px-6 py-2 pb-6 space-y-6 overflow-y-auto select-none",children:[i.jsxs("div",{className:"space-y-4 select-none",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:""}),M?i.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 space-y-4",children:[i.jsx(bc,{}),i.jsx("div",{className:"flex justify-center pt-1",children:i.jsxs("button",{onClick:async()=>{try{await Y(),A()}catch(j){console.error(":",j)}},className:"text-red-500 hover:text-red-600 transition-colors flex items-center text-sm select-none",children:[i.jsx("i",{className:"fa-solid fa-sign-out-alt mr-1.5 text-xs select-none"}),""]})})]}):i.jsx("div",{className:"bg-gray-100 rounded-lg p-4",children:i.jsx(yc,{onSuccess:A})})]}),i.jsxs("div",{className:"space-y-4 select-none",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:""}),i.jsx("div",{className:"bg-gray-100 rounded-lg p-4",children:i.jsx(gc,{})})]}),i.jsx("div",{className:"select-none -mt-4",children:i.jsx(xc,{})}),i.jsxs("div",{className:"space-y-4 select-none",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:""}),i.jsxs("div",{className:"space-y-2 select-none",children:[i.jsxs("label",{className:"text-sm font-medium text-gray-700 select-none",children:[" (",Math.round(w*100),"%)"]}),i.jsx("input",{type:"range",min:"0.05",max:"0.5",step:"0.01",value:w,onChange:j=>N(parseFloat(j.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"})]}),i.jsxs("div",{className:"space-y-2 select-none",children:[i.jsxs("label",{className:"text-sm font-medium text-gray-700 select-none",children:[" (",Math.round(D*100),"%)"]}),i.jsx("input",{type:"range",min:"0.05",max:"0.5",step:"0.01",value:D,onChange:j=>$(parseFloat(j.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"})]}),i.jsxs("div",{className:"space-y-2 select-none",children:[i.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center justify-between select-none",children:[i.jsx("span",{className:"select-none",children:""}),i.jsx("button",{onClick:()=>C(!E),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors select-none ${E?"bg-blue-500":"bg-gray-300"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform select-none ${E?"translate-x-6":"translate-x-1"}`})})]}),i.jsx("p",{className:"text-xs text-gray-500 select-none",children:E?"":""})]}),i.jsxs("div",{className:"space-y-2 select-none",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 select-none",children:""}),i.jsx("div",{className:"grid grid-cols-2 gap-2 select-none",children:[{value:"4k",label:"4K ",desc:""},{value:"1080p",label:"1080p ",desc:""},{value:"720p",label:"720p ",desc:""},{value:"mobile",label:"",desc:""}].map(j=>i.jsxs("button",{onClick:()=>b(j.value),className:`p-3 rounded-lg border-2 transition-all text-left select-none cursor-pointer ${q===j.value?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-700 hover:border-gray-300"}`,children:[i.jsx("div",{className:"font-medium text-sm",children:j.label}),i.jsx("div",{className:"text-xs text-gray-500",children:j.desc})]},j.value))}),i.jsx("p",{className:"text-xs text-gray-500 select-none",children:""})]})]}),i.jsxs("div",{className:"space-y-4 select-none",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:""}),i.jsxs("button",{onClick:()=>a(!0),className:"w-full px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors select-none",children:[i.jsx("i",{className:"fa-solid fa-plus mr-2 select-none"}),""]})]}),i.jsxs("div",{className:"space-y-4 select-none",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:""}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 select-none",children:[i.jsx("button",{onClick:P,disabled:p,className:`px-3 py-2 rounded-md transition-colors text-sm select-none ${p?"bg-gray-400 cursor-not-allowed text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:p?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-1 select-none"}),""]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"fa-solid fa-download mr-1 select-none"}),""]})}),i.jsx("button",{onClick:()=>{var j;return(j=K.current)==null?void 0:j.click()},disabled:x,className:`px-3 py-2 rounded-md transition-colors text-sm select-none ${x?"bg-gray-400 cursor-not-allowed text-white":"bg-orange-500 hover:bg-orange-600 text-white"}`,children:x?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-1 select-none"}),""]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"fa-solid fa-upload mr-1 select-none"}),""]})})]}),i.jsx("input",{ref:K,type:"file",accept:".json",onChange:te,className:"hidden"}),i.jsx("p",{className:"text-xs text-gray-500 select-none",children:" "})]}),i.jsxs("div",{className:"space-y-4 select-none",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:"Cookie"}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("button",{onClick:()=>o(!0),className:"w-full px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors select-none",children:[i.jsx("i",{className:"fa-solid fa-shield-halved mr-2 select-none"}),""]}),i.jsxs("a",{href:"/tutorial.html",target:"_blank",rel:"noopener noreferrer",className:"w-full px-4 py-2 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-md transition-colors flex items-center justify-center gap-2 font-medium select-none border border-blue-200",style:{textDecoration:"none"},children:[i.jsx("i",{className:"fa-solid fa-graduation-cap"}),""]})]})]})]})]}),n&&i.jsx(_a,{id:`new-${Date.now()}`,name:"",url:"",favicon:"",tags:[],note:"",onClose:()=>a(!1),onSave:O}),r&&i.jsx(Ia,{isOpen:r,onClose:()=>o(!1)}),i.jsx(vc,{isOpen:l,onClose:()=>{u(!1),h(null)},onConfirm:G,title:"",message:` 

 
 
 

`,confirmText:"",cancelText:"",type:"warning"})]})}function Sc(){const{currentUser:t,sendVerificationEmail:e,reloadUser:s,logout:n}=Ie(),[a,r]=f.useState(!1),[o,l]=f.useState(!1);if(!t||t.emailVerified)return null;const u=async()=>{r(!0);try{await e(),alert(" ")}catch(d){alert(" "),console.error(":",d)}finally{r(!1)}},c=async()=>{l(!0);try{await s(),window.location.reload()}catch(d){console.error(":",d)}finally{l(!1)}},h=async()=>{confirm("")&&await n()};return i.jsx(le.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},className:"fixed top-0 left-0 right-0 z-50 bg-orange-500 text-white shadow-lg",children:i.jsx("div",{className:"container mx-auto px-4 py-3",children:i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("i",{className:"fa-solid fa-envelope-open-text text-xl"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:""}),i.jsxs("p",{className:"text-sm text-orange-100",children:[" ",i.jsx("strong",{children:t.email})," "]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:u,disabled:a,className:"bg-orange-600 hover:bg-orange-700 disabled:bg-orange-400 px-3 py-1 rounded text-sm transition-colors",children:a?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-1"}),"..."]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"fa-solid fa-paper-plane mr-1"}),""]})}),i.jsx("button",{onClick:c,disabled:o,className:"bg-green-500 hover:bg-green-600 disabled:bg-green-400 px-3 py-1 rounded text-sm transition-colors",children:o?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-1"}),"..."]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"fa-solid fa-check-circle mr-1"}),""]})}),i.jsxs("button",{onClick:h,className:"bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-sm transition-colors",children:[i.jsx("i",{className:"fa-solid fa-sign-out-alt mr-1"}),""]})]})]})})})}const Qe=class Qe{constructor(){he(this,"db",null);he(this,"dbName","WallpaperCache");he(this,"version",1);he(this,"storeName","images")}static getInstance(){return Qe.instance||(Qe.instance=new Qe),Qe.instance}async init(){return new Promise((e,s)=>{const n=indexedDB.open(this.dbName,this.version);n.onerror=()=>{console.error("IndexedDB :",n.error),s(n.error)},n.onsuccess=()=>{this.db=n.result,console.log(" IndexedDB "),e()},n.onupgradeneeded=a=>{const r=a.target.result;r.objectStoreNames.contains(this.storeName)||(r.createObjectStore(this.storeName,{keyPath:"key"}).createIndex("timestamp","timestamp",{unique:!1}),console.log("  IndexedDB "))}})}async ensureDB(){return this.db||await this.init(),this.db}async set(e,s,n=2*60*60*1e3){try{const o=(await this.ensureDB()).transaction([this.storeName],"readwrite").objectStore(this.storeName),l={key:e,blob:s,timestamp:Date.now(),ttl:n,size:s.size,type:s.type},u=o.put(l);return new Promise((c,h)=>{u.onsuccess=()=>{console.log(` IndexedDB : ${e} (${(s.size/1024/1024).toFixed(2)}MB)`),c()},u.onerror=()=>{console.error("IndexedDB :",u.error),h(u.error)}})}catch(a){throw console.error("IndexedDB :",a),a}}async get(e){try{const r=(await this.ensureDB()).transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);return new Promise((o,l)=>{r.onsuccess=()=>{const u=r.result;if(!u){o(null);return}if(Date.now()-u.timestamp>u.ttl){console.log(` IndexedDB : ${e}`),this.delete(e),o(null);return}console.log(` IndexedDB : ${e} (${(u.size/1024/1024).toFixed(2)}MB)`),o(u.blob)},r.onerror=()=>{console.error("IndexedDB :",r.error),l(r.error)}})}catch(s){return console.error("IndexedDB :",s),null}}async has(e){try{const r=(await this.ensureDB()).transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);return new Promise(o=>{r.onsuccess=()=>{const l=r.result;if(!l){o(!1);return}if(Date.now()-l.timestamp>l.ttl){this.delete(e),o(!1);return}o(!0)},r.onerror=()=>{o(!1)}})}catch{return!1}}async delete(e){try{const r=(await this.ensureDB()).transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(e);return new Promise((o,l)=>{r.onsuccess=()=>{console.log(` IndexedDB : ${e}`),o()},r.onerror=()=>{console.error("IndexedDB :",r.error),l(r.error)}})}catch(s){console.error("IndexedDB :",s)}}async cleanup(){try{const a=(await this.ensureDB()).transaction([this.storeName],"readwrite").objectStore(this.storeName).openCursor();let r=0;const o=Date.now();return new Promise((l,u)=>{a.onsuccess=c=>{const h=c.target.result;if(h){const d=h.value;o-d.timestamp>d.ttl&&(h.delete(),r++),h.continue()}else console.log(` IndexedDB  ${r} `),l()},a.onerror=()=>{console.error("IndexedDB :",a.error),u(a.error)}})}catch(e){console.error("IndexedDB :",e)}}async getStats(){try{const a=(await this.ensureDB()).transaction([this.storeName],"readonly").objectStore(this.storeName).openCursor();let r=0,o=0;return new Promise((l,u)=>{a.onsuccess=c=>{const h=c.target.result;if(h){const d=h.value;r++,o+=d.size||0,h.continue()}else l({count:r,totalSize:o})},a.onerror=()=>{console.error("IndexedDB :",a.error),u(a.error)}})}catch(e){return console.error("IndexedDB :",e),{count:0,totalSize:0}}}};he(Qe,"instance");let Ss=Qe;const _t=Ss.getInstance(),Je=class Je{constructor(){he(this,"cache",new Map)}static getInstance(){return Je.instance||(Je.instance=new Je),Je.instance}set(e,s,n=5*60*1e3){this.cache.set(e,{data:s,timestamp:Date.now(),ttl:n})}get(e){const s=this.cache.get(e);return s?Date.now()-s.timestamp>s.ttl?(this.cache.delete(e),null):s.data:null}cleanup(){const e=Date.now();for(const[s,n]of this.cache.entries())e-n.timestamp>n.ttl&&this.cache.delete(s)}clear(){this.cache.clear()}size(){return this.cache.size}};he(Je,"instance");let ks=Je;const Ea=ks.getInstance();setInterval(()=>{Ea.cleanup()},6e4);const ms={async cacheWallpaperBlob(t,e){try{console.log(" Blob:",{url:t,cacheKey:e});const s=`wallpaper-blob:${e}`,n=await _t.get(s);if(n)return console.log(" IndexedDB:",s),URL.createObjectURL(n);console.log(" ...");const a=`https://corsproxy.io/?${encodeURIComponent(t)}`;console.log(" CORS:",a);const r=await fetch(a,{mode:"cors",headers:{Accept:"image/*"}});if(!r.ok)throw new Error(`: ${r.status} ${r.statusText}`);console.log(" Blob...");const o=await r.blob(),l=URL.createObjectURL(o);return console.log(" BlobIndexedDB:",{cacheKey:s,blobUrl:l,size:`${(o.size/1024/1024).toFixed(2)}MB`}),await _t.set(s,o,2*60*60*1e3),Ea.set(`wallpaper-source:${e}`,t,2*60*60*1e3),console.log(" IndexedDB:  "),l}catch(s){return console.error(" Blob:",s),console.error(" :",{url:t,cacheKey:e,error:s instanceof Error?s.message:String(s)}),console.log(" CORSBlob"),t}},async preloadTodayWallpapers(){const t=new Date().toDateString(),e=[{url:"https://bing.img.run/uhd.php",key:`bing-${t}`},{url:"https://bing.img.run/1920x1080.php",key:`bing-hd-${t}`},{url:"https://source.unsplash.com/1920x1080/?nature",key:`unsplash-${t}`}],s=await Promise.allSettled(e.map(({url:n,key:a})=>this.cacheWallpaperBlob(n,a)));console.log(" :",s.filter(n=>n.status==="fulfilled").length,"/",s.length)},async getCachedWallpaper(t){const e=`wallpaper-blob:${t}`;try{const s=await _t.get(e);if(s)return console.log(" IndexedDB:",e),URL.createObjectURL(s)}catch(s){console.warn("IndexedDB:",s)}return null},async hasCachedWallpaper(t){const e=`wallpaper-blob:${t}`;return await _t.has(e)},async cleanupWallpaperCache(){try{await _t.cleanup(),console.log(" ")}catch(t){console.error(":",t)}}};function kc(t,e=[]){const s=f.useRef(null),n=f.useRef(),a=f.useCallback((...o)=>{n.current=o,s.current===null&&(s.current=requestAnimationFrame(()=>{s.current=null,n.current&&t(...n.current)}))},e),r=f.useCallback(()=>{s.current!==null&&(cancelAnimationFrame(s.current),s.current=null)},[]);return Object.assign(a,{cancel:r})}function Cc(t,e=!0){const s=kc(t,[e]);return f.useCallback(a=>{e&&s(a)},[s,e])}function Ic({websites:t,setWebsites:e}){const{parallaxEnabled:s,wallpaperResolution:n,isSettingsOpen:a}=gt(),{currentUser:r}=Ie(),{displayName:o}=ka();pc(t);const l=(O,P)=>{const te=[...t],[G]=te.splice(O,1);te.splice(P,0,G),e(te)},[u,c]=f.useState(""),[h,d]=f.useState(!1),[m,p]=f.useState(!1),[x,D]=f.useState({x:0,y:0}),[w,E]=f.useState(!1),[q,$]=f.useState(0),[N,C]=f.useState(!1);f.useEffect(()=>{const O=()=>new Date().toISOString().split("T")[0],P=()=>`wallpaper-${n}-${O()}`,G=(()=>{try{const j=P(),L=localStorage.getItem(j);if(L){const{url:ee,timestamp:se}=JSON.parse(L),U=Date.now(),R=24*60*60*1e3;if(U-se<R&&ee)return ee}}catch(j){console.warn(":",j)}return null})();G&&(c(G),d(!0),console.log(" "))},[]),f.useEffect(()=>{const O=setTimeout(()=>{const P=()=>new Date().toISOString().split("T")[0],te=L=>`wallpaper-${L}-${P()}`,j=(L=>{try{const ee=te(L),se=localStorage.getItem(ee);if(se){const{url:U,timestamp:R}=JSON.parse(se),F=Date.now(),g=24*60*60*1e3;if(F-R<g&&U)return U}}catch(ee){console.warn(":",ee)}return null})(n);console.log(j?" ":" ")},300);return()=>clearTimeout(O)},[n]);const b=[...t].sort((O,P)=>{const te=(P.visitCount||0)-(O.visitCount||0);if(te!==0)return te;const G=new Date(O.lastVisit||"2000-01-01").getTime();return new Date(P.lastVisit||"2000-01-01").getTime()-G}),k=()=>{N||($(O=>O+1),C(!0),E(!0),setTimeout(()=>{E(!1),setTimeout(()=>{C(!1)},300)},1e3))},M=O=>{e(t.map(P=>P.id===O.id?{...P,...O}:P))},Y=()=>{if(!s||a||!x.x||!x.y)return"translate(0px, 0px)";const O=window.innerWidth,P=window.innerHeight,te=20,G=(U,R)=>(U/R*te-te/2).toFixed(1),j=parseFloat(G(x.x,O)),L=parseFloat(G(x.y,P)),ee=-j*.4,se=-L*.4;return`translate(${ee}px, ${se}px)`};f.useEffect(()=>{const O=U=>({"4k":"https://bing.img.run/uhd.php","1080p":"https://bing.img.run/1920x1080.php","720p":"https://bing.img.run/1366x768.php",mobile:"https://bing.img.run/m.php"})[U],P=()=>{const U=["https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1920&h=1080&fit=crop","https://images.unsplash.com/photo-1519904981063-b0cf448d479e?w=1920&h=1080&fit=crop","https://images.unsplash.com/photo-1501594907352-04cda38ebc29?w=1920&h=1080&fit=crop"],R=new Date().getDate();return U[R%U.length]},te=()=>new Date().toISOString().split("T")[0],G=()=>`wallpaper-${n}-${te()}`,j=()=>`blob-${n}-${te()}`,L=async()=>{try{const U=j();console.log(" Blob:",U);const R=await ms.getCachedWallpaper(U);if(console.log(" Blob:",R?"":""),R)return console.log(" Blob"),{url:R,type:"blob"};const F=G();console.log(" URL:",F);const g=localStorage.getItem(F);if(g){const{url:_,timestamp:B}=JSON.parse(g),W=Date.now(),ne=24*60*60*1e3;if(W-B<ne&&_)return console.log(" URL"),{url:_,type:"url"}}}catch(U){console.warn(":",U)}return null},ee=async U=>{try{const R=G(),F={url:U,timestamp:Date.now(),resolution:n};localStorage.setItem(R,JSON.stringify(F)),console.log(" URL");const g=j();console.log(" Blob..."),ms.cacheWallpaperBlob(U,g).then(_=>{console.log(" Blob"),console.log(" Blob URL:",_)}).catch(_=>{console.warn(" BlobURL:",_)}),console.log(" ")}catch(R){console.warn(":",R)}},se=(U,R=!1)=>{console.log(" :",n,R?"()":""),d(!1);const F=new Image,g=setTimeout(()=>{if(F.onload=null,F.onerror=null,console.warn(" "),R)c(""),d(!0);else{const _=P();se(_,!0)}},6e3);F.onload=()=>{clearTimeout(g),c(F.src),d(!0),ee(F.src),console.log(" :",F.src)},F.onerror=()=>{if(clearTimeout(g),R)console.warn(" "),c(""),d(!0);else{console.warn(" API");const _=P();se(_,!0)}},F.src=U};L().then(U=>{if(U){if(console.log(` ${U.type==="blob"?"Blob":"URL"}:`,U.url),c(U.url),d(!0),U.type==="url"){const R=j();console.log(" Blob..."),ms.cacheWallpaperBlob(U.url,R).then(F=>{console.log(" Blob"),console.log(" Blob URL:",F)}).catch(F=>{console.warn(" Blob:",F)})}}else{const R=O(n);console.log("  Bing :",R),se(R)}}).catch(U=>{console.warn(":",U);const R=O(n);console.log("  Bing :",R),se(R)})},[n]);const K=f.useCallback(O=>{D({x:O.clientX,y:O.clientY})},[]),A=Cc(K,s&&!a);return f.useEffect(()=>{if(!s||a){D({x:0,y:0});return}return window.addEventListener("mousemove",A,{passive:!0}),()=>{window.removeEventListener("mousemove",A)}},[s,a,A]),f.useEffect(()=>{if(t.length>0){const O=setTimeout(()=>{console.log("  favicon..."),Ns.batchCacheFaviconsToIndexedDB(t).then(()=>{console.log(" Favicon ")}).catch(P=>{console.warn(" Favicon :",P)})},2e3);return()=>clearTimeout(O)}},[t]),i.jsxs(i.Fragment,{children:[i.jsx(Sc,{}),i.jsx("div",{className:"fixed top-0 left-0 w-full h-full -z-10",style:{backgroundImage:u?`url(${u})`:"none",backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat",transform:Y(),transition:"transform 0.1s ease-out, filter 1.2s ease-out",opacity:h&&u?1:0,backgroundColor:"#1e293b",filter:h&&u?"brightness(1)":"brightness(0.3)"}}),u&&i.jsx("div",{className:"fixed top-0 left-0 w-full h-full -z-9",style:{background:"linear-gradient(to bottom, rgba(30, 41, 59, 0.7) 0%, rgba(30, 41, 59, 0.3) 50%, rgba(30, 41, 59, 0.1) 100%)",opacity:h?0:1,transition:"opacity 1.5s ease-out",pointerEvents:"none"}}),!h&&u&&i.jsx("div",{className:"fixed top-4 left-4 z-40 bg-black/30 backdrop-blur-sm rounded-lg px-4 py-2",children:i.jsxs("div",{className:"text-white/90 text-sm font-medium flex items-center space-x-2",children:[i.jsx("div",{className:"animate-pulse rounded-full h-2 w-2 bg-white/70"}),i.jsx("span",{children:""})]})}),i.jsxs("div",{className:"relative min-h-screen pt-[33vh]",children:[i.jsx(rc,{}),i.jsx("div",{className:"pt-16 pb-8 px-4 max-w-6xl mx-auto",children:i.jsx(le.div,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-x-3 gap-y-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:b.map((O,P)=>i.jsx(ac,{...O,index:P,moveCard:l,onSave:M,onDelete:te=>{e(t.filter(G=>G.id!==te))}},O.id))})}),m&&i.jsx(jc,{onClose:()=>p(!1),websites:t,setWebsites:e}),r&&r.emailVerified&&i.jsxs("div",{className:"fixed top-4 right-4 z-40",children:[i.jsxs("button",{onClick:k,className:"bg-white/20 backdrop-blur-sm rounded-lg px-3 py-2 flex items-center space-x-2 hover:bg-white/30 transition-colors cursor-pointer",children:[i.jsx("i",{className:"fa-solid fa-user text-white/80"}),i.jsx("span",{className:"text-white/90 text-sm font-medium",children:o})]}),w&&i.jsxs("div",{className:`absolute top-full right-0 mt-2 bg-white/95 backdrop-blur-sm rounded-lg px-4 py-3 shadow-lg border border-white/20 transition-opacity duration-300 ${w?"opacity-100":"opacity-0"}`,children:[i.jsx("p",{className:"text-gray-800 text-sm font-medium whitespace-nowrap",children:q>=10?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-red-500",children:""})," "]}):`"${o}"`}),i.jsx("div",{className:"absolute -top-2 right-4 w-0 h-0 border-l-4 border-r-4 border-b-4 border-l-transparent border-r-transparent border-b-white/95"})]})]}),i.jsx("div",{className:"fixed bottom-4 right-4 z-[9999]",children:i.jsx("button",{onClick:()=>p(!0),className:"p-2 text-white/70 hover:text-white transition-colors","aria-label":"",children:i.jsx("i",{className:"fa-solid fa-sliders text-lg"})})}),i.jsx(ic,{})]})]})}function Tc({isOpen:t,onClose:e,localWebsites:s,cloudWebsites:n,onChoice:a}){const[r,o]=f.useState(!1);if(!t)return null;const l=async u=>{o(!0);try{await a(u),e()}catch(c){console.error(":",c)}finally{o(!1)}};return i.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:e}),i.jsxs(le.div,{className:"w-96 bg-white rounded-xl shadow-2xl z-50 max-h-[80vh] flex flex-col",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20,stiffness:300},children:[i.jsx("div",{className:"p-6 pb-0",children:i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-xl font-medium text-gray-800",children:""}),i.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",disabled:r,children:i.jsx("i",{className:"fa-solid fa-xmark text-lg"})})]})}),i.jsxs("div",{className:"flex-1 px-6 py-2 pb-6 space-y-4 overflow-y-auto",children:[i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("p",{className:"text-sm text-blue-800 mb-2",children:[i.jsx("i",{className:"fa-solid fa-info-circle mr-2"}),""]})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[i.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:[i.jsx("i",{className:"fa-solid fa-computer mr-2"}),""]}),i.jsxs("p",{className:"text-xs text-gray-600",children:[s.length," "]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[i.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:[i.jsx("i",{className:"fa-solid fa-cloud mr-2"}),""]}),i.jsxs("p",{className:"text-xs text-gray-600",children:[n.length," "]})]})]}),i.jsxs("div",{className:"space-y-3 pt-4",children:[i.jsx("button",{onClick:()=>l("cloud"),disabled:r,className:"w-full p-4 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded-lg transition-colors text-left",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("i",{className:"fa-solid fa-cloud-arrow-down text-lg mt-1"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:""}),i.jsx("div",{className:"text-xs text-blue-100",children:""})]})]})}),i.jsx("button",{onClick:()=>l("local"),disabled:r,className:"w-full p-4 bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white rounded-lg transition-colors text-left",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("i",{className:"fa-solid fa-cloud-arrow-up text-lg mt-1"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:""}),i.jsx("div",{className:"text-xs text-green-100",children:""})]})]})}),i.jsx("button",{onClick:()=>l("merge"),disabled:r,className:"w-full p-4 bg-purple-500 hover:bg-purple-600 disabled:bg-gray-400 text-white rounded-lg transition-colors text-left",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("i",{className:"fa-solid fa-code-merge text-lg mt-1"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:""}),i.jsx("div",{className:"text-xs text-purple-100",children:""})]})]})})]}),r&&i.jsxs("div",{className:"flex items-center justify-center py-4",children:[i.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-2"}),i.jsx("span",{className:"text-sm text-gray-600",children:"..."})]})]})]})]})}function Ec(t=!0){const{currentUser:e}=Ie(),[s,n]=f.useState({cloudWebsites:null,cloudSettings:null,loading:!1,error:null}),a=async()=>{if(!e||!e.emailVerified){n(o=>({...o,error:"",loading:!1}));return}n(o=>({...o,loading:!0,error:null}));try{const[o,l]=await Promise.all([dc(e),cc(e)]);n({cloudWebsites:o,cloudSettings:l,loading:!1,error:null}),console.log(" :",{websites:(o==null?void 0:o.length)||0,hasSettings:!!l})}catch(o){n(l=>({...l,loading:!1,error:": "+o.message})),console.error(" :",o)}},r=o=>s.cloudWebsites?uc(o,s.cloudWebsites):o;return f.useEffect(()=>{t&&e&&e.emailVerified?a():n({cloudWebsites:null,cloudSettings:null,loading:!1,error:null})},[e,t]),{...s,loadCloudData:a,mergeWithLocalData:r,hasCloudData:!!s.cloudWebsites||!!s.cloudSettings}}const Rc=()=>{f.useEffect(()=>{document.title="jiang_ai_web";const t=()=>{document.hidden?document.title="":document.title="jiang_ai_web"};return document.addEventListener("visibilitychange",t),()=>{document.removeEventListener("visibilitychange",t)}},[])};class Ac{constructor(){he(this,"preloadedResources",new Set);he(this,"preloadQueue",[]);he(this,"isProcessing",!1);he(this,"maxConcurrent",3)}async preloadImage(e){return this.preloadedResources.has(e)?!0:new Promise(s=>{const n=new Image;n.onload=()=>{this.preloadedResources.add(e),s(!0)},n.onerror=()=>{s(!1)},n.src=e})}async preloadImages(e){const s=e.filter(n=>!this.preloadedResources.has(n));if(s.length!==0)for(let n=0;n<s.length;n+=this.maxConcurrent){const a=s.slice(n,n+this.maxConcurrent);await Promise.allSettled(a.map(r=>this.preloadImage(r)))}}queuePreload(e){!this.preloadedResources.has(e)&&!this.preloadQueue.includes(e)&&(this.preloadQueue.push(e),this.processQueue())}async processQueue(){if(!(this.isProcessing||this.preloadQueue.length===0)){this.isProcessing=!0;try{"requestIdleCallback"in window?await new Promise(e=>{requestIdleCallback(()=>{this.processBatch(),e()})}):await new Promise(e=>{setTimeout(()=>{this.processBatch(),e()},16)})}finally{this.isProcessing=!1,this.preloadQueue.length>0&&setTimeout(()=>this.processQueue(),100)}}}async processBatch(){const e=this.preloadQueue.splice(0,this.maxConcurrent);e.length!==0&&await Promise.allSettled(e.map(s=>this.preloadImage(s)))}preloadFont(e,s){const n=document.createElement("link");if(n.rel="preload",n.as="font",n.type="font/woff2",n.crossOrigin="anonymous",n.href=e,document.head.appendChild(n),"FontFace"in window){const a=new FontFace(s,`url(${e})`);a.load().then(()=>{document.fonts.add(a)}).catch(r=>{console.warn(":",r)})}}preloadCSS(e){const s=document.createElement("link");s.rel="preload",s.as="style",s.href=e,s.onload=()=>{s.rel="stylesheet"},document.head.appendChild(s)}getStats(){return{preloaded:this.preloadedResources.size,queued:this.preloadQueue.length}}clear(){this.preloadedResources.clear(),this.preloadQueue.length=0}}const Wt=new Ac;function Oc(t=!0){return f.useEffect(()=>t?(["https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/webfonts/fa-solid-900.woff2","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/webfonts/fa-regular-400.woff2"].forEach(o=>{Wt.queuePreload(o)}),["https://bing.img.run","https://source.unsplash.com","https://www.google.com","https://favicon.yandex.net","https://icons.duckduckgo.com"].forEach(o=>{const l=document.createElement("link");l.rel="preconnect",l.href=o,document.head.querySelector(`link[href="${o}"]`)||document.head.appendChild(l)}),()=>{}):void 0,[t]),{preloadFavicons:a=>{const r=a.map(o=>o.favicon);Wt.preloadImages(r)},preloadImage:a=>{Wt.queuePreload(a)},getPreloadStats:()=>Wt.getStats()}}function Dc({onAccept:t,onDecline:e,onCustomize:s}){const[n,a]=f.useState(!1),[r,o]=f.useState(!1);f.useEffect(()=>{if(!localStorage.getItem("cookie-consent")){const d=setTimeout(()=>{a(!0),o(!0)},2e3);return()=>clearTimeout(d)}},[]);const l=()=>{localStorage.setItem("cookie-consent","accepted"),localStorage.setItem("cookie-consent-date",new Date().toISOString()),o(!1),setTimeout(()=>{a(!1),t==null||t()},300),console.log(" Cookie")},u=()=>{localStorage.setItem("cookie-consent","declined"),localStorage.setItem("cookie-consent-date",new Date().toISOString()),o(!1);try{const h=["cookie-consent","cookie-consent-date"],d=[];for(let m=0;m<localStorage.length;m++){const p=localStorage.key(m);p&&!h.includes(p)&&d.push(p)}d.forEach(m=>localStorage.removeItem(m))}catch(h){console.error(":",h)}setTimeout(()=>{a(!1),e==null||e()},300),console.log(" Cookie")},c=()=>{s==null||s()};return n?i.jsx(kt,{children:r&&i.jsxs(i.Fragment,{children:[i.jsx(le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/20 z-[9998] pointer-events-none"}),i.jsxs(le.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",damping:25,stiffness:200},className:"fixed bottom-0 left-0 right-0 z-[9999] bg-white border-t border-gray-200 shadow-2xl",children:[i.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"flex-shrink-0 mt-1",children:i.jsx("i",{className:"fa-solid fa-cookie-bite text-amber-500 text-xl"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:" Cookie"}),i.jsxs("p",{className:"text-sm text-gray-600 leading-relaxed",children:["Cookie",i.jsx("br",{}),i.jsxs("span",{className:"inline-flex items-center gap-4 mt-1 text-xs",children:[i.jsx("span",{children:" "}),i.jsx("span",{children:" "}),i.jsx("span",{children:" "}),i.jsx("span",{children:" "})]})]}),i.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Cookie",i.jsx("button",{className:"text-blue-600 hover:text-blue-800 underline mx-1",onClick:()=>window.open("https://github.com/your-repo/privacy-policy","_blank"),children:""})]})]})]})}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[i.jsxs("button",{onClick:c,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx("i",{className:"fa-solid fa-cog mr-2"}),""]}),i.jsxs("button",{onClick:u,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx("i",{className:"fa-solid fa-times mr-2"}),""]}),i.jsxs("button",{onClick:l,className:"px-6 py-2 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:[i.jsx("i",{className:"fa-solid fa-check mr-2"}),""]})]})]})}),i.jsx("div",{className:"h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500"})]})]})}):null}function Pc(t){const e=f.useRef(t.length),s=t.length;return e.current!==s&&(e.current=s),e.current}function Bc(){Rc();const{websites:t,setWebsites:e}=Ta(),{currentUser:s}=Ie(),[n,a]=f.useState(!1),r=n&&(s==null?void 0:s.emailVerified),{cloudWebsites:o,cloudSettings:l,hasCloudData:u,mergeWithLocalData:c}=Ec(r);Oc(n);const{setCardOpacity:h,setSearchBarOpacity:d,setParallaxEnabled:m,setWallpaperResolution:p}=gt(),[x,D]=f.useState(!1),[w,E]=f.useState(!1),[q,$]=f.useState(!1);f.useEffect(()=>{const b=setTimeout(()=>{a(!0)},100);return()=>clearTimeout(b)},[]);const N=Pc(t);f.useEffect(()=>{if(r&&s&&s.emailVerified&&u&&o&&!w){const b=N,k=o.length;b>0&&k>0&&b!==k?D(!0):(k>0&&b===0&&e(o),E(!0))}},[r,s,u,o,N,w,e]),f.useEffect(()=>{r&&s&&s.emailVerified&&l&&(typeof l.cardOpacity=="number"&&h(l.cardOpacity),typeof l.searchBarOpacity=="number"&&d(l.searchBarOpacity),typeof l.parallaxEnabled=="boolean"&&m(l.parallaxEnabled),l.wallpaperResolution&&p(l.wallpaperResolution),l.theme&&localStorage.setItem("theme",l.theme))},[r,s,l,h,d,m,p]);const C=async b=>{if(!(!s||!o))try{let k=[];switch(b){case"cloud":k=o,e(k);break;case"local":k=t,await js(s,k);break;case"merge":k=c(t),e(k),await js(s,k);break}E(!0)}catch(k){console.error(" :",k)}};return i.jsxs(i.Fragment,{children:[i.jsx(Va,{children:i.jsx(Wa,{path:"/",element:i.jsx(Ic,{websites:t,setWebsites:e})})}),x&&o&&i.jsx(Tc,{isOpen:x,onClose:()=>{D(!1),E(!0)},localWebsites:t,cloudWebsites:o,onChoice:C}),i.jsx(Dc,{onAccept:()=>{console.log(" Cookie")},onDecline:()=>{console.log(" Cookie")},onCustomize:()=>{$(!0)}}),q&&i.jsx(Ia,{isOpen:q,onClose:()=>$(!1)})]})}function $c(){return i.jsx(oc,{children:i.jsx(fc,{children:i.jsx(mc,{children:i.jsx(tc,{children:i.jsx(Fa,{backend:Ua,children:i.jsx(Bc,{})})})})})})}const Lc=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",Mc=Lc?void 0:"/jiang_ai_web",Fc=({error:t})=>i.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100vh",background:"white",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"20px",fontFamily:"Arial, sans-serif"},children:[i.jsx("h1",{style:{color:"red",marginBottom:"20px"},children:""}),i.jsxs("pre",{style:{background:"#f5f5f5",padding:"20px",borderRadius:"8px",fontSize:"14px",maxWidth:"80%",overflow:"auto"},children:[t.message,`

`,t.stack]})]});try{const t=document.getElementById("root");if(!t)throw new Error('id"root"');Qs.createRoot(t).render(i.jsx(f.StrictMode,{children:i.jsxs(Za,{basename:Mc,children:[i.jsx($c,{}),i.jsx(Vr,{})]})}))}catch(t){console.error(" React:",t),Qs.createRoot(document.getElementById("root")).render(i.jsx(Fc,{error:t}))}
