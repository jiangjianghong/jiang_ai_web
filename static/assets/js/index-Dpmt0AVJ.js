var Hn=Object.defineProperty;var qn=(s,e,t)=>e in s?Hn(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var de=(s,e,t)=>qn(s,typeof e!="symbol"?e+"":e,t);import{j as r,m as ie,u as Kn,a as Qn,A as mt,D as Gn,H as Jn}from"./ui-vendor-Bc0nx1qi.js";import{R as y,a as Yn,r as h,b as Xn,c as ea,B as ta}from"./router-vendor-ojeZ8ZvP.js";import{a as sa}from"./react-vendor-BtP0CW_r.js";import{r as It,_ as Et,C as Tt,a as Ft,E as nn,o as na,F as an,L as aa,g as rn,i as ra,b as ia,v as oa,c as _s,d as la,e as ca,f as da,h as ua,j as fa,k as ha,l as ma,m as pa,s as ks,n as ga,G as xa,p as ya,q as va,t as ba,u as at,w as ds,x as Rt,y as us}from"./firebase-vendor-DV2vFSYp.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();var St={},Cs;function wa(){if(Cs)return St;Cs=1;var s=sa();return St.createRoot=s.createRoot,St.hydrateRoot=s.hydrateRoot,St}var Is=wa();function ja(s){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}const Na=s=>{switch(s){case"success":return ka;case"info":return Ia;case"warning":return Ca;case"error":return Ea;default:return null}},Sa=Array(12).fill(0),_a=({visible:s,className:e})=>y.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":s},y.createElement("div",{className:"sonner-spinner"},Sa.map((t,n)=>y.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),ka=y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},y.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Ca=y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},y.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Ia=y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Ea=y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Ta=y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},y.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),y.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Ra=()=>{const[s,e]=y.useState(document.hidden);return y.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),s};let Xt=1;class Aa{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:n,...a}=e,i=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Xt++,o=this.toasts.find(u=>u.id===i),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(u=>u.id===i?(this.publish({...u,...e,id:i,title:n}),{...u,...e,id:i,dismissible:l,title:n}):u):this.addToast({title:n,...a,dismissible:l,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const a=Promise.resolve(e instanceof Function?e():e);let i=n!==void 0,o;const l=a.then(async d=>{if(o=["resolve",d],y.isValidElement(d))i=!1,this.create({id:n,type:"default",message:d});else if(Oa(d)&&!d.ok){i=!1;const c=typeof t.error=="function"?await t.error(`HTTP error! status: ${d.status}`):t.error,m=typeof t.description=="function"?await t.description(`HTTP error! status: ${d.status}`):t.description,v=typeof c=="object"&&!y.isValidElement(c)?c:{message:c};this.create({id:n,type:"error",description:m,...v})}else if(d instanceof Error){i=!1;const c=typeof t.error=="function"?await t.error(d):t.error,m=typeof t.description=="function"?await t.description(d):t.description,v=typeof c=="object"&&!y.isValidElement(c)?c:{message:c};this.create({id:n,type:"error",description:m,...v})}else if(t.success!==void 0){i=!1;const c=typeof t.success=="function"?await t.success(d):t.success,m=typeof t.description=="function"?await t.description(d):t.description,v=typeof c=="object"&&!y.isValidElement(c)?c:{message:c};this.create({id:n,type:"success",description:m,...v})}}).catch(async d=>{if(o=["reject",d],t.error!==void 0){i=!1;const f=typeof t.error=="function"?await t.error(d):t.error,c=typeof t.description=="function"?await t.description(d):t.description,x=typeof f=="object"&&!y.isValidElement(f)?f:{message:f};this.create({id:n,type:"error",description:c,...x})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),t.finally==null||t.finally.call(t)}),u=()=>new Promise((d,f)=>l.then(()=>o[0]==="reject"?f(o[1]):d(o[1])).catch(f));return typeof n!="string"&&typeof n!="number"?{unwrap:u}:Object.assign(n,{unwrap:u})},this.custom=(e,t)=>{const n=(t==null?void 0:t.id)||Xt++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const me=new Aa,Da=(s,e)=>{const t=(e==null?void 0:e.id)||Xt++;return me.addToast({title:s,...e,id:t}),t},Oa=s=>s&&typeof s=="object"&&"ok"in s&&typeof s.ok=="boolean"&&"status"in s&&typeof s.status=="number",$a=Da,Pa=()=>me.toasts,Ba=()=>me.getActiveToasts();Object.assign($a,{success:me.success,info:me.info,warning:me.warning,error:me.error,custom:me.custom,message:me.message,promise:me.promise,dismiss:me.dismiss,loading:me.loading},{getHistory:Pa,getToasts:Ba});ja("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function _t(s){return s.label!==void 0}const Ma=3,La="24px",Fa="16px",Es=4e3,za=356,Ua=14,Va=45,Za=200;function Ce(...s){return s.filter(Boolean).join(" ")}function Wa(s){const[e,t]=s.split("-"),n=[];return e&&n.push(e),t&&n.push(t),n}const Ha=s=>{var e,t,n,a,i,o,l,u,d;const{invert:f,toast:c,unstyled:m,interacting:x,setHeights:v,visibleToasts:$,heights:k,index:R,toasts:ee,expanded:W,removeToast:N,defaultRichColors:j,closeButton:w,style:C,cancelButtonStyle:F,actionButtonStyle:U,className:q="",descriptionClassName:z="",duration:P,position:K,gap:se,expandByDefault:Y,classNames:S,icons:D,closeButtonAriaLabel:X="Close toast"}=s,[te,B]=y.useState(null),[T,O]=y.useState(null),[p,b]=y.useState(!1),[A,V]=y.useState(!1),[ne,ae]=y.useState(!1),[J,oe]=y.useState(!1),[Ee,Ge]=y.useState(!1),[yt,Fe]=y.useState(0),[ot,lt]=y.useState(0),De=y.useRef(c.duration||P||Es),ct=y.useRef(null),ge=y.useRef(null),Vt=R===0,vt=R+1<=$,ue=c.type,_e=c.dismissible!==!1,Zt=c.className||"",bt=c.descriptionClassName||"",Je=y.useMemo(()=>k.findIndex(Z=>Z.toastId===c.id)||0,[k,c.id]),wt=y.useMemo(()=>{var Z;return(Z=c.closeButton)!=null?Z:w},[c.closeButton,w]),ze=y.useMemo(()=>c.duration||P||Es,[c.duration,P]),Te=y.useRef(0),he=y.useRef(0),Ye=y.useRef(0),ke=y.useRef(null),[zn,Un]=K.split("-"),bs=y.useMemo(()=>k.reduce((Z,le,fe)=>fe>=Je?Z:Z+le.height,0),[k,Je]),ws=Ra(),Vn=c.invert||f,Wt=ue==="loading";he.current=y.useMemo(()=>Je*se+bs,[Je,bs]),y.useEffect(()=>{De.current=ze},[ze]),y.useEffect(()=>{b(!0)},[]),y.useEffect(()=>{const Z=ge.current;if(Z){const le=Z.getBoundingClientRect().height;return lt(le),v(fe=>[{toastId:c.id,height:le,position:c.position},...fe]),()=>v(fe=>fe.filter(xe=>xe.toastId!==c.id))}},[v,c.id]),y.useLayoutEffect(()=>{if(!p)return;const Z=ge.current,le=Z.style.height;Z.style.height="auto";const fe=Z.getBoundingClientRect().height;Z.style.height=le,lt(fe),v(xe=>xe.find(ce=>ce.toastId===c.id)?xe.map(ce=>ce.toastId===c.id?{...ce,height:fe}:ce):[{toastId:c.id,height:fe,position:c.position},...xe])},[p,c.title,c.description,v,c.id,c.jsx,c.action,c.cancel]);const Oe=y.useCallback(()=>{V(!0),Fe(he.current),v(Z=>Z.filter(le=>le.toastId!==c.id)),setTimeout(()=>{N(c)},Za)},[c,N,v,he]);y.useEffect(()=>{if(c.promise&&ue==="loading"||c.duration===1/0||c.type==="loading")return;let Z;return W||x||ws?(()=>{if(Ye.current<Te.current){const xe=new Date().getTime()-Te.current;De.current=De.current-xe}Ye.current=new Date().getTime()})():(()=>{De.current!==1/0&&(Te.current=new Date().getTime(),Z=setTimeout(()=>{c.onAutoClose==null||c.onAutoClose.call(c,c),Oe()},De.current))})(),()=>clearTimeout(Z)},[W,x,c,ue,ws,Oe]),y.useEffect(()=>{c.delete&&(Oe(),c.onDismiss==null||c.onDismiss.call(c,c))},[Oe,c.delete]);function Zn(){var Z;if(D!=null&&D.loading){var le;return y.createElement("div",{className:Ce(S==null?void 0:S.loader,c==null||(le=c.classNames)==null?void 0:le.loader,"sonner-loader"),"data-visible":ue==="loading"},D.loading)}return y.createElement(_a,{className:Ce(S==null?void 0:S.loader,c==null||(Z=c.classNames)==null?void 0:Z.loader),visible:ue==="loading"})}const Wn=c.icon||(D==null?void 0:D[ue])||Na(ue);var js,Ns;return y.createElement("li",{tabIndex:0,ref:ge,className:Ce(q,Zt,S==null?void 0:S.toast,c==null||(e=c.classNames)==null?void 0:e.toast,S==null?void 0:S.default,S==null?void 0:S[ue],c==null||(t=c.classNames)==null?void 0:t[ue]),"data-sonner-toast":"","data-rich-colors":(js=c.richColors)!=null?js:j,"data-styled":!(c.jsx||c.unstyled||m),"data-mounted":p,"data-promise":!!c.promise,"data-swiped":Ee,"data-removed":A,"data-visible":vt,"data-y-position":zn,"data-x-position":Un,"data-index":R,"data-front":Vt,"data-swiping":ne,"data-dismissible":_e,"data-type":ue,"data-invert":Vn,"data-swipe-out":J,"data-swipe-direction":T,"data-expanded":!!(W||Y&&p),style:{"--index":R,"--toasts-before":R,"--z-index":ee.length-R,"--offset":`${A?yt:he.current}px`,"--initial-height":Y?"auto":`${ot}px`,...C,...c.style},onDragEnd:()=>{ae(!1),B(null),ke.current=null},onPointerDown:Z=>{Wt||!_e||(ct.current=new Date,Fe(he.current),Z.target.setPointerCapture(Z.pointerId),Z.target.tagName!=="BUTTON"&&(ae(!0),ke.current={x:Z.clientX,y:Z.clientY}))},onPointerUp:()=>{var Z,le,fe;if(J||!_e)return;ke.current=null;const xe=Number(((Z=ge.current)==null?void 0:Z.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),jt=Number(((le=ge.current)==null?void 0:le.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ce=new Date().getTime()-((fe=ct.current)==null?void 0:fe.getTime()),be=te==="x"?xe:jt,Nt=Math.abs(be)/ce;if(Math.abs(be)>=Va||Nt>.11){Fe(he.current),c.onDismiss==null||c.onDismiss.call(c,c),O(te==="x"?xe>0?"right":"left":jt>0?"down":"up"),Oe(),oe(!0);return}else{var je,Ne;(je=ge.current)==null||je.style.setProperty("--swipe-amount-x","0px"),(Ne=ge.current)==null||Ne.style.setProperty("--swipe-amount-y","0px")}Ge(!1),ae(!1),B(null)},onPointerMove:Z=>{var le,fe,xe;if(!ke.current||!_e||((le=window.getSelection())==null?void 0:le.toString().length)>0)return;const ce=Z.clientY-ke.current.y,be=Z.clientX-ke.current.x;var Nt;const je=(Nt=s.swipeDirections)!=null?Nt:Wa(K);!te&&(Math.abs(be)>1||Math.abs(ce)>1)&&B(Math.abs(be)>Math.abs(ce)?"x":"y");let Ne={x:0,y:0};const Ss=Ue=>1/(1.5+Math.abs(Ue)/20);if(te==="y"){if(je.includes("top")||je.includes("bottom"))if(je.includes("top")&&ce<0||je.includes("bottom")&&ce>0)Ne.y=ce;else{const Ue=ce*Ss(ce);Ne.y=Math.abs(Ue)<Math.abs(ce)?Ue:ce}}else if(te==="x"&&(je.includes("left")||je.includes("right")))if(je.includes("left")&&be<0||je.includes("right")&&be>0)Ne.x=be;else{const Ue=be*Ss(be);Ne.x=Math.abs(Ue)<Math.abs(be)?Ue:be}(Math.abs(Ne.x)>0||Math.abs(Ne.y)>0)&&Ge(!0),(fe=ge.current)==null||fe.style.setProperty("--swipe-amount-x",`${Ne.x}px`),(xe=ge.current)==null||xe.style.setProperty("--swipe-amount-y",`${Ne.y}px`)}},wt&&!c.jsx&&ue!=="loading"?y.createElement("button",{"aria-label":X,"data-disabled":Wt,"data-close-button":!0,onClick:Wt||!_e?()=>{}:()=>{Oe(),c.onDismiss==null||c.onDismiss.call(c,c)},className:Ce(S==null?void 0:S.closeButton,c==null||(n=c.classNames)==null?void 0:n.closeButton)},(Ns=D==null?void 0:D.close)!=null?Ns:Ta):null,(ue||c.icon||c.promise)&&c.icon!==null&&((D==null?void 0:D[ue])!==null||c.icon)?y.createElement("div",{"data-icon":"",className:Ce(S==null?void 0:S.icon,c==null||(a=c.classNames)==null?void 0:a.icon)},c.promise||c.type==="loading"&&!c.icon?c.icon||Zn():null,c.type!=="loading"?Wn:null):null,y.createElement("div",{"data-content":"",className:Ce(S==null?void 0:S.content,c==null||(i=c.classNames)==null?void 0:i.content)},y.createElement("div",{"data-title":"",className:Ce(S==null?void 0:S.title,c==null||(o=c.classNames)==null?void 0:o.title)},c.jsx?c.jsx:typeof c.title=="function"?c.title():c.title),c.description?y.createElement("div",{"data-description":"",className:Ce(z,bt,S==null?void 0:S.description,c==null||(l=c.classNames)==null?void 0:l.description)},typeof c.description=="function"?c.description():c.description):null),y.isValidElement(c.cancel)?c.cancel:c.cancel&&_t(c.cancel)?y.createElement("button",{"data-button":!0,"data-cancel":!0,style:c.cancelButtonStyle||F,onClick:Z=>{_t(c.cancel)&&_e&&(c.cancel.onClick==null||c.cancel.onClick.call(c.cancel,Z),Oe())},className:Ce(S==null?void 0:S.cancelButton,c==null||(u=c.classNames)==null?void 0:u.cancelButton)},c.cancel.label):null,y.isValidElement(c.action)?c.action:c.action&&_t(c.action)?y.createElement("button",{"data-button":!0,"data-action":!0,style:c.actionButtonStyle||U,onClick:Z=>{_t(c.action)&&(c.action.onClick==null||c.action.onClick.call(c.action,Z),!Z.defaultPrevented&&Oe())},className:Ce(S==null?void 0:S.actionButton,c==null||(d=c.classNames)==null?void 0:d.actionButton)},c.action.label):null)};function Ts(){if(typeof window>"u"||typeof document>"u")return"ltr";const s=document.documentElement.getAttribute("dir");return s==="auto"||!s?window.getComputedStyle(document.documentElement).direction:s}function qa(s,e){const t={};return[s,e].forEach((n,a)=>{const i=a===1,o=i?"--mobile-offset":"--offset",l=i?Fa:La;function u(d){["top","right","bottom","left"].forEach(f=>{t[`${o}-${f}`]=typeof d=="number"?`${d}px`:d})}typeof n=="number"||typeof n=="string"?u(n):typeof n=="object"?["top","right","bottom","left"].forEach(d=>{n[d]===void 0?t[`${o}-${d}`]=l:t[`${o}-${d}`]=typeof n[d]=="number"?`${n[d]}px`:n[d]}):u(l)}),t}const Ka=y.forwardRef(function(e,t){const{invert:n,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:l,className:u,offset:d,mobileOffset:f,theme:c="light",richColors:m,duration:x,style:v,visibleToasts:$=Ma,toastOptions:k,dir:R=Ts(),gap:ee=Ua,icons:W,containerAriaLabel:N="Notifications"}=e,[j,w]=y.useState([]),C=y.useMemo(()=>Array.from(new Set([a].concat(j.filter(T=>T.position).map(T=>T.position)))),[j,a]),[F,U]=y.useState([]),[q,z]=y.useState(!1),[P,K]=y.useState(!1),[se,Y]=y.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),S=y.useRef(null),D=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),X=y.useRef(null),te=y.useRef(!1),B=y.useCallback(T=>{w(O=>{var p;return(p=O.find(b=>b.id===T.id))!=null&&p.delete||me.dismiss(T.id),O.filter(({id:b})=>b!==T.id)})},[]);return y.useEffect(()=>me.subscribe(T=>{if(T.dismiss){requestAnimationFrame(()=>{w(O=>O.map(p=>p.id===T.id?{...p,delete:!0}:p))});return}setTimeout(()=>{Yn.flushSync(()=>{w(O=>{const p=O.findIndex(b=>b.id===T.id);return p!==-1?[...O.slice(0,p),{...O[p],...T},...O.slice(p+1)]:[T,...O]})})})}),[j]),y.useEffect(()=>{if(c!=="system"){Y(c);return}if(c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Y("dark"):Y("light")),typeof window>"u")return;const T=window.matchMedia("(prefers-color-scheme: dark)");try{T.addEventListener("change",({matches:O})=>{Y(O?"dark":"light")})}catch{T.addListener(({matches:p})=>{try{Y(p?"dark":"light")}catch(b){console.error(b)}})}},[c]),y.useEffect(()=>{j.length<=1&&z(!1)},[j]),y.useEffect(()=>{const T=O=>{var p;if(i.every(V=>O[V]||O.code===V)){var A;z(!0),(A=S.current)==null||A.focus()}O.code==="Escape"&&(document.activeElement===S.current||(p=S.current)!=null&&p.contains(document.activeElement))&&z(!1)};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[i]),y.useEffect(()=>{if(S.current)return()=>{X.current&&(X.current.focus({preventScroll:!0}),X.current=null,te.current=!1)}},[S.current]),y.createElement("section",{ref:t,"aria-label":`${N} ${D}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((T,O)=>{var p;const[b,A]=T.split("-");return j.length?y.createElement("ol",{key:T,dir:R==="auto"?Ts():R,tabIndex:-1,ref:S,className:u,"data-sonner-toaster":!0,"data-sonner-theme":se,"data-y-position":b,"data-x-position":A,style:{"--front-toast-height":`${((p=F[0])==null?void 0:p.height)||0}px`,"--width":`${za}px`,"--gap":`${ee}px`,...v,...qa(d,f)},onBlur:V=>{te.current&&!V.currentTarget.contains(V.relatedTarget)&&(te.current=!1,X.current&&(X.current.focus({preventScroll:!0}),X.current=null))},onFocus:V=>{V.target instanceof HTMLElement&&V.target.dataset.dismissible==="false"||te.current||(te.current=!0,X.current=V.relatedTarget)},onMouseEnter:()=>z(!0),onMouseMove:()=>z(!0),onMouseLeave:()=>{P||z(!1)},onDragEnd:()=>z(!1),onPointerDown:V=>{V.target instanceof HTMLElement&&V.target.dataset.dismissible==="false"||K(!0)},onPointerUp:()=>K(!1)},j.filter(V=>!V.position&&O===0||V.position===T).map((V,ne)=>{var ae,J;return y.createElement(Ha,{key:V.id,icons:W,index:ne,toast:V,defaultRichColors:m,duration:(ae=k==null?void 0:k.duration)!=null?ae:x,className:k==null?void 0:k.className,descriptionClassName:k==null?void 0:k.descriptionClassName,invert:n,visibleToasts:$,closeButton:(J=k==null?void 0:k.closeButton)!=null?J:l,interacting:P,position:T,style:k==null?void 0:k.style,unstyled:k==null?void 0:k.unstyled,classNames:k==null?void 0:k.classNames,cancelButtonStyle:k==null?void 0:k.cancelButtonStyle,actionButtonStyle:k==null?void 0:k.actionButtonStyle,closeButtonAriaLabel:k==null?void 0:k.closeButtonAriaLabel,removeToast:B,toasts:j.filter(oe=>oe.position==V.position),heights:F.filter(oe=>oe.position==V.position),setHeights:U,expandByDefault:o,gap:ee,expanded:q,swipeDirections:e.swipeDirections})})):null}))});var G;(function(s){s.assertEqual=a=>{};function e(a){}s.assertIs=e;function t(a){throw new Error}s.assertNever=t,s.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},s.getValidEnumValues=a=>{const i=s.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of i)o[l]=a[l];return s.objectValues(o)},s.objectValues=a=>s.objectKeys(a).map(function(i){return a[i]}),s.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},s.find=(a,i)=>{for(const o of a)if(i(o))return o},s.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}s.joinValues=n,s.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(G||(G={}));var Rs;(function(s){s.mergeShapes=(e,t)=>({...e,...t})})(Rs||(Rs={}));const I=G.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),$e=s=>{switch(typeof s){case"undefined":return I.undefined;case"string":return I.string;case"number":return Number.isNaN(s)?I.nan:I.number;case"boolean":return I.boolean;case"function":return I.function;case"bigint":return I.bigint;case"symbol":return I.symbol;case"object":return Array.isArray(s)?I.array:s===null?I.null:s.then&&typeof s.then=="function"&&s.catch&&typeof s.catch=="function"?I.promise:typeof Map<"u"&&s instanceof Map?I.map:typeof Set<"u"&&s instanceof Set?I.set:typeof Date<"u"&&s instanceof Date?I.date:I.object;default:return I.unknown}},g=G.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ae extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(i){return i.message},n={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)n._errors.push(t(o));else{let l=n,u=0;for(;u<o.path.length;){const d=o.path[u];u===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(t(o))):l[d]=l[d]||{_errors:[]},l=l[d],u++}}};return a(this),n}static assert(e){if(!(e instanceof Ae))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,G.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];t[i]=t[i]||[],t[i].push(e(a))}else n.push(e(a));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}Ae.create=s=>new Ae(s);const es=(s,e)=>{let t;switch(s.code){case g.invalid_type:s.received===I.undefined?t="Required":t=`Expected ${s.expected}, received ${s.received}`;break;case g.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(s.expected,G.jsonStringifyReplacer)}`;break;case g.unrecognized_keys:t=`Unrecognized key(s) in object: ${G.joinValues(s.keys,", ")}`;break;case g.invalid_union:t="Invalid input";break;case g.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${G.joinValues(s.options)}`;break;case g.invalid_enum_value:t=`Invalid enum value. Expected ${G.joinValues(s.options)}, received '${s.received}'`;break;case g.invalid_arguments:t="Invalid function arguments";break;case g.invalid_return_type:t="Invalid function return type";break;case g.invalid_date:t="Invalid date";break;case g.invalid_string:typeof s.validation=="object"?"includes"in s.validation?(t=`Invalid input: must include "${s.validation.includes}"`,typeof s.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${s.validation.position}`)):"startsWith"in s.validation?t=`Invalid input: must start with "${s.validation.startsWith}"`:"endsWith"in s.validation?t=`Invalid input: must end with "${s.validation.endsWith}"`:G.assertNever(s.validation):s.validation!=="regex"?t=`Invalid ${s.validation}`:t="Invalid";break;case g.too_small:s.type==="array"?t=`Array must contain ${s.exact?"exactly":s.inclusive?"at least":"more than"} ${s.minimum} element(s)`:s.type==="string"?t=`String must contain ${s.exact?"exactly":s.inclusive?"at least":"over"} ${s.minimum} character(s)`:s.type==="number"?t=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="bigint"?t=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="date"?t=`Date must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(s.minimum))}`:t="Invalid input";break;case g.too_big:s.type==="array"?t=`Array must contain ${s.exact?"exactly":s.inclusive?"at most":"less than"} ${s.maximum} element(s)`:s.type==="string"?t=`String must contain ${s.exact?"exactly":s.inclusive?"at most":"under"} ${s.maximum} character(s)`:s.type==="number"?t=`Number must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="bigint"?t=`BigInt must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="date"?t=`Date must be ${s.exact?"exactly":s.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(s.maximum))}`:t="Invalid input";break;case g.custom:t="Invalid input";break;case g.invalid_intersection_types:t="Intersection results could not be merged";break;case g.not_multiple_of:t=`Number must be a multiple of ${s.multipleOf}`;break;case g.not_finite:t="Number must be finite";break;default:t=e.defaultError,G.assertNever(s)}return{message:t}};let Qa=es;function Ga(){return Qa}const Ja=s=>{const{data:e,path:t,errorMaps:n,issueData:a}=s,i=[...t,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let l="";const u=n.filter(d=>!!d).slice().reverse();for(const d of u)l=d(o,{data:e,defaultError:l}).message;return{...a,path:i,message:l}};function _(s,e){const t=Ga(),n=Ja({issueData:e,data:s.data,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,t,t===es?void 0:es].filter(a=>!!a)});s.common.issues.push(n)}class ve{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const a of t){if(a.status==="aborted")return M;a.status==="dirty"&&e.dirty(),n.push(a.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const a of t){const i=await a.key,o=await a.value;n.push({key:i,value:o})}return ve.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const a of t){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return M;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}}const M=Object.freeze({status:"aborted"}),ft=s=>({status:"dirty",value:s}),we=s=>({status:"valid",value:s}),As=s=>s.status==="aborted",Ds=s=>s.status==="dirty",et=s=>s.status==="valid",At=s=>typeof Promise<"u"&&s instanceof Promise;var E;(function(s){s.errToObj=e=>typeof e=="string"?{message:e}:e||{},s.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(E||(E={}));class Me{constructor(e,t,n,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Os=(s,e)=>{if(et(e))return{success:!0,data:e.value};if(!s.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Ae(s.common.issues);return this._error=t,this._error}}};function H(s){if(!s)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:a}=s;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(o,l)=>{const{message:u}=s;return o.code==="invalid_enum_value"?{message:u??l.defaultError}:typeof l.data>"u"?{message:u??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:u??t??l.defaultError}},description:a}}class Q{get description(){return this._def.description}_getType(e){return $e(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:$e(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ve,ctx:{common:e.parent.common,data:e.data,parsedType:$e(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(At(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){const n={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$e(e)},a=this._parseSync({data:e,path:n.path,parent:n});return Os(n,a)}"~validate"(e){var n,a;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$e(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:t});return et(i)?{value:i.value}:{issues:t.common.issues}}catch(i){(a=(n=i==null?void 0:i.message)==null?void 0:n.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(i=>et(i)?{value:i.value}:{issues:t.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$e(e)},a=this._parse({data:e,path:n.path,parent:n}),i=await(At(a)?a:Promise.resolve(a));return Os(n,i)}refine(e,t){const n=a=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(a):t;return this._refinement((a,i)=>{const o=e(a),l=()=>i.addIssue({code:g.custom,...n(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,t){return this._refinement((n,a)=>e(n)?!0:(a.addIssue(typeof t=="function"?t(n,a):t),!1))}_refinement(e){return new st({schema:this,typeName:L.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Be.create(this,this._def)}nullable(){return nt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ie.create(this)}promise(){return Pt.create(this,this._def)}or(e){return Ot.create([this,e],this._def)}and(e){return $t.create(this,e,this._def)}transform(e){return new st({...H(this._def),schema:this,typeName:L.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new ss({...H(this._def),innerType:this,defaultValue:t,typeName:L.ZodDefault})}brand(){return new br({typeName:L.ZodBranded,type:this,...H(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new ns({...H(this._def),innerType:this,catchValue:t,typeName:L.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return fs.create(this,e)}readonly(){return as.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Ya=/^c[^\s-]{8,}$/i,Xa=/^[0-9a-z]+$/,er=/^[0-9A-HJKMNP-TV-Z]{26}$/i,tr=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,sr=/^[a-z0-9_-]{21}$/i,nr=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ar=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,rr=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ir="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ht;const or=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,lr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,cr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,dr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ur=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,fr=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,on="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",hr=new RegExp(`^${on}$`);function ln(s){let e="[0-5]\\d";s.precision?e=`${e}\\.\\d{${s.precision}}`:s.precision==null&&(e=`${e}(\\.\\d+)?`);const t=s.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function mr(s){return new RegExp(`^${ln(s)}$`)}function pr(s){let e=`${on}T${ln(s)}`;const t=[];return t.push(s.local?"Z?":"Z"),s.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function gr(s,e){return!!((e==="v4"||!e)&&or.test(s)||(e==="v6"||!e)&&cr.test(s))}function xr(s,e){if(!nr.test(s))return!1;try{const[t]=s.split(".");if(!t)return!1;const n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||e&&a.alg!==e)}catch{return!1}}function yr(s,e){return!!((e==="v4"||!e)&&lr.test(s)||(e==="v6"||!e)&&dr.test(s))}class Pe extends Q{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==I.string){const i=this._getOrReturnCtx(e);return _(i,{code:g.invalid_type,expected:I.string,received:i.parsedType}),M}const n=new ve;let a;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(a=this._getOrReturnCtx(e,a),_(a,{code:g.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(a=this._getOrReturnCtx(e,a),_(a,{code:g.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,l=e.data.length<i.value;(o||l)&&(a=this._getOrReturnCtx(e,a),o?_(a,{code:g.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&_(a,{code:g.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")rr.test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{validation:"email",code:g.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Ht||(Ht=new RegExp(ir,"u")),Ht.test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{validation:"emoji",code:g.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")tr.test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{validation:"uuid",code:g.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")sr.test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{validation:"nanoid",code:g.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")Ya.test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{validation:"cuid",code:g.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")Xa.test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{validation:"cuid2",code:g.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")er.test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{validation:"ulid",code:g.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),_(a,{validation:"url",code:g.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{validation:"regex",code:g.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(e,a),_(a,{code:g.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(a=this._getOrReturnCtx(e,a),_(a,{code:g.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(a=this._getOrReturnCtx(e,a),_(a,{code:g.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?pr(i).test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{code:g.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?hr.test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{code:g.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?mr(i).test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{code:g.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?ar.test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{validation:"duration",code:g.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?gr(e.data,i.version)||(a=this._getOrReturnCtx(e,a),_(a,{validation:"ip",code:g.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?xr(e.data,i.alg)||(a=this._getOrReturnCtx(e,a),_(a,{validation:"jwt",code:g.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?yr(e.data,i.version)||(a=this._getOrReturnCtx(e,a),_(a,{validation:"cidr",code:g.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?ur.test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{validation:"base64",code:g.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?fr.test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{validation:"base64url",code:g.invalid_string,message:i.message}),n.dirty()):G.assertNever(i);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(a=>e.test(a),{validation:t,code:g.invalid_string,...E.errToObj(n)})}_addCheck(e){return new Pe({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...E.errToObj(e)})}url(e){return this._addCheck({kind:"url",...E.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...E.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...E.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...E.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...E.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...E.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...E.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...E.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...E.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...E.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...E.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...E.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...E.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...E.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...E.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...E.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...E.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...E.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...E.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...E.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...E.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...E.errToObj(t)})}nonempty(e){return this.min(1,E.errToObj(e))}trim(){return new Pe({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Pe({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Pe({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Pe.create=s=>new Pe({checks:[],typeName:L.ZodString,coerce:(s==null?void 0:s.coerce)??!1,...H(s)});function vr(s,e){const t=(s.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,a=t>n?t:n,i=Number.parseInt(s.toFixed(a).replace(".","")),o=Number.parseInt(e.toFixed(a).replace(".",""));return i%o/10**a}class pt extends Q{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==I.number){const i=this._getOrReturnCtx(e);return _(i,{code:g.invalid_type,expected:I.number,received:i.parsedType}),M}let n;const a=new ve;for(const i of this._def.checks)i.kind==="int"?G.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{code:g.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),_(n,{code:g.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),_(n,{code:g.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?vr(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),_(n,{code:g.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{code:g.not_finite,message:i.message}),a.dirty()):G.assertNever(i);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,E.toString(t))}gt(e,t){return this.setLimit("min",e,!1,E.toString(t))}lte(e,t){return this.setLimit("max",e,!0,E.toString(t))}lt(e,t){return this.setLimit("max",e,!1,E.toString(t))}setLimit(e,t,n,a){return new pt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:E.toString(a)}]})}_addCheck(e){return new pt({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:E.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:E.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:E.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:E.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:E.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:E.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:E.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:E.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:E.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&G.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}pt.create=s=>new pt({checks:[],typeName:L.ZodNumber,coerce:(s==null?void 0:s.coerce)||!1,...H(s)});class gt extends Q{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==I.bigint)return this._getInvalidInput(e);let n;const a=new ve;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),_(n,{code:g.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),_(n,{code:g.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),_(n,{code:g.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):G.assertNever(i);return{status:a.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return _(t,{code:g.invalid_type,expected:I.bigint,received:t.parsedType}),M}gte(e,t){return this.setLimit("min",e,!0,E.toString(t))}gt(e,t){return this.setLimit("min",e,!1,E.toString(t))}lte(e,t){return this.setLimit("max",e,!0,E.toString(t))}lt(e,t){return this.setLimit("max",e,!1,E.toString(t))}setLimit(e,t,n,a){return new gt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:E.toString(a)}]})}_addCheck(e){return new gt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:E.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:E.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:E.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:E.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:E.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}gt.create=s=>new gt({checks:[],typeName:L.ZodBigInt,coerce:(s==null?void 0:s.coerce)??!1,...H(s)});class $s extends Q{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==I.boolean){const n=this._getOrReturnCtx(e);return _(n,{code:g.invalid_type,expected:I.boolean,received:n.parsedType}),M}return we(e.data)}}$s.create=s=>new $s({typeName:L.ZodBoolean,coerce:(s==null?void 0:s.coerce)||!1,...H(s)});class Dt extends Q{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==I.date){const i=this._getOrReturnCtx(e);return _(i,{code:g.invalid_type,expected:I.date,received:i.parsedType}),M}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return _(i,{code:g.invalid_date}),M}const n=new ve;let a;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(a=this._getOrReturnCtx(e,a),_(a,{code:g.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(a=this._getOrReturnCtx(e,a),_(a,{code:g.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):G.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Dt({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:E.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:E.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Dt.create=s=>new Dt({checks:[],coerce:(s==null?void 0:s.coerce)||!1,typeName:L.ZodDate,...H(s)});class Ps extends Q{_parse(e){if(this._getType(e)!==I.symbol){const n=this._getOrReturnCtx(e);return _(n,{code:g.invalid_type,expected:I.symbol,received:n.parsedType}),M}return we(e.data)}}Ps.create=s=>new Ps({typeName:L.ZodSymbol,...H(s)});class Bs extends Q{_parse(e){if(this._getType(e)!==I.undefined){const n=this._getOrReturnCtx(e);return _(n,{code:g.invalid_type,expected:I.undefined,received:n.parsedType}),M}return we(e.data)}}Bs.create=s=>new Bs({typeName:L.ZodUndefined,...H(s)});class Ms extends Q{_parse(e){if(this._getType(e)!==I.null){const n=this._getOrReturnCtx(e);return _(n,{code:g.invalid_type,expected:I.null,received:n.parsedType}),M}return we(e.data)}}Ms.create=s=>new Ms({typeName:L.ZodNull,...H(s)});class Ls extends Q{constructor(){super(...arguments),this._any=!0}_parse(e){return we(e.data)}}Ls.create=s=>new Ls({typeName:L.ZodAny,...H(s)});class Fs extends Q{constructor(){super(...arguments),this._unknown=!0}_parse(e){return we(e.data)}}Fs.create=s=>new Fs({typeName:L.ZodUnknown,...H(s)});class Le extends Q{_parse(e){const t=this._getOrReturnCtx(e);return _(t,{code:g.invalid_type,expected:I.never,received:t.parsedType}),M}}Le.create=s=>new Le({typeName:L.ZodNever,...H(s)});class zs extends Q{_parse(e){if(this._getType(e)!==I.undefined){const n=this._getOrReturnCtx(e);return _(n,{code:g.invalid_type,expected:I.void,received:n.parsedType}),M}return we(e.data)}}zs.create=s=>new zs({typeName:L.ZodVoid,...H(s)});class Ie extends Q{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),a=this._def;if(t.parsedType!==I.array)return _(t,{code:g.invalid_type,expected:I.array,received:t.parsedType}),M;if(a.exactLength!==null){const o=t.data.length>a.exactLength.value,l=t.data.length<a.exactLength.value;(o||l)&&(_(t,{code:o?g.too_big:g.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&t.data.length<a.minLength.value&&(_(t,{code:g.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&t.data.length>a.maxLength.value&&(_(t,{code:g.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((o,l)=>a.type._parseAsync(new Me(t,o,t.path,l)))).then(o=>ve.mergeArray(n,o));const i=[...t.data].map((o,l)=>a.type._parseSync(new Me(t,o,t.path,l)));return ve.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new Ie({...this._def,minLength:{value:e,message:E.toString(t)}})}max(e,t){return new Ie({...this._def,maxLength:{value:e,message:E.toString(t)}})}length(e,t){return new Ie({...this._def,exactLength:{value:e,message:E.toString(t)}})}nonempty(e){return this.min(1,e)}}Ie.create=(s,e)=>new Ie({type:s,minLength:null,maxLength:null,exactLength:null,typeName:L.ZodArray,...H(e)});function Xe(s){if(s instanceof re){const e={};for(const t in s.shape){const n=s.shape[t];e[t]=Be.create(Xe(n))}return new re({...s._def,shape:()=>e})}else return s instanceof Ie?new Ie({...s._def,type:Xe(s.element)}):s instanceof Be?Be.create(Xe(s.unwrap())):s instanceof nt?nt.create(Xe(s.unwrap())):s instanceof qe?qe.create(s.items.map(e=>Xe(e))):s}class re extends Q{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=G.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==I.object){const d=this._getOrReturnCtx(e);return _(d,{code:g.invalid_type,expected:I.object,received:d.parsedType}),M}const{status:n,ctx:a}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Le&&this._def.unknownKeys==="strip"))for(const d in a.data)o.includes(d)||l.push(d);const u=[];for(const d of o){const f=i[d],c=a.data[d];u.push({key:{status:"valid",value:d},value:f._parse(new Me(a,c,a.path,d)),alwaysSet:d in a.data})}if(this._def.catchall instanceof Le){const d=this._def.unknownKeys;if(d==="passthrough")for(const f of l)u.push({key:{status:"valid",value:f},value:{status:"valid",value:a.data[f]}});else if(d==="strict")l.length>0&&(_(a,{code:g.unrecognized_keys,keys:l}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const f of l){const c=a.data[f];u.push({key:{status:"valid",value:f},value:d._parse(new Me(a,c,a.path,f)),alwaysSet:f in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const d=[];for(const f of u){const c=await f.key,m=await f.value;d.push({key:c,value:m,alwaysSet:f.alwaysSet})}return d}).then(d=>ve.mergeObjectSync(n,d)):ve.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return E.errToObj,new re({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var i,o;const a=((o=(i=this._def).errorMap)==null?void 0:o.call(i,t,n).message)??n.defaultError;return t.code==="unrecognized_keys"?{message:E.errToObj(e).message??a}:{message:a}}}:{}})}strip(){return new re({...this._def,unknownKeys:"strip"})}passthrough(){return new re({...this._def,unknownKeys:"passthrough"})}extend(e){return new re({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new re({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:L.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new re({...this._def,catchall:e})}pick(e){const t={};for(const n of G.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new re({...this._def,shape:()=>t})}omit(e){const t={};for(const n of G.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new re({...this._def,shape:()=>t})}deepPartial(){return Xe(this)}partial(e){const t={};for(const n of G.objectKeys(this.shape)){const a=this.shape[n];e&&!e[n]?t[n]=a:t[n]=a.optional()}return new re({...this._def,shape:()=>t})}required(e){const t={};for(const n of G.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Be;)i=i._def.innerType;t[n]=i}return new re({...this._def,shape:()=>t})}keyof(){return cn(G.objectKeys(this.shape))}}re.create=(s,e)=>new re({shape:()=>s,unknownKeys:"strip",catchall:Le.create(),typeName:L.ZodObject,...H(e)});re.strictCreate=(s,e)=>new re({shape:()=>s,unknownKeys:"strict",catchall:Le.create(),typeName:L.ZodObject,...H(e)});re.lazycreate=(s,e)=>new re({shape:s,unknownKeys:"strip",catchall:Le.create(),typeName:L.ZodObject,...H(e)});class Ot extends Q{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function a(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return t.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new Ae(l.ctx.common.issues));return _(t,{code:g.invalid_union,unionErrors:o}),M}if(t.common.async)return Promise.all(n.map(async i=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const u of n){const d={...t,common:{...t.common,issues:[]},parent:null},f=u._parseSync({data:t.data,path:t.path,parent:d});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(u=>new Ae(u));return _(t,{code:g.invalid_union,unionErrors:l}),M}}get options(){return this._def.options}}Ot.create=(s,e)=>new Ot({options:s,typeName:L.ZodUnion,...H(e)});function ts(s,e){const t=$e(s),n=$e(e);if(s===e)return{valid:!0,data:s};if(t===I.object&&n===I.object){const a=G.objectKeys(e),i=G.objectKeys(s).filter(l=>a.indexOf(l)!==-1),o={...s,...e};for(const l of i){const u=ts(s[l],e[l]);if(!u.valid)return{valid:!1};o[l]=u.data}return{valid:!0,data:o}}else if(t===I.array&&n===I.array){if(s.length!==e.length)return{valid:!1};const a=[];for(let i=0;i<s.length;i++){const o=s[i],l=e[i],u=ts(o,l);if(!u.valid)return{valid:!1};a.push(u.data)}return{valid:!0,data:a}}else return t===I.date&&n===I.date&&+s==+e?{valid:!0,data:s}:{valid:!1}}class $t extends Q{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=(i,o)=>{if(As(i)||As(o))return M;const l=ts(i.value,o.value);return l.valid?((Ds(i)||Ds(o))&&t.dirty(),{status:t.value,value:l.data}):(_(n,{code:g.invalid_intersection_types}),M)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}$t.create=(s,e,t)=>new $t({left:s,right:e,typeName:L.ZodIntersection,...H(t)});class qe extends Q{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==I.array)return _(n,{code:g.invalid_type,expected:I.array,received:n.parsedType}),M;if(n.data.length<this._def.items.length)return _(n,{code:g.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),M;!this._def.rest&&n.data.length>this._def.items.length&&(_(n,{code:g.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...n.data].map((o,l)=>{const u=this._def.items[l]||this._def.rest;return u?u._parse(new Me(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>ve.mergeArray(t,o)):ve.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new qe({...this._def,rest:e})}}qe.create=(s,e)=>{if(!Array.isArray(s))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new qe({items:s,typeName:L.ZodTuple,rest:null,...H(e)})};class Us extends Q{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==I.map)return _(n,{code:g.invalid_type,expected:I.map,received:n.parsedType}),M;const a=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([l,u],d)=>({key:a._parse(new Me(n,l,n.path,[d,"key"])),value:i._parse(new Me(n,u,n.path,[d,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const u of o){const d=await u.key,f=await u.value;if(d.status==="aborted"||f.status==="aborted")return M;(d.status==="dirty"||f.status==="dirty")&&t.dirty(),l.set(d.value,f.value)}return{status:t.value,value:l}})}else{const l=new Map;for(const u of o){const d=u.key,f=u.value;if(d.status==="aborted"||f.status==="aborted")return M;(d.status==="dirty"||f.status==="dirty")&&t.dirty(),l.set(d.value,f.value)}return{status:t.value,value:l}}}}Us.create=(s,e,t)=>new Us({valueType:e,keyType:s,typeName:L.ZodMap,...H(t)});class xt extends Q{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==I.set)return _(n,{code:g.invalid_type,expected:I.set,received:n.parsedType}),M;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(_(n,{code:g.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(_(n,{code:g.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const i=this._def.valueType;function o(u){const d=new Set;for(const f of u){if(f.status==="aborted")return M;f.status==="dirty"&&t.dirty(),d.add(f.value)}return{status:t.value,value:d}}const l=[...n.data.values()].map((u,d)=>i._parse(new Me(n,u,n.path,d)));return n.common.async?Promise.all(l).then(u=>o(u)):o(l)}min(e,t){return new xt({...this._def,minSize:{value:e,message:E.toString(t)}})}max(e,t){return new xt({...this._def,maxSize:{value:e,message:E.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}xt.create=(s,e)=>new xt({valueType:s,minSize:null,maxSize:null,typeName:L.ZodSet,...H(e)});class Vs extends Q{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Vs.create=(s,e)=>new Vs({getter:s,typeName:L.ZodLazy,...H(e)});class Zs extends Q{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return _(t,{received:t.data,code:g.invalid_literal,expected:this._def.value}),M}return{status:"valid",value:e.data}}get value(){return this._def.value}}Zs.create=(s,e)=>new Zs({value:s,typeName:L.ZodLiteral,...H(e)});function cn(s,e){return new tt({values:s,typeName:L.ZodEnum,...H(e)})}class tt extends Q{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return _(t,{expected:G.joinValues(n),received:t.parsedType,code:g.invalid_type}),M}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return _(t,{received:t.data,code:g.invalid_enum_value,options:n}),M}return we(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return tt.create(e,{...this._def,...t})}exclude(e,t=this._def){return tt.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}tt.create=cn;class Ws extends Q{_parse(e){const t=G.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==I.string&&n.parsedType!==I.number){const a=G.objectValues(t);return _(n,{expected:G.joinValues(a),received:n.parsedType,code:g.invalid_type}),M}if(this._cache||(this._cache=new Set(G.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const a=G.objectValues(t);return _(n,{received:n.data,code:g.invalid_enum_value,options:a}),M}return we(e.data)}get enum(){return this._def.values}}Ws.create=(s,e)=>new Ws({values:s,typeName:L.ZodNativeEnum,...H(e)});class Pt extends Q{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==I.promise&&t.common.async===!1)return _(t,{code:g.invalid_type,expected:I.promise,received:t.parsedType}),M;const n=t.parsedType===I.promise?t.data:Promise.resolve(t.data);return we(n.then(a=>this._def.type.parseAsync(a,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Pt.create=(s,e)=>new Pt({type:s,typeName:L.ZodPromise,...H(e)});class st extends Q{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===L.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=this._def.effect||null,i={addIssue:o=>{_(n,o),o.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async l=>{if(t.value==="aborted")return M;const u=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return u.status==="aborted"?M:u.status==="dirty"||t.value==="dirty"?ft(u.value):u});{if(t.value==="aborted")return M;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?M:l.status==="dirty"||t.value==="dirty"?ft(l.value):l}}if(a.type==="refinement"){const o=l=>{const u=a.refinement(l,i);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?M:(l.status==="dirty"&&t.dirty(),o(l.value),{status:t.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?M:(l.status==="dirty"&&t.dirty(),o(l.value).then(()=>({status:t.value,value:l.value}))))}if(a.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!et(o))return M;const l=a.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>et(o)?Promise.resolve(a.transform(o.value,i)).then(l=>({status:t.value,value:l})):M);G.assertNever(a)}}st.create=(s,e,t)=>new st({schema:s,typeName:L.ZodEffects,effect:e,...H(t)});st.createWithPreprocess=(s,e,t)=>new st({schema:e,effect:{type:"preprocess",transform:s},typeName:L.ZodEffects,...H(t)});class Be extends Q{_parse(e){return this._getType(e)===I.undefined?we(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Be.create=(s,e)=>new Be({innerType:s,typeName:L.ZodOptional,...H(e)});class nt extends Q{_parse(e){return this._getType(e)===I.null?we(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}nt.create=(s,e)=>new nt({innerType:s,typeName:L.ZodNullable,...H(e)});class ss extends Q{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===I.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ss.create=(s,e)=>new ss({innerType:s,typeName:L.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...H(e)});class ns extends Q{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return At(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ae(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ae(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}ns.create=(s,e)=>new ns({innerType:s,typeName:L.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...H(e)});class Hs extends Q{_parse(e){if(this._getType(e)!==I.nan){const n=this._getOrReturnCtx(e);return _(n,{code:g.invalid_type,expected:I.nan,received:n.parsedType}),M}return{status:"valid",value:e.data}}}Hs.create=s=>new Hs({typeName:L.ZodNaN,...H(s)});class br extends Q{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class fs extends Q{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?M:i.status==="dirty"?(t.dirty(),ft(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?M:a.status==="dirty"?(t.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(e,t){return new fs({in:e,out:t,typeName:L.ZodPipeline})}}class as extends Q{_parse(e){const t=this._def.innerType._parse(e),n=a=>(et(a)&&(a.value=Object.freeze(a.value)),a);return At(t)?t.then(a=>n(a)):n(t)}unwrap(){return this._def.innerType}}as.create=(s,e)=>new as({innerType:s,typeName:L.ZodReadonly,...H(e)});var L;(function(s){s.ZodString="ZodString",s.ZodNumber="ZodNumber",s.ZodNaN="ZodNaN",s.ZodBigInt="ZodBigInt",s.ZodBoolean="ZodBoolean",s.ZodDate="ZodDate",s.ZodSymbol="ZodSymbol",s.ZodUndefined="ZodUndefined",s.ZodNull="ZodNull",s.ZodAny="ZodAny",s.ZodUnknown="ZodUnknown",s.ZodNever="ZodNever",s.ZodVoid="ZodVoid",s.ZodArray="ZodArray",s.ZodObject="ZodObject",s.ZodUnion="ZodUnion",s.ZodDiscriminatedUnion="ZodDiscriminatedUnion",s.ZodIntersection="ZodIntersection",s.ZodTuple="ZodTuple",s.ZodRecord="ZodRecord",s.ZodMap="ZodMap",s.ZodSet="ZodSet",s.ZodFunction="ZodFunction",s.ZodLazy="ZodLazy",s.ZodLiteral="ZodLiteral",s.ZodEnum="ZodEnum",s.ZodEffects="ZodEffects",s.ZodNativeEnum="ZodNativeEnum",s.ZodOptional="ZodOptional",s.ZodNullable="ZodNullable",s.ZodDefault="ZodDefault",s.ZodCatch="ZodCatch",s.ZodPromise="ZodPromise",s.ZodBranded="ZodBranded",s.ZodPipeline="ZodPipeline",s.ZodReadonly="ZodReadonly"})(L||(L={}));const kt=Pe.create;Le.create;Ie.create;const wr=re.create;Ot.create;$t.create;qe.create;tt.create;Pt.create;Be.create;nt.create;const jr=wr({name:kt().min(1,""),url:kt().url(""),favicon:kt().url("URL"),note:kt().optional()});function dn({id:s,name:e,url:t,favicon:n,tags:a,note:i,onClose:o,onSave:l,onDelete:u}){const[d,f]=h.useState({name:e,url:t,favicon:n,note:i||""}),[c,m]=h.useState({}),[x,v]=h.useState(!1),$=N=>{const j=/\{([^}]+)\}/g;return(N.match(j)||[]).map(C=>C.replace(/\{|\}/g,"").trim())},k=N=>N.replace(/\{[^}]+\}/g,"").trim(),R=async()=>{if(!d.url||!d.url.startsWith("http")){m({url:"(http://https://)"});return}try{v(!0);const N=new URL(d.url).hostname,w=(U=>{try{return new URL(U).hostname.replace(/^www\./,"")}catch{return U.replace(/^(https?:\/\/)?(www\.)?/,"").split("/")[0]}})(d.url);console.log(" :",w);try{const U="favicon-cache-simple",q=localStorage.getItem(U);if(q){const z=JSON.parse(q);delete z[w],localStorage.setItem(U,JSON.stringify(z))}}catch(U){console.warn(":",U)}const C=Date.now(),F=`https://www.google.com/s2/favicons?domain=${d.url}&sz=64&t=${C}`;f(U=>({...U,favicon:F})),f(U=>({...U,name:N.replace("www.","").split(".")[0]})),m(U=>{const q={...U};return delete q.url,q}),console.log(" :",F)}catch(N){console.error(":",N),m({url:""})}finally{v(!1)}},ee=N=>{N.preventDefault();try{const j=jr.safeParse(d);if(!j.success){const F={};j.error.errors.forEach(U=>{F[U.path[0]]=U.message}),m(F);return}const w=$(d.note||""),C=k(d.note||"");if(d.favicon!==n){console.log(" Favicon ");const U=(q=>{try{return new URL(q).hostname.replace(/^www\./,"")}catch{return q.replace(/^(https?:\/\/)?(www\.)?/,"").split("/")[0]}})(d.url);try{const q="favicon-cache-simple",z=localStorage.getItem(q);if(z){const P=JSON.parse(z);delete P[U],localStorage.setItem(q,JSON.stringify(P)),console.log(" :",U)}}catch(q){console.warn(":",q)}}l({id:s,name:d.name,url:d.url,favicon:d.favicon,tags:w,note:C}),o()}catch(j){console.error(":",j)}},W=N=>{const{name:j,value:w}=N.target;f(C=>({...C,[j]:w})),c[j]&&m(C=>{const F={...C};return delete F[j],F})};return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 select-none",children:r.jsxs(ie.div,{className:"w-full max-w-md bg-white rounded-xl shadow-xl p-6 select-none",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{type:"spring",damping:25},children:[r.jsxs("div",{className:"flex justify-between items-center mb-4 select-none",children:[r.jsx("h2",{className:"text-xl font-semibold select-none",children:""}),r.jsx("button",{onClick:o,className:"text-gray-500 hover:text-gray-700 select-none",children:r.jsx("i",{className:"fa-solid fa-xmark select-none"})})]}),r.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 select-none",children:""}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"url",name:"url",value:d.url,onChange:W,className:"flex-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com"}),r.jsx("button",{type:"button",onClick:R,disabled:x||!d.url,className:"px-3 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-blue-300 select-none",children:x?"...":""})]}),c.url&&r.jsx("p",{className:"mt-1 text-sm text-red-500 select-none",children:c.url})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 select-none",children:""}),r.jsx("input",{type:"text",name:"name",value:d.name,onChange:W,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:""}),c.name&&r.jsx("p",{className:"mt-1 text-sm text-red-500 select-none",children:c.name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 select-none",children:""}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex-1",children:r.jsx("input",{type:"url",name:"favicon",value:d.favicon,onChange:W,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/favicon.ico"})}),r.jsx("span",{className:"text-gray-400 select-none",children:""}),r.jsxs("label",{className:"cursor-pointer select-none",children:[r.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:N=>{var w;const j=(w=N.target.files)==null?void 0:w[0];if(j){const C=new FileReader;C.onload=F=>{var U;(U=F.target)!=null&&U.result&&f(q=>{var z;return{...q,favicon:(z=F.target)==null?void 0:z.result}})},C.readAsDataURL(j)}}}),r.jsxs("div",{className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm text-gray-700 transition-colors select-none",children:[r.jsx("i",{className:"fa-solid fa-upload mr-1 select-none"}),""]})]})]}),d.favicon&&r.jsxs("div",{className:"mt-2 flex items-center select-none",children:[r.jsx("img",{src:d.favicon,alt:"",className:"w-8 h-8 rounded mr-2 select-none"}),r.jsx("span",{className:"text-xs text-gray-500 truncate max-w-xs select-none",children:d.favicon.startsWith("data:image")?"":d.favicon})]}),c.favicon&&r.jsx("p",{className:"mt-1 text-sm text-red-500 select-none",children:c.favicon})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 select-none",children:[" (",":  ",""," ","",")"]}),r.jsxs("div",{className:"text-xs text-gray-500 mb-1 select-none",children:["",""]}),r.jsx("textarea",{name:"note",value:d.note,onChange:W,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"..."})]}),r.jsxs("div",{className:"flex flex-col gap-4 pt-4 select-none",children:[r.jsxs("div",{className:"flex gap-2 select-none",children:[r.jsx("button",{type:"button",onClick:o,className:"flex-1 px-4 py-2 text-gray-700 border rounded-md hover:bg-gray-50 select-none",children:""}),r.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 select-none",children:""})]}),u&&r.jsxs("button",{type:"button",onClick:()=>{confirm("")&&(u(s),o())},className:"w-full px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 shadow-md select-none",children:[r.jsx("i",{className:"fa-solid fa-trash mr-2 select-none"}),""]})]})]})]})})}const un=h.createContext(void 0);function Nr({children:s}){const[e,t]=h.useState(()=>{const m=localStorage.getItem("cardOpacity");let x=m?parseFloat(m):.1;return x>1&&(x=x/100),Math.max(.05,Math.min(1,x))}),[n,a]=h.useState(()=>{const m=localStorage.getItem("searchBarOpacity");let x=m?parseFloat(m):.1;return x>1&&(x=x/100),Math.max(.05,Math.min(1,x))}),[i,o]=h.useState(()=>{const m=localStorage.getItem("parallaxEnabled");return m?JSON.parse(m):!0}),l=()=>window.innerHeight>window.innerWidth?"mobile":"1080p",[u,d]=h.useState(()=>localStorage.getItem("wallpaperResolution")||l()),[f,c]=h.useState(!1);return h.useEffect(()=>{localStorage.setItem("cardOpacity",e.toString())},[e]),h.useEffect(()=>{localStorage.setItem("searchBarOpacity",n.toString())},[n]),h.useEffect(()=>{localStorage.setItem("parallaxEnabled",JSON.stringify(i))},[i]),h.useEffect(()=>{localStorage.setItem("wallpaperResolution",u)},[u]),r.jsx(un.Provider,{value:{cardOpacity:e,searchBarOpacity:n,parallaxEnabled:i,wallpaperResolution:u,isSettingsOpen:f,setCardOpacity:t,setSearchBarOpacity:a,setParallaxEnabled:o,setWallpaperResolution:d,setIsSettingsOpen:c},children:s})}function rt(){const s=h.useContext(un);if(s===void 0)throw new Error("useTransparency must be used within a TransparencyProvider");return s}class Sr{constructor(){de(this,"cacheKey","favicon-cache-simple");de(this,"defaultExpiry",7*24*60*60*1e3);de(this,"cache",{});de(this,"loadingPromises",new Map);this.loadCache()}loadCache(){try{const e=localStorage.getItem(this.cacheKey);e&&(this.cache=JSON.parse(e),this.cleanExpiredCache())}catch(e){console.warn(" favicon :",e),this.cache={}}}saveCache(){try{localStorage.setItem(this.cacheKey,JSON.stringify(this.cache))}catch(e){console.warn(" favicon :",e)}}cleanExpiredCache(){const e=Date.now(),t=[];for(const[n,a]of Object.entries(this.cache))e>a.expiry&&t.push(n);t.forEach(n=>{delete this.cache[n]}),t.length>0&&this.saveCache()}extractDomain(e){try{return new URL(e).hostname.replace(/^www\./,"")}catch{return e.replace(/^(https?:\/\/)?(www\.)?/,"").split("/")[0]}}getFaviconUrls(e,t){return[e,`https://www.google.com/s2/favicons?domain=${t}&sz=64`,`https://www.google.com/s2/favicons?domain=${t}&sz=32`,`https://icons.duckduckgo.com/ip3/${t}.ico`,`https://${t}/favicon.ico`,"/icon/icon.jpg"]}async tryLoadFavicon(e){for(const t of e)try{return await new Promise((n,a)=>{const i=new Image;i.onload=()=>n(),i.onerror=()=>a(),i.src=t,setTimeout(()=>a(),2e3)}),console.log(` Favicon : ${t}`),t}catch{console.log(` Favicon : ${t}`);continue}return"/icon/icon.jpg"}getCachedFavicon(e){const t=this.extractDomain(e),n=this.cache[t];return n&&Date.now()<n.expiry?n.cachedUrl:null}async getFavicon(e,t){const n=this.extractDomain(e),a=this.getCachedFavicon(e);if(a)return a;if(this.loadingPromises.has(n))return this.loadingPromises.get(n);const i=this.loadFavicon(e,t,n);this.loadingPromises.set(n,i);try{return await i}finally{this.loadingPromises.delete(n)}}async loadFavicon(e,t,n){const a=this.getFaviconUrls(t,n);try{const i=await this.tryLoadFavicon(a);return this.cache[n]={url:e,cachedUrl:i,timestamp:Date.now(),expiry:Date.now()+this.defaultExpiry},this.saveCache(),i}catch(i){return console.warn(` favicon : ${n}`,i),"/icon/icon.jpg"}}async getFaviconWithIndexedDB(e,t){return this.getFavicon(e,t)}async getFaviconWithHybridCache(e,t){return this.getFavicon(e,t)}async batchCacheFaviconsToIndexedDB(e){console.log(`  ${e.length}  favicon`);let t=0,n=0,a=0;const i=2;for(let o=0;o<e.length;o+=i){const u=e.slice(o,o+i).map(async(d,f)=>{const c=this.extractDomain(d.url);try{if(this.getCachedFavicon(d.url)){n++;return}const x=(f+1)*500;await new Promise($=>setTimeout($,x)),console.log(` [${o+f+1}/${e.length}] : ${c}`),await this.getFavicon(d.url,d.favicon)?(t++,console.log(` : ${c}`)):a++}catch(m){a++,console.warn(` : ${c}`,m)}});await Promise.allSettled(u),o+i<e.length&&await new Promise(d=>setTimeout(d,1e3))}console.log("  favicon :"),console.log(`   : ${t}, : ${n}, : ${a}`)}clearCache(){this.cache={},this.loadingPromises.clear();try{localStorage.removeItem(this.cacheKey)}catch(e){console.warn(" favicon :",e)}}getCacheStats(){const e=Date.now(),t=Object.keys(this.cache).length,n=Object.values(this.cache).filter(i=>e>i.expiry).length;let a="0 KB";try{a=`${(new Blob([JSON.stringify(this.cache)]).size/1024).toFixed(1)} KB`}catch{}return{total:t,expired:n,size:a}}}const rs=new Sr;function _r(s,e){const[t,n]=h.useState(e),[a,i]=h.useState(!1),[o,l]=h.useState(!1);return h.useEffect(()=>{n(e),l(!1),i(!1);const u=e==="/icon/icon.jpg",d=e.includes("google.com/s2/favicons")&&!e.includes("&t=");if(u||d){const f=rs.getCachedFavicon(s);if(f&&f!==e&&f!=="/icon/icon.jpg"){console.log(" :",f),n(f);return}u&&(i(!0),rs.getFavicon(s,e).then(c=>{c!==e&&c!=="/icon/icon.jpg"&&(console.log(" :",c),n(c)),l(!1)}).catch(c=>{console.warn("Favicon :",c),l(!0)}).finally(()=>{i(!1)}))}},[s,e]),{faviconUrl:t,isLoading:a,error:o}}function kr({id:s,name:e,url:t,favicon:n,tags:a,visitCount:i,note:o,index:l,moveCard:u,onSave:d,onDelete:f}){const[c,m]=h.useState(!1),x=h.useRef(null),{cardOpacity:v}=rt(),{faviconUrl:$,isLoading:k,error:R}=_r(t,n),[ee,W]=h.useState(!1),N=h.useRef(null),[{isDragging:j},w]=Kn({type:"WEBSITE_CARD",item:{id:s,index:l},collect:z=>({isDragging:z.isDragging()}),canDrag:()=>ee}),[,C]=Qn({accept:"WEBSITE_CARD",hover(z){if(!x.current)return;const P=z.index,K=l;P!==K&&(u(P,K),z.index=K)}});C(x),w(x);const F=()=>{j||(N.current=setTimeout(()=>{W(!0)},1e3))},U=()=>{N.current&&(clearTimeout(N.current),N.current=null),W(!1)},q=()=>{d({id:s,name:e,url:t,favicon:n,tags:a,note:o,visitCount:(i||0)+1,lastVisit:new Date().toISOString().split("T")[0]}),window.open(t,"_blank")};return r.jsxs(r.Fragment,{children:[r.jsxs(ie.div,{ref:x,className:`w-32 h-32 rounded-xl shadow-lg backdrop-blur-md border border-white/20 overflow-hidden relative group select-none ${ee?"cursor-grabbing":"cursor-pointer"}`,style:{backgroundColor:`rgba(255, 255, 255, ${v})`,opacity:j?.5:1},transition:{type:"spring",stiffness:300,damping:15},whileHover:{scale:1.05},whileTap:{scale:.98},onClick:q,onPointerDown:F,onPointerUp:U,onPointerLeave:U,onPointerCancel:U,draggable:!1,children:[r.jsx("div",{className:"absolute bottom-0.5 right-0.5 z-11",children:r.jsx("button",{onClick:z=>{z.stopPropagation(),m(!0)},className:"p-1 text-white/50 hover:text-white select-none",children:r.jsx("i",{className:"fa-solid fa-gear text-xs select-none"})})}),r.jsxs("div",{className:"h-full flex flex-col pt-3 select-none",style:{pointerEvents:j?"none":void 0},children:[r.jsxs("div",{className:"flex flex-col items-center px-2 select-none",children:[r.jsxs("div",{className:"w-11 h-11 mb-1 rounded-md overflow-hidden select-none relative",children:[r.jsx("img",{src:$,alt:`${e} favicon`,className:"w-full h-full object-contain select-none",loading:"lazy",draggable:"false"}),k&&r.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-yellow-400 rounded-full animate-pulse",title:"..."}),!k&&R&&r.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-red-400 rounded-full",title:""}),!k&&!R&&$!=="/icon/icon.jpg"&&r.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-green-400 rounded-full",title:""})]}),r.jsx("h3",{className:"text-xs font-medium text-white text-center line-clamp-2 px-2 mt-1 select-none",children:e})]}),r.jsx("div",{className:"px-2 mb-1 select-none",children:r.jsx("p",{className:"text-white/60 text-[0.65rem] text-center line-clamp-2 select-none",children:o||new URL(t).hostname})}),r.jsx("div",{className:"mt-0 px-3 pb-2 select-none",children:r.jsx("div",{className:"flex flex-wrap gap-1 justify-center select-none",children:a.slice(0,6).map(z=>r.jsx("span",{className:"px-1.5 py-0.5 bg-white/20 rounded-full text-[0.65rem] text-white max-w-[60px] truncate select-none",children:z},z))})})]})]}),c&&r.jsx(dn,{id:s,name:e,url:t,favicon:n,tags:a,note:o,onClose:()=>m(!1),onSave:z=>{d(z),m(!1)},onDelete:f})]})}function Cr(s={}){var T,O;const e=h.useRef(null);h.useEffect(()=>{const p=b=>{if(b.code==="Space"||b.key===" "||b.keyCode===32){const A=document.activeElement;!(A&&(A.tagName==="INPUT"||A.tagName==="TEXTAREA"||A.isContentEditable))&&e.current&&(b.preventDefault(),e.current.focus())}};return window.addEventListener("keydown",p,{capture:!0}),()=>window.removeEventListener("keydown",p,{capture:!0})},[]);const[t,n]=h.useState(""),[a,i]=h.useState(!1),[o,l]=h.useState("bing"),[u,d]=h.useState(!1),[f,c]=h.useState([]),[m,x]=h.useState(!1),[v,$]=h.useState(-1),k=h.useRef(null),[R,ee]=h.useState(null),[W,N]=h.useState(null),[j,w]=h.useState(!1),C=h.useRef(null),{searchBarOpacity:F}=rt(),U=[{key:"bing",label:"Bing",icon:r.jsx("i",{className:"fa-brands fa-microsoft text-blue-400"})},{key:"google",label:"Google",icon:r.jsx("i",{className:"fa-brands fa-google text-blue-500"})}],q=(p,b)=>{const A=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FECA57","#FF9FF3","#54A0FF","#5F27CD","#00D2D3","#FF9F43","#EE5A24","#FD79A8","#0FB9B1","#A55EEA","#26D0CE","#FDCB6E","#6C5CE7","#74B9FF","#E17055","#F39C12","#E74C3C","#3498DB","#9B59B6","#1ABC9C"],V=["M2,5 Q12,2 22,5 Q32,8 42,5 L42,8 Q32,11 22,8 Q12,5 2,8 Z","M20,2 L38,2 L29,12 Z","M20,7 A6,6 0,1,1 20,7.1 Z","M20,2 L30,7 L20,12 L10,7 Z","M20,2 L22,8 L28,8 L23,11 L25,17 L20,14 L15,17 L17,11 L12,8 L18,8 Z","M2,6 Q15,2 28,6 Q41,10 54,6 L54,9 Q41,13 28,9 Q15,5 2,9 Z","M5,5 L10,2 L15,5 L20,2 L25,5 L30,2 L35,5 L35,8 L30,11 L25,8 L20,11 L15,8 L10,11 L5,8 Z","M20,2 Q25,7 20,12 Q15,7 20,2 M20,2 Q25,7 30,2 Q25,7 30,12 Q25,7 20,12","M20,4 C18,2 15,2 15,5 C15,8 20,12 20,12 C20,12 25,8 25,5 C25,2 22,2 20,4 Z","M15,4 Q10,7 15,10 Q20,7 25,10 Q30,7 25,4 Q20,7 15,4","M5,4 Q20,2 35,4 Q40,7 35,10 Q20,8 5,10 Q0,7 5,4","M2,7 Q10,3 18,7 Q26,11 34,7 Q38,5 42,7 L42,10 Q38,8 34,10 Q26,14 18,10 Q10,6 2,10 Z"];for(let ae=0;ae<50;ae++){const J=document.createElementNS("http://www.w3.org/2000/svg","svg"),oe=document.createElementNS("http://www.w3.org/2000/svg","path"),Ee=A[Math.floor(Math.random()*A.length)],Ge=V[Math.floor(Math.random()*V.length)],yt=Math.random()*.6+.5,Fe=44*yt,ot=16*yt;if(J.setAttribute("width",Fe.toString()),J.setAttribute("height",ot.toString()),J.setAttribute("viewBox","0 0 44 16"),J.style.cssText=`
        position: fixed;
        pointer-events: none;
        z-index: 10000;
        left: ${p-Fe/2}px;
        top: ${b-ot/2}px;
        transform-origin: center;
      `,oe.setAttribute("d",Ge),oe.setAttribute("fill",Ee),Math.random()>.5&&(oe.setAttribute("stroke",Ee),oe.setAttribute("stroke-width","1"),oe.setAttribute("fill-opacity","0.8")),Math.random()>.7){const ze=`gradient-${Date.now()}-${ae}`,Te=document.createElementNS("http://www.w3.org/2000/svg","defs"),he=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),Ye=document.createElementNS("http://www.w3.org/2000/svg","stop"),ke=document.createElementNS("http://www.w3.org/2000/svg","stop");he.setAttribute("id",ze),he.setAttribute("x1","0%"),he.setAttribute("y1","0%"),he.setAttribute("x2","100%"),he.setAttribute("y2","100%"),Ye.setAttribute("offset","0%"),Ye.setAttribute("stop-color",Ee),ke.setAttribute("offset","100%"),ke.setAttribute("stop-color",A[Math.floor(Math.random()*A.length)]),he.appendChild(Ye),he.appendChild(ke),Te.appendChild(he),J.appendChild(Te),oe.setAttribute("fill",`url(#${ze})`)}J.appendChild(oe),document.body.appendChild(J);const lt=Math.random()*360*(Math.PI/180),De=Math.random()*4+2;let ct=Math.cos(lt)*De,ge=Math.sin(lt)*De;const Vt=(Math.random()-.5)*80;let vt=Math.random()*360,ue=p-Fe/2,_e=b-ot/2;const Zt=.2,bt=.998,Je=Date.now(),wt=()=>{const ze=(Date.now()-Je)/1e3;ge+=Zt,ct*=bt,ge*=bt,ue+=ct,_e+=ge,vt+=Vt*(1/60),J.style.left=ue+"px",J.style.top=_e+"px",J.style.transform=`rotate(${vt}deg)`;const Te=Math.max(0,1-ze/7);J.style.opacity=Te.toString(),Te>0&&_e<window.innerHeight+100?requestAnimationFrame(wt):document.body.contains(J)&&document.body.removeChild(J)};setTimeout(()=>{requestAnimationFrame(wt)},Math.random()*150)}},z=()=>{const p=U.findIndex(A=>A.key===o),b=U[(p+1)%U.length].key;if(l(b),C.current){const A=C.current.getBoundingClientRect(),V=A.left+60,ne=A.top+A.height/2;q(V,ne)}},P=["chatGPT","Gemini","Deepseek","Kimi"],K=["https://chatgpt.com/","https://gemini.google.com/","https://chat.deepseek.com/","https://www.kimi.com/"],se=[r.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,verticalAlign:"middle",position:"relative",top:"1px",userSelect:"none"},children:r.jsx("img",{src:"/jiang_ai_web/icon/chatgpt.svg",alt:"chatGPT",style:{width:20,height:20,display:"block",userSelect:"none"}})}),r.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,verticalAlign:"middle",position:"relative",top:"1px",userSelect:"none"},children:r.jsx("img",{src:"/jiang_ai_web/icon/gemini.svg",alt:"Gemini",style:{width:20,height:20,display:"block",userSelect:"none"}})}),r.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,verticalAlign:"middle",position:"relative",top:"1px",userSelect:"none"},children:r.jsx("img",{src:"/jiang_ai_web/icon/deepseek.svg",alt:"Deepseek",style:{width:20,height:20,display:"block",userSelect:"none"}})}),r.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,verticalAlign:"middle",position:"relative",top:"1px",userSelect:"none"},children:r.jsx("img",{src:"/jiang_ai_web/icon/kimi.svg",alt:"Kimi",style:{width:20,height:20,display:"block",userSelect:"none"}})})],Y=(p,b)=>{switch(p){case"google":return`https://www.google.com/search?q=${encodeURIComponent(b)}`;default:return`https://www.bing.com/search?q=${encodeURIComponent(b)}`}},S=async p=>{if(!p.trim())return[];try{const b=document.createElement("script"),A=`baiduCallback_${Date.now()}`;return new Promise(V=>{window[A]=ne=>{if(ne&&ne.s&&Array.isArray(ne.s)){const ae=ne.s.slice(0,5).map((J,oe)=>({id:`baidu-${oe}`,text:J,query:J}));V(ae)}else{const ae=D(p);V(ae.slice(0,5).map((J,oe)=>({id:`local-${oe}`,text:J,query:J})))}document.head.removeChild(b),delete window[A]},setTimeout(()=>{if(window[A]){const ne=D(p);V(ne.slice(0,5).map((ae,J)=>({id:`local-${J}`,text:ae,query:ae}))),document.head.contains(b)&&document.head.removeChild(b),delete window[A]}},2e3),b.src=`https://suggestion.baidu.com/su?wd=${encodeURIComponent(p)}&cb=${A}`,b.onerror=()=>{const ne=D(p);V(ne.slice(0,5).map((ae,J)=>({id:`local-${J}`,text:ae,query:ae}))),document.head.contains(b)&&document.head.removeChild(b),delete window[A]},document.head.appendChild(b)})}catch(b){return console.warn("Failed to fetch Baidu suggestions:",b),D(p).slice(0,5).map((V,ne)=>({id:`local-${ne}`,text:V,query:V}))}},D=p=>{const b=[],A=p.toLowerCase(),V=[p,`${p} `,`${p} `,`${p} `,` ${p}`,`${p} `,`${p} `,`${p} `];return A.includes("")||A.includes("how")?b.push(`${p}`,`${p} `,`${p} `):A.includes("")||A.includes("")?b.push(`${p}`,`${p} `,`${p} `):b.push(...V),[...new Set(b)]};h.useEffect(()=>{const p=setTimeout(()=>{t.trim()?S(t).then(b=>{c(b),x(b.length>0),$(-1)}):(c([]),x(!1),$(-1))},500);return()=>clearTimeout(p)},[t]);const X=(p,b)=>{p.preventDefault();const A=b||(v>=0&&f[v]?f[v].query:t);A.trim()&&(window.open(Y(o,A),"_blank"),n(""),x(!1))},te=p=>{switch(p.key){case"ArrowDown":if(!m)return;p.preventDefault(),$(b=>b<f.length-1?b+1:b);break;case"ArrowUp":if(!m)return;p.preventDefault(),$(b=>b>-1?b-1:-1);break;case"Escape":x(!1),$(-1);break;case"Tab":p.shiftKey||(p.preventDefault(),z());break}},B=h.useRef(null);return h.useLayoutEffect(()=>{if(u&&k.current){const p=k.current.getBoundingClientRect();ee({left:p.left+p.width/2,top:p.top})}else ee(null)},[u,o]),r.jsx("div",{className:"relative left-0 right-0 z-50 flex justify-center px-4 select-none",children:r.jsx(ie.div,{className:"w-full flex justify-center",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},children:r.jsx("form",{ref:C,onSubmit:X,className:"relative flex items-center justify-center",onMouseEnter:()=>{B.current&&(clearTimeout(B.current),B.current=null),i(!0)},onMouseLeave:()=>{B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{i(!1),d(!1),setTimeout(()=>{x(!1)},100)},200)},children:r.jsxs(ie.div,{animate:{width:a?520:340},initial:{width:340},transition:{type:"tween",duration:.28,ease:"easeInOut"},style:{display:"flex",alignItems:"center",position:"relative"},onAnimationComplete:()=>{a&&d(!0)},children:[r.jsxs("div",{className:"relative flex items-center",children:[r.jsxs("button",{type:"button",className:"flex items-center gap-2 px-1.5 py-1 text-white/80 hover:text-white bg-transparent border-none outline-none text-lg select-none relative z-20",style:{pointerEvents:"auto",height:36,minWidth:36,minHeight:36,justifyContent:"center",alignItems:"center",display:"flex"},tabIndex:-1,onClick:()=>{z()},onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:[(T=U.find(p=>p.key===o))==null?void 0:T.icon,r.jsx("span",{className:"hidden sm:inline text-base font-semibold select-none",children:(O=U.find(p=>p.key===o))==null?void 0:O.label})]}),j&&r.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800/90 text-white text-sm rounded-lg shadow-lg backdrop-blur-sm border border-white/10 whitespace-nowrap z-30",children:[" ",o==="bing"?"Google":"Bing",r.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-800/90"})]})]}),r.jsx("span",{className:"mx-2 text-white/30 select-none font-normal text-base z-10",children:"|"}),r.jsx("span",{className:"text-white/60 select-none font-normal text-base z-10"}),r.jsx("input",{ref:e,type:"text",value:t,onChange:p=>n(p.target.value),onKeyDown:te,placeholder:"...",className:"backdrop-blur-md border border-white/20 rounded-full pl-4 py-2 text-white placeholder-white/60 outline-none text-base transition-all duration-200 pr-12 w-full ml-3",style:{backgroundColor:`rgba(255, 255, 255, ${F})`,minWidth:"4rem",maxWidth:"100%"}}),r.jsx("button",{ref:k,type:"submit",className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-white/70 hover:text-white transition-colors bg-transparent border-none outline-none group select-none",style:{pointerEvents:"auto"},children:r.jsx(ie.i,{className:"fa-solid fa-magnifying-glass text-sm",whileHover:{scale:1.22,rotate:18,color:"#fff"},whileTap:{scale:.95,rotate:0},animate:{color:a?"#fff":void 0},transition:{type:"spring",stiffness:350,damping:18},style:{display:"inline-block"}})}),m&&f.length>0&&r.jsx(ie.div,{className:"absolute top-full left-0 right-0 mt-2 backdrop-blur-md rounded-lg shadow-lg border border-white/20 z-50 overflow-hidden max-h-60 overflow-y-auto",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.2},style:{pointerEvents:"auto",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:f.map((p,b)=>r.jsx("div",{className:`px-4 py-3 cursor-pointer transition-colors border-b border-white/10 last:border-b-0 select-none ${b===v?"bg-blue-500/20 text-gray-800":"hover:bg-white/50 text-gray-700"}`,onClick:A=>{A.stopPropagation(),n(p.text),X(A,p.query)},onMouseEnter:()=>$(b),onMouseDown:A=>A.preventDefault(),children:r.jsxs("div",{className:"flex items-center gap-3 select-none",children:[r.jsx("i",{className:"fa-solid fa-magnifying-glass text-gray-400 text-sm w-4 select-none"}),r.jsx("div",{className:"flex-1 min-w-0 select-none",children:r.jsx("div",{className:"font-medium text-sm truncate select-none",children:p.text})})]})},p.id))}),a&&u&&R&&r.jsx("div",{className:"fixed z-30",style:{left:R.left,top:R.top,width:0,height:0,pointerEvents:"auto",transform:"translate(-50%, -50%)"},children:r.jsx("div",{style:{position:"absolute",left:0,top:0},children:se.map((p,b,A)=>{const ne=(-60+120/(A.length-1)*b)*(Math.PI/180),ae=44,J=ae*Math.cos(ne),oe=ae*Math.sin(ne),Ee=19,Ge=Ee*3.6;return r.jsxs(ie.span,{role:"img","aria-label":P[b],initial:{x:0,y:0,scale:.3,opacity:0,filter:"none"},animate:{x:J,y:oe,scale:1.18,opacity:1,filter:"none"},whileHover:{scale:1.38,filter:"drop-shadow(0 0 4px #fff) drop-shadow(0 0 8px #fff)"},transition:{type:"spring",stiffness:400,damping:22,delay:.08*b},style:{position:"absolute",left:0,top:0,fontSize:22,cursor:"pointer",userSelect:"none",zIndex:2,willChange:"filter, transform"},onClick:()=>window.open(K[b],"_blank"),onMouseEnter:()=>N(b),onMouseLeave:()=>N(null),children:[p,W===b&&r.jsx("div",{style:{position:"absolute",left:28,top:"50%",transform:"translateY(-50%)",height:Ee,width:Ge,background:"rgba(255,255,255,0.98)",color:"#222",borderRadius:Ee/2,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 12px #0003",fontSize:14,fontWeight:500,pointerEvents:"auto",zIndex:10,padding:"0 10px",whiteSpace:"nowrap"},children:r.jsx("span",{style:{userSelect:"none"},children:P[b]})})]},b)})})})]})})})})}function Ir(){const s=()=>{window.open("https://github.com/jiangjianghong","_blank")};return r.jsx("div",{className:"cat-container",children:r.jsxs("div",{className:"cat",onClick:s,style:{cursor:"pointer"},children:[r.jsx("div",{className:"paw"}),r.jsx("div",{className:"paw"}),r.jsxs("div",{className:"shake",children:[r.jsx("div",{className:"tail"}),r.jsxs("div",{className:"main",children:[r.jsx("div",{className:"head"}),r.jsx("div",{className:"body",children:r.jsx("div",{className:"leg"})}),r.jsxs("div",{className:"face",children:[r.jsxs("div",{className:"mustache_cont",children:[r.jsx("div",{className:"mustache"}),r.jsx("div",{className:"mustache"})]}),r.jsxs("div",{className:"mustache_cont",children:[r.jsx("div",{className:"mustache"}),r.jsx("div",{className:"mustache"})]}),r.jsx("div",{className:"nose"}),r.jsx("div",{className:"eye"}),r.jsx("div",{className:"eye"}),r.jsxs("div",{className:"brow_cont",children:[r.jsx("div",{className:"brow"}),r.jsx("div",{className:"brow"})]}),r.jsxs("div",{className:"brow_cont",children:[r.jsx("div",{className:"brow"}),r.jsx("div",{className:"brow"})]}),r.jsx("div",{className:"ear_l",children:r.jsx("div",{className:"inner"})}),r.jsxs("div",{className:"ear_r",children:[r.jsx("div",{className:"outer"}),r.jsx("div",{className:"inner"})]})]})]})]})]})})}const fn="@firebase/installations",hs="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn=1e4,mn=`w:${hs}`,pn="FIS_v2",Er="https://firebaseinstallations.googleapis.com/v1",Tr=60*60*1e3,Rr="installations",Ar="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ke=new nn(Rr,Ar,Dr);function gn(s){return s instanceof an&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn({projectId:s}){return`${Er}/projects/${s}/installations`}function yn(s){return{token:s.token,requestStatus:2,expiresIn:$r(s.expiresIn),creationTime:Date.now()}}async function vn(s,e){const n=(await e.json()).error;return Ke.create("request-failed",{requestName:s,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function bn({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function Or(s,{refreshToken:e}){const t=bn(s);return t.append("Authorization",Pr(e)),t}async function wn(s){const e=await s();return e.status>=500&&e.status<600?s():e}function $r(s){return Number(s.replace("s","000"))}function Pr(s){return`${pn} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Br({appConfig:s,heartbeatServiceProvider:e},{fid:t}){const n=xn(s),a=bn(s),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&a.append("x-firebase-client",d)}const o={fid:t,authVersion:pn,appId:s.appId,sdkVersion:mn},l={method:"POST",headers:a,body:JSON.stringify(o)},u=await wn(()=>fetch(n,l));if(u.ok){const d=await u.json();return{fid:d.fid||t,registrationStatus:2,refreshToken:d.refreshToken,authToken:yn(d.authToken)}}else throw await vn("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(s){return new Promise(e=>{setTimeout(e,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=/^[cdef][\w-]{21}$/,is="";function Fr(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const t=zr(s);return Lr.test(t)?t:is}catch{return is}}function zr(s){return Mr(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn=new Map;function Sn(s,e){const t=zt(s);_n(t,e),Ur(t,e)}function _n(s,e){const t=Nn.get(s);if(t)for(const n of t)n(e)}function Ur(s,e){const t=Vr();t&&t.postMessage({key:s,fid:e}),Zr()}let He=null;function Vr(){return!He&&"BroadcastChannel"in self&&(He=new BroadcastChannel("[Firebase] FID Change"),He.onmessage=s=>{_n(s.data.key,s.data.fid)}),He}function Zr(){Nn.size===0&&He&&(He.close(),He=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="firebase-installations-database",Hr=1,Qe="firebase-installations-store";let qt=null;function ms(){return qt||(qt=na(Wr,Hr,{upgrade:(s,e)=>{switch(e){case 0:s.createObjectStore(Qe)}}})),qt}async function Bt(s,e){const t=zt(s),a=(await ms()).transaction(Qe,"readwrite"),i=a.objectStore(Qe),o=await i.get(t);return await i.put(e,t),await a.done,(!o||o.fid!==e.fid)&&Sn(s,e.fid),e}async function kn(s){const e=zt(s),n=(await ms()).transaction(Qe,"readwrite");await n.objectStore(Qe).delete(e),await n.done}async function Ut(s,e){const t=zt(s),a=(await ms()).transaction(Qe,"readwrite"),i=a.objectStore(Qe),o=await i.get(t),l=e(o);return l===void 0?await i.delete(t):await i.put(l,t),await a.done,l&&(!o||o.fid!==l.fid)&&Sn(s,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ps(s){let e;const t=await Ut(s.appConfig,n=>{const a=qr(n),i=Kr(s,a);return e=i.registrationPromise,i.installationEntry});return t.fid===is?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function qr(s){const e=s||{fid:Fr(),registrationStatus:0};return Cn(e)}function Kr(s,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(Ke.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=Qr(s,t);return{installationEntry:t,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Gr(s)}:{installationEntry:e}}async function Qr(s,e){try{const t=await Br(s,e);return Bt(s.appConfig,t)}catch(t){throw gn(t)&&t.customData.serverCode===409?await kn(s.appConfig):await Bt(s.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function Gr(s){let e=await qs(s.appConfig);for(;e.registrationStatus===1;)await jn(100),e=await qs(s.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:n}=await ps(s);return n||t}return e}function qs(s){return Ut(s,e=>{if(!e)throw Ke.create("installation-not-found");return Cn(e)})}function Cn(s){return Jr(s)?{fid:s.fid,registrationStatus:0}:s}function Jr(s){return s.registrationStatus===1&&s.registrationTime+hn<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yr({appConfig:s,heartbeatServiceProvider:e},t){const n=Xr(s,t),a=Or(s,t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&a.append("x-firebase-client",d)}const o={installation:{sdkVersion:mn,appId:s.appId}},l={method:"POST",headers:a,body:JSON.stringify(o)},u=await wn(()=>fetch(n,l));if(u.ok){const d=await u.json();return yn(d)}else throw await vn("Generate Auth Token",u)}function Xr(s,{fid:e}){return`${xn(s)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gs(s,e=!1){let t;const n=await Ut(s.appConfig,i=>{if(!In(i))throw Ke.create("not-registered");const o=i.authToken;if(!e&&si(o))return i;if(o.requestStatus===1)return t=ei(s,e),i;{if(!navigator.onLine)throw Ke.create("app-offline");const l=ai(i);return t=ti(s,l),l}});return t?await t:n.authToken}async function ei(s,e){let t=await Ks(s.appConfig);for(;t.authToken.requestStatus===1;)await jn(100),t=await Ks(s.appConfig);const n=t.authToken;return n.requestStatus===0?gs(s,e):n}function Ks(s){return Ut(s,e=>{if(!In(e))throw Ke.create("not-registered");const t=e.authToken;return ri(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function ti(s,e){try{const t=await Yr(s,e),n=Object.assign(Object.assign({},e),{authToken:t});return await Bt(s.appConfig,n),t}catch(t){if(gn(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await kn(s.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Bt(s.appConfig,n)}throw t}}function In(s){return s!==void 0&&s.registrationStatus===2}function si(s){return s.requestStatus===2&&!ni(s)}function ni(s){const e=Date.now();return e<s.creationTime||s.creationTime+s.expiresIn<e+Tr}function ai(s){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},s),{authToken:e})}function ri(s){return s.requestStatus===1&&s.requestTime+hn<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ii(s){const e=s,{installationEntry:t,registrationPromise:n}=await ps(e);return n?n.catch(console.error):gs(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oi(s,e=!1){const t=s;return await li(t),(await gs(t,e)).token}async function li(s){const{registrationPromise:e}=await ps(s);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(s){if(!s||!s.options)throw Kt("App Configuration");if(!s.name)throw Kt("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!s.options[t])throw Kt(t);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function Kt(s){return Ke.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="installations",di="installations-internal",ui=s=>{const e=s.getProvider("app").getImmediate(),t=ci(e),n=Ft(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},fi=s=>{const e=s.getProvider("app").getImmediate(),t=Ft(e,En).getImmediate();return{getId:()=>ii(t),getToken:a=>oi(t,a)}};function hi(){Et(new Tt(En,ui,"PUBLIC")),Et(new Tt(di,fi,"PRIVATE"))}hi();It(fn,hs);It(fn,hs,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="analytics",mi="firebase_id",pi="origin",gi=60*1e3,xi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",xs="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe=new aa("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ye=new nn("analytics","Analytics",yi);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(s){if(!s.startsWith(xs)){const e=ye.create("invalid-gtag-resource",{gtagURL:s});return pe.warn(e.message),""}return s}function Tn(s){return Promise.all(s.map(e=>e.catch(t=>t)))}function bi(s,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(s,e)),t}function wi(s,e){const t=bi("firebase-js-sdk-policy",{createScriptURL:vi}),n=document.createElement("script"),a=`${xs}?l=${s}&id=${e}`;n.src=t?t==null?void 0:t.createScriptURL(a):a,n.async=!0,document.head.appendChild(n)}function ji(s){let e=[];return Array.isArray(window[s])?e=window[s]:window[s]=e,e}async function Ni(s,e,t,n,a,i){const o=n[a];try{if(o)await e[o];else{const u=(await Tn(t)).find(d=>d.measurementId===a);u&&await e[u.appId]}}catch(l){pe.error(l)}s("config",a,i)}async function Si(s,e,t,n,a){try{let i=[];if(a&&a.send_to){let o=a.send_to;Array.isArray(o)||(o=[o]);const l=await Tn(t);for(const u of o){const d=l.find(c=>c.measurementId===u),f=d&&e[d.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),s("event",n,a||{})}catch(i){pe.error(i)}}function _i(s,e,t,n){async function a(i,...o){try{if(i==="event"){const[l,u]=o;await Si(s,e,t,l,u)}else if(i==="config"){const[l,u]=o;await Ni(s,e,t,n,l,u)}else if(i==="consent"){const[l,u]=o;s("consent",l,u)}else if(i==="get"){const[l,u,d]=o;s("get",l,u,d)}else if(i==="set"){const[l]=o;s("set",l)}else s(i,...o)}catch(l){pe.error(l)}}return a}function ki(s,e,t,n,a){let i=function(...o){window[n].push(arguments)};return window[a]&&typeof window[a]=="function"&&(i=window[a]),window[a]=_i(i,s,e,t),{gtagCore:i,wrappedGtag:window[a]}}function Ci(s){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(xs)&&t.src.includes(s))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii=30,Ei=1e3;class Ti{constructor(e={},t=Ei){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Rn=new Ti;function Ri(s){return new Headers({Accept:"application/json","x-goog-api-key":s})}async function Ai(s){var e;const{appId:t,apiKey:n}=s,a={method:"GET",headers:Ri(n)},i=xi.replace("{app-id}",t),o=await fetch(i,a);if(o.status!==200&&o.status!==304){let l="";try{const u=await o.json();!((e=u.error)===null||e===void 0)&&e.message&&(l=u.error.message)}catch{}throw ye.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function Di(s,e=Rn,t){const{appId:n,apiKey:a,measurementId:i}=s.options;if(!n)throw ye.create("no-app-id");if(!a){if(i)return{measurementId:i,appId:n};throw ye.create("no-api-key")}const o=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new Pi;return setTimeout(async()=>{l.abort()},gi),An({appId:n,apiKey:a,measurementId:i},o,l,e)}async function An(s,{throttleEndTimeMillis:e,backoffCount:t},n,a=Rn){var i;const{appId:o,measurementId:l}=s;try{await Oi(n,e)}catch(u){if(l)return pe.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:l};throw u}try{const u=await Ai(s);return a.deleteThrottleMetadata(o),u}catch(u){const d=u;if(!$i(d)){if(a.deleteThrottleMetadata(o),l)return pe.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:l};throw u}const f=Number((i=d==null?void 0:d.customData)===null||i===void 0?void 0:i.httpStatus)===503?_s(t,a.intervalMillis,Ii):_s(t,a.intervalMillis),c={throttleEndTimeMillis:Date.now()+f,backoffCount:t+1};return a.setThrottleMetadata(o,c),pe.debug(`Calling attemptFetch again in ${f} millis`),An(s,c,n,a)}}function Oi(s,e){return new Promise((t,n)=>{const a=Math.max(e-Date.now(),0),i=setTimeout(t,a);s.addEventListener(()=>{clearTimeout(i),n(ye.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function $i(s){if(!(s instanceof an)||!s.customData)return!1;const e=Number(s.customData.httpStatus);return e===429||e===500||e===503||e===504}class Pi{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Bi(s,e,t,n,a){if(a&&a.global){s("event",t,n);return}else{const i=await e,o=Object.assign(Object.assign({},n),{send_to:i});s("event",t,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mi(){if(ia())try{await oa()}catch(s){return pe.warn(ye.create("indexeddb-unavailable",{errorInfo:s==null?void 0:s.toString()}).message),!1}else return pe.warn(ye.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Li(s,e,t,n,a,i,o){var l;const u=Di(s);u.then(x=>{t[x.measurementId]=x.appId,s.options.measurementId&&x.measurementId!==s.options.measurementId&&pe.warn(`The measurement ID in the local Firebase config (${s.options.measurementId}) does not match the measurement ID fetched from the server (${x.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(x=>pe.error(x)),e.push(u);const d=Mi().then(x=>{if(x)return n.getId()}),[f,c]=await Promise.all([u,d]);Ci(i)||wi(i,f.measurementId),a("js",new Date);const m=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return m[pi]="firebase",m.update=!0,c!=null&&(m[mi]=c),a("config",f.measurementId,m),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this.app=e}_delete(){return delete ht[this.app.options.appId],Promise.resolve()}}let ht={},Qs=[];const Gs={};let Qt="dataLayer",zi="gtag",Js,Dn,Ys=!1;function Ui(){const s=[];if(ra()&&s.push("This is a browser extension environment."),da()||s.push("Cookies are not available."),s.length>0){const e=s.map((n,a)=>`(${a+1}) ${n}`).join(" "),t=ye.create("invalid-analytics-context",{errorInfo:e});pe.warn(t.message)}}function Vi(s,e,t){Ui();const n=s.options.appId;if(!n)throw ye.create("no-app-id");if(!s.options.apiKey)if(s.options.measurementId)pe.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${s.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ye.create("no-api-key");if(ht[n]!=null)throw ye.create("already-exists",{id:n});if(!Ys){ji(Qt);const{wrappedGtag:i,gtagCore:o}=ki(ht,Qs,Gs,Qt,zi);Dn=i,Js=o,Ys=!0}return ht[n]=Li(s,Qs,Gs,e,Js,Qt,t),new Fi(s)}function Zi(s=la()){s=rn(s);const e=Ft(s,Mt);return e.isInitialized()?e.getImmediate():Wi(s)}function Wi(s,e={}){const t=Ft(s,Mt);if(t.isInitialized()){const a=t.getImmediate();if(ca(e,t.getOptions()))return a;throw ye.create("already-initialized")}return t.initialize({options:e})}function Hi(s,e,t,n){s=rn(s),Bi(Dn,ht[s.app.options.appId],e,t,n).catch(a=>pe.error(a))}const Xs="@firebase/analytics",en="0.10.17";function qi(){Et(new Tt(Mt,(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return Vi(n,a,t)},"PUBLIC")),Et(new Tt("analytics-internal",s,"PRIVATE")),It(Xs,en),It(Xs,en,"esm2017");function s(e){try{const t=e.getProvider(Mt).getImmediate();return{logEvent:(n,a,i)=>Hi(t,n,a,i)}}catch(t){throw ye.create("interop-component-reg-failed",{reason:t})}}}qi();const Ki={apiKey:"AIzaSyAgRdBtg_I5NMAC5x3gh-7_CvQ058n25go",authDomain:"jiang-ai-web.firebaseapp.com",projectId:"jiang-ai-web",storageBucket:"jiang-ai-web.firebasestorage.app",messagingSenderId:"923755523160",appId:"1:923755523160:web:043dca5d76b6ded7ecee2d",measurementId:"G-8FXGZWC0M4"},ys=ua(Ki),dt=fa(ys),it=ha(ys);typeof window<"u"&&Zi(ys);const On=h.createContext(void 0);function Se(){const s=h.useContext(On);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s}function Qi({children:s}){const[e,t]=h.useState(null),[n,a]=h.useState(!0),i=async(m,x)=>{await ba(dt,m,x)},o=async(m,x)=>{const v=await va(dt,m,x);v.user&&await ks(v.user)},l=async()=>{e&&!e.emailVerified&&await ks(e)},u=async()=>{e&&await pa(e)},d=async()=>{const m=new xa;await ya(dt,m)},f=async()=>{await ga(dt)};h.useEffect(()=>ma(dt,x=>{t(x),a(!1)}),[]);const c={currentUser:e,login:i,register:o,loginWithGoogle:d,logout:f,sendVerificationEmail:l,reloadUser:u,loading:n};return r.jsx(On.Provider,{value:c,children:!n&&s})}const Gi=async(s,e,t)=>{var n,a;try{(n=t==null?void 0:t.onSyncStart)==null||n.call(t);const i=at(it,"userSettings",s.uid);return await us(i,{...e,lastSync:Rt()},{merge:!0}),console.log(""),(a=t==null?void 0:t.onSyncSuccess)==null||a.call(t,""),!0}catch(i){return console.error(":",i),!1}},Ji=async s=>{try{const e=at(it,"userSettings",s.uid),t=await ds(e);if(t.exists()){const n=t.data();return console.log(""),n}else return console.log(""),null}catch(e){return console.error(":",e),null}},os=async(s,e,t)=>{var n,a;try{(n=t==null?void 0:t.onSyncStart)==null||n.call(t);const i=at(it,"userWebsites",s.uid);return await us(i,{websites:e,lastSync:Rt()}),console.log(""),(a=t==null?void 0:t.onSyncSuccess)==null||a.call(t,""),!0}catch(i){return console.error(":",i),!1}},Yi=async s=>{try{const e=at(it,"userWebsites",s.uid),t=await ds(e);if(t.exists()){const n=t.data();return console.log(""),n.websites}else return console.log(""),null}catch(e){return console.error(":",e),null}},Xi=(s,e)=>{const t={};return s.forEach(n=>{t[n.id]=n}),e.forEach(n=>{const a=t[n.id];(!a||n.visitCount>a.visitCount)&&(t[n.id]=n)}),Object.values(t)};let Gt=null;const eo=(s,e,t,n)=>{Gt&&clearTimeout(Gt),Gt=setTimeout(async()=>{var a,i,o,l;(a=n==null?void 0:n.onSyncStart)==null||a.call(n);try{const d=(await Promise.allSettled([os(s,e),Gi(s,t)])).filter(f=>f.status==="rejected");d.length===0?(i=n==null?void 0:n.onSyncSuccess)==null||i.call(n,""):(o=n==null?void 0:n.onSyncError)==null||o.call(n,`${d.length} `)}catch(u){(l=n==null?void 0:n.onSyncError)==null||l.call(n,": "+u.message)}},3e3)},tn=async(s,e,t)=>{var n,a;try{(n=t==null?void 0:t.onSyncStart)==null||n.call(t);const i=at(it,"userProfiles",s.uid),o={uid:s.uid,email:s.email||"",displayName:e,createdAt:Rt(),updatedAt:Rt()};return await us(i,o,{merge:!0}),console.log(""),(a=t==null?void 0:t.onSyncSuccess)==null||a.call(t,""),!0}catch(i){return console.error(":",i),!1}},Jt=async s=>{try{const e=at(it,"userProfiles",s.uid),t=await ds(e);if(t.exists()){const n=t.data();return console.log(""),n}else return console.log(""),null}catch(e){return console.error(":",e),null}},$n=h.createContext(void 0);function Pn(){const s=h.useContext($n);if(s===void 0)throw new Error("useUserProfile must be used within a UserProfileProvider");return s}function to({children:s}){const{currentUser:e}=Se(),[t,n]=h.useState(null),[a,i]=h.useState(!1),o=(t==null?void 0:t.displayName)||"",l=async d=>{if(!e||!e.emailVerified)return!1;i(!0);try{return await tn(e,d)?(n(c=>c?{...c,displayName:d,updatedAt:new Date}:null),setTimeout(async()=>{const c=await Jt(e);c&&n(c)},1e3),!0):!1}catch(f){return console.error(":",f),!1}finally{i(!1)}};h.useEffect(()=>{(async()=>{var f;if(e&&e.emailVerified){i(!0);try{const c=await Jt(e);if(c)n(c);else{const m=((f=e.email)==null?void 0:f.split("@")[0])||"";await tn(e,m);const x=await Jt(e);n(x)}}catch(c){console.error(":",c)}finally{i(!1)}}else n(null)})()},[e]);const u={userProfile:t,displayName:o,updateDisplayName:l,loading:a};return r.jsx($n.Provider,{value:u,children:s})}const sn={isOnline:navigator.onLine,lastSyncTime:null,syncInProgress:!1,syncError:null,pendingChanges:0},Bn=h.createContext(void 0);function vs(){const s=h.useContext(Bn);if(s===void 0)throw new Error("useSyncStatus must be used within a SyncProvider");return s}function so({children:s}){const[e,t]=h.useState(sn),n=o=>{t(l=>({...l,...o}))},a=()=>{t(sn)};window.addEventListener("online",()=>{n({isOnline:!0})}),window.addEventListener("offline",()=>{n({isOnline:!1})});const i={syncStatus:e,updateSyncStatus:n,resetSyncStatus:a};return r.jsx(Bn.Provider,{value:i,children:s})}function no(s){const{currentUser:e}=Se(),{updateSyncStatus:t}=vs(),{cardOpacity:n,searchBarOpacity:a,parallaxEnabled:i,wallpaperResolution:o}=rt(),l=h.useRef(""),u=h.useRef(null),d=h.useRef(null),f=h.useRef(0),c=h.useCallback((m=!1)=>{if(!e||!e.emailVerified){e&&!e.emailVerified&&t({syncInProgress:!1,syncError:"",pendingChanges:1});return}const x={cardOpacity:n,searchBarOpacity:a,parallaxEnabled:i,wallpaperResolution:o,theme:localStorage.getItem("theme")||"light",lastSync:null};console.log(m?" ...":" ..."),eo(e,s,x,{onSyncStart:()=>{t({syncInProgress:!0,syncError:null,pendingChanges:0})},onSyncSuccess:v=>{const $=JSON.stringify({websites:s.map(k=>({id:k.id,name:k.name,url:k.url,visitCount:k.visitCount})),settings:{cardOpacity:n,searchBarOpacity:a,parallaxEnabled:i,wallpaperResolution:o,theme:x.theme}});l.current=$,f.current=0,t({syncInProgress:!1,lastSyncTime:new Date,syncError:null,pendingChanges:0}),console.log(" :",v)},onSyncError:v=>{t({syncInProgress:!1,syncError:v,pendingChanges:1}),console.error(" :",v)}})},[e,s,n,a,i,o,t]);h.useEffect(()=>{if(JSON.stringify({websites:s.map(R=>({id:R.id,name:R.name,url:R.url,visitCount:R.visitCount})),settings:{cardOpacity:n,searchBarOpacity:a,parallaxEnabled:i,wallpaperResolution:o,theme:localStorage.getItem("theme")||"light"}})===l.current)return;const x=Date.now();f.current===0&&(f.current=x),u.current&&clearTimeout(u.current);const v=x-f.current,$=3e4,k=3e3;if(v>=$){console.log(" "),d.current&&(clearTimeout(d.current),d.current=null),c(!0);return}if(u.current=setTimeout(()=>{c(!1)},k),!d.current){const R=$-v;console.log(` ${Math.round(R/1e3)}`),d.current=setTimeout(()=>{console.log(" "),u.current&&(clearTimeout(u.current),u.current=null),c(!0)},R)}return()=>{u.current&&clearTimeout(u.current)}},[e,s,n,a,i,o,c]),h.useEffect(()=>()=>{u.current&&clearTimeout(u.current),d.current&&clearTimeout(d.current)},[])}function ao(){const{syncStatus:s}=vs(),{currentUser:e}=Se(),[,t]=h.useState(0);if(h.useEffect(()=>{const l=()=>{if(!s.lastSyncTime)return 6e4;const c=Math.floor((new Date().getTime()-s.lastSyncTime.getTime())/1e3);return c<60?1e3:c<3600?6e4:3e5},u=()=>{const f=l();return setTimeout(()=>{t(c=>c+1),u()},f)},d=u();return()=>clearTimeout(d)},[s.lastSyncTime]),!e)return null;const n=l=>{if(!l)return"";const d=Math.floor((new Date().getTime()-l.getTime())/1e3);return d<60?`${d}`:d<3600?`${Math.floor(d/60)}`:d<86400?`${Math.floor(d/3600)}`:`${Math.floor(d/86400)}`},a=()=>s.syncInProgress?r.jsx("i",{className:"fa-solid fa-sync fa-spin text-blue-500"}):s.syncError?r.jsx("i",{className:"fa-solid fa-exclamation-triangle text-red-500"}):s.isOnline?s.pendingChanges>0?r.jsx("i",{className:"fa-solid fa-clock text-orange-500"}):r.jsx("i",{className:"fa-solid fa-check-circle text-green-500"}):r.jsx("i",{className:"fa-solid fa-wifi-slash text-gray-500"}),i=()=>s.syncInProgress?"...":s.syncError?"":s.isOnline?s.pendingChanges>0?`${s.pendingChanges} `:"":"",o=()=>s.syncError?s.syncError:`: ${n(s.lastSyncTime)}`;return r.jsx("div",{className:"space-y-2",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[a(),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:i()})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${s.isOnline?"bg-green-500":"bg-red-500"}`}),r.jsx("span",{className:"text-xs text-gray-500",children:s.isOnline?"":""})]})]}),r.jsx("p",{className:"text-xs text-gray-500",children:o()}),r.jsx(mt,{children:s.syncError&&r.jsx(ie.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"bg-red-50 border border-red-200 rounded p-2",children:r.jsxs("p",{className:"text-xs text-red-600",children:[r.jsx("i",{className:"fa-solid fa-info-circle mr-1"}),s.syncError]})})}),r.jsx(mt,{children:s.syncInProgress&&r.jsx(ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"w-full bg-gray-200 rounded-full h-1",children:r.jsx(ie.div,{className:"bg-blue-500 h-1 rounded-full",initial:{width:"0%"},animate:{width:"100%"},transition:{duration:2,ease:"easeInOut"}})})})]})})}function ro(){const{syncStatus:s}=vs(),{currentUser:e}=Se();return e?r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[r.jsxs("div",{className:"bg-blue-50 rounded p-2 text-center",children:[r.jsx("div",{className:"font-medium text-blue-700",children:""}),r.jsx("div",{className:"text-blue-600",children:e?"":""})]}),r.jsxs("div",{className:"bg-green-50 rounded p-2 text-center",children:[r.jsx("div",{className:"font-medium text-green-700",children:""}),r.jsx("div",{className:"text-green-600",children:s.pendingChanges>0?"3":"30"})]})]}):null}function io({onSuccess:s}){const[e,t]=h.useState(!0),[n,a]=h.useState(""),[i,o]=h.useState(""),[l,u]=h.useState(""),[d,f]=h.useState(!1),[c,m]=h.useState(""),[x,v]=h.useState(!1),[$,k]=h.useState(""),{login:R,register:ee,loginWithGoogle:W,sendVerificationEmail:N}=Se(),j=async F=>{if(F.preventDefault(),!n||!i){m("");return}if(!e&&!l.trim()){m("");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)){m("");return}if(!e){if(l.length<2||l.length>20){m("2-20");return}if(!/^[a-zA-Z0-9\u4e00-\u9fa5_-]+$/.test(l)){m("");return}}f(!0),m("");try{e?(await R(n,i),s()):(await ee(n,i),v(!0),k(n),localStorage.setItem("pendingDisplayName",l))}catch(q){switch(console.error(":",q),q.code){case"auth/user-not-found":m("");break;case"auth/wrong-password":m("");break;case"auth/email-already-in-use":m("");break;case"auth/weak-password":m("6");break;case"auth/invalid-email":m("");break;case"auth/network-request-failed":m(" Firebase ");break;case"auth/too-many-requests":m("");break;case"auth/invalid-credential":m("");break;default:m(e?"":"")}}finally{f(!1)}},w=async()=>{f(!0),m("");try{await W(),s()}catch(F){console.error("Google:",F),m("Google")}finally{f(!1)}},C=async()=>{try{await N(),alert("")}catch{alert("")}};return x?r.jsx(ie.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx("i",{className:"fa-solid fa-envelope-circle-check text-green-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-green-800",children:""}),r.jsxs("p",{className:"text-sm text-green-700 mt-1",children:[" ",r.jsx("strong",{children:$}),"  "]}),r.jsxs("div",{className:"mt-3 flex space-x-2",children:[r.jsx("button",{onClick:C,className:"text-xs bg-green-100 hover:bg-green-200 text-green-800 px-2 py-1 rounded",children:""}),r.jsx("button",{onClick:()=>{v(!1),t(!0),a(""),o(""),u("")},className:"text-xs bg-blue-100 hover:bg-blue-200 text-blue-800 px-2 py-1 rounded",children:""})]})]})]})}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e?"":""}),r.jsx("p",{className:"text-sm text-gray-600",children:e?"":""})]}),c&&r.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:c}),r.jsxs("form",{onSubmit:j,className:"space-y-4",children:[!e&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),r.jsx("input",{type:"text",value:l,onChange:F=>u(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"2-20",disabled:d,maxLength:20}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:""})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),r.jsx("input",{type:"email",value:n,onChange:F=>a(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"",disabled:d})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),r.jsx("input",{type:"password",value:i,onChange:F=>o(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"6",disabled:d,minLength:6})]}),r.jsx("button",{type:"submit",disabled:d,className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white py-2 px-4 rounded-md transition-colors",children:d?"...":e?"":""})]}),r.jsxs("div",{className:"mt-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-gray-300"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-2 bg-white text-gray-500",children:""})})]}),r.jsxs("button",{onClick:w,disabled:d,className:"mt-4 w-full bg-red-500 hover:bg-red-600 disabled:bg-gray-400 text-white py-2 px-4 rounded-md transition-colors flex items-center justify-center",children:[r.jsx("i",{className:"fab fa-google mr-2"})," Google ",e?"":""]})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx("button",{onClick:()=>t(!e),className:"text-blue-500 hover:text-blue-600",disabled:d,children:e?"":""})})]})}function oo(){const{currentUser:s}=Se(),{displayName:e,updateDisplayName:t,loading:n}=Pn(),[a,i]=h.useState(!1),[o,l]=h.useState(e),[u,d]=h.useState(!1),[f,c]=h.useState("");if(h.useEffect(()=>{l(e)},[e]),!s||!s.emailVerified)return null;const m=async()=>{if(!o.trim()){c("");return}if(o.length<2||o.length>20){c("2-20");return}if(!/^[a-zA-Z0-9\u4e00-\u9fa5_-]+$/.test(o)){c("");return}d(!0),c("");try{await t(o)?(i(!1),alert("")):c("")}catch(v){c(""),console.error(":",v)}finally{d(!1)}},x=()=>{l(e),i(!1),c("")};return r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:""}),!a&&r.jsxs("button",{onClick:()=>i(!0),className:"text-xs text-blue-500 hover:text-blue-600",disabled:n,children:[r.jsx("i",{className:"fa-solid fa-edit mr-1"}),""]})]}),a?r.jsxs("div",{className:"space-y-2",children:[r.jsx("input",{type:"text",value:o,onChange:v=>l(v.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"",maxLength:20,disabled:u}),f&&r.jsx("p",{className:"text-xs text-red-600",children:f}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:m,disabled:u||!o.trim(),className:"text-xs bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white px-2 py-1 rounded",children:u?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-1"}),"..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fa-solid fa-check mr-1"}),""]})}),r.jsxs("button",{onClick:x,disabled:u,className:"text-xs bg-gray-500 hover:bg-gray-600 text-white px-2 py-1 rounded",children:[r.jsx("i",{className:"fa-solid fa-times mr-1"}),""]})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"2-20"})]}):r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("i",{className:"fa-solid fa-user text-gray-400"}),r.jsx("span",{className:"text-sm font-medium text-gray-800",children:n?"...":e})]}),r.jsx("div",{className:"border-t border-gray-200 pt-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("i",{className:"fa-solid fa-envelope text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-600",children:s.email})]}),r.jsx("i",{className:"fa-solid fa-check-circle text-green-500 text-xs",title:""})]})})]})}const Ve=class Ve{static getInstance(){return Ve.instance||(Ve.instance=new Ve),Ve.instance}hasConsent(){try{return localStorage.getItem("cookie-consent")==="accepted"}catch{return!1}}getConsentStatus(){try{const e=localStorage.getItem("cookie-consent");return e==="accepted"?"accepted":e==="declined"?"declined":"pending"}catch{return"pending"}}setItem(e,t,n=!1){try{return n||this.hasConsent()?(localStorage.setItem(e,t),!0):(console.warn(` : ${e} (Cookie)`),!1)}catch(a){return console.error(":",a),!1}}getItem(e,t=!1){try{return t||this.hasConsent()?localStorage.getItem(e):(console.warn(` : ${e} (Cookie)`),null)}catch(n){return console.error(":",n),null}}removeItem(e,t=!1){try{return t||this.hasConsent()?(localStorage.removeItem(e),!0):(console.warn(` : ${e} (Cookie)`),!1)}catch(n){return console.error(":",n),!1}}getAllKeys(e=!0){try{if(!this.hasConsent()&&!e)return[];const t=[],n=["cookie-consent","cookie-consent-date"];for(let a=0;a<localStorage.length;a++){const i=localStorage.key(a);i&&(e||!n.includes(i))&&t.push(i)}return t}catch{return[]}}clearNonEssentialData(){const e=["cookie-consent","cookie-consent-date"];this.getAllKeys(!0).forEach(n=>{if(!e.includes(n))try{localStorage.removeItem(n)}catch(a){console.error(`: ${n}`,a)}}),console.log(" ")}getStorageStats(){const e=this.getAllKeys(!0),t=["cookie-consent","cookie-consent-date"],n=e.filter(i=>!t.includes(i)).length;let a=0;return e.forEach(i=>{try{const o=localStorage.getItem(i)||"";a+=i.length+o.length}catch{}}),{totalKeys:e.length,essentialKeys:t.filter(i=>e.includes(i)).length,nonEssentialKeys:n,consentRequired:!this.hasConsent()&&n>0,storageUsed:`${Math.round(a/1024*100)/100} KB`}}exportData(){if(!this.hasConsent())return console.warn("  (Cookie)"),null;const e={};return this.getAllKeys(!1).forEach(n=>{try{const a=localStorage.getItem(n);a&&(e[n]=JSON.parse(a))}catch{e[n]=localStorage.getItem(n)}}),{exportTime:new Date().toISOString(),consentStatus:this.getConsentStatus(),data:e}}};de(Ve,"instance");let Lt=Ve;const Re=Lt.getInstance();function Mn({isOpen:s,onClose:e}){const[t,n]=h.useState(Re.getStorageStats()),[a,i]=h.useState(Re.getConsentStatus());h.useEffect(()=>{s&&(n(Re.getStorageStats()),i(Re.getConsentStatus()))},[s]);const o=()=>{const d=a==="accepted"?"declined":"accepted";d==="accepted"?(localStorage.setItem("cookie-consent","accepted"),localStorage.setItem("cookie-consent-date",new Date().toISOString())):(localStorage.setItem("cookie-consent","declined"),localStorage.setItem("cookie-consent-date",new Date().toISOString()),Re.clearNonEssentialData()),i(d),n(Re.getStorageStats())},l=()=>{confirm(` 


`)&&(Re.clearNonEssentialData(),n(Re.getStorageStats()),alert(" "))},u=()=>{const d=Re.exportData();if(!d){alert(" Cookie");return}const f=new Blob([JSON.stringify(d,null,2)],{type:"application/json"}),c=URL.createObjectURL(f),m=document.createElement("a");m.href=c,m.download=`_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(c),alert(" ")};return s?r.jsx(mt,{children:r.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:e}),r.jsxs(ie.div,{className:"w-full max-w-2xl bg-white rounded-xl shadow-2xl z-50 max-h-[90vh] flex flex-col mx-4",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20,stiffness:300},children:[r.jsx("div",{className:"p-6 pb-0",children:r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("i",{className:"fa-solid fa-shield-halved text-blue-600 text-2xl"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:""})]}),r.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 text-xl",children:r.jsx("i",{className:"fa-solid fa-xmark"})})]})}),r.jsxs("div",{className:"flex-1 px-6 py-4 space-y-6 overflow-y-auto",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[r.jsx("i",{className:"fa-solid fa-cookie-bite text-amber-500"}),"Cookie"]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm text-gray-600",children:[":",r.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${a==="accepted"?"bg-green-100 text-green-800":a==="declined"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:a==="accepted"?" ":a==="declined"?" ":" "})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a==="accepted"?"Cookie":a==="declined"?"Cookie":""})]}),a!=="pending"&&r.jsx("button",{onClick:o,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${a==="accepted"?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:a==="accepted"?"":""})]})]}),r.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[r.jsx("i",{className:"fa-solid fa-chart-pie text-blue-600"}),""]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.totalKeys}),r.jsx("div",{className:"text-xs text-gray-600",children:""})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.essentialKeys}),r.jsx("div",{className:"text-xs text-gray-600",children:""})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t.nonEssentialKeys}),r.jsx("div",{className:"text-xs text-gray-600",children:""})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:t.storageUsed}),r.jsx("div",{className:"text-xs text-gray-600",children:""})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[r.jsx("i",{className:"fa-solid fa-info-circle text-blue-600"}),""]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 rounded-lg",children:[r.jsx("i",{className:"fa-solid fa-shield-check text-green-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-green-800",children:""}),r.jsx("div",{className:"text-green-700",children:"Cookie - "})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-50 rounded-lg",children:[r.jsx("i",{className:"fa-solid fa-bookmark text-blue-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-blue-800",children:""}),r.jsx("div",{className:"text-blue-700",children:""})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-purple-50 rounded-lg",children:[r.jsx("i",{className:"fa-solid fa-palette text-purple-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-purple-800",children:""}),r.jsx("div",{className:"text-purple-700",children:""})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-orange-50 rounded-lg",children:[r.jsx("i",{className:"fa-solid fa-chart-line text-orange-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-orange-800",children:""}),r.jsx("div",{className:"text-orange-700",children:""})]})]})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"fa-solid fa-wrench text-gray-600"}),""]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:u,disabled:a!=="accepted",className:"w-full p-3 bg-blue-100 hover:bg-blue-200 disabled:bg-gray-100 disabled:text-gray-400 text-blue-800 rounded-lg transition-colors text-left",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("i",{className:"fa-solid fa-download"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:""}),r.jsx("div",{className:"text-sm opacity-75",children:"JSON"})]})]})}),r.jsx("button",{onClick:l,className:"w-full p-3 bg-red-100 hover:bg-red-200 text-red-800 rounded-lg transition-colors text-left",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("i",{className:"fa-solid fa-trash"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:""}),r.jsx("div",{className:"text-sm opacity-75",children:""})]})]})})]}),r.jsxs("div",{className:"mt-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[r.jsx("i",{className:"fa-solid fa-book-open text-blue-500"}),""]}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:""}),r.jsxs("a",{href:"/tutorial.html",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium shadow transition-colors",children:[r.jsx("i",{className:"fa-solid fa-graduation-cap"}),""]})]})]})]}),r.jsx("div",{className:"p-6 pt-0 border-t",children:r.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[r.jsxs("span",{children:[": ",new Date().toLocaleDateString("zh-CN")]}),r.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg",children:""})]})})]})]})}):null}function lo({isOpen:s,onClose:e,onConfirm:t,title:n,message:a,confirmText:i="",cancelText:o="",type:l="warning"}){const d=(()=>{switch(l){case"danger":return{icon:"fa-solid fa-triangle-exclamation text-red-500",confirmButton:"bg-red-500 hover:bg-red-600 text-white",borderColor:"border-red-200"};case"warning":return{icon:"fa-solid fa-exclamation-triangle text-orange-500",confirmButton:"bg-orange-500 hover:bg-orange-600 text-white",borderColor:"border-orange-200"};case"info":return{icon:"fa-solid fa-info-circle text-blue-500",confirmButton:"bg-blue-500 hover:bg-blue-600 text-white",borderColor:"border-blue-200"}}})(),f=()=>{t(),e()};return r.jsx(mt,{children:s&&r.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center",children:[r.jsx(ie.div,{className:"absolute inset-0 bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),r.jsx(ie.div,{className:`relative bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 border-2 ${d.borderColor}`,initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20,stiffness:300},children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("i",{className:`${d.icon} text-2xl`})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:n}),r.jsx("div",{className:"text-sm text-gray-600 whitespace-pre-line",children:a})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[r.jsx("button",{onClick:e,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:o}),r.jsx("button",{onClick:f,className:`px-4 py-2 rounded-lg transition-colors ${d.confirmButton}`,children:i})]})]})})]})})}const co=[{id:"1",name:"GitHub",url:"https://github.com",favicon:"https://github.githubassets.com/favicons/favicon.png",tags:["",""],visitCount:42,lastVisit:"2023-05-15",note:""},{id:"2",name:"Dribbble",url:"https://dribbble.com",favicon:"https://cdn.dribbble.com/assets/favicon-b38525134603b9513174e916967b4baaaaaa5ee0297c4f53d6fb3ab8ad26c3a4.ico",tags:["",""],visitCount:28,lastVisit:"2023-05-10",note:""},{id:"3",name:"Medium",url:"https://medium.com",favicon:"https://miro.medium.com/v2/resize:fill:32:32/1*sHhtYhaCe2Uc3IU0IgKwIQ.png",tags:["",""],visitCount:15,lastVisit:"2023-05-05",note:""}];function Ln(s={}){const{enableAutoSync:e=!0,syncDelay:t=100}=s,n=Lt.getInstance(),[a,i]=h.useState(!0),[o,l]=h.useState(null),[u,d]=h.useState(!0),f=h.useCallback(()=>{try{const N=n.getItem("websites");if(N){const j=JSON.parse(N);if(Array.isArray(j)&&j.length>0){const w=j.filter(C=>C.id&&C.name&&C.url);if(w.length>0)return console.log(`  ${w.length} `),w}}}catch(N){console.warn(":",N),l("")}return co},[n]),[c,m]=h.useState(()=>{const N=f();return i(!1),N}),x=h.useCallback(N=>{try{n.setItem("websites",JSON.stringify(N))||console.warn("Cookie")}catch(j){console.error(":",j),l("")}},[n]);h.useEffect(()=>{if(!e||!u)return;const N=setTimeout(()=>{const j=f();(j.length!==c.length||JSON.stringify(j.map(w=>w.id).sort())!==JSON.stringify(c.map(w=>w.id).sort()))&&(console.log(" "),m(j)),d(!1)},t);return()=>clearTimeout(N)},[e,t,u,f,c]),h.useEffect(()=>{!u&&e&&x(c)},[c,x,e,u]);const v=h.useCallback(N=>{l(null),m(N)},[]),$=h.useCallback(N=>{const j={...N,visitCount:0,lastVisit:new Date().toISOString().split("T")[0]};v(w=>[...w,j])},[v]),k=h.useCallback((N,j)=>{v(w=>w.map(C=>C.id===N?{...C,...j}:C))},[v]),R=h.useCallback(N=>{v(j=>j.filter(w=>w.id!==N))},[v]),ee=h.useCallback(async()=>{try{const N={websites:c,settings:{cardOpacity:parseFloat(localStorage.getItem("cardOpacity")||"0.1"),searchBarOpacity:parseFloat(localStorage.getItem("searchBarOpacity")||"0.1"),parallaxEnabled:JSON.parse(localStorage.getItem("parallaxEnabled")||"true"),wallpaperResolution:localStorage.getItem("wallpaperResolution")||"1080p",theme:localStorage.getItem("theme")||"light"},exportTime:new Date().toISOString(),version:"1.0"};return JSON.stringify(N,null,2)}catch(N){throw new Error(`: ${N instanceof Error?N.message:""}`)}},[c]),W=h.useCallback(async N=>{try{if(!N.websites||!Array.isArray(N.websites))return{success:!1,message:""};const j=N.websites.filter(w=>w.id&&w.name&&w.url&&typeof w.id=="string"&&typeof w.name=="string"&&typeof w.url=="string").map(w=>({...w,visitCount:typeof w.visitCount=="number"?w.visitCount:0,lastVisit:w.lastVisit||new Date().toISOString().split("T")[0],tags:Array.isArray(w.tags)?w.tags:[],note:w.note||""}));return j.length===0?{success:!1,message:""}:(v(j),{success:!0,message:` ${j.length} `,validCount:j.length})}catch(j){return{success:!1,message:`: ${j instanceof Error?j.message:""}`}}},[v]);return{websites:c,setWebsites:v,addWebsite:$,updateWebsite:k,deleteWebsite:R,exportData:ee,importData:W,isLoading:a,error:o}}function uo(){const s=h.useCallback(()=>{try{return{cardOpacity:parseFloat(localStorage.getItem("cardOpacity")||"0.1"),searchBarOpacity:parseFloat(localStorage.getItem("searchBarOpacity")||"0.1"),parallaxEnabled:JSON.parse(localStorage.getItem("parallaxEnabled")||"true"),wallpaperResolution:localStorage.getItem("wallpaperResolution")||"1080p",theme:localStorage.getItem("theme")||"light"}}catch(n){return console.warn(":",n),{cardOpacity:.1,searchBarOpacity:.1,parallaxEnabled:!0,wallpaperResolution:"1080p",theme:"light"}}},[]),e=h.useCallback(n=>{const a=[];return n.cardOpacity!==void 0&&(typeof n.cardOpacity!="number"||n.cardOpacity<.05||n.cardOpacity>.3)&&a.push("0.05-0.3"),n.searchBarOpacity!==void 0&&(typeof n.searchBarOpacity!="number"||n.searchBarOpacity<.05||n.searchBarOpacity>.3)&&a.push("0.05-0.3"),n.parallaxEnabled!==void 0&&typeof n.parallaxEnabled!="boolean"&&a.push("truefalse"),n.wallpaperResolution!==void 0&&(["4k","1080p","720p","mobile"].includes(n.wallpaperResolution)||a.push("")),n.theme!==void 0&&(["light","dark"].includes(n.theme)||a.push("lightdark")),{valid:a.length===0,errors:a}},[]),t=h.useCallback(n=>{const a=e(n),i=[];if(!a.valid)return console.warn(":",a.errors),{success:!1,appliedSettings:[]};try{return typeof n.cardOpacity=="number"&&(localStorage.setItem("cardOpacity",n.cardOpacity.toString()),i.push("")),typeof n.searchBarOpacity=="number"&&(localStorage.setItem("searchBarOpacity",n.searchBarOpacity.toString()),i.push("")),typeof n.parallaxEnabled=="boolean"&&(localStorage.setItem("parallaxEnabled",JSON.stringify(n.parallaxEnabled)),i.push("")),n.wallpaperResolution&&["4k","1080p","720p","mobile"].includes(n.wallpaperResolution)&&(localStorage.setItem("wallpaperResolution",n.wallpaperResolution),i.push("")),n.theme&&["light","dark"].includes(n.theme)&&(localStorage.setItem("theme",n.theme),i.push("")),{success:!0,appliedSettings:i}}catch(o){return console.error(":",o),{success:!1,appliedSettings:[]}}},[e]);return{exportSettings:s,importSettings:t,validateSettings:e}}function fo(s,e){const[t,n]=h.useState(!1),[a,i]=h.useState(!1),[o,l]=h.useState(null),{importData:u}=Ln({enableAutoSync:!1}),{exportSettings:d,importSettings:f}=uo(),c=h.useCallback(async(x={})=>{const{includeSettings:v=!0,includeWebsites:$=!0}=x;if(!t){n(!0),l(null);try{if($&&(!s||s.length===0)&&!confirm(""))return;const k={exportTime:new Date().toISOString(),version:"1.0"};$&&(k.websites=s||[]),v&&(k.settings=d());const R=JSON.stringify(k,null,2);if(new Blob([R]).size/1024/1024>50)throw new Error("50MB");const W=new Blob([R],{type:"application/json"}),N=`__${new Date().toISOString().split("T")[0]}.json`;if("showSaveFilePicker"in window)try{const F=await(await window.showSaveFilePicker({suggestedName:N,types:[{description:"JSON",accept:{"application/json":[".json"]}}]})).createWritable();await F.write(W),await F.close(),alert(`${$?` ${s.length} `:""}${v?"":""}`);return}catch(C){if(C.name==="AbortError")return;console.warn("API:",C)}const j=URL.createObjectURL(W),w=document.createElement("a");w.href=j,w.download=N,w.style.display="none",document.body.appendChild(w),w.click(),document.body.removeChild(w),setTimeout(()=>URL.revokeObjectURL(j),1e3),alert(`${$?` ${s.length} `:""}${v?"":""}`)}catch(k){const R=k instanceof Error?k.message:"";l(`: ${R}`),alert(`${R}`)}finally{n(!1)}}},[t,s,d]),m=h.useCallback(async x=>a?{success:!1,message:""}:(i(!0),l(null),new Promise(v=>{const $=new FileReader;$.onload=async k=>{var R;try{const ee=(R=k.target)==null?void 0:R.result,W=JSON.parse(ee);let N=0,j=[];if(W.websites){const C=await u(W);C.success&&(e(W.websites.filter(F=>F.id&&F.name&&F.url)),N=C.validCount||0)}if(W.settings){const C=f(W.settings);C.success&&(j=C.appliedSettings)}if(N+j.length===0){v({success:!1,message:""});return}v({success:!0,message:"",details:{websitesImported:N,settingsApplied:j}})}catch(ee){const W=ee instanceof Error?ee.message:"";l(`: ${W}`),v({success:!1,message:`: ${W}`})}finally{i(!1)}},$.onerror=()=>{l(""),i(!1),v({success:!1,message:""})},$.readAsText(x)})),[a,u,f,e]);return{exportAllData:c,importAllData:m,isExporting:t,isImporting:a,error:o}}function ho({onClose:s,websites:e,setWebsites:t}){const[n,a]=h.useState(!1),[i,o]=h.useState(!1),[l,u]=h.useState(!1),[d,f]=h.useState(null),{exportAllData:c,importAllData:m,isExporting:x,isImporting:v}=fo(e,t),{cardOpacity:$,searchBarOpacity:k,parallaxEnabled:R,wallpaperResolution:ee,setCardOpacity:W,setSearchBarOpacity:N,setParallaxEnabled:j,setWallpaperResolution:w,setIsSettingsOpen:C}=rt(),{currentUser:F,logout:U}=Se(),q=h.useRef(null);h.useEffect(()=>(C(!0),()=>C(!1)),[C]);const z=()=>{C(!1),s()},P=S=>{const D={...S,visitCount:0,lastVisit:new Date().toISOString().split("T")[0]};t([...e,D]),a(!1)},K=async()=>{await c()},se=S=>{var te;const D=(te=S.target.files)==null?void 0:te[0];if(!D)return;const X=5*1024*1024;if(D.size>X){alert("5MB"),q.current&&(q.current.value="");return}if(!D.type.includes("json")&&!D.name.endsWith(".json")){alert("JSON"),q.current&&(q.current.value="");return}f(D),u(!0),q.current&&(q.current.value="")},Y=async()=>{if(!d||v)return;const S=await m(d);if(S.success){const D=S.details;let X="";D!=null&&D.websitesImported&&(X+=` ${D.websitesImported} `),D!=null&&D.settingsApplied&&D.settingsApplied.length>0&&(X+=`${D.settingsApplied.join("")}`),X+="",alert(X),window.location.reload()}else alert(S.message);f(null)};return r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center select-none",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:z}),r.jsxs(ie.div,{className:"w-96 bg-white rounded-xl shadow-2xl z-50 max-h-[80vh] flex flex-col select-none",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20,stiffness:300},children:[r.jsx("div",{className:"p-6 pb-0 select-none",children:r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-medium text-gray-800 select-none",children:""}),r.jsx("button",{onClick:z,className:"text-gray-500 hover:text-gray-700 select-none",children:r.jsx("i",{className:"fa-solid fa-xmark text-lg select-none"})})]})}),r.jsxs("div",{className:"flex-1 px-6 py-2 pb-6 space-y-6 overflow-y-auto select-none",children:[r.jsxs("div",{className:"space-y-4 select-none",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:""}),F?r.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 space-y-4",children:[r.jsx(oo,{}),r.jsx("div",{className:"flex justify-center pt-1",children:r.jsxs("button",{onClick:async()=>{try{await U(),z()}catch(S){console.error(":",S)}},className:"text-red-500 hover:text-red-600 transition-colors flex items-center text-sm select-none",children:[r.jsx("i",{className:"fa-solid fa-sign-out-alt mr-1.5 text-xs select-none"}),""]})})]}):r.jsx("div",{className:"bg-gray-100 rounded-lg p-4",children:r.jsx(io,{onSuccess:z})})]}),r.jsxs("div",{className:"space-y-4 select-none",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:""}),r.jsx("div",{className:"bg-gray-100 rounded-lg p-4",children:r.jsx(ao,{})})]}),r.jsx("div",{className:"select-none -mt-4",children:r.jsx(ro,{})}),r.jsxs("div",{className:"space-y-4 select-none",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:""}),r.jsxs("div",{className:"space-y-2 select-none",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 select-none",children:[" (",Math.round(k*100),"%)"]}),r.jsx("input",{type:"range",min:"0.05",max:"0.5",step:"0.01",value:k,onChange:S=>N(parseFloat(S.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"})]}),r.jsxs("div",{className:"space-y-2 select-none",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 select-none",children:[" (",Math.round($*100),"%)"]}),r.jsx("input",{type:"range",min:"0.05",max:"0.5",step:"0.01",value:$,onChange:S=>W(parseFloat(S.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"})]}),r.jsxs("div",{className:"space-y-2 select-none",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center justify-between select-none",children:[r.jsx("span",{className:"select-none",children:""}),r.jsx("button",{onClick:()=>j(!R),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors select-none ${R?"bg-blue-500":"bg-gray-300"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform select-none ${R?"translate-x-6":"translate-x-1"}`})})]}),r.jsx("p",{className:"text-xs text-gray-500 select-none",children:R?"":""})]}),r.jsxs("div",{className:"space-y-2 select-none",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 select-none",children:""}),r.jsx("div",{className:"grid grid-cols-2 gap-2 select-none",children:[{value:"4k",label:"4K ",desc:""},{value:"1080p",label:"1080p ",desc:""},{value:"720p",label:"720p ",desc:""},{value:"mobile",label:"",desc:""}].map(S=>r.jsxs("button",{onClick:()=>w(S.value),className:`p-3 rounded-lg border-2 transition-all text-left select-none cursor-pointer ${ee===S.value?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-700 hover:border-gray-300"}`,children:[r.jsx("div",{className:"font-medium text-sm",children:S.label}),r.jsx("div",{className:"text-xs text-gray-500",children:S.desc})]},S.value))}),r.jsx("p",{className:"text-xs text-gray-500 select-none",children:""})]})]}),r.jsxs("div",{className:"space-y-4 select-none",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:""}),r.jsxs("button",{onClick:()=>a(!0),className:"w-full px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors select-none",children:[r.jsx("i",{className:"fa-solid fa-plus mr-2 select-none"}),""]})]}),r.jsxs("div",{className:"space-y-4 select-none",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:""}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 select-none",children:[r.jsx("button",{onClick:K,disabled:x,className:`px-3 py-2 rounded-md transition-colors text-sm select-none ${x?"bg-gray-400 cursor-not-allowed text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:x?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-1 select-none"}),""]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fa-solid fa-download mr-1 select-none"}),""]})}),r.jsx("button",{onClick:()=>{var S;return(S=q.current)==null?void 0:S.click()},disabled:v,className:`px-3 py-2 rounded-md transition-colors text-sm select-none ${v?"bg-gray-400 cursor-not-allowed text-white":"bg-orange-500 hover:bg-orange-600 text-white"}`,children:v?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-1 select-none"}),""]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fa-solid fa-upload mr-1 select-none"}),""]})})]}),r.jsx("input",{ref:q,type:"file",accept:".json",onChange:se,className:"hidden"}),r.jsx("p",{className:"text-xs text-gray-500 select-none",children:" "})]}),r.jsxs("div",{className:"space-y-4 select-none",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider select-none",children:"Cookie"}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs("button",{onClick:()=>o(!0),className:"w-full px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors select-none",children:[r.jsx("i",{className:"fa-solid fa-shield-halved mr-2 select-none"}),""]}),r.jsxs("a",{href:"/tutorial.html",target:"_blank",rel:"noopener noreferrer",className:"w-full px-4 py-2 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-md transition-colors flex items-center justify-center gap-2 font-medium select-none border border-blue-200",style:{textDecoration:"none"},children:[r.jsx("i",{className:"fa-solid fa-graduation-cap"}),""]})]})]})]})]}),n&&r.jsx(dn,{id:`new-${Date.now()}`,name:"",url:"",favicon:"",tags:[],note:"",onClose:()=>a(!1),onSave:P}),i&&r.jsx(Mn,{isOpen:i,onClose:()=>o(!1)}),r.jsx(lo,{isOpen:l,onClose:()=>{u(!1),f(null)},onConfirm:Y,title:"",message:` 

 
 
 

`,confirmText:"",cancelText:"",type:"warning"})]})}function mo(){const{currentUser:s,sendVerificationEmail:e,reloadUser:t,logout:n}=Se(),[a,i]=h.useState(!1),[o,l]=h.useState(!1);if(!s||s.emailVerified)return null;const u=async()=>{i(!0);try{await e(),alert(" ")}catch(c){alert(" "),console.error(":",c)}finally{i(!1)}},d=async()=>{l(!0);try{await t(),window.location.reload()}catch(c){console.error(":",c)}finally{l(!1)}},f=async()=>{confirm("")&&await n()};return r.jsx(ie.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},className:"fixed top-0 left-0 right-0 z-50 bg-orange-500 text-white shadow-lg",children:r.jsx("div",{className:"container mx-auto px-4 py-3",children:r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("i",{className:"fa-solid fa-envelope-open-text text-xl"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:""}),r.jsxs("p",{className:"text-sm text-orange-100",children:[" ",r.jsx("strong",{children:s.email})," "]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:u,disabled:a,className:"bg-orange-600 hover:bg-orange-700 disabled:bg-orange-400 px-3 py-1 rounded text-sm transition-colors",children:a?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-1"}),"..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fa-solid fa-paper-plane mr-1"}),""]})}),r.jsx("button",{onClick:d,disabled:o,className:"bg-green-500 hover:bg-green-600 disabled:bg-green-400 px-3 py-1 rounded text-sm transition-colors",children:o?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-1"}),"..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fa-solid fa-check-circle mr-1"}),""]})}),r.jsxs("button",{onClick:f,className:"bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-sm transition-colors",children:[r.jsx("i",{className:"fa-solid fa-sign-out-alt mr-1"}),""]})]})]})})})}const Ze=class Ze{constructor(){de(this,"db",null);de(this,"dbName","WallpaperCache");de(this,"version",1);de(this,"storeName","images")}static getInstance(){return Ze.instance||(Ze.instance=new Ze),Ze.instance}async init(){return new Promise((e,t)=>{const n=indexedDB.open(this.dbName,this.version);n.onerror=()=>{console.error("IndexedDB :",n.error),t(n.error)},n.onsuccess=()=>{this.db=n.result,console.log(" IndexedDB "),e()},n.onupgradeneeded=a=>{const i=a.target.result;i.objectStoreNames.contains(this.storeName)||(i.createObjectStore(this.storeName,{keyPath:"key"}).createIndex("timestamp","timestamp",{unique:!1}),console.log("  IndexedDB "))}})}async ensureDB(){return this.db||await this.init(),this.db}async set(e,t,n=2*60*60*1e3){try{const o=(await this.ensureDB()).transaction([this.storeName],"readwrite").objectStore(this.storeName),l={key:e,blob:t,timestamp:Date.now(),ttl:n,size:t.size,type:t.type},u=o.put(l);return new Promise((d,f)=>{u.onsuccess=()=>{console.log(` IndexedDB : ${e} (${(t.size/1024/1024).toFixed(2)}MB)`),d()},u.onerror=()=>{console.error("IndexedDB :",u.error),f(u.error)}})}catch(a){throw console.error("IndexedDB :",a),a}}async get(e){try{const i=(await this.ensureDB()).transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);return new Promise((o,l)=>{i.onsuccess=()=>{const u=i.result;if(!u){o(null);return}if(Date.now()-u.timestamp>u.ttl){console.log(` IndexedDB : ${e}`),this.delete(e),o(null);return}console.log(` IndexedDB : ${e} (${(u.size/1024/1024).toFixed(2)}MB)`),o(u.blob)},i.onerror=()=>{console.error("IndexedDB :",i.error),l(i.error)}})}catch(t){return console.error("IndexedDB :",t),null}}async has(e){try{const i=(await this.ensureDB()).transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);return new Promise(o=>{i.onsuccess=()=>{const l=i.result;if(!l){o(!1);return}if(Date.now()-l.timestamp>l.ttl){this.delete(e),o(!1);return}o(!0)},i.onerror=()=>{o(!1)}})}catch{return!1}}async delete(e){try{const i=(await this.ensureDB()).transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(e);return new Promise((o,l)=>{i.onsuccess=()=>{console.log(` IndexedDB : ${e}`),o()},i.onerror=()=>{console.error("IndexedDB :",i.error),l(i.error)}})}catch(t){console.error("IndexedDB :",t)}}async cleanup(){try{const a=(await this.ensureDB()).transaction([this.storeName],"readwrite").objectStore(this.storeName).openCursor();let i=0;const o=Date.now();return new Promise((l,u)=>{a.onsuccess=d=>{const f=d.target.result;if(f){const c=f.value;o-c.timestamp>c.ttl&&(f.delete(),i++),f.continue()}else console.log(` IndexedDB  ${i} `),l()},a.onerror=()=>{console.error("IndexedDB :",a.error),u(a.error)}})}catch(e){console.error("IndexedDB :",e)}}async getStats(){try{const a=(await this.ensureDB()).transaction([this.storeName],"readonly").objectStore(this.storeName).openCursor();let i=0,o=0;return new Promise((l,u)=>{a.onsuccess=d=>{const f=d.target.result;if(f){const c=f.value;i++,o+=c.size||0,f.continue()}else l({count:i,totalSize:o})},a.onerror=()=>{console.error("IndexedDB :",a.error),u(a.error)}})}catch(e){return console.error("IndexedDB :",e),{count:0,totalSize:0}}}};de(Ze,"instance");let ls=Ze;const ut=ls.getInstance(),We=class We{constructor(){de(this,"cache",new Map)}static getInstance(){return We.instance||(We.instance=new We),We.instance}set(e,t,n=5*60*1e3){this.cache.set(e,{data:t,timestamp:Date.now(),ttl:n})}get(e){const t=this.cache.get(e);return t?Date.now()-t.timestamp>t.ttl?(this.cache.delete(e),null):t.data:null}cleanup(){const e=Date.now();for(const[t,n]of this.cache.entries())e-n.timestamp>n.ttl&&this.cache.delete(t)}clear(){this.cache.clear()}size(){return this.cache.size}};de(We,"instance");let cs=We;const Fn=cs.getInstance();setInterval(()=>{Fn.cleanup()},6e4);const Yt={async cacheWallpaperBlob(s,e){try{console.log(" Blob:",{url:s,cacheKey:e});const t=`wallpaper-blob:${e}`,n=await ut.get(t);if(n)return console.log(" IndexedDB:",t),URL.createObjectURL(n);console.log(" ...");const a=`https://corsproxy.io/?${encodeURIComponent(s)}`;console.log(" CORS:",a);const i=await fetch(a,{mode:"cors",headers:{Accept:"image/*"}});if(!i.ok)throw new Error(`: ${i.status} ${i.statusText}`);console.log(" Blob...");const o=await i.blob(),l=URL.createObjectURL(o);return console.log(" BlobIndexedDB:",{cacheKey:t,blobUrl:l,size:`${(o.size/1024/1024).toFixed(2)}MB`}),await ut.set(t,o,2*60*60*1e3),Fn.set(`wallpaper-source:${e}`,s,2*60*60*1e3),console.log(" IndexedDB:  "),l}catch(t){return console.error(" Blob:",t),console.error(" :",{url:s,cacheKey:e,error:t instanceof Error?t.message:String(t)}),console.log(" CORSBlob"),s}},async preloadTodayWallpapers(){const s=new Date().toDateString(),e=[{url:"https://bing.img.run/uhd.php",key:`bing-${s}`},{url:"https://bing.img.run/1920x1080.php",key:`bing-hd-${s}`},{url:"https://source.unsplash.com/1920x1080/?nature",key:`unsplash-${s}`}],t=await Promise.allSettled(e.map(({url:n,key:a})=>this.cacheWallpaperBlob(n,a)));console.log(" :",t.filter(n=>n.status==="fulfilled").length,"/",t.length)},async getCachedWallpaper(s){const e=`wallpaper-blob:${s}`;try{const t=await ut.get(e);if(t)return console.log(" IndexedDB:",e),URL.createObjectURL(t)}catch(t){console.warn("IndexedDB:",t)}return null},async hasCachedWallpaper(s){const e=`wallpaper-blob:${s}`;return await ut.has(e)},async cleanupWallpaperCache(){try{await ut.cleanup(),console.log(" ")}catch(s){console.error(":",s)}}};function po(s,e=[]){const t=h.useRef(null),n=h.useRef(),a=h.useCallback((...o)=>{n.current=o,t.current===null&&(t.current=requestAnimationFrame(()=>{t.current=null,n.current&&s(...n.current)}))},e),i=h.useCallback(()=>{t.current!==null&&(cancelAnimationFrame(t.current),t.current=null)},[]);return Object.assign(a,{cancel:i})}function go(s,e=!0){const t=po(s,[e]);return h.useCallback(a=>{e&&t(a)},[t,e])}function xo({websites:s,setWebsites:e}){const{parallaxEnabled:t,wallpaperResolution:n,isSettingsOpen:a}=rt(),{currentUser:i}=Se(),{displayName:o}=Pn();no(s);const l=(P,K)=>{const se=[...s],[Y]=se.splice(P,1);se.splice(K,0,Y),e(se)},[u,d]=h.useState(""),[f,c]=h.useState(!1),[m,x]=h.useState(!1),[v,$]=h.useState({x:0,y:0}),[k,R]=h.useState(!1),[ee,W]=h.useState(0),[N,j]=h.useState(!1);h.useEffect(()=>{const P=()=>new Date().toISOString().split("T")[0],K=()=>`wallpaper-${n}-${P()}`,Y=(()=>{try{const S=K(),D=localStorage.getItem(S);if(D){const{url:X,timestamp:te}=JSON.parse(D),B=Date.now(),T=24*60*60*1e3;if(B-te<T&&X)return X}}catch(S){console.warn(":",S)}return null})();Y&&(d(Y),c(!0),console.log(" "))},[]),h.useEffect(()=>{const P=setTimeout(()=>{const K=()=>new Date().toISOString().split("T")[0],se=D=>`wallpaper-${D}-${K()}`,S=(D=>{try{const X=se(D),te=localStorage.getItem(X);if(te){const{url:B,timestamp:T}=JSON.parse(te),O=Date.now(),p=24*60*60*1e3;if(O-T<p&&B)return B}}catch(X){console.warn(":",X)}return null})(n);console.log(S?" ":" ")},300);return()=>clearTimeout(P)},[n]);const w=[...s].sort((P,K)=>{const se=(K.visitCount||0)-(P.visitCount||0);if(se!==0)return se;const Y=new Date(P.lastVisit||"2000-01-01").getTime();return new Date(K.lastVisit||"2000-01-01").getTime()-Y}),C=()=>{N||(W(P=>P+1),j(!0),R(!0),setTimeout(()=>{R(!1),setTimeout(()=>{j(!1)},300)},1e3))},F=P=>{e(s.map(K=>K.id===P.id?{...K,...P}:K))},U=()=>{if(!t||a||!v.x||!v.y)return"translate(0px, 0px)";const P=window.innerWidth,K=window.innerHeight,se=20,Y=(B,T)=>(B/T*se-se/2).toFixed(1),S=parseFloat(Y(v.x,P)),D=parseFloat(Y(v.y,K)),X=-S*.4,te=-D*.4;return`translate(${X}px, ${te}px)`};h.useEffect(()=>{const P=B=>({"4k":"https://bing.img.run/uhd.php","1080p":"https://bing.img.run/1920x1080.php","720p":"https://bing.img.run/1366x768.php",mobile:"https://bing.img.run/m.php"})[B],K=()=>{const B=["https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1920&h=1080&fit=crop","https://images.unsplash.com/photo-1519904981063-b0cf448d479e?w=1920&h=1080&fit=crop","https://images.unsplash.com/photo-1501594907352-04cda38ebc29?w=1920&h=1080&fit=crop"],T=new Date().getDate();return B[T%B.length]},se=()=>new Date().toISOString().split("T")[0],Y=()=>`wallpaper-${n}-${se()}`,S=()=>`blob-${n}-${se()}`,D=async()=>{try{const B=S();console.log(" Blob:",B);const T=await Yt.getCachedWallpaper(B);if(console.log(" Blob:",T?"":""),T)return console.log(" Blob"),{url:T,type:"blob"};const O=Y();console.log(" URL:",O);const p=localStorage.getItem(O);if(p){const{url:b,timestamp:A}=JSON.parse(p),V=Date.now(),ne=24*60*60*1e3;if(V-A<ne&&b)return console.log(" URL"),{url:b,type:"url"}}}catch(B){console.warn(":",B)}return null},X=async B=>{try{const T=Y(),O={url:B,timestamp:Date.now(),resolution:n};localStorage.setItem(T,JSON.stringify(O)),console.log(" URL");const p=S();console.log(" Blob..."),Yt.cacheWallpaperBlob(B,p).then(b=>{console.log(" Blob"),console.log(" Blob URL:",b)}).catch(b=>{console.warn(" BlobURL:",b)}),console.log(" ")}catch(T){console.warn(":",T)}},te=(B,T=!1)=>{console.log(" :",n,T?"()":""),c(!1);const O=new Image,p=setTimeout(()=>{if(O.onload=null,O.onerror=null,console.warn(" "),T)d(""),c(!0);else{const b=K();te(b,!0)}},6e3);O.onload=()=>{clearTimeout(p),d(O.src),c(!0),X(O.src),console.log(" :",O.src)},O.onerror=()=>{if(clearTimeout(p),T)console.warn(" "),d(""),c(!0);else{console.warn(" API");const b=K();te(b,!0)}},O.src=B};D().then(B=>{if(B){if(console.log(` ${B.type==="blob"?"Blob":"URL"}:`,B.url),d(B.url),c(!0),B.type==="url"){const T=S();console.log(" Blob..."),Yt.cacheWallpaperBlob(B.url,T).then(O=>{console.log(" Blob"),console.log(" Blob URL:",O)}).catch(O=>{console.warn(" Blob:",O)})}}else{const T=P(n);console.log("  Bing :",T),te(T)}}).catch(B=>{console.warn(":",B);const T=P(n);console.log("  Bing :",T),te(T)})},[n]);const q=h.useCallback(P=>{$({x:P.clientX,y:P.clientY})},[]),z=go(q,t&&!a);return h.useEffect(()=>{if(!t||a){$({x:0,y:0});return}return window.addEventListener("mousemove",z,{passive:!0}),()=>{window.removeEventListener("mousemove",z)}},[t,a,z]),h.useEffect(()=>{if(s.length>0){const P=setTimeout(()=>{console.log("  favicon..."),rs.batchCacheFaviconsToIndexedDB(s).then(()=>{console.log(" Favicon ")}).catch(K=>{console.warn(" Favicon :",K)})},2e3);return()=>clearTimeout(P)}},[s]),r.jsxs(r.Fragment,{children:[r.jsx(mo,{}),r.jsx("div",{className:"fixed top-0 left-0 w-full h-full -z-10",style:{backgroundImage:u?`url(${u})`:"none",backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat",transform:U(),transition:"transform 0.1s ease-out, filter 1.2s ease-out",opacity:f&&u?1:0,backgroundColor:"#1e293b",filter:f&&u?"brightness(1)":"brightness(0.3)"}}),u&&r.jsx("div",{className:"fixed top-0 left-0 w-full h-full -z-9",style:{background:"linear-gradient(to bottom, rgba(30, 41, 59, 0.7) 0%, rgba(30, 41, 59, 0.3) 50%, rgba(30, 41, 59, 0.1) 100%)",opacity:f?0:1,transition:"opacity 1.5s ease-out",pointerEvents:"none"}}),!f&&u&&r.jsx("div",{className:"fixed top-4 left-4 z-40 bg-black/30 backdrop-blur-sm rounded-lg px-4 py-2",children:r.jsxs("div",{className:"text-white/90 text-sm font-medium flex items-center space-x-2",children:[r.jsx("div",{className:"animate-pulse rounded-full h-2 w-2 bg-white/70"}),r.jsx("span",{children:""})]})}),r.jsxs("div",{className:"relative min-h-screen pt-[33vh]",children:[r.jsx(Cr,{}),r.jsx("div",{className:"pt-16 pb-8 px-4 max-w-6xl mx-auto",children:r.jsx(ie.div,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-x-3 gap-y-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:w.map((P,K)=>r.jsx(kr,{...P,index:K,moveCard:l,onSave:F,onDelete:se=>{e(s.filter(Y=>Y.id!==se))}},P.id))})}),m&&r.jsx(ho,{onClose:()=>x(!1),websites:s,setWebsites:e}),i&&i.emailVerified&&r.jsxs("div",{className:"fixed top-4 right-4 z-40",children:[r.jsxs("button",{onClick:C,className:"bg-white/20 backdrop-blur-sm rounded-lg px-3 py-2 flex items-center space-x-2 hover:bg-white/30 transition-colors cursor-pointer",children:[r.jsx("i",{className:"fa-solid fa-user text-white/80"}),r.jsx("span",{className:"text-white/90 text-sm font-medium",children:o})]}),k&&r.jsxs("div",{className:`absolute top-full right-0 mt-2 bg-white/95 backdrop-blur-sm rounded-lg px-4 py-3 shadow-lg border border-white/20 transition-opacity duration-300 ${k?"opacity-100":"opacity-0"}`,children:[r.jsx("p",{className:"text-gray-800 text-sm font-medium whitespace-nowrap",children:ee>=10?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-red-500",children:""})," "]}):`"${o}"`}),r.jsx("div",{className:"absolute -top-2 right-4 w-0 h-0 border-l-4 border-r-4 border-b-4 border-l-transparent border-r-transparent border-b-white/95"})]})]}),r.jsx("div",{className:"fixed bottom-4 right-4 z-[9999]",children:r.jsx("button",{onClick:()=>x(!0),className:"p-2 text-white/70 hover:text-white transition-colors","aria-label":"",children:r.jsx("i",{className:"fa-solid fa-sliders text-lg"})})}),r.jsx(Ir,{})]})]})}function yo({isOpen:s,onClose:e,localWebsites:t,cloudWebsites:n,onChoice:a}){const[i,o]=h.useState(!1);if(!s)return null;const l=async u=>{o(!0);try{await a(u),e()}catch(d){console.error(":",d)}finally{o(!1)}};return r.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:e}),r.jsxs(ie.div,{className:"w-96 bg-white rounded-xl shadow-2xl z-50 max-h-[80vh] flex flex-col",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20,stiffness:300},children:[r.jsx("div",{className:"p-6 pb-0",children:r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-medium text-gray-800",children:""}),r.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",disabled:i,children:r.jsx("i",{className:"fa-solid fa-xmark text-lg"})})]})}),r.jsxs("div",{className:"flex-1 px-6 py-2 pb-6 space-y-4 overflow-y-auto",children:[r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-sm text-blue-800 mb-2",children:[r.jsx("i",{className:"fa-solid fa-info-circle mr-2"}),""]})}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:[r.jsx("i",{className:"fa-solid fa-computer mr-2"}),""]}),r.jsxs("p",{className:"text-xs text-gray-600",children:[t.length," "]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:[r.jsx("i",{className:"fa-solid fa-cloud mr-2"}),""]}),r.jsxs("p",{className:"text-xs text-gray-600",children:[n.length," "]})]})]}),r.jsxs("div",{className:"space-y-3 pt-4",children:[r.jsx("button",{onClick:()=>l("cloud"),disabled:i,className:"w-full p-4 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded-lg transition-colors text-left",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("i",{className:"fa-solid fa-cloud-arrow-down text-lg mt-1"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:""}),r.jsx("div",{className:"text-xs text-blue-100",children:""})]})]})}),r.jsx("button",{onClick:()=>l("local"),disabled:i,className:"w-full p-4 bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white rounded-lg transition-colors text-left",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("i",{className:"fa-solid fa-cloud-arrow-up text-lg mt-1"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:""}),r.jsx("div",{className:"text-xs text-green-100",children:""})]})]})}),r.jsx("button",{onClick:()=>l("merge"),disabled:i,className:"w-full p-4 bg-purple-500 hover:bg-purple-600 disabled:bg-gray-400 text-white rounded-lg transition-colors text-left",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("i",{className:"fa-solid fa-code-merge text-lg mt-1"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:""}),r.jsx("div",{className:"text-xs text-purple-100",children:""})]})]})})]}),i&&r.jsxs("div",{className:"flex items-center justify-center py-4",children:[r.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-2"}),r.jsx("span",{className:"text-sm text-gray-600",children:"..."})]})]})]})]})}function vo(s=!0){const{currentUser:e}=Se(),[t,n]=h.useState({cloudWebsites:null,cloudSettings:null,loading:!1,error:null}),a=async()=>{if(!e||!e.emailVerified){n(o=>({...o,error:"",loading:!1}));return}n(o=>({...o,loading:!0,error:null}));try{const[o,l]=await Promise.all([Yi(e),Ji(e)]);n({cloudWebsites:o,cloudSettings:l,loading:!1,error:null}),console.log(" :",{websites:(o==null?void 0:o.length)||0,hasSettings:!!l})}catch(o){n(l=>({...l,loading:!1,error:": "+o.message})),console.error(" :",o)}},i=o=>t.cloudWebsites?Xi(o,t.cloudWebsites):o;return h.useEffect(()=>{s&&e&&e.emailVerified?a():n({cloudWebsites:null,cloudSettings:null,loading:!1,error:null})},[e,s]),{...t,loadCloudData:a,mergeWithLocalData:i,hasCloudData:!!t.cloudWebsites||!!t.cloudSettings}}const bo=()=>{h.useEffect(()=>{document.title="jiang_ai_web";const s=()=>{document.hidden?document.title="":document.title="jiang_ai_web"};return document.addEventListener("visibilitychange",s),()=>{document.removeEventListener("visibilitychange",s)}},[])};class wo{constructor(){de(this,"preloadedResources",new Set);de(this,"preloadQueue",[]);de(this,"isProcessing",!1);de(this,"maxConcurrent",3)}async preloadImage(e){return this.preloadedResources.has(e)?!0:new Promise(t=>{const n=new Image;n.onload=()=>{this.preloadedResources.add(e),t(!0)},n.onerror=()=>{t(!1)},n.src=e})}async preloadImages(e){const t=e.filter(n=>!this.preloadedResources.has(n));if(t.length!==0)for(let n=0;n<t.length;n+=this.maxConcurrent){const a=t.slice(n,n+this.maxConcurrent);await Promise.allSettled(a.map(i=>this.preloadImage(i)))}}queuePreload(e){!this.preloadedResources.has(e)&&!this.preloadQueue.includes(e)&&(this.preloadQueue.push(e),this.processQueue())}async processQueue(){if(!(this.isProcessing||this.preloadQueue.length===0)){this.isProcessing=!0;try{"requestIdleCallback"in window?await new Promise(e=>{requestIdleCallback(()=>{this.processBatch(),e()})}):await new Promise(e=>{setTimeout(()=>{this.processBatch(),e()},16)})}finally{this.isProcessing=!1,this.preloadQueue.length>0&&setTimeout(()=>this.processQueue(),100)}}}async processBatch(){const e=this.preloadQueue.splice(0,this.maxConcurrent);e.length!==0&&await Promise.allSettled(e.map(t=>this.preloadImage(t)))}preloadFont(e,t){const n=document.createElement("link");if(n.rel="preload",n.as="font",n.type="font/woff2",n.crossOrigin="anonymous",n.href=e,document.head.appendChild(n),"FontFace"in window){const a=new FontFace(t,`url(${e})`);a.load().then(()=>{document.fonts.add(a)}).catch(i=>{console.warn(":",i)})}}preloadCSS(e){const t=document.createElement("link");t.rel="preload",t.as="style",t.href=e,t.onload=()=>{t.rel="stylesheet"},document.head.appendChild(t)}getStats(){return{preloaded:this.preloadedResources.size,queued:this.preloadQueue.length}}clear(){this.preloadedResources.clear(),this.preloadQueue.length=0}}const Ct=new wo;function jo(s=!0){return h.useEffect(()=>s?(["https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/webfonts/fa-solid-900.woff2","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/webfonts/fa-regular-400.woff2"].forEach(o=>{Ct.queuePreload(o)}),["https://bing.img.run","https://source.unsplash.com","https://www.google.com","https://favicon.yandex.net","https://icons.duckduckgo.com"].forEach(o=>{const l=document.createElement("link");l.rel="preconnect",l.href=o,document.head.querySelector(`link[href="${o}"]`)||document.head.appendChild(l)}),()=>{}):void 0,[s]),{preloadFavicons:a=>{const i=a.map(o=>o.favicon);Ct.preloadImages(i)},preloadImage:a=>{Ct.queuePreload(a)},getPreloadStats:()=>Ct.getStats()}}function No({onAccept:s,onDecline:e,onCustomize:t}){const[n,a]=h.useState(!1),[i,o]=h.useState(!1);h.useEffect(()=>{if(!localStorage.getItem("cookie-consent")){const c=setTimeout(()=>{a(!0),o(!0)},2e3);return()=>clearTimeout(c)}},[]);const l=()=>{localStorage.setItem("cookie-consent","accepted"),localStorage.setItem("cookie-consent-date",new Date().toISOString()),o(!1),setTimeout(()=>{a(!1),s==null||s()},300),console.log(" Cookie")},u=()=>{localStorage.setItem("cookie-consent","declined"),localStorage.setItem("cookie-consent-date",new Date().toISOString()),o(!1);try{const f=["cookie-consent","cookie-consent-date"],c=[];for(let m=0;m<localStorage.length;m++){const x=localStorage.key(m);x&&!f.includes(x)&&c.push(x)}c.forEach(m=>localStorage.removeItem(m))}catch(f){console.error(":",f)}setTimeout(()=>{a(!1),e==null||e()},300),console.log(" Cookie")},d=()=>{t==null||t()};return n?r.jsx(mt,{children:i&&r.jsxs(r.Fragment,{children:[r.jsx(ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/20 z-[9998] pointer-events-none"}),r.jsxs(ie.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",damping:25,stiffness:200},className:"fixed bottom-0 left-0 right-0 z-[9999] bg-white border-t border-gray-200 shadow-2xl",children:[r.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0 mt-1",children:r.jsx("i",{className:"fa-solid fa-cookie-bite text-amber-500 text-xl"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:" Cookie"}),r.jsxs("p",{className:"text-sm text-gray-600 leading-relaxed",children:["Cookie",r.jsx("br",{}),r.jsxs("span",{className:"inline-flex items-center gap-4 mt-1 text-xs",children:[r.jsx("span",{children:" "}),r.jsx("span",{children:" "}),r.jsx("span",{children:" "}),r.jsx("span",{children:" "})]})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Cookie",r.jsx("button",{className:"text-blue-600 hover:text-blue-800 underline mx-1",onClick:()=>window.open("https://github.com/your-repo/privacy-policy","_blank"),children:""})]})]})]})}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[r.jsxs("button",{onClick:d,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("i",{className:"fa-solid fa-cog mr-2"}),""]}),r.jsxs("button",{onClick:u,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("i",{className:"fa-solid fa-times mr-2"}),""]}),r.jsxs("button",{onClick:l,className:"px-6 py-2 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:[r.jsx("i",{className:"fa-solid fa-check mr-2"}),""]})]})]})}),r.jsx("div",{className:"h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500"})]})]})}):null}function So(s){const e=h.useRef(s.length),t=s.length;return e.current!==t&&(e.current=t),e.current}function _o(){bo();const{websites:s,setWebsites:e}=Ln(),{currentUser:t}=Se(),[n,a]=h.useState(!1),i=n&&(t==null?void 0:t.emailVerified),{cloudWebsites:o,cloudSettings:l,hasCloudData:u,mergeWithLocalData:d}=vo(i);jo(n);const{setCardOpacity:f,setSearchBarOpacity:c,setParallaxEnabled:m,setWallpaperResolution:x}=rt(),[v,$]=h.useState(!1),[k,R]=h.useState(!1),[ee,W]=h.useState(!1);h.useEffect(()=>{const w=setTimeout(()=>{a(!0)},100);return()=>clearTimeout(w)},[]);const N=So(s);h.useEffect(()=>{if(i&&t&&t.emailVerified&&u&&o&&!k){const w=N,C=o.length;w>0&&C>0&&w!==C?$(!0):(C>0&&w===0&&e(o),R(!0))}},[i,t,u,o,N,k,e]),h.useEffect(()=>{i&&t&&t.emailVerified&&l&&(typeof l.cardOpacity=="number"&&f(l.cardOpacity),typeof l.searchBarOpacity=="number"&&c(l.searchBarOpacity),typeof l.parallaxEnabled=="boolean"&&m(l.parallaxEnabled),l.wallpaperResolution&&x(l.wallpaperResolution),l.theme&&localStorage.setItem("theme",l.theme))},[i,t,l,f,c,m,x]);const j=async w=>{if(!(!t||!o))try{let C=[];switch(w){case"cloud":C=o,e(C);break;case"local":C=s,await os(t,C);break;case"merge":C=d(s),e(C),await os(t,C);break}R(!0)}catch(C){console.error(" :",C)}};return r.jsxs(r.Fragment,{children:[r.jsx(Xn,{children:r.jsx(ea,{path:"/",element:r.jsx(xo,{websites:s,setWebsites:e})})}),v&&o&&r.jsx(yo,{isOpen:v,onClose:()=>{$(!1),R(!0)},localWebsites:s,cloudWebsites:o,onChoice:j}),r.jsx(No,{onAccept:()=>{console.log(" Cookie")},onDecline:()=>{console.log(" Cookie")},onCustomize:()=>{W(!0)}}),ee&&r.jsx(Mn,{isOpen:ee,onClose:()=>W(!1)})]})}function ko(){return r.jsx(Qi,{children:r.jsx(to,{children:r.jsx(so,{children:r.jsx(Nr,{children:r.jsx(Gn,{backend:Jn,children:r.jsx(_o,{})})})})})})}const Co=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",Io=Co?void 0:"/jiang_ai_web",Eo=({error:s})=>r.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100vh",background:"white",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"20px",fontFamily:"Arial, sans-serif"},children:[r.jsx("h1",{style:{color:"red",marginBottom:"20px"},children:""}),r.jsxs("pre",{style:{background:"#f5f5f5",padding:"20px",borderRadius:"8px",fontSize:"14px",maxWidth:"80%",overflow:"auto"},children:[s.message,`

`,s.stack]})]});try{const s=document.getElementById("root");if(!s)throw new Error('id"root"');Is.createRoot(s).render(r.jsx(h.StrictMode,{children:r.jsxs(ta,{basename:Io,children:[r.jsx(ko,{}),r.jsx(Ka,{})]})}))}catch(s){console.error(" React:",s),Is.createRoot(document.getElementById("root")).render(r.jsx(Eo,{error:s}))}
